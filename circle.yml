# machine:
#   services:
#     - docker
general:
  branches:
    ignore:
      - gh-pages
      - toc-dev

dependencies:
  cache_directories:
    # - "/var/lib/docker"
    - "toc/app/dependencies"
  pre:
    - /bin/bash scripts/toc-install-deps.sh
  override:
    - npm install
    - jspm install
    # - >
    #     docker run \
    #       -v $(pwd):/toc \
    #       lewisl9029/toc-dev:latest \
    #       npm install
    # - >
    #     docker run \
    #       -v $(pwd):/toc \
    #       -e JSPM_GITHUB_AUTH_TOKEN=$JSPM_GITHUB_AUTH_TOKEN \
    #       lewisl9029/toc-dev:latest \
    #       jspm install

test:
  override:
    - echo "no tests =/"

deployment:
  staging:
    branch: /.*/
    owner: lewisl9029
    commands:
      - gulp build
      - /bin/bash scripts/toc-deploy-staging.sh
#   production:
#     tag: /v[0-9]+(\.[0-9]+)*/
#     owner: lewisl9029
#     commands:
#       - ./scripts/toc-deploy-production.sh
