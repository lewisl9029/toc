"bundle";System.registerDynamic("github:angular/bower-angular@1.4.5",["github:angular/bower-angular@1.4.5/angular"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("github:angular/bower-angular@1.4.5/angular"),r.define=i,n.exports}),System.registerDynamic("github:angular/bower-angular@1.4.5/angular",[],!1,function(e,t,n){var r=System.get("@@global-helpers").prepareGlobal(n.id,"angular",null);return function(){"format global";"exports angular";!function(e,t,n){"use strict";function r(e,t){return t=t||Error,function(){var n,r,i=2,o=arguments,a=o[0],s="["+(e?e+":":"")+a+"] ",c=o[1];for(s+=c.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n=t+i;return n<o.length?be(o[n]):e}),s+="\nhttp://errors.angularjs.org/1.4.5/"+(e?e+"/":"")+a,r=i,n="?";r<o.length;r++,n="&")s+=n+"p"+(r-i)+"="+encodeURIComponent(be(o[r]));return new t(s)}}function i(e){if(null==e||k(e))return!1;var t="length"in Object(e)&&e.length;return e.nodeType===Hr&&t?!0:_(e)||Lr(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function o(e,t,n){var r,a;if(e)if(A(e))for(r in e)"prototype"==r||"length"==r||"name"==r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r,e);else if(Lr(e)||i(e)){var s="object"!=typeof e;for(r=0,a=e.length;a>r;r++)(s||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==o)e.forEach(t,n,e);else if(C(e))for(r in e)t.call(n,e[r],r,e);else if("function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)br.call(e,r)&&t.call(n,e[r],r,e);return e}function a(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function s(e){return function(t,n){e(n,t)}}function c(){return++jr}function u(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function l(e,t,n){for(var r=e.$$hashKey,i=0,o=t.length;o>i;++i){var a=t[i];if(S(a)||A(a))for(var s=Object.keys(a),c=0,f=s.length;f>c;c++){var d=s[c],p=a[d];n&&S(p)?T(p)?e[d]=new Date(p.valueOf()):I(p)?e[d]=new RegExp(p):(S(e[d])||(e[d]=Lr(p)?[]:{}),l(e[d],[p],!0)):e[d]=p}}return u(e,r),e}function f(e){return l(e,Ir.call(arguments,1),!1)}function d(e){return l(e,Ir.call(arguments,1),!0)}function p(e){return parseInt(e,10)}function h(e,t){return f(Object.create(e),t)}function g(){}function m(e){return e}function v(e){return function(){return e}}function y(e){return A(e.toString)&&e.toString!==Object.prototype.toString}function b(e){return"undefined"==typeof e}function w(e){return"undefined"!=typeof e}function S(e){return null!==e&&"object"==typeof e}function C(e){return null!==e&&"object"==typeof e&&!Nr(e)}function _(e){return"string"==typeof e}function E(e){return"number"==typeof e}function T(e){return"[object Date]"===Br.call(e)}function A(e){return"function"==typeof e}function I(e){return"[object RegExp]"===Br.call(e)}function k(e){return e&&e.window===e}function x(e){return e&&e.$evalAsync&&e.$watch}function B(e){return"[object File]"===Br.call(e)}function N(e){return"[object FormData]"===Br.call(e)}function D(e){return"[object Blob]"===Br.call(e)}function R(e){return"boolean"==typeof e}function j(e){return e&&A(e.then)}function $(e){return Mr.test(Br.call(e))}function L(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function M(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function O(e){return yr(e.nodeName||e[0]&&e[0].nodeName)}function P(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function U(e,t,n,r){if(k(e)||x(e))throw Dr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if($(t))throw Dr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t){if(e===t)throw Dr("cpi","Can't copy! Source and destination are identical.");n=n||[],r=r||[],S(e)&&(n.push(e),r.push(t));var i;if(Lr(e)){t.length=0;for(var a=0;a<e.length;a++)t.push(U(e[a],null,n,r))}else{var s=t.$$hashKey;if(Lr(t)?t.length=0:o(t,function(e,n){delete t[n]}),C(e))for(i in e)t[i]=U(e[i],null,n,r);else if(e&&"function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&(t[i]=U(e[i],null,n,r));else for(i in e)br.call(e,i)&&(t[i]=U(e[i],null,n,r));u(t,s)}}else if(t=e,S(e)){var c;if(n&&-1!==(c=n.indexOf(e)))return r[c];if(Lr(e))return U(e,[],n,r);if($(e))t=new e.constructor(e);else if(T(e))t=new Date(e.getTime());else{if(!I(e)){var l=Object.create(Nr(e));return U(e,l,n,r)}t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex}r&&(n.push(e),r.push(t))}return t}function F(e,t){if(Lr(e)){t=t||[];for(var n=0,r=e.length;r>n;n++)t[n]=e[n]}else if(S(e)){t=t||{};for(var i in e)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(t[i]=e[i])}return t||e}function V(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var r,i,o,a=typeof e,s=typeof t;if(a==s&&"object"==a){if(!Lr(e)){if(T(e))return T(t)?V(e.getTime(),t.getTime()):!1;if(I(e))return I(t)?e.toString()==t.toString():!1;if(x(e)||x(t)||k(e)||k(t)||Lr(t)||T(t)||I(t))return!1;o=me();for(i in e)if("$"!==i.charAt(0)&&!A(e[i])){if(!V(e[i],t[i]))return!1;o[i]=!0}for(i in t)if(!(i in o||"$"===i.charAt(0)||t[i]===n||A(t[i])))return!1;return!0}if(!Lr(t))return!1;if((r=e.length)==t.length){for(i=0;r>i;i++)if(!V(e[i],t[i]))return!1;return!0}}return!1}function z(e,t,n){return e.concat(Ir.call(t,n))}function q(e,t){return Ir.call(e,t||0)}function H(e,t){var n=arguments.length>2?q(arguments,2):[];return!A(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,z(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function G(e,r){var i=r;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=n:k(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":x(r)&&(i="$SCOPE"),i}function K(e,t){return"undefined"==typeof e?n:(E(t)||(t=t?2:null),JSON.stringify(e,G,t))}function W(e){return _(e)?JSON.parse(e):e}function Y(e,t){var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function X(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function Z(e,t,n){n=n?-1:1;var r=Y(t,e.getTimezoneOffset());return X(e,n*(r-e.getTimezoneOffset()))}function Q(e){e=Er(e).clone();try{e.empty()}catch(t){}var n=Er("<div>").append(e).html();try{return e[0].nodeType===Kr?yr(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+yr(t)})}catch(t){return yr(n)}}function J(e){try{return decodeURIComponent(e)}catch(t){}}function ee(e){var t={};return o((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(r=e.substring(0,n),i=e.substring(n+1)),r=J(r),w(r)&&(i=w(i)?J(i):!0,br.call(t,r)?Lr(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function te(e){var t=[];return o(e,function(e,n){Lr(e)?o(e,function(e){t.push(re(n,!0)+(e===!0?"":"="+re(e,!0)))}):t.push(re(n,!0)+(e===!0?"":"="+re(e,!0)))}),t.length?t.join("&"):""}function ne(e){return re(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function re(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function ie(e,t){var n,r,i=Vr.length;for(r=0;i>r;++r)if(n=Vr[r]+t,_(n=e.getAttribute(n)))return n;return null}function oe(e,t){var n,r,i={};o(Vr,function(t){var i=t+"app";!n&&e.hasAttribute&&e.hasAttribute(i)&&(n=e,r=e.getAttribute(i))}),o(Vr,function(t){var i,o=t+"app";!n&&(i=e.querySelector("["+o.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(o))}),n&&(i.strictDi=null!==ie(n,"strict-di"),t(n,r?[r]:[],i))}function ae(n,r,i){S(i)||(i={});var a={strictDi:!1};i=f(a,i);var s=function(){if(n=Er(n),n.injector()){var e=n[0]===t?"document":Q(n);throw Dr("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),r.unshift("ng");var o=Qe(r,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),o},c=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return e&&c.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(c,"")),e&&!u.test(e.name)?s():(e.name=e.name.replace(u,""),Rr.resumeBootstrap=function(e){return o(e,function(e){r.push(e)}),s()},void(A(Rr.resumeDeferredBootstrap)&&Rr.resumeDeferredBootstrap()))}function se(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function ce(e){var t=Rr.element(e).injector();if(!t)throw Dr("test","no injector found for element argument to getTestability");return t.get("$$testability")}function ue(e,t){return t=t||"_",e.replace(zr,function(e,n){return(n?t:"")+e.toLowerCase()})}function le(){var t;if(!qr){var r=Fr();Tr=e.jQuery,w(r)&&(Tr=null===r?n:e[r]),Tr&&Tr.fn.on?(Er=Tr,f(Tr.fn,{scope:fi.scope,isolateScope:fi.isolateScope,controller:fi.controller,injector:fi.injector,inheritedData:fi.inheritedData}),t=Tr.cleanData,Tr.cleanData=function(e){var n;if($r)$r=!1;else for(var r,i=0;null!=(r=e[i]);i++)n=Tr._data(r,"events"),n&&n.$destroy&&Tr(r).triggerHandler("$destroy");t(e)}):Er=ke,Rr.element=Er,qr=!0}}function fe(e,t,n){if(!e)throw Dr("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function de(e,t,n){return n&&Lr(e)&&(e=e[e.length-1]),fe(A(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function pe(e,t){if("hasOwnProperty"===e)throw Dr("badname","hasOwnProperty is not a valid {0} name",t)}function he(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;a>s;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&A(e)?H(o,e):e}function ge(e){var t=e[0],n=e[e.length-1],r=[t];do{if(t=t.nextSibling,!t)break;r.push(t)}while(t!==n);return Er(r)}function me(){return Object.create(null)}function ve(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=r("$injector"),i=r("ng"),o=t(e,"angular",Object);return o.$$minErr=o.$$minErr||r,t(o,"module",function(){var e={};return function(r,o,a){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(r,"module"),o&&e.hasOwnProperty(r)&&(e[r]=null),t(e,r,function(){function e(e,t,n,r){return r||(r=i),function(){return r[n||"push"]([e,t,arguments]),l}}function t(e,t){return function(n,o){return o&&A(o)&&(o.$$moduleName=r),i.push([e,t,arguments]),l}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var i=[],s=[],c=[],u=e("$injector","invoke","push",s),l={_invokeQueue:i,_configBlocks:s,_runBlocks:c,requires:o,name:r,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:t("$provide","decorator"),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),config:u,run:function(e){return c.push(e),this}};return a&&u(a),l})}})}function ye(e){var t=[];return JSON.stringify(e,function(e,n){if(n=G(e,n),S(n)){if(t.indexOf(n)>=0)return"<<already seen>>";t.push(n)}return n})}function be(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?ye(e):e}function we(t){f(t,{bootstrap:ae,copy:U,extend:f,merge:d,equals:V,element:Er,forEach:o,injector:Qe,noop:g,bind:H,toJson:K,fromJson:W,identity:m,isUndefined:b,isDefined:w,isString:_,isFunction:A,isObject:S,isNumber:E,isElement:L,isArray:Lr,version:Zr,isDate:T,lowercase:yr,uppercase:wr,callbacks:{counter:0},getTestability:ce,$$minErr:r,$$csp:Ur,reloadWithDebugInfo:se}),(Ar=ve(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:gn}),e.provider("$compile",ct).directive({a:fo,input:xo,textarea:xo,form:vo,script:Sa,select:Ea,style:Aa,option:Ta,ngBind:Do,ngBindHtml:jo,ngBindTemplate:Ro,ngClass:Lo,ngClassEven:Oo,ngClassOdd:Mo,ngCloak:Po,ngController:Uo,ngForm:yo,ngHide:ga,ngIf:zo,ngInclude:qo,ngInit:Go,ngNonBindable:aa,ngPluralize:la,ngRepeat:fa,ngShow:ha,ngStyle:ma,ngSwitch:va,ngSwitchWhen:ya,ngSwitchDefault:ba,ngOptions:ua,ngTransclude:wa,ngModel:ra,ngList:Ko,ngChange:$o,pattern:ka,ngPattern:ka,required:Ia,ngRequired:Ia,minlength:Ba,ngMinlength:Ba,maxlength:xa,ngMaxlength:xa,ngValue:No,ngModelOptions:oa}).directive({ngInclude:Ho}).directive(po).directive(Fo),e.provider({$anchorScroll:Je,$animate:Ai,$animateCss:Ii,$$animateQueue:Ti,$$AnimateRunner:Ei,$browser:ot,$cacheFactory:at,$controller:pt,$document:ht,$exceptionHandler:gt,$filter:xn,$$forceReflow:Di,$interpolate:xt,$interval:Bt,$http:Tt,$httpParamSerializer:vt,$httpParamSerializerJQLike:yt,$httpBackend:It,$location:qt,$log:Ht,$parse:un,$rootScope:hn,$q:ln,$$q:fn,$sce:bn,$sceDelegate:yn,$sniffer:wn,$templateCache:st,$templateRequest:Sn,$$testability:Cn,$timeout:_n,$window:An,$$rAF:pn,$$jqLite:Ke,$$HashMap:gi,$$cookieReader:kn})}])}function Se(){return++Jr}function Ce(e){return e.replace(ni,function(e,t,n,r){return r?n.toUpperCase():n}).replace(ri,"Moz$1")}function _e(e){return!si.test(e)}function Ee(e){var t=e.nodeType;return t===Hr||!t||t===Yr}function Te(e){for(var t in Qr[e.ng339])return!0;return!1}function Ae(e,t){var n,r,i,a,s=t.createDocumentFragment(),c=[];if(_e(e))c.push(t.createTextNode(e));else{for(n=n||s.appendChild(t.createElement("div")),r=(ci.exec(e)||["",""])[1].toLowerCase(),i=li[r]||li._default,n.innerHTML=i[1]+e.replace(ui,"<$1></$2>")+i[2],a=i[0];a--;)n=n.lastChild;c=z(c,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",o(c,function(e){s.appendChild(e)}),s}function Ie(e,n){n=n||t;var r;return(r=ai.exec(e))?[n.createElement(r[1])]:(r=Ae(e,n))?r.childNodes:[]}function ke(e){if(e instanceof ke)return e;var t;if(_(e)&&(e=Or(e),t=!0),!(this instanceof ke)){if(t&&"<"!=e.charAt(0))throw oi("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ke(e)}t?Oe(this,Ie(e)):Oe(this,e)}function xe(e){return e.cloneNode(!0)}function Be(e,t){if(t||De(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;i>r;r++)De(n[r])}function Ne(e,t,n,r){if(w(r))throw oi("offargs","jqLite#off() does not support the `selector` argument");var i=Re(e),a=i&&i.events,s=i&&i.handle;if(s)if(t)o(t.split(" "),function(t){if(w(n)){var r=a[t];if(P(r||[],n),r&&r.length>0)return}ti(e,t,s),delete a[t]});else for(t in a)"$destroy"!==t&&ti(e,t,s),delete a[t]}function De(e,t){var r=e.ng339,i=r&&Qr[r];if(i){if(t)return void delete i.data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),Ne(e)),delete Qr[r],e.ng339=n}}function Re(e,t){var r=e.ng339,i=r&&Qr[r];return t&&!i&&(e.ng339=r=Se(),i=Qr[r]={events:{},data:{},handle:n}),i}function je(e,t,n){if(Ee(e)){var r=w(n),i=!r&&t&&!S(t),o=!t,a=Re(e,!i),s=a&&a.data;if(r)s[t]=n;else{if(o)return s;if(i)return s&&s[t];f(s,t)}}}function $e(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Le(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",Or((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Or(t)+" "," ")))})}function Me(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=Or(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",Or(n))}}function Oe(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;n>r;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Pe(e,t){return Ue(e,"$"+(t||"ngController")+"Controller")}function Ue(e,t,r){e.nodeType==Yr&&(e=e.documentElement);for(var i=Lr(t)?t:[t];e;){for(var o=0,a=i.length;a>o;o++)if((r=Er.data(e,i[o]))!==n)return r;e=e.parentNode||e.nodeType===Xr&&e.host}}function Fe(e){for(Be(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Ve(e,t){t||Be(e);var n=e.parentNode;n&&n.removeChild(e)}function ze(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):Er(n).on("load",t)}function qe(e,t){var n=di[t.toLowerCase()];return n&&pi[O(e)]&&n}function He(e,t){var n=e.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&hi[t]}function Ge(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],o=i?i.length:0;if(o){if(b(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},o>1&&(i=F(i));for(var s=0;o>s;s++)n.isImmediatePropagationStopped()||i[s].call(e,n)}};return n.elem=e,n}function Ke(){this.$get=function(){return f(ke,{hasClass:function(e,t){return e.attr&&(e=e[0]),$e(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Me(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Le(e,t)}})}}function We(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"==r||"object"==r&&null!==e?e.$$hashKey=r+":"+(t||c)():r+":"+e}function Ye(e,t){if(t){var n=0;this.nextUid=function(){return++n}}o(e,this.put,this)}function Xe(e){var t=e.toString().replace(bi,""),n=t.match(mi);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Ze(e,t,n){var r,i,a,s;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw _(n)&&n||(n=e.name||Xe(e)),wi("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);i=e.toString().replace(bi,""),a=i.match(mi),o(a[1].split(vi),function(e){e.replace(yi,function(e,t,n){r.push(n)})})}e.$inject=r}}else Lr(e)?(s=e.length-1,de(e[s],"fn"),r=e.slice(0,s)):de(e,"fn",!0);return r}function Qe(e,t){function r(e){return function(t,n){return S(t)?void o(t,s(e)):e(t,n)}}function i(e,t){if(pe(e,"service"),(A(t)||Lr(t))&&(t=E.instantiate(t)),!t.$get)throw wi("pget","Provider '{0}' must define $get factory method.",e);return C[e+m]=t}function a(e,t){return function(){var n=I.invoke(t,this);if(b(n))throw wi("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function c(e,t,n){return i(e,{$get:n!==!1?a(e,t):t})}function u(e,t){return c(e,["$injector",function(e){return e.instantiate(t)}])}function l(e,t){return c(e,v(t),!1)}function f(e,t){pe(e,"constant"),C[e]=t,T[e]=t}function d(e,t){var n=E.get(e+m),r=n.$get;n.$get=function(){var e=I.invoke(r,n);return I.invoke(t,null,{$delegate:e})}}function p(e){fe(b(e)||Lr(e),"modulesToLoad","not an array");var t,n=[];return o(e,function(e){function r(e){var t,n;for(t=0,n=e.length;n>t;t++){var r=e[t],i=E.get(r[0]);i[r[1]].apply(i,r[2])}}if(!w.get(e)){w.put(e,!0);try{_(e)?(t=Ar(e),n=n.concat(p(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):A(e)?n.push(E.invoke(e)):Lr(e)?n.push(E.invoke(e)):de(e,"module")}catch(i){throw Lr(e)&&(e=e[e.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),wi("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}}),n}function h(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===g)throw wi("cdep","Circular dependency found: {0}",t+" <- "+y.join(" <- "));return e[t]}try{return y.unshift(t),e[t]=g,e[t]=n(t,r)}catch(i){throw e[t]===g&&delete e[t],i}finally{y.shift()}}function i(e,n,i,o){"string"==typeof i&&(o=i,i=null);var a,s,c,u=[],l=Qe.$$annotate(e,t,o);for(s=0,a=l.length;a>s;s++){if(c=l[s],"string"!=typeof c)throw wi("itkn","Incorrect injection token! Expected service name as string, got {0}",c);u.push(i&&i.hasOwnProperty(c)?i[c]:r(c,o))}return Lr(e)&&(e=e[a]),e.apply(n,u)}function o(e,t,n){var r=Object.create((Lr(e)?e[e.length-1]:e).prototype||null),o=i(e,r,t,n);return S(o)||A(o)?o:r}return{invoke:i,instantiate:o,get:r,annotate:Qe.$$annotate,has:function(t){return C.hasOwnProperty(t+m)||e.hasOwnProperty(t)}}}t=t===!0;var g={},m="Provider",y=[],w=new Ye([],!0),C={$provide:{provider:r(i),factory:r(c),service:r(u),value:r(l),constant:r(f),decorator:d}},E=C.$injector=h(C,function(e,t){throw Rr.isString(t)&&y.push(t),wi("unpr","Unknown provider: {0}",y.join(" <- "))}),T={},I=T.$injector=h(T,function(e,t){var r=E.get(e+m,t);return I.invoke(r.$get,r,n,e)});return o(p(e),function(e){e&&I.invoke(e)}),I}function Je(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===O(e)?(t=e,!0):void 0}),t}function o(){var e=s.yOffset;if(A(e))e=e();else if(L(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else E(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=o();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=_(e)?e:n.hash();var t;e?(t=c.getElementById(e))?a(t):(t=i(c.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var c=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&ze(function(){r.$evalAsync(s)})}),s}]}function et(e,t){return e||t?e?t?(Lr(e)&&(e=e.join(" ")),Lr(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function tt(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Ci)return n}}function nt(e){_(e)&&(e=e.split(" "));var t=me();return o(e,function(e){e.length&&(t[e]=!0)}),t}function rt(e){return S(e)?e:{}}function it(e,t,n,r){function i(e){try{e.apply(null,q(arguments,1))}finally{if(y--,0===y)for(;w.length;)try{w.pop()()}catch(t){n.error(t)}}}function a(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function s(){u(),l()}function c(){try{return p.state}catch(e){}}function u(){S=c(),S=b(S)?null:S,V(S,k)&&(S=k),k=S}function l(){(_!==f.url()||C!==S)&&(_=f.url(),C=S,o(A,function(e){e(f.url(),S)}))}var f=this,d=(t[0],e.location),p=e.history,h=e.setTimeout,m=e.clearTimeout,v={};f.isMock=!1;var y=0,w=[];f.$$completeOutstandingRequest=i,f.$$incOutstandingRequestCount=function(){y++},f.notifyWhenNoOutstandingRequests=function(e){0===y?e():w.push(e)};var S,C,_=d.href,E=t.find("base"),T=null;u(),C=S,f.url=function(t,n,i){if(b(i)&&(i=null),d!==e.location&&(d=e.location),p!==e.history&&(p=e.history),t){var o=C===i;if(_===t&&(!r.history||o))return f;var s=_&&$t(_)===$t(t);return _=t,C=i,!r.history||s&&o?((!s||T)&&(T=t),n?d.replace(t):s?d.hash=a(t):d.href=t):(p[n?"replaceState":"pushState"](i,"",t),u(),C=S),f}return T||d.href.replace(/%27/g,"'")},f.state=function(){return S};var A=[],I=!1,k=null;f.onUrlChange=function(t){return I||(r.history&&Er(e).on("popstate",s),Er(e).on("hashchange",s),I=!0),A.push(t),t},f.$$applicationDestroyed=function(){Er(e).off("hashchange popstate",s)},f.$$checkUrlChange=l,f.baseHref=function(){var e=E.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""},f.defer=function(e,t){var n;return y++,n=h(function(){delete v[n],i(e)},t||0),v[n]=!0,n},f.defer.cancel=function(e){return v[e]?(delete v[e],m(e),i(g),!0):!1}}function ot(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new it(e,r,t,n)}]}function at(){this.$get=function(){function e(e,n){function i(e){e!=d&&(p?p==e&&(p=e.n):p=e,o(e.n,e.p),o(e,d),d=e,d.n=null)}function o(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=f({},n,{id:e}),c={},u=n&&n.capacity||Number.MAX_VALUE,l={},d=null,p=null;return t[e]={put:function(e,t){if(!b(t)){if(u<Number.MAX_VALUE){var n=l[e]||(l[e]={key:e});i(n)}return e in c||a++,c[e]=t,a>u&&this.remove(p.key),t}},get:function(e){if(u<Number.MAX_VALUE){var t=l[e];if(!t)return;i(t)}return c[e]},remove:function(e){if(u<Number.MAX_VALUE){var t=l[e];if(!t)return;t==d&&(d=t.p),t==p&&(p=t.n),o(t.n,t.p),delete l[e]}delete c[e],a--},removeAll:function(){c={},a=0,l={},d=p=null},destroy:function(){c=null,s=null,l=null,delete t[e]},info:function(){return f({},s,{size:a})}}}var t={};return e.info=function(){var e={};return o(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function st(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function ct(e,r){function i(e,t,n){var r=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,i={};return o(e,function(e,o){var a=e.match(r);if(!a)throw ki("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,o,e,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o}}),i}function a(e,t){var n={isolateScope:null,bindToController:null};if(S(e.scope)&&(e.bindToController===!0?(n.bindToController=i(e.scope,t,!0),n.isolateScope={}):n.isolateScope=i(e.scope,t,!1)),S(e.bindToController)&&(n.bindToController=i(e.bindToController,t,!0)),S(n.bindToController)){var r=e.controller,o=e.controllerAs;if(!r)throw ki("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);if(!dt(r,o))throw ki("noident","Cannot bind to controller without identifier for directive '{0}'.",t)}return n}function c(e){var t=e.charAt(0);if(!t||t!==yr(t))throw ki("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw ki("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}var u={},l="Directive",d=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,p=/(([\w\-]+)(?:\:([^;]+))?;?)/,y=M("ngSrc,ngSrcset,src,srcset"),C=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,E=/^(on[a-z]+|formaction)$/;this.directive=function I(t,n){return pe(t,"directive"),_(t)?(c(t),fe(n,"directiveFactory"),u.hasOwnProperty(t)||(u[t]=[],e.factory(t+l,["$injector","$exceptionHandler",function(e,n){var r=[];return o(u[t],function(i,o){try{var s=e.invoke(i);A(s)?s={compile:v(s)}:!s.compile&&s.link&&(s.compile=v(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA";var c=s.$$bindings=a(s,s.name);S(c.isolateScope)&&(s.$$isolateBindings=c.isolateScope),s.$$moduleName=i.$$moduleName,r.push(s)}catch(u){n(u)}}),r}])),u[t].push(n)):o(t,s(I)),this},this.aHrefSanitizationWhitelist=function(e){return w(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return w(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()};var T=!0;this.debugInfoEnabled=function(e){return w(e)?(T=e,this):T},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,r,i,a,s,c,v,w,I,k,B){function N(e,t){try{e.addClass(t)}catch(n){}}function D(e,t,n,r,i){e instanceof Er||(e=Er(e)),o(e,function(t,n){t.nodeType==Kr&&t.nodeValue.match(/\S+/)&&(e[n]=Er(t).wrap("<span></span>").parent()[0])});var a=j(e,t,e,n,r,i);D.$$addScopeClass(e);var s=null;return function(t,n,r){fe(t,"scope"),r=r||{};var i=r.parentBoundTranscludeFn,o=r.transcludeControllers,c=r.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),s||(s=R(c));var u;if(u="html"!==s?Er(J(s,Er("<div>").append(e).html())):n?fi.clone.call(e):e,o)for(var l in o)u.data("$"+l+"Controller",o[l].instance);return D.$$addScopeInfo(u,t),n&&n(u,t),a&&a(t,u,u,i),u}}function R(e){var t=e&&e[0];return t&&"foreignobject"!==O(t)&&t.toString().match(/SVG/)?"svg":"html"}function j(e,t,r,i,o,a){function s(e,r,i,o){var a,s,c,u,l,f,d,p,m;if(h){var v=r.length;for(m=new Array(v),l=0;l<g.length;l+=3)d=g[l],m[d]=r[d]}else m=r;for(l=0,f=g.length;f>l;)if(c=m[g[l++]],a=g[l++],s=g[l++],a){if(a.scope){u=e.$new(),D.$$addScopeInfo(Er(c),u);var y=a.$$destroyBindings;y&&(a.$$destroyBindings=null,u.$on("$destroyed",y))}else u=e;p=a.transcludeOnThisElement?$(e,a.transclude,o):!a.templateOnThisElement&&o?o:!o&&t?$(e,t):null,a(s,u,c,i,p,a)}else s&&s(e,c.childNodes,n,o)}for(var c,u,l,f,d,p,h,g=[],m=0;m<e.length;m++)c=new ae,u=L(e[m],[],c,0===m?i:n,o),l=u.length?F(u,e[m],c,t,r,null,[],[],a):null,l&&l.scope&&D.$$addScopeClass(c.$$element),d=l&&l.terminal||!(f=e[m].childNodes)||!f.length?null:j(f,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t),(l||d)&&(g.push(m,l,d),p=!0,h=h||l),a=null;return p?s:null}function $(e,t,n){var r=function(r,i,o,a,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})};return r}function L(e,t,n,r,i){var o,a,s=e.nodeType,c=n.$attr;switch(s){case Hr:H(t,ut(O(e)),"E",r,i);for(var u,l,f,h,g,m,v=e.attributes,y=0,b=v&&v.length;b>y;y++){var w=!1,C=!1;u=v[y],l=u.name,g=Or(u.value),h=ut(l),(m=de.test(h))&&(l=l.replace(xi,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var E=h.replace(/(Start|End)$/,"");G(E)&&h===E+"Start"&&(w=l,C=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6)),f=ut(l.toLowerCase()),c[f]=l,(m||!n.hasOwnProperty(f))&&(n[f]=g,qe(e,f)&&(n[f]=!0)),te(e,t,g,f,m),H(t,f,"A",r,i,w,C)}if(a=e.className,S(a)&&(a=a.animVal),_(a)&&""!==a)for(;o=p.exec(a);)f=ut(o[2]),H(t,f,"C",r,i)&&(n[f]=Or(o[3])),a=a.substr(o.index+o[0].length);break;case Kr:if(11===_r)for(;e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===Kr;)e.nodeValue=e.nodeValue+e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);Z(t,e.nodeValue);break;case Wr:try{o=d.exec(e.nodeValue),o&&(f=ut(o[1]),H(t,f,"M",r,i)&&(n[f]=Or(o[2])))}catch(T){}}return t.sort(Y),t}function M(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw ki("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==Hr&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return Er(r)}function U(e,t,n){return function(r,i,o,a,s){return i=M(i[0],t,n),e(r,i,o,a,s)}}function F(e,r,o,a,s,u,l,f,d){function p(e,t,n,r){e&&(n&&(e=U(e,n,r)),e.require=v.require,e.directiveName=y,(B===v||v.$$isolateScope)&&(e=re(e,{isolateScope:!0})),l.push(e)),t&&(n&&(t=U(t,n,r)),t.require=v.require,t.directiveName=y,(B===v||v.$$isolateScope)&&(t=re(t,{isolateScope:!0})),f.push(t))}function h(e,t,n,r){var i;if(_(t)){var o=t.match(C),a=t.substring(o[0].length),s=o[1]||o[3],c="?"===o[2];if("^^"===s?n=n.parent():(i=r&&r[a],i=i&&i.instance),!i){var u="$"+a+"Controller";i=s?n.inheritedData(u):n.data(u)}if(!i&&!c)throw ki("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,e)}else if(Lr(t)){i=[];for(var l=0,f=t.length;f>l;l++)i[l]=h(e,t[l],n,r)}return i||null}function g(e,t,n,r,i,o){var a=me();for(var s in r){var u=r[s],l={$scope:u===B||u.$$isolateScope?i:o,$element:e,$attrs:t,$transclude:n},f=u.controller;"@"==f&&(f=t[u.name]);var d=c(f,l,!0,u.controllerAs);a[u.name]=d,O||e.data("$"+u.name+"Controller",d.instance)}return a}function m(e,t,i,a,s,c){function u(e,t,r){var i;return x(e)||(r=t,t=e,e=n),O&&(i=b),r||(r=O?S.parent():S),s(e,t,i,r,R)}var d,p,m,v,y,b,w,S,C;if(r===i?(C=o,S=o.$$element):(S=Er(i),C=new ae(S,o)),B&&(y=t.$new(!0)),s&&(w=u,w.$$boundTransclude=s),k&&(b=g(S,C,w,k,y,t)),B&&(D.$$addScopeInfo(S,y,!0,!(N&&(N===B||N===B.$$originalDirective))),D.$$addScopeClass(S,!0),y.$$isolateBindings=B.$$isolateBindings,oe(t,C,y,y.$$isolateBindings,B,y)),b){var _,E,T=B||I;T&&b[T.name]&&(_=T.$$bindings.bindToController,v=b[T.name],v&&v.identifier&&_&&(E=v,c.$$destroyBindings=oe(t,C,v.instance,_,T)));for(d in b){v=b[d];var A=v();A!==v.instance&&(v.instance=A,S.data("$"+d+"Controller",A),v===E&&(c.$$destroyBindings(),c.$$destroyBindings=oe(t,C,A,_,T)))}}for(d=0,p=l.length;p>d;d++)m=l[d],ie(m,m.isolateScope?y:t,S,C,m.require&&h(m.directiveName,m.require,S,b),w);var R=t;for(B&&(B.template||null===B.templateUrl)&&(R=y),e&&e(R,i.childNodes,n,s),d=f.length-1;d>=0;d--)m=f[d],ie(m,m.isolateScope?y:t,S,C,m.require&&h(m.directiveName,m.require,S,b),w)}d=d||{};for(var v,y,b,w,E,T=-Number.MAX_VALUE,I=d.newScopeDirective,k=d.controllerDirectives,B=d.newIsolateScopeDirective,N=d.templateDirective,R=d.nonTlbTranscludeDirective,j=!1,$=!1,O=d.hasElementTranscludeDirective,P=o.$$element=Er(r),F=u,V=a,H=0,G=e.length;G>H;H++){
v=e[H];var Y=v.$$start,Z=v.$$end;if(Y&&(P=M(r,Y,Z)),b=n,T>v.priority)break;if((E=v.scope)&&(v.templateUrl||(S(E)?(X("new/isolated scope",B||I,v,P),B=v):X("new/isolated scope",B,v,P)),I=I||v),y=v.name,!v.templateUrl&&v.controller&&(E=v.controller,k=k||me(),X("'"+y+"' controller",k[y],v,P),k[y]=v),(E=v.transclude)&&(j=!0,v.$$tlb||(X("transclusion",R,v,P),R=v),"element"==E?(O=!0,T=v.priority,b=P,P=o.$$element=Er(t.createComment(" "+y+": "+o[y]+" ")),r=P[0],ne(s,q(b),r),V=D(b,a,T,F&&F.name,{nonTlbTranscludeDirective:R})):(b=Er(xe(r)).contents(),P.empty(),V=D(b,a))),v.template)if($=!0,X("template",N,v,P),N=v,E=A(v.template)?v.template(P,o):v.template,E=le(E),v.replace){if(F=v,b=_e(E)?[]:ft(J(v.templateNamespace,Or(E))),r=b[0],1!=b.length||r.nodeType!==Hr)throw ki("tplrt","Template for directive '{0}' must have exactly one root element. {1}",y,"");ne(s,P,r);var ee={$attr:{}},te=L(r,[],ee),se=e.splice(H+1,e.length-(H+1));B&&z(te),e=e.concat(te).concat(se),K(o,ee),G=e.length}else P.html(E);if(v.templateUrl)$=!0,X("template",N,v,P),N=v,v.replace&&(F=v),m=W(e.splice(H,e.length-H),P,o,s,j&&V,l,f,{controllerDirectives:k,newScopeDirective:I!==v&&I,newIsolateScopeDirective:B,templateDirective:N,nonTlbTranscludeDirective:R}),G=e.length;else if(v.compile)try{w=v.compile(P,o,V),A(w)?p(null,w,Y,Z):w&&p(w.pre,w.post,Y,Z)}catch(ce){i(ce,Q(P))}v.terminal&&(m.terminal=!0,T=Math.max(T,v.priority))}return m.scope=I&&I.scope===!0,m.transcludeOnThisElement=j,m.templateOnThisElement=$,m.transclude=V,d.hasElementTranscludeDirective=O,m}function z(e){for(var t=0,n=e.length;n>t;t++)e[t]=h(e[t],{$$isolateScope:!0})}function H(t,r,o,a,s,c,f){if(r===s)return null;var d=null;if(u.hasOwnProperty(r))for(var p,g=e.get(r+l),m=0,v=g.length;v>m;m++)try{p=g[m],(a===n||a>p.priority)&&-1!=p.restrict.indexOf(o)&&(c&&(p=h(p,{$$start:c,$$end:f})),t.push(p),d=p)}catch(y){i(y)}return d}function G(t){if(u.hasOwnProperty(t))for(var n,r=e.get(t+l),i=0,o=r.length;o>i;i++)if(n=r[i],n.multiElement)return!0;return!1}function K(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;o(e,function(r,i){"$"!=i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),o(t,function(t,o){"class"==o?(N(i,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==o?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==o.charAt(0)||e.hasOwnProperty(o)||(e[o]=t,r[o]=n[o])})}function W(e,t,n,r,i,s,c,u){var l,f,d=[],p=t[0],g=e.shift(),m=h(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),v=A(g.templateUrl)?g.templateUrl(t,n):g.templateUrl,y=g.templateNamespace;return t.empty(),a(v).then(function(a){var h,b,w,C;if(a=le(a),g.replace){if(w=_e(a)?[]:ft(J(y,Or(a))),h=w[0],1!=w.length||h.nodeType!==Hr)throw ki("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,v);b={$attr:{}},ne(r,t,h);var _=L(h,[],b);S(g.scope)&&z(_),e=_.concat(e),K(n,b)}else h=p,t.html(a);for(e.unshift(m),l=F(e,h,n,i,t,g,s,c,u),o(r,function(e,n){e==h&&(r[n]=t[0])}),f=j(t[0].childNodes,i);d.length;){var E=d.shift(),T=d.shift(),A=d.shift(),I=d.shift(),k=t[0];if(!E.$$destroyed){if(T!==p){var x=T.className;u.hasElementTranscludeDirective&&g.replace||(k=xe(h)),ne(A,Er(T),k),N(Er(k),x)}C=l.transcludeOnThisElement?$(E,l.transclude,I):I,l(f,E,k,r,C,l)}}d=null}),function(e,t,n,r,i){var o=i;t.$$destroyed||(d?d.push(t,n,r,o):(l.transcludeOnThisElement&&(o=$(t,l.transclude,i)),l(f,t,n,r,o,l)))}}function Y(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function X(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw ki("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,Q(r))}function Z(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),r=!!t.length;return r&&D.$$addBindingClass(t),function(e,t){var i=t.parent();r||D.$$addBindingClass(i),D.$$addBindingInfo(i,n.expressions),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function J(e,n){switch(e=yr(e||"html")){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function ee(e,t){if("srcdoc"==t)return I.HTML;var n=O(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?I.RESOURCE_URL:void 0}function te(e,t,n,i,o){var a=ee(e,i);o=y[i]||o;var s=r(n,!0,a,o);if(s){if("multiple"===i&&"select"===O(e))throw ki("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Q(e));t.push({priority:100,compile:function(){return{pre:function(e,t,c){var u=c.$$observers||(c.$$observers={});if(E.test(i))throw ki("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var l=c[i];l!==n&&(s=l&&r(l,!0,a,o),n=l),s&&(c[i]=s(e),(u[i]||(u[i]=[])).$$inter=!0,(c.$$observers&&c.$$observers[i].$$scope||e).$watch(s,function(e,t){"class"===i&&e!=t?c.$updateClass(e,t):c.$set(i,e)}))}}}})}}function ne(e,n,r){var i,o,a=n[0],s=n.length,c=a.parentNode;if(e)for(i=0,o=e.length;o>i;i++)if(e[i]==a){e[i++]=r;for(var u=i,l=u+s-1,f=e.length;f>u;u++,l++)f>l?e[u]=e[l]:delete e[u];e.length-=s-1,e.context===a&&(e.context=r);break}c&&c.replaceChild(r,a);var d=t.createDocumentFragment();d.appendChild(a),Er.hasData(a)&&(Er(r).data(Er(a).data()),Tr?($r=!0,Tr.cleanData([a])):delete Er.cache[a[Er.expando]]);for(var p=1,h=n.length;h>p;p++){var g=n[p];Er(g).remove(),d.appendChild(g),delete n[p]}n[0]=r,n.length=1}function re(e,t){return f(function(){return e.apply(null,arguments)},e,t)}function ie(e,t,n,r,o,a){try{e(t,n,r,o,a)}catch(s){i(s,Q(n))}}function oe(e,t,n,i,a,c){var u;o(i,function(i,o){var c,l,f,d,p=i.attrName,h=i.optional,m=i.mode;switch(m){case"@":h||br.call(t,p)||(n[o]=t[p]=void 0),t.$observe(p,function(e){_(e)&&(n[o]=e)}),t.$$observers[p].$$scope=e,_(t[p])&&(n[o]=r(t[p])(e));break;case"=":if(!br.call(t,p)){if(h)break;t[p]=void 0}if(h&&!t[p])break;l=s(t[p]),d=l.literal?V:function(e,t){return e===t||e!==e&&t!==t},f=l.assign||function(){throw c=n[o]=l(e),ki("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",t[p],a.name)},c=n[o]=l(e);var v=function(t){return d(t,n[o])||(d(t,c)?f(e,t=n[o]):n[o]=t),c=t};v.$stateful=!0;var y;y=i.collection?e.$watchCollection(t[p],v):e.$watch(s(t[p],v),null,l.literal),u=u||[],u.push(y);break;case"&":if(l=t.hasOwnProperty(p)?s(t[p]):g,l===g&&h)break;n[o]=function(t){return l(e,t)}}});var l=u?function(){for(var e=0,t=u.length;t>e;++e)u[e]()}:g;return c&&l!==g?(c.$on("$destroy",l),g):l}var ae=function(e,t){if(t){var n,r,i,o=Object.keys(t);for(n=0,r=o.length;r>n;n++)i=o[n],this[i]=t[i]}else this.$attr={};this.$$element=e};ae.prototype={$normalize:ut,$addClass:function(e){e&&e.length>0&&k.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&k.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=lt(e,t);n&&n.length&&k.addClass(this.$$element,n);var r=lt(t,e);r&&r.length&&k.removeClass(this.$$element,r)},$set:function(e,t,r,a){var s,c=this.$$element[0],u=qe(c,e),l=He(c,e),f=e;if(u?(this.$$element.prop(e,t),a=u):l&&(this[l]=t,f=l),this[e]=t,a?this.$attr[e]=a:(a=this.$attr[e],a||(this.$attr[e]=a=ue(e,"-"))),s=O(this.$$element),"a"===s&&"href"===e||"img"===s&&"src"===e)this[e]=t=B(t,"src"===e);else if("img"===s&&"srcset"===e){for(var d="",p=Or(t),h=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,g=/\s/.test(p)?h:/(,)/,m=p.split(g),v=Math.floor(m.length/2),y=0;v>y;y++){var b=2*y;d+=B(Or(m[b]),!0),d+=" "+Or(m[b+1])}var w=Or(m[2*y]).split(/\s/);d+=B(Or(w[0]),!0),2===w.length&&(d+=" "+Or(w[1])),this[e]=t=d}r!==!1&&(null===t||t===n?this.$$element.removeAttr(a):this.$$element.attr(a,t));var S=this.$$observers;S&&o(S[f],function(e){try{e(t)}catch(n){i(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=me()),i=r[e]||(r[e]=[]);return i.push(t),v.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||b(n[e])||t(n[e])}),function(){P(i,t)}}};var se=r.startSymbol(),ce=r.endSymbol(),le="{{"==se||"}}"==ce?m:function(e){return e.replace(/\{\{/g,se).replace(/}}/g,ce)},de=/^ngAttr[A-Z]/;return D.$$addBindingInfo=T?function(e,t){var n=e.data("$binding")||[];Lr(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:g,D.$$addBindingClass=T?function(e){N(e,"ng-binding")}:g,D.$$addScopeInfo=T?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:g,D.$$addScopeClass=T?function(e,t){N(e,t?"ng-isolate-scope":"ng-scope")}:g,D}]}function ut(e){return Ce(e.replace(xi,""))}function lt(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function ft(e){e=Er(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];n.nodeType===Wr&&kr.call(e,t,1)}return e}function dt(e,t){if(t&&_(t))return t;if(_(e)){var n=Ni.exec(e);if(n)return n[3]}}function pt(){var e={},t=!1;this.register=function(t,n){pe(t,"controller"),S(t)?f(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(i,o){function a(e,t,n,i){if(!e||!S(e.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}return function(r,s,c,u){var l,d,p,h;if(c=c===!0,u&&_(u)&&(h=u),_(r)){if(d=r.match(Ni),!d)throw Bi("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);p=d[1],h=h||d[3],r=e.hasOwnProperty(p)?e[p]:he(s.$scope,p,!0)||(t?he(o,p,!0):n),de(r,p,!0)}if(c){var g=(Lr(r)?r[r.length-1]:r).prototype;l=Object.create(g||null),h&&a(s,h,l,p||r.name);var m;return m=f(function(){var e=i.invoke(r,l,s,p);return e!==l&&(S(e)||A(e))&&(l=e,h&&a(s,h,l,p||r.name)),l},{instance:l,identifier:h})}return l=i.instantiate(r,s,p),h&&a(s,h,l,p||r.name),l}}]}function ht(){this.$get=["$window",function(e){return Er(e.document)}]}function gt(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function mt(e){return S(e)?T(e)?e.toISOString():K(e):e}function vt(){this.$get=function(){return function(e){if(!e)return"";var t=[];return a(e,function(e,n){null===e||b(e)||(Lr(e)?o(e,function(e,r){t.push(re(n)+"="+re(mt(e)))}):t.push(re(n)+"="+re(mt(e))))}),t.join("&")}}}function yt(){this.$get=function(){return function(e){function t(e,r,i){null===e||b(e)||(Lr(e)?o(e,function(e,n){t(e,r+"["+(S(e)?n:"")+"]")}):S(e)&&!T(e)?a(e,function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))}):n.push(re(r)+"="+re(mt(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function bt(e,t){if(_(e)){var n=e.replace(Mi,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(Ri)||wt(n))&&(e=W(n))}}return e}function wt(e){var t=e.match($i);return t&&Li[t[0]].test(e)}function St(e){function t(e,t){e&&(r[e]=r[e]?r[e]+", "+t:t)}var n,r=me();return _(e)?o(e.split("\n"),function(e){n=e.indexOf(":"),t(yr(Or(e.substr(0,n))),Or(e.substr(n+1)))}):S(e)&&o(e,function(e,n){t(yr(n),Or(e))}),r}function Ct(e){var t;return function(n){if(t||(t=St(e)),n){var r=t[yr(n)];return void 0===r&&(r=null),r}return t}}function _t(e,t,n,r){return A(r)?r(e,t,n):(o(r,function(r){e=r(e,t,n)}),e)}function Et(e){return e>=200&&300>e}function Tt(){var e=this.defaults={transformResponse:[bt],transformRequest:[function(e){return!S(e)||B(e)||D(e)||N(e)?e:K(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:F(ji),put:F(ji),patch:F(ji)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},t=!1;this.useApplyAsync=function(e){return w(e)?(t=!!e,this):t};var i=!0;this.useLegacyPromiseExtensions=function(e){return w(e)?(i=!!e,this):i};var a=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(s,c,u,l,d,p){function h(t){function a(e){var t=f({},e);return e.data?t.data=_t(e.data,e.headers,e.status,u.transformResponse):t.data=e.data,Et(e.status)?t:d.reject(t)}function s(e,t){var n,r={};return o(e,function(e,i){A(e)?(n=e(t),null!=n&&(r[i]=n)):r[i]=e}),r}function c(t){var n,r,i,o=e.headers,a=f({},t.headers);o=f({},o.common,o[yr(t.method)]);e:for(n in o){r=yr(n);for(i in a)if(yr(i)===r)continue e;a[n]=o[n]}return s(a,F(t))}if(!Rr.isObject(t))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);var u=f({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},t);u.headers=c(t),u.method=wr(u.method),u.paramSerializer=_(u.paramSerializer)?p.get(u.paramSerializer):u.paramSerializer;var l=function(t){var r=t.headers,i=_t(t.data,Ct(r),n,t.transformRequest);return b(i)&&o(r,function(e,t){"content-type"===yr(t)&&delete r[t]}),b(t.withCredentials)&&!b(e.withCredentials)&&(t.withCredentials=e.withCredentials),v(t,i).then(a,a)},h=[l,n],g=d.when(u);for(o(E,function(e){(e.request||e.requestError)&&h.unshift(e.request,e.requestError),(e.response||e.responseError)&&h.push(e.response,e.responseError)});h.length;){var m=h.shift(),y=h.shift();g=g.then(m,y)}return i?(g.success=function(e){return de(e,"fn"),g.then(function(t){e(t.data,t.status,t.headers,u)}),g},g.error=function(e){return de(e,"fn"),g.then(null,function(t){e(t.data,t.status,t.headers,u)}),g}):(g.success=Pi("success"),g.error=Pi("error")),g}function g(e){o(arguments,function(e){h[e]=function(t,n){return h(f({},n||{},{method:e,url:t}))}})}function m(e){o(arguments,function(e){h[e]=function(t,n,r){return h(f({},r||{},{method:e,url:t,data:n}))}})}function v(r,i){function o(e,n,r,i){function o(){a(n,e,r,i)}p&&(Et(e)?p.put(E,[e,n,St(r),i]):p.remove(E)),t?l.$applyAsync(o):(o(),l.$$phase||l.$apply())}function a(e,t,n,i){t=Math.max(t,0),(Et(t)?m.resolve:m.reject)({data:e,status:t,headers:Ct(n),config:r,statusText:i})}function u(e){a(e.data,e.status,F(e.headers()),e.statusText)}function f(){var e=h.pendingRequests.indexOf(r);-1!==e&&h.pendingRequests.splice(e,1)}var p,g,m=d.defer(),v=m.promise,_=r.headers,E=y(r.url,r.paramSerializer(r.params));if(h.pendingRequests.push(r),v.then(f,f),!r.cache&&!e.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(p=S(r.cache)?r.cache:S(e.cache)?e.cache:C),p&&(g=p.get(E),w(g)?j(g)?g.then(u,u):Lr(g)?a(g[1],g[0],F(g[2]),g[3]):a(g,200,{},"OK"):p.put(E,v)),b(g)){var T=Tn(r.url)?c()[r.xsrfCookieName||e.xsrfCookieName]:n;T&&(_[r.xsrfHeaderName||e.xsrfHeaderName]=T),s(r.method,E,i,o,_,r.timeout,r.withCredentials,r.responseType)}return v}function y(e,t){return t.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+t),e}var C=u("$http");e.paramSerializer=_(e.paramSerializer)?p.get(e.paramSerializer):e.paramSerializer;var E=[];return o(a,function(e){E.unshift(_(e)?p.get(e):p.invoke(e))}),h.pendingRequests=[],g("get","delete","head","jsonp"),m("post","put","patch"),h.defaults=e,h}]}function At(){return new e.XMLHttpRequest}function It(){this.$get=["$browser","$window","$document",function(e,t,n){return kt(e,At,e.defer,t.angular.callbacks,n[0])}]}function kt(e,t,r,i,a){function s(e,t,n){var r=a.createElement("script"),o=null;return r.type="text/javascript",r.src=e,r.async=!0,o=function(e){ti(r,"load",o),ti(r,"error",o),a.body.removeChild(r),r=null;var s=-1,c="unknown";e&&("load"!==e.type||i[t].called||(e={type:"error"}),c=e.type,s="error"===e.type?404:200),n&&n(s,c)},ei(r,"load",o),ei(r,"error",o),a.body.appendChild(r),o}return function(a,c,u,l,f,d,p,h){function m(){b&&b(),S&&S.abort()}function v(t,i,o,a,s){E!==n&&r.cancel(E),b=S=null,t(i,o,a,s),e.$$completeOutstandingRequest(g)}if(e.$$incOutstandingRequestCount(),c=c||e.url(),"jsonp"==yr(a)){var y="_"+(i.counter++).toString(36);i[y]=function(e){i[y].data=e,i[y].called=!0};var b=s(c.replace("JSON_CALLBACK","angular.callbacks."+y),y,function(e,t){v(l,e,i[y].data,"",t),i[y]=g})}else{var S=t();S.open(a,c,!0),o(f,function(e,t){w(e)&&S.setRequestHeader(t,e)}),S.onload=function(){var e=S.statusText||"",t="response"in S?S.response:S.responseText,n=1223===S.status?204:S.status;0===n&&(n=t?200:"file"==En(c).protocol?404:0),v(l,n,t,S.getAllResponseHeaders(),e)};var C=function(){v(l,-1,null,null,"")};if(S.onerror=C,S.onabort=C,p&&(S.withCredentials=!0),h)try{S.responseType=h}catch(_){if("json"!==h)throw _}S.send(u)}if(d>0)var E=r(m,d);else j(d)&&d.then(m)}}function xt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(e){return"\\\\\\"+e}function a(n){return n.replace(d,e).replace(p,t)}function s(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=K(e)}return e}function c(o,c,d,p){function h(e){try{return e=k(e),p&&!w(e)?e:s(e)}catch(t){r(Ui.interr(o,t))}}p=!!p;for(var g,m,v,y=0,S=[],C=[],_=o.length,E=[],T=[];_>y;){if(-1==(g=o.indexOf(e,y))||-1==(m=o.indexOf(t,g+u))){y!==_&&E.push(a(o.substring(y)));break}y!==g&&E.push(a(o.substring(y,g))),v=o.substring(g+u,m),S.push(v),C.push(n(v,h)),y=m+l,T.push(E.length),E.push("")}if(d&&E.length>1&&Ui.throwNoconcat(o),!c||S.length){var I=function(e){for(var t=0,n=S.length;n>t;t++){if(p&&b(e[t]))return;E[T[t]]=e[t]}return E.join("")},k=function(e){return d?i.getTrusted(d,e):i.valueOf(e)};return f(function(e){var t=0,n=S.length,i=new Array(n);try{for(;n>t;t++)i[t]=C[t](e);return I(i)}catch(a){r(Ui.interr(o,a))}},{exp:o,expressions:S,$$watchDelegate:function(e,t){var n;return e.$watchGroup(C,function(r,i){var o=I(r);A(t)&&t.call(this,o,r!==i?n:o,e),n=o})}})}}var u=e.length,l=t.length,d=new RegExp(e.replace(/./g,o),"g"),p=new RegExp(t.replace(/./g,o),"g");return c.startSymbol=function(){return e},c.endSymbol=function(){return t},c}]}function Bt(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,r){function i(i,a,s,c){var u=arguments.length>4,l=u?q(arguments,4):[],f=t.setInterval,d=t.clearInterval,p=0,h=w(c)&&!c,g=(h?r:n).defer(),m=g.promise;return s=w(s)?s:0,m.then(null,null,u?function(){i.apply(null,l)}:i),m.$$intervalId=f(function(){g.notify(p++),s>0&&p>=s&&(g.resolve(p),d(m.$$intervalId),delete o[m.$$intervalId]),h||e.$apply()},a),o[m.$$intervalId]=g,m}var o={};return i.cancel=function(e){return e&&e.$$intervalId in o?(o[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete o[e.$$intervalId],!0):!1},i}]}function Nt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ne(t[n]);return t.join("/")}function Dt(e,t){var n=En(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=p(n.port)||Vi[n.protocol]||null}function Rt(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var r=En(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=ee(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function jt(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function $t(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function Lt(e){return e.replace(/(#.+)|#$/,"$1")}function Mt(e){return e.substr(0,$t(e).lastIndexOf("/")+1)}function Ot(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Pt(e,t,r){this.$$html5=!0,r=r||"",Dt(e,this),this.$$parse=function(e){var n=jt(t,e);if(!_(n))throw zi("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Rt(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=te(this.$$search),n=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Nt(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var a,s,c;return(a=jt(e,i))!==n?(s=a,c=(a=jt(r,a))!==n?t+(jt("/",a)||a):e+s):(a=jt(t,i))!==n?c=t+a:t==i+"/"&&(c=t),c&&this.$$parse(c),!!c}}function Ut(e,t,n){Dt(e,this),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var o,a=jt(e,r)||jt(t,r);b(a)||"#"!==a.charAt(0)?this.$$html5?o=a:(o="",b(a)&&(e=r,this.replace())):(o=jt(n,a),b(o)&&(o=a)),Rt(o,this),this.$$path=i(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var t=te(this.$$search),r=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Nt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return $t(e)==$t(t)?(this.$$parse(t),!0):!1}}function Ft(e,t,n){this.$$html5=!0,Ut.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return e==$t(r)?o=r:(a=jt(t,r))?o=e+n+a:t===r+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=te(this.$$search),r=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Nt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}function Vt(e){return function(){return this[e]}}function zt(e,t){return function(n){return b(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function qt(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return w(t)?(e=t,this):e},this.html5Mode=function(e){return R(e)?(t.enabled=e,this):S(e)?(R(e.enabled)&&(t.enabled=e.enabled),R(e.requireBase)&&(t.requireBase=e.requireBase),R(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(e,t,n){var i=u.url(),o=u.$$state;try{r.url(e,t,n),u.$$state=r.state()}catch(a){throw u.url(i),u.$$state=o,a}}function c(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var u,l,f,d=r.baseHref(),p=r.url();if(t.enabled){if(!d&&t.requireBase)throw zi("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=Ot(p)+(d||"/"),l=i.history?Pt:Ft}else f=$t(p),l=Ut;var h=Mt(f);u=new l(f,h,"#"+e),u.$$parseLinkUrl(p,p),u.$$state=r.state();var g=/^\s*(javascript|mailto):/i;o.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var i=Er(e.target);"a"!==O(i[0]);)if(i[0]===o[0]||!(i=i.parent())[0])return;var s=i.prop("href"),c=i.attr("href")||i.attr("xlink:href");S(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=En(s.animVal).href),g.test(s)||!s||i.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(s,c)&&(e.preventDefault(),u.absUrl()!=r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),Lt(u.absUrl())!=Lt(p)&&r.url(u.absUrl(),!0);var m=!0;return r.onUrlChange(function(e,t){return b(jt(h,e))?void(a.location.href=e):(n.$evalAsync(function(){var r,i=u.absUrl(),o=u.$$state;u.$$parse(e),u.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,o).defaultPrevented,u.absUrl()===e&&(r?(u.$$parse(i),u.$$state=o,s(i,!1,o)):(m=!1,c(i,o)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var e=Lt(r.url()),t=Lt(u.absUrl()),o=r.state(),a=u.$$replace,l=e!==t||u.$$html5&&i.history&&o!==u.$$state;(m||l)&&(m=!1,n.$evalAsync(function(){var t=u.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,u.$$state,o).defaultPrevented;u.absUrl()===t&&(r?(u.$$parse(e),u.$$state=o):(l&&s(t,a,o===u.$$state?null:u.$$state),c(e,o)))})),u.$$replace=!1}),u}]}function Ht(){var e=!0,t=this;this.debugEnabled=function(t){return w(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||g,a=!1;try{a=!!i.apply}catch(s){}return a?function(){var e=[];return o(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Gt(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw Hi("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Kt(e,t){if(e){if(e.constructor===e)throw Hi("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw Hi("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Hi("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw Hi("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function Wt(e,t){if(e){if(e.constructor===e)throw Hi("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Gi||e===Ki||e===Wi)throw Hi("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function Yt(e,t){return"undefined"!=typeof e?e:t}function Xt(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function Zt(e,t){var n=e(t);return!n.$stateful}function Qt(e,t){var n,r;switch(e.type){case Qi.Program:n=!0,o(e.body,function(e){Qt(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case Qi.Literal:e.constant=!0,e.toWatch=[];break;case Qi.UnaryExpression:Qt(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Qi.BinaryExpression:Qt(e.left,t),Qt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Qi.LogicalExpression:Qt(e.left,t),Qt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Qi.ConditionalExpression:Qt(e.test,t),Qt(e.alternate,t),Qt(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Qi.Identifier:e.constant=!1,e.toWatch=[e];break;case Qi.MemberExpression:Qt(e.object,t),e.computed&&Qt(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case Qi.CallExpression:n=e.filter?Zt(t,e.callee.name):!1,r=[],o(e.arguments,function(e){Qt(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=e.filter&&Zt(t,e.callee.name)?r:[e];break;case Qi.AssignmentExpression:Qt(e.left,t),Qt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Qi.ArrayExpression:n=!0,r=[],o(e.elements,function(e){Qt(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=r;break;case Qi.ObjectExpression:n=!0,r=[],o(e.properties,function(e){Qt(e.value,t),n=n&&e.value.constant,e.value.constant||r.push.apply(r,e.value.toWatch)}),e.constant=n,e.toWatch=r;break;case Qi.ThisExpression:e.constant=!1,e.toWatch=[]}}function Jt(e){if(1==e.length){var t=e[0].expression,r=t.toWatch;return 1!==r.length?r:r[0]!==t?r:n}}function en(e){return e.type===Qi.Identifier||e.type===Qi.MemberExpression}function tn(e){return 1===e.body.length&&en(e.body[0].expression)?{type:Qi.AssignmentExpression,left:e.body[0].expression,right:{type:Qi.NGValueParameter},operator:"="}:void 0}function nn(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===Qi.Literal||e.body[0].expression.type===Qi.ArrayExpression||e.body[0].expression.type===Qi.ObjectExpression)}function rn(e){return e.constant}function on(e,t){this.astBuilder=e,this.$filter=t}function an(e,t){this.astBuilder=e,this.$filter=t}function sn(e){return"constructor"==e}function cn(e){return A(e.valueOf)?e.valueOf():eo.call(e)}function un(){var e=me(),t=me();this.$get=["$filter",function(r){function i(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=cn(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function a(e,t,r,o,a){var s,c=o.inputs;if(1===c.length){var u=i;return c=c[0],e.$watch(function(e){var t=c(e);return i(t,u)||(s=o(e,n,n,[t]),u=t&&cn(t)),s},t,r,a)}for(var l=[],f=[],d=0,p=c.length;p>d;d++)l[d]=i,f[d]=null;return e.$watch(function(e){for(var t=!1,r=0,a=c.length;a>r;r++){var u=c[r](e);(t||(t=!i(u,l[r])))&&(f[r]=u,l[r]=u&&cn(u))}return t&&(s=o(e,n,n,f)),s},t,r,a)}function s(e,t,n,r){var i,o;return i=e.$watch(function(e){return r(e)},function(e,n,r){o=e,A(t)&&t.apply(this,arguments),w(e)&&r.$$postDigest(function(){w(o)&&i()})},n)}function c(e,t,n,r){function i(e){var t=!0;return o(e,function(e){w(e)||(t=!1)}),t}var a,s;return a=e.$watch(function(e){return r(e)},function(e,n,r){s=e,A(t)&&t.call(this,e,n,r),i(e)&&r.$$postDigest(function(){i(s)&&a()})},n)}function u(e,t,n,r){var i;return i=e.$watch(function(e){return r(e)},function(e,n,r){A(t)&&t.apply(this,arguments),i()},n)}function l(e,t){if(!t)return e;var n=e.$$watchDelegate,r=n!==c&&n!==s,i=r?function(n,r,i,o){var a=e(n,r,i,o);return t(a,n,r)}:function(n,r,i,o){var a=e(n,r,i,o),s=t(a,n,r);return w(a)?s:a};return e.$$watchDelegate&&e.$$watchDelegate!==a?i.$$watchDelegate=e.$$watchDelegate:t.$stateful||(i.$$watchDelegate=a,i.inputs=e.inputs?e.inputs:[e]),i}var f=Ur().noUnsafeEval,d={csp:f,expensiveChecks:!1},p={csp:f,expensiveChecks:!0};return function(n,i,o){var f,h,m;switch(typeof n){case"string":n=n.trim(),m=n;var v=o?t:e;if(f=v[m],!f){":"===n.charAt(0)&&":"===n.charAt(1)&&(h=!0,n=n.substring(2));var y=o?p:d,b=new Zi(y),w=new Ji(b,r,y);f=w.parse(n),f.constant?f.$$watchDelegate=u:h?f.$$watchDelegate=f.literal?c:s:f.inputs&&(f.$$watchDelegate=a),v[m]=f}return l(f,i);case"function":return l(n,i);default:return g}}}]}function ln(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return dn(function(t){e.$evalAsync(t)},t)}]}function fn(){this.$get=["$browser","$exceptionHandler",function(e,t){return dn(function(t){e.defer(t)},t)}]}function dn(e,t){function i(e,t,n){function r(t){return function(n){i||(i=!0,t.call(e,n))}}var i=!1;return[r(t),r(n)]}function a(){this.$$state={status:0}}function s(e,t){return function(n){t.call(e,n)}}function c(e){var r,i,o;o=e.pending,e.processScheduled=!1,e.pending=n;for(var a=0,s=o.length;s>a;++a){i=o[a][0],r=o[a][e.status];try{A(r)?i.resolve(r(e.value)):1===e.status?i.resolve(e.value):i.reject(e.value)}catch(c){i.reject(c),t(c)}}}function u(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){c(t)}))}function l(){this.promise=new a,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function d(e){var t=new l,n=0,r=Lr(e)?[]:{};return o(e,function(e,i){n++,y(e).then(function(e){r.hasOwnProperty(i)||(r[i]=e,--n||t.resolve(r))},function(e){r.hasOwnProperty(i)||t.reject(e)})}),0===n&&t.resolve(r),t.promise}var p=r("$q",TypeError),h=function(){return new l};f(a.prototype,{then:function(e,t,n){if(b(e)&&b(t)&&b(n))return this;var r=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&u(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return v(t,!0,e)},function(t){return v(t,!1,e)},t)}}),f(l.prototype,{resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(p("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,r;r=i(this,this.$$resolve,this.$$reject);try{(S(e)||A(e))&&(n=e&&e.then),A(n)?(this.promise.$$state.status=-1,n.call(e,r[0],r[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,u(this.promise.$$state))}catch(o){r[1](o),t(o)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,u(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var e,i,o=0,a=r.length;a>o;o++){i=r[o][0],e=r[o][3];try{i.notify(A(e)?e(n):n)}catch(s){t(s)}}})}});var g=function(e){var t=new l;return t.reject(e),t.promise},m=function(e,t){var n=new l;return t?n.resolve(e):n.reject(e),n.promise},v=function(e,t,n){var r=null;try{A(n)&&(r=n())}catch(i){return m(i,!1)}return j(r)?r.then(function(){return m(e,t)},function(e){
return m(e,!1)}):m(e,t)},y=function(e,t,n,r){var i=new l;return i.resolve(e),i.promise.then(t,n,r)},w=y,C=function _(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}if(!A(e))throw p("norslvr","Expected resolverFn, got '{0}'",e);if(!(this instanceof _))return new _(e);var r=new l;return e(t,n),r.promise};return C.defer=h,C.reject=g,C.when=y,C.resolve=w,C.all=d,C}function pn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function hn(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=c(),this.$$ChildScope=null}return t.prototype=e,t}var t=10,n=r("$rootScope"),a=null,s=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,u,l,f){function d(e){e.currentScope.$$destroyed=!0}function p(){this.$id=c(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function h(e){if(E.$$phase)throw n("inprog","{0} already in progress",E.$$phase);E.$$phase=e}function m(){E.$$phase=null}function v(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function y(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function w(){}function C(){for(;k.length;)try{k.shift()()}catch(e){u(e)}s=null}function _(){null===s&&(s=f.defer(function(){E.$apply(C)}))}p.prototype={constructor:p,$new:function(t,n){var r;return n=n||this,t?(r=new p,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!=this)&&r.$on("$destroy",d),r},$watch:function(e,t,n,r){var i=l(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var o=this,s=o.$$watchers,c={fn:t,last:w,get:i,exp:r||e,eq:!!n};return a=null,A(t)||(c.fn=g),s||(s=o.$$watchers=[]),s.unshift(c),v(this,1),function(){P(s,c)>=0&&v(o,-1),a=null}},$watchGroup:function(e,t){function n(){c=!1,u?(u=!1,t(i,i,s)):t(i,r,s)}var r=new Array(e.length),i=new Array(e.length),a=[],s=this,c=!1,u=!0;if(!e.length){var l=!0;return s.$evalAsync(function(){l&&t(i,i,s)}),function(){l=!1}}return 1===e.length?this.$watch(e[0],function(e,n,o){i[0]=e,r[0]=n,t(i,e===n?i:r,o)}):(o(e,function(e,t){var o=s.$watch(e,function(e,o){i[t]=e,r[t]=o,c||(c=!0,s.$evalAsync(n))});a.push(o)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function n(e){o=e;var t,n,r,s,c;if(!b(o)){if(S(o))if(i(o)){a!==p&&(a=p,m=a.length=0,f++),t=o.length,m!==t&&(f++,a.length=m=t);for(var u=0;t>u;u++)c=a[u],s=o[u],r=c!==c&&s!==s,r||c===s||(f++,a[u]=s)}else{a!==h&&(a=h={},m=0,f++),t=0;for(n in o)o.hasOwnProperty(n)&&(t++,s=o[n],c=a[n],n in a?(r=c!==c&&s!==s,r||c===s||(f++,a[n]=s)):(m++,a[n]=s,f++));if(m>t){f++;for(n in a)o.hasOwnProperty(n)||(m--,delete a[n])}}else a!==o&&(a=o,f++);return f}}function r(){if(g?(g=!1,t(o,o,c)):t(o,s,c),u)if(S(o))if(i(o)){s=new Array(o.length);for(var e=0;e<o.length;e++)s[e]=o[e]}else{s={};for(var n in o)br.call(o,n)&&(s[n]=o[n])}else s=o}n.$stateful=!0;var o,a,s,c=this,u=t.length>1,f=0,d=l(e,n),p=[],h={},g=!0,m=0;return this.$watch(d,r)},$digest:function(){var e,r,i,o,c,l,d,p,g,v,y=t,b=this,S=[];h("$digest"),f.$$checkUrlChange(),this===E&&null!==s&&(f.defer.cancel(s),C()),a=null;do{for(l=!1,p=b;T.length;){try{v=T.shift(),v.scope.$eval(v.expression,v.locals)}catch(_){u(_)}a=null}e:do{if(o=p.$$watchers)for(c=o.length;c--;)try{if(e=o[c])if((r=e.get(p))===(i=e.last)||(e.eq?V(r,i):"number"==typeof r&&"number"==typeof i&&isNaN(r)&&isNaN(i))){if(e===a){l=!1;break e}}else l=!0,a=e,e.last=e.eq?U(r,null):r,e.fn(r,i===w?r:i,p),5>y&&(g=4-y,S[g]||(S[g]=[]),S[g].push({msg:A(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:r,oldVal:i}))}catch(_){u(_)}if(!(d=p.$$watchersCount&&p.$$childHead||p!==b&&p.$$nextSibling))for(;p!==b&&!(d=p.$$nextSibling);)p=p.$parent}while(p=d);if((l||T.length)&&!y--)throw m(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,S)}while(l||T.length);for(m();I.length;)try{I.shift()()}catch(_){u(_)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===E&&f.$$applicationDestroyed(),v(this,-this.$$watchersCount);for(var t in this.$$listenerCount)y(this,this.$$listenerCount[t],t);e&&e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=g,this.$on=this.$watch=this.$watchGroup=function(){return g},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(e,t){return l(e)(this,t)},$evalAsync:function(e,t){E.$$phase||T.length||f.defer(function(){T.length&&E.$digest()}),T.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){I.push(e)},$apply:function(e){try{h("$apply");try{return this.$eval(e)}finally{m()}}catch(t){u(t)}finally{try{E.$digest()}catch(t){throw u(t),t}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&k.push(t),_()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(n[r]=null,y(i,1,e))}},$emit:function(e,t){var n,r,i,o=[],a=this,s=!1,c={name:e,targetScope:a,stopPropagation:function(){s=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=z([c],arguments,1);do{for(n=a.$$listeners[e]||o,c.currentScope=a,r=0,i=n.length;i>r;r++)if(n[r])try{n[r].apply(null,l)}catch(f){u(f)}else n.splice(r,1),r--,i--;if(s)return c.currentScope=null,c;a=a.$parent}while(a);return c.currentScope=null,c},$broadcast:function(e,t){var n=this,r=n,i=n,o={name:e,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return o;for(var a,s,c,l=z([o],arguments,1);r=i;){for(o.currentScope=r,a=r.$$listeners[e]||[],s=0,c=a.length;c>s;s++)if(a[s])try{a[s].apply(null,l)}catch(f){u(f)}else a.splice(s,1),s--,c--;if(!(i=r.$$listenerCount[e]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(i=r.$$nextSibling);)r=r.$parent}return o.currentScope=null,o}};var E=new p,T=E.$$asyncQueue=[],I=E.$$postDigestQueue=[],k=E.$$applyAsyncQueue=[];return E}]}function gn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return w(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return w(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,o=r?t:e;return i=En(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function mn(e){if("self"===e)return e;if(_(e)){if(e.indexOf("***")>-1)throw to("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Pr(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(I(e))return new RegExp("^"+e.source+"$");throw to("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function vn(e){var t=[];return w(e)&&o(e,function(e){t.push(mn(e))}),t}function yn(){this.SCE_CONTEXTS=no;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=vn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=vn(e)),t},this.$get=["$injector",function(r){function i(e,t){return"self"===e?Tn(t):!!e.exec(t.href)}function o(n){var r,o,a=En(n.toString()),s=!1;for(r=0,o=e.length;o>r;r++)if(i(e[r],a)){s=!0;break}if(s)for(r=0,o=t.length;o>r;r++)if(i(t[r],a)){s=!1;break}return s}function a(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function s(e,t){var r=d.hasOwnProperty(e)?d[e]:null;if(!r)throw to("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw to("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new r(t)}function c(e){return e instanceof f?e.$$unwrapTrustedValue():e}function u(e,t){if(null===t||t===n||""===t)return t;var r=d.hasOwnProperty(e)?d[e]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(e===no.RESOURCE_URL){if(o(t))return t;throw to("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===no.HTML)return l(t);throw to("unsafe","Attempting to use an unsafe value in a safe context.")}var l=function(e){throw to("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(l=r.get("$sanitize"));var f=a(),d={};return d[no.HTML]=a(f),d[no.CSS]=a(f),d[no.URL]=a(f),d[no.JS]=a(f),d[no.RESOURCE_URL]=a(d[no.URL]),{trustAs:s,getTrusted:u,valueOf:c}}]}function bn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>_r)throw to("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=F(no);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=m),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,function(t){return r.getTrusted(e,t)})};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return o(no,function(e,t){var n=yr(t);r[Ce("parse_as_"+n)]=function(t){return i(e,t)},r[Ce("get_trusted_"+n)]=function(t){return a(e,t)},r[Ce("trust_as_"+n)]=function(t){return s(e,t)}}),r}]}function wn(){this.$get=["$window","$document",function(e,t){var n,r,i={},o=p((/android (\d+)/.exec(yr((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},c=/^(Moz|webkit|ms)(?=[A-Z])/,u=s.body&&s.body.style,l=!1,f=!1;if(u){for(var d in u)if(r=c.exec(d)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in u&&"webkit"),l=!!("transition"in u||n+"Transition"in u),f=!!("animation"in u||n+"Animation"in u),!o||l&&f||(l=_(u.webkitTransition),f=_(u.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>o||a),hasEvent:function(e){if("input"===e&&11>=_r)return!1;if(b(i[e])){var t=s.createElement("div");i[e]="on"+e in t}return i[e]},csp:Ur(),vendorPrefix:n,transitions:l,animations:f,android:o}}]}function Sn(){this.$get=["$templateCache","$http","$q","$sce",function(e,t,n,r){function i(o,a){function s(e){if(!a)throw ki("tpload","Failed to load template: {0} (HTTP status: {1} {2})",o,e.status,e.statusText);return n.reject(e)}i.totalPendingRequests++,_(o)&&e.get(o)||(o=r.getTrustedResourceUrl(o));var c=t.defaults&&t.defaults.transformResponse;Lr(c)?c=c.filter(function(e){return e!==bt}):c===bt&&(c=null);var u={cache:e,transformResponse:c};return t.get(o,u)["finally"](function(){i.totalPendingRequests--}).then(function(t){return e.put(o,t.data),t.data},s)}return i.totalPendingRequests=0,i}]}function Cn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=e.getElementsByClassName("ng-binding"),i=[];return o(r,function(e){var r=Rr.element(e).data("$binding");r&&o(r,function(r){if(n){var o=new RegExp("(^|\\s)"+Pr(t)+"(\\s|\\||$)");o.test(r)&&i.push(e)}else-1!=r.indexOf(t)&&i.push(e)})}),i},r.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function _n(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,s,c){A(o)||(c=s,s=o,o=g);var u,l=q(arguments,3),f=w(c)&&!c,d=(f?r:n).defer(),p=d.promise;return u=t.defer(function(){try{d.resolve(o.apply(null,l))}catch(t){d.reject(t),i(t)}finally{delete a[p.$$timeoutId]}f||e.$apply()},s),p.$$timeoutId=u,a[u]=d,p}var a={};return o.cancel=function(e){return e&&e.$$timeoutId in a?(a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function En(e){var t=e;return _r&&(ro.setAttribute("href",t),t=ro.href),ro.setAttribute("href",t),{href:ro.href,protocol:ro.protocol?ro.protocol.replace(/:$/,""):"",host:ro.host,search:ro.search?ro.search.replace(/^\?/,""):"",hash:ro.hash?ro.hash.replace(/^#/,""):"",hostname:ro.hostname,port:ro.port,pathname:"/"===ro.pathname.charAt(0)?ro.pathname:"/"+ro.pathname}}function Tn(e){var t=_(e)?En(e):e;return t.protocol===io.protocol&&t.host===io.host}function An(){this.$get=v(e)}function In(e){function t(e){try{return decodeURIComponent(e)}catch(t){return e}}var r=e[0]||{},i={},o="";return function(){var e,a,s,c,u,l=r.cookie||"";if(l!==o)for(o=l,e=o.split("; "),i={},s=0;s<e.length;s++)a=e[s],c=a.indexOf("="),c>0&&(u=t(a.substring(0,c)),i[u]===n&&(i[u]=t(a.substring(c+1))));return i}}function kn(){this.$get=In}function xn(e){function t(r,i){if(S(r)){var a={};return o(r,function(e,n){a[n]=t(n,e)}),a}return e.factory(r+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",jn),t("date",Kn),t("filter",Bn),t("json",Wn),t("limitTo",Yn),t("lowercase",uo),t("number",$n),t("orderBy",Xn),t("uppercase",lo)}function Bn(){return function(e,t,n){if(!i(e)){if(null==e)return e;throw r("filter")("notarray","Expected array but received: {0}",e)}var o,a,s=Rn(t);switch(s){case"function":o=t;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=Nn(t,n,a);break;default:return e}return Array.prototype.filter.call(e,o)}}function Nn(e,t,n){var r,i=S(e)&&"$"in e;return t===!0?t=V:A(t)||(t=function(e,t){return b(e)?!1:null===e||null===t?e===t:S(t)||S(e)&&!y(e)?!1:(e=yr(""+e),t=yr(""+t),-1!==e.indexOf(t))}),r=function(r){return i&&!S(r)?Dn(r,e.$,t,!1):Dn(r,e,t,n)}}function Dn(e,t,n,r,i){var o=Rn(e),a=Rn(t);if("string"===a&&"!"===t.charAt(0))return!Dn(e,t.substring(1),n,r);if(Lr(e))return e.some(function(e){return Dn(e,t,n,r)});switch(o){case"object":var s;if(r){for(s in e)if("$"!==s.charAt(0)&&Dn(e[s],t,n,!0))return!0;return i?!1:Dn(e,t,n,!1)}if("object"===a){for(s in t){var c=t[s];if(!A(c)&&!b(c)){var u="$"===s,l=u?e:e[s];if(!Dn(l,c,n,u,u))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Rn(e){return null===e?"null":typeof e}function jn(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return b(n)&&(n=t.CURRENCY_SYM),b(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:Ln(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function $n(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Ln(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Ln(e,t,n,r,i){if(S(e))return"";var o=0>e;e=Math.abs(e);var a=e===1/0;if(!a&&!isFinite(e))return"";var s=e+"",c="",u=!1,l=[];if(a&&(c=""),!a&&-1!==s.indexOf("e")){var f=s.match(/([\d\.]+)e(-?)(\d+)/);f&&"-"==f[2]&&f[3]>i+1?e=0:(c=s,u=!0)}if(a||u)i>0&&1>e&&(c=e.toFixed(i),e=parseFloat(c));else{var d=(s.split(oo)[1]||"").length;b(i)&&(i=Math.min(Math.max(t.minFrac,d),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+-i);var p=(""+e).split(oo),h=p[0];p=p[1]||"";var g,m=0,v=t.lgSize,y=t.gSize;if(h.length>=v+y)for(m=h.length-v,g=0;m>g;g++)(m-g)%y===0&&0!==g&&(c+=n),c+=h.charAt(g);for(g=m;g<h.length;g++)(h.length-g)%v===0&&0!==g&&(c+=n),c+=h.charAt(g);for(;p.length<i;)p+="0";i&&"0"!==i&&(c+=r+p.substr(0,i))}return 0===e&&(o=!1),l.push(o?t.negPre:t.posPre,c,o?t.negSuf:t.posSuf),l.join("")}function Mn(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function On(e,t,n,r){return n=n||0,function(i){var o=i["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),Mn(o,t,r)}}function Pn(e,t){return function(n,r){var i=n["get"+e](),o=wr(t?"SHORT"+e:e);return r[o][i]}}function Un(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=Mn(Math[r>0?"floor":"ceil"](r/60),2)+Mn(Math.abs(r%60),2)}function Fn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function Vn(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function zn(e){return function(t){var n=Fn(t.getFullYear()),r=Vn(t),i=+r-+n,o=1+Math.round(i/6048e5);return Mn(o,e)}}function qn(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function Hn(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function Gn(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function Kn(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=p(t[9]+t[10]),o=p(t[9]+t[11])),a.call(r,p(t[1]),p(t[2])-1,p(t[3]));var c=p(t[4]||0)-i,u=p(t[5]||0)-o,l=p(t[6]||0),f=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,c,u,l,f),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,s,c="",u=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,_(n)&&(n=co.test(n)?p(n):t(n)),E(n)&&(n=new Date(n)),!T(n)||!isFinite(n.getTime()))return n;for(;r;)s=so.exec(r),s?(u=z(u,s,1),r=u.pop()):(u.push(r),r=null);var l=n.getTimezoneOffset();return i&&(l=Y(i,n.getTimezoneOffset()),n=Z(n,i,!0)),o(u,function(t){a=ao[t],c+=a?a(n,e.DATETIME_FORMATS,l):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}}function Wn(){return function(e,t){return b(t)&&(t=2),K(e,t)}}function Yn(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):p(t),isNaN(t)?e:(E(e)&&(e=e.toString()),Lr(e)||_(e)?(n=!n||isNaN(n)?0:p(n),n=0>n&&n>=-e.length?e.length+n:n,t>=0?e.slice(n,n+t):0===n?e.slice(t,e.length):e.slice(Math.max(0,n+t),n)):e)}}function Xn(e){function t(t,n){return n=n?-1:1,t.map(function(t){var r=1,i=m;if(A(t))i=t;else if(_(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(r="-"==t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(i=e(t),i.constant))){var o=i();i=function(e){return e[o]}}return{get:i,descending:r*n}})}function n(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function r(e,t){return"function"==typeof e.valueOf&&(e=e.valueOf(),n(e))?e:y(e)&&(e=e.toString(),n(e))?e:t}function o(e,t){var n=typeof e;return null===e?(n="string",e="null"):"string"===n?e=e.toLowerCase():"object"===n&&(e=r(e,t)),{value:e,type:n}}function a(e,t){var n=0;return e.type===t.type?e.value!==t.value&&(n=e.value<t.value?-1:1):n=e.type<t.type?-1:1,n}return function(e,n,r){function s(e,t){return{value:e,predicateValues:u.map(function(n){return o(n.get(e),t)})}}function c(e,t){for(var n=0,r=0,i=u.length;i>r&&!(n=a(e.predicateValues[r],t.predicateValues[r])*u[r].descending);++r);return n}if(!i(e))return e;Lr(n)||(n=[n]),0===n.length&&(n=["+"]);var u=t(n,r);u.push({get:function(){return{}},descending:r?-1:1});var l=Array.prototype.map.call(e,s);return l.sort(c),e=l.map(function(e){return e.value})}}function Zn(e){return A(e)&&(e={link:e}),e.restrict=e.restrict||"AC",v(e)}function Qn(e,t){e.$name=t}function Jn(e,t,r,i,a){var s=this,c=[],u=s.$$parentForm=e.parent().controller("form")||ho;s.$error={},s.$$success={},s.$pending=n,s.$name=a(t.name||t.ngForm||"")(r),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,u.$addControl(s),s.$rollbackViewValue=function(){o(c,function(e){e.$rollbackViewValue()})},s.$commitViewValue=function(){o(c,function(e){e.$commitViewValue()})},s.$addControl=function(e){pe(e.$name,"input"),c.push(e),e.$name&&(s[e.$name]=e)},s.$$renameControl=function(e,t){var n=e.$name;s[n]===e&&delete s[n],s[t]=e,e.$name=t},s.$removeControl=function(e){e.$name&&s[e.$name]===e&&delete s[e.$name],o(s.$pending,function(t,n){s.$setValidity(n,null,e)}),o(s.$error,function(t,n){s.$setValidity(n,null,e)}),o(s.$$success,function(t,n){s.$setValidity(n,null,e)}),P(c,e)},hr({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(r){var i=r.indexOf(n);-1===i&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(P(r,n),0===r.length&&delete e[t])},parentForm:u,$animate:i}),s.$setDirty=function(){i.removeClass(e,Xo),i.addClass(e,Zo),s.$dirty=!0,s.$pristine=!1,u.$setDirty()},s.$setPristine=function(){i.setClass(e,Xo,Zo+" "+go),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,o(c,function(e){e.$setPristine()})},s.$setUntouched=function(){o(c,function(e){e.$setUntouched()})},s.$setSubmitted=function(){i.addClass(e,go),s.$submitted=!0,u.$setSubmitted()}}function er(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function tr(e,t,n,r,i,o){nr(e,t,n,r,i,o),er(r)}function nr(e,t,n,r,i,o){var a=yr(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(e){s=!0}),t.on("compositionend",function(){s=!1,c()})}var c=function(e){if(u&&(o.defer.cancel(u),u=null),!s){var i=t.val(),c=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=Or(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,c)}};if(i.hasEvent("input"))t.on("input",c);else{var u,l=function(e,t,n){u||(u=o.defer(function(){u=null,t&&t.value===n||c(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||l(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",l)}t.on("change",c),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function rr(e,t){if(T(e))return e;if(_(e)){To.lastIndex=0;var n=To.exec(e);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,c=0,u=Fn(r),l=7*(i-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),c=t.getMilliseconds()),new Date(r,0,u.getDate()+l,o,a,s,c)}}return NaN}function ir(e,t){return function(n,r){var i,a;if(T(n))return n;if(_(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),bo.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n))return i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(i,function(e,n){n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function or(e,t,r,i){return function(o,a,s,c,u,l,f){function d(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function p(e){return w(e)?T(e)?e:r(e):n}ar(o,a,s,c),nr(o,a,s,c,u,l);var h,g=c&&c.$options&&c.$options.timezone;if(c.$$parserName=e,c.$parsers.push(function(e){if(c.$isEmpty(e))return null;if(t.test(e)){var i=r(e,h);return g&&(i=Z(i,g)),i}return n}),c.$formatters.push(function(e){if(e&&!T(e))throw ta("datefmt","Expected `{0}` to be a date",e);return d(e)?(h=e,h&&g&&(h=Z(h,g,!0)),f("date")(e,i,g)):(h=null,"")}),w(s.min)||s.ngMin){var m;c.$validators.min=function(e){return!d(e)||b(m)||r(e)>=m},s.$observe("min",function(e){m=p(e),c.$validate()})}if(w(s.max)||s.ngMax){var v;c.$validators.max=function(e){return!d(e)||b(v)||r(e)<=v},s.$observe("max",function(e){v=p(e),c.$validate()})}}}function ar(e,t,r,i){var o=t[0],a=i.$$hasNativeValidators=S(o.validity);a&&i.$parsers.push(function(e){var r=t.prop(vr)||{};return r.badInput&&!r.typeMismatch?n:e})}function sr(e,t,r,i,o,a){if(ar(e,t,r,i),nr(e,t,r,i,o,a),i.$$parserName="number",i.$parsers.push(function(e){return i.$isEmpty(e)?null:Co.test(e)?parseFloat(e):n}),i.$formatters.push(function(e){if(!i.$isEmpty(e)){if(!E(e))throw ta("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),w(r.min)||r.ngMin){var s;i.$validators.min=function(e){return i.$isEmpty(e)||b(s)||e>=s},r.$observe("min",function(e){w(e)&&!E(e)&&(e=parseFloat(e,10)),s=E(e)&&!isNaN(e)?e:n,i.$validate()})}if(w(r.max)||r.ngMax){var c;i.$validators.max=function(e){return i.$isEmpty(e)||b(c)||c>=e},r.$observe("max",function(e){w(e)&&!E(e)&&(e=parseFloat(e,10)),c=E(e)&&!isNaN(e)?e:n,i.$validate()})}}function cr(e,t,n,r,i,o){nr(e,t,n,r,i,o),er(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||wo.test(n)}}function ur(e,t,n,r,i,o){nr(e,t,n,r,i,o),er(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||So.test(n)}}function lr(e,t,n,r){b(n.name)&&t.attr("name",c());var i=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function fr(e,t,n,r,i){var o;if(w(r)){if(o=e(r),!o.constant)throw ta("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(t)}return i}function dr(e,t,n,r,i,o,a,s){var c=fr(s,e,"ngTrueValue",n.ngTrueValue,!0),u=fr(s,e,"ngFalseValue",n.ngFalseValue,!1),l=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",l),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return V(e,c)}),r.$parsers.push(function(e){return e?c:u})}function pr(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i==t[o])continue e;n.push(i)}return n}function i(e){var t=[];return Lr(e)?(o(e,function(e){t=t.concat(i(e))}),t):_(e)?e.split(" "):S(e)?(o(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):e}return{restrict:"AC",link:function(a,s,c){function u(e){var t=f(e,1);c.$addClass(t)}function l(e){var t=f(e,-1);c.$removeClass(t)}function f(e,t){var n=s.data("$classCounts")||me(),r=[];return o(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e))}),s.data("$classCounts",n),r.join(" ")}function d(e,t){var i=r(t,e),o=r(e,t);i=f(i,1),o=f(o,-1),i&&i.length&&n.addClass(s,i),o&&o.length&&n.removeClass(s,o)}function p(e){if(t===!0||a.$index%2===t){var n=i(e||[]);if(h){if(!V(e,h)){var r=i(h);d(r,n)}}else u(n)}h=F(e)}var h;a.$watch(c[e],p,!0),c.$observe("class",function(t){p(a.$eval(c[e]))}),"ngClass"!==e&&a.$watch("$index",function(n,r){var o=1&n;if(o!==(1&r)){var s=i(a.$eval(c[e]));o===t?u(s):l(s)}})}}}]}function hr(e){function t(e,t,c){t===n?r("$pending",e,c):i("$pending",e,c),R(t)?t?(f(s.$error,e,c),l(s.$$success,e,c)):(l(s.$error,e,c),f(s.$$success,e,c)):(f(s.$error,e,c),f(s.$$success,e,c)),s.$pending?(o(ea,!0),s.$valid=s.$invalid=n,a("",null)):(o(ea,!1),s.$valid=gr(s.$error),s.$invalid=!s.$valid,a("",s.$valid));var u;u=s.$pending&&s.$pending[e]?n:s.$error[e]?!1:s.$$success[e]?!0:null,a(e,u),d.$setValidity(e,u,s)}function r(e,t,n){s[e]||(s[e]={}),l(s[e],t,n)}function i(e,t,r){s[e]&&f(s[e],t,r),gr(s[e])&&(s[e]=n)}function o(e,t){t&&!u[e]?(p.addClass(c,e),u[e]=!0):!t&&u[e]&&(p.removeClass(c,e),u[e]=!1)}function a(e,t){e=e?"-"+ue(e,"-"):"",o(Wo+e,t===!0),o(Yo+e,t===!1)}var s=e.ctrl,c=e.$element,u={},l=e.set,f=e.unset,d=e.parentForm,p=e.$animate;u[Yo]=!(u[Wo]=c.hasClass(Wo)),s.$setValidity=t}function gr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var mr=/^\/(.+)\/([a-z]*)$/,vr="validity",yr=function(e){return _(e)?e.toLowerCase():e},br=Object.prototype.hasOwnProperty,wr=function(e){return _(e)?e.toUpperCase():e},Sr=function(e){return _(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Cr=function(e){return _(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(yr=Sr,wr=Cr);var _r,Er,Tr,Ar,Ir=[].slice,kr=[].splice,xr=[].push,Br=Object.prototype.toString,Nr=Object.getPrototypeOf,Dr=r("ng"),Rr=e.angular||(e.angular={}),jr=0;_r=t.documentMode,g.$inject=[],m.$inject=[];var $r,Lr=Array.isArray,Mr=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,Or=function(e){return _(e)?e.trim():e},Pr=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ur=function(){function e(){try{return new Function(""),!1}catch(e){return!0}}if(!w(Ur.rules)){var n=t.querySelector("[ng-csp]")||t.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");Ur.rules={noUnsafeEval:!r||-1!==r.indexOf("no-unsafe-eval"),noInlineStyle:!r||-1!==r.indexOf("no-inline-style")}}else Ur.rules={noUnsafeEval:e(),noInlineStyle:!1}}return Ur.rules},Fr=function(){if(w(Fr.name_))return Fr.name_;var e,n,r,i,o=Vr.length;for(n=0;o>n;++n)if(r=Vr[n],e=t.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return Fr.name_=i},Vr=["ng-","data-ng-","ng:","x-ng-"],zr=/[A-Z]/g,qr=!1,Hr=1,Gr=2,Kr=3,Wr=8,Yr=9,Xr=11,Zr={full:"1.4.5",major:1,minor:4,dot:5,codeName:"permanent-internship"};ke.expando="ng339";var Qr=ke.cache={},Jr=1,ei=function(e,t,n){e.addEventListener(t,n,!1)},ti=function(e,t,n){e.removeEventListener(t,n,!1)};ke._data=function(e){return this.cache[e[this.expando]]||{}};var ni=/([\:\-\_]+(.))/g,ri=/^moz([A-Z])/,ii={mouseleave:"mouseout",mouseenter:"mouseover"},oi=r("jqLite"),ai=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,si=/<|&#?\w+;/,ci=/<([\w:]+)/,ui=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,li={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};li.optgroup=li.option,li.tbody=li.tfoot=li.colgroup=li.caption=li.thead,li.th=li.td;var fi=ke.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===t.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),ke(e).on("load",r))},toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Er(e>=0?this[e]:this[this.length+e])},length:0,push:xr,sort:[].sort,splice:[].splice},di={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){di[yr(e)]=e});var pi={};o("input,select,option,textarea,button,form,details".split(","),function(e){pi[e]=!0});var hi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:je,removeData:De,hasData:Te},function(e,t){ke[t]=e}),o({data:je,inheritedData:Ue,scope:function(e){return Er.data(e,"$scope")||Ue(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Er.data(e,"$isolateScope")||Er.data(e,"$isolateScopeNoTemplate")},controller:Pe,injector:function(e){return Ue(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:$e,css:function(e,t,n){return t=Ce(t),w(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,r){var i=e.nodeType;if(i!==Kr&&i!==Gr&&i!==Wr){var o=yr(t);if(di[o]){if(!w(r))return e[t]||(e.attributes.getNamedItem(t)||g).specified?o:n;r?(e[t]=!0,e.setAttribute(t,o)):(e[t]=!1,e.removeAttribute(o))}else if(w(r))e.setAttribute(t,r);else if(e.getAttribute){var a=e.getAttribute(t,2);return null===a?n:a}}},prop:function(e,t,n){return w(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(b(t)){var n=e.nodeType;return n===Hr||n===Kr?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){
if(b(t)){if(e.multiple&&"select"===O(e)){var n=[];return o(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return b(t)?e.innerHTML:(Be(e,!0),void(e.innerHTML=t))},empty:Fe},function(e,t){ke.prototype[t]=function(t,r){var i,o,a=this.length;if(e!==Fe&&(2==e.length&&e!==$e&&e!==Pe?t:r)===n){if(S(t)){for(i=0;a>i;i++)if(e===je)e(this[i],t);else for(o in t)e(this[i],o,t[o]);return this}for(var s=e.$dv,c=s===n?Math.min(a,1):a,u=0;c>u;u++){var l=e(this[u],t,r);s=s?s+l:l}return s}for(i=0;a>i;i++)e(this[i],t,r);return this}}),o({removeData:De,on:function Na(e,t,n,r){if(w(r))throw oi("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Ee(e)){var i=Re(e,!0),o=i.events,a=i.handle;a||(a=i.handle=Ge(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],c=s.length;c--;){t=s[c];var u=o[t];u||(o[t]=[],"mouseenter"===t||"mouseleave"===t?Na(e,ii[t],function(e){var n=this,r=e.relatedTarget;(!r||r!==n&&!n.contains(r))&&a(e,t)}):"$destroy"!==t&&ei(e,t,a),u=o[t]),u.push(n)}}},off:Ne,one:function(e,t,n){e=Er(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;Be(e),o(new ke(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return o(e.childNodes,function(e){e.nodeType===Hr&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===Hr||n===Xr){t=new ke(t);for(var r=0,i=t.length;i>r;r++){var o=t[r];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===Hr){var n=e.firstChild;o(new ke(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=Er(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:Ve,detach:function(e){Ve(e,!0)},after:function(e,t){var n=e,r=e.parentNode;t=new ke(t);for(var i=0,o=t.length;o>i;i++){var a=t[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:Me,removeClass:Le,toggleClass:function(e,t,n){t&&o(t.split(" "),function(t){var r=n;b(r)&&(r=!$e(e,t)),(r?Me:Le)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Xr?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:xe,triggerHandler:function(e,t,n){var r,i,a,s=t.type||t,c=Re(e),u=c&&c.events,l=u&&u[s];l&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:g,type:s,target:e},t.type&&(r=f(r,t)),i=F(l),a=n?[r].concat(n):[r],o(i,function(t){r.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){ke.prototype[t]=function(t,n,r){for(var i,o=0,a=this.length;a>o;o++)b(i)?(i=e(this[o],t,n,r),w(i)&&(i=Er(i))):Oe(i,e(this[o],t,n,r));return w(i)?i:this},ke.prototype.bind=ke.prototype.on,ke.prototype.unbind=ke.prototype.off}),Ye.prototype={put:function(e,t){this[We(e,this.nextUid)]=t},get:function(e){return this[We(e,this.nextUid)]},remove:function(e){var t=this[e=We(e,this.nextUid)];return delete this[e],t}};var gi=[function(){this.$get=[function(){return Ye}]}],mi=/^[^\(]*\(\s*([^\)]*)\)/m,vi=/,/,yi=/^\s*(_?)(\S+?)\1\s*$/,bi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,wi=r("$injector");Qe.$$annotate=Ze;var Si=r("$animate"),Ci=1,_i="ng-animate",Ei=function(){this.$get=["$q","$$rAF",function(e,t){function n(){}return n.all=g,n.chain=g,n.prototype={end:g,cancel:g,resume:g,pause:g,complete:g,then:function(n,r){return e(function(e){t(function(){e()})}).then(n,r)}},n}]},Ti=function(){var e=new Ye,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function i(n,i,a){var s=e.get(n);s||(e.put(n,s={}),t.push(n));var c=function(e,t){var n=!1;return e&&(e=_(e)?e.split(" "):Lr(e)?e:[],o(e,function(e){e&&(n=!0,s[e]=t)})),n},u=c(i,!0),l=c(a,!1);!u&&!l||t.length>1||r.$$postDigest(function(){o(t,function(t){var n=e.get(t);if(n){var r=nt(t.attr("class")),i="",a="";o(n,function(e,t){var n=!!r[t];e!==n&&(e?i+=(i.length?" ":"")+t:a+=(a.length?" ":"")+t)}),o(t,function(e){i&&Me(e,i),a&&Le(e,a)}),e.remove(t)}}),t.length=0})}return{enabled:g,on:g,off:g,pin:g,push:function(e,t,r,o){return o&&o(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&i(e,r.addClass,r.removeClass),new n}}}]},Ai=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Si("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+_i+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw Si("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',_i)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=tt(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,o){return r=r&&Er(r),i=i&&Er(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",rt(o))},move:function(n,r,i,o){return r=r&&Er(r),i=i&&Er(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",rt(o))},leave:function(t,n){return e.push(t,"leave",rt(n),function(){t.remove()})},addClass:function(t,n,r){return r=rt(r),r.addClass=et(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=rt(r),r.removeClass=et(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=rt(i),i.addClass=et(i.addClass,n),i.removeClass=et(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,o){return o=rt(o),o.from=o.from?f(o.from,n):n,o.to=o.to?f(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=et(o.tempClasses,i),e.push(t,"animate",o)}}}]}],Ii=function(){this.$get=["$$rAF","$q",function(e,t){var n=function(){};return n.prototype={done:function(e){this.defer&&this.defer[e===!0?"reject":"resolve"]()},end:function(){this.done()},cancel:function(){this.done(!0)},getPromise:function(){return this.defer||(this.defer=t.defer()),this.defer.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)}},function(t,r){function i(){return e(function(){o(),a||s.done(),a=!0}),s}function o(){r.addClass&&(t.addClass(r.addClass),r.addClass=null),r.removeClass&&(t.removeClass(r.removeClass),r.removeClass=null),r.to&&(t.css(r.to),r.to=null)}r.from&&(t.css(r.from),r.from=null);var a,s=new n;return{start:i,end:i}}}]},ki=r("$compile");ct.$inject=["$provide","$$sanitizeUriProvider"];var xi=/^((?:x|data)[\:\-_])/i,Bi=r("$controller"),Ni=/^(\S+)(\s+as\s+(\w+))?$/,Di=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof Er&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},Ri="application/json",ji={"Content-Type":Ri+";charset=utf-8"},$i=/^\[|^\{(?!\{)/,Li={"[":/]$/,"{":/}$/},Mi=/^\)\]\}',?\n/,Oi=r("$http"),Pi=function(e){return function(){throw Oi("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",e)}},Ui=Rr.$interpolateMinErr=r("$interpolate");Ui.throwNoconcat=function(e){throw Ui("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},Ui.interr=function(e,t){return Ui("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Fi=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Vi={http:80,https:443,ftp:21},zi=r("$location"),qi={$$html5:!1,$$replace:!1,absUrl:Vt("$$absUrl"),url:function(e){if(b(e))return this.$$url;var t=Fi.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Vt("$$protocol"),host:Vt("$$host"),port:Vt("$$port"),path:zt("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(_(e)||E(e))e=e.toString(),this.$$search=ee(e);else{if(!S(e))throw zi("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=U(e,{}),o(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:b(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:zt("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};o([Ft,Ut,Pt],function(e){e.prototype=Object.create(qi),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Pt||!this.$$html5)throw zi("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=b(t)?null:t,this}});var Hi=r("$parse"),Gi=Function.prototype.call,Ki=Function.prototype.apply,Wi=Function.prototype.bind,Yi=me();o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Yi[e]=!0});var Xi={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Zi=function(e){this.options=e};Zi.prototype={constructor:Zi,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=Yi[t],o=Yi[n],a=Yi[r];if(i||o||a){var s=a?r:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||""===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=w(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Hi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=yr(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=Xi[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var Qi=function(e,t){this.lexer=e,this.options=t};Qi.Program="Program",Qi.ExpressionStatement="ExpressionStatement",Qi.AssignmentExpression="AssignmentExpression",Qi.ConditionalExpression="ConditionalExpression",Qi.LogicalExpression="LogicalExpression",Qi.BinaryExpression="BinaryExpression",Qi.UnaryExpression="UnaryExpression",Qi.CallExpression="CallExpression",Qi.MemberExpression="MemberExpression",Qi.Identifier="Identifier",Qi.Literal="Literal",Qi.ArrayExpression="ArrayExpression",Qi.Property="Property",Qi.ObjectExpression="ObjectExpression",Qi.ThisExpression="ThisExpression",Qi.NGValueParameter="NGValueParameter",Qi.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Qi.Program,body:e}},expressionStatement:function(){return{type:Qi.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();return this.expect("=")&&(e={type:Qi.AssignmentExpression,left:e,right:this.assignment(),operator:"="}),e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Qi.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Qi.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Qi.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Qi.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Qi.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Qi.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Qi.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Qi.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.constants.hasOwnProperty(this.peek().text)?e=U(this.constants[this.consume().text]):this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:Qi.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Qi.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Qi.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:Qi.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.expression());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Qi.Identifier,name:e.text}},constant:function(){return{type:Qi.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Qi.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:Qi.Property,kind:"init"},this.peek().constant?e.key=this.constant():this.peek().identifier?e.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),e.value=this.expression(),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Qi.ObjectExpression,properties:t}},throwError:function(e,t){throw Hi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Hi("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Hi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===r||a===i||!t&&!n&&!r&&!i)return o}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},constants:{"true":{type:Qi.Literal,value:!0},"false":{type:Qi.Literal,value:!1},"null":{type:Qi.Literal,value:null},undefined:{type:Qi.Literal,value:n},"this":{type:Qi.ThisExpression}}},on.prototype={compile:function(e,t){var r=this,i=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Qt(i,r.$filter);var a,s="";if(this.stage="assign",a=tn(i)){this.state.computing="assign";var c=this.nextId();this.recurse(a,c),s="fn.assign="+this.generateFunction("assign","s,v,l")}var u=Jt(i.body);r.stage="inputs",o(u,function(e,t){var n="fn"+t;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var i=r.nextId();r.recurse(e,i),r.return_(i),r.state.inputs.push(n),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(i);var l='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+s+this.watchFns()+"return fn;",f=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",l)(this.$filter,Gt,Kt,Wt,Yt,Xt,e);return this.state=this.stage=n,f.literal=nn(i),f.constant=rn(i),f},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return o(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return o(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,r,i,a,s){var c,u,l,f,d=this;if(i=i||g,!s&&w(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,r,i,a,!0));switch(e.type){case Qi.Program:o(e.body,function(t,r){d.recurse(t.expression,n,n,function(e){u=e}),r!==e.body.length-1?d.current().body.push(u,";"):d.return_(u)});break;case Qi.Literal:f=this.escape(e.value),this.assign(t,f),i(f);break;case Qi.UnaryExpression:this.recurse(e.argument,n,n,function(e){u=e}),f=e.operator+"("+this.ifDefined(u,0)+")",this.assign(t,f),i(f);break;case Qi.BinaryExpression:this.recurse(e.left,n,n,function(e){c=e}),this.recurse(e.right,n,n,function(e){u=e}),f="+"===e.operator?this.plus(c,u):"-"===e.operator?this.ifDefined(c,0)+e.operator+this.ifDefined(u,0):"("+c+")"+e.operator+"("+u+")",this.assign(t,f),i(f);break;case Qi.LogicalExpression:t=t||this.nextId(),d.recurse(e.left,t),d.if_("&&"===e.operator?t:d.not(t),d.lazyRecurse(e.right,t)),i(t);break;case Qi.ConditionalExpression:t=t||this.nextId(),d.recurse(e.test,t),d.if_(t,d.lazyRecurse(e.alternate,t),d.lazyRecurse(e.consequent,t)),i(t);break;case Qi.Identifier:t=t||this.nextId(),r&&(r.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),r.computed=!1,r.name=e.name),Gt(e.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",e.name)),function(){d.if_("inputs"===d.stage||"s",function(){a&&1!==a&&d.if_(d.not(d.nonComputedMember("s",e.name)),d.lazyAssign(d.nonComputedMember("s",e.name),"{}")),d.assign(t,d.nonComputedMember("s",e.name))})},t&&d.lazyAssign(t,d.nonComputedMember("l",e.name))),(d.state.expensiveChecks||sn(e.name))&&d.addEnsureSafeObject(t),i(t);break;case Qi.MemberExpression:c=r&&(r.context=this.nextId())||this.nextId(),t=t||this.nextId(),d.recurse(e.object,c,n,function(){d.if_(d.notNull(c),function(){e.computed?(u=d.nextId(),d.recurse(e.property,u),d.addEnsureSafeMemberName(u),a&&1!==a&&d.if_(d.not(d.computedMember(c,u)),d.lazyAssign(d.computedMember(c,u),"{}")),f=d.ensureSafeObject(d.computedMember(c,u)),d.assign(t,f),r&&(r.computed=!0,r.name=u)):(Gt(e.property.name),a&&1!==a&&d.if_(d.not(d.nonComputedMember(c,e.property.name)),d.lazyAssign(d.nonComputedMember(c,e.property.name),"{}")),f=d.nonComputedMember(c,e.property.name),(d.state.expensiveChecks||sn(e.property.name))&&(f=d.ensureSafeObject(f)),d.assign(t,f),r&&(r.computed=!1,r.name=e.property.name))},function(){d.assign(t,"undefined")}),i(t)},!!a);break;case Qi.CallExpression:t=t||this.nextId(),e.filter?(u=d.filter(e.callee.name),l=[],o(e.arguments,function(e){var t=d.nextId();d.recurse(e,t),l.push(t)}),f=u+"("+l.join(",")+")",d.assign(t,f),i(t)):(u=d.nextId(),c={},l=[],d.recurse(e.callee,u,c,function(){d.if_(d.notNull(u),function(){d.addEnsureSafeFunction(u),o(e.arguments,function(e){d.recurse(e,d.nextId(),n,function(e){l.push(d.ensureSafeObject(e))})}),c.name?(d.state.expensiveChecks||d.addEnsureSafeObject(c.context),f=d.member(c.context,c.name,c.computed)+"("+l.join(",")+")"):f=u+"("+l.join(",")+")",f=d.ensureSafeObject(f),d.assign(t,f)},function(){d.assign(t,"undefined")}),i(t)}));break;case Qi.AssignmentExpression:if(u=this.nextId(),c={},!en(e.left))throw Hi("lval","Trying to assing a value to a non l-value");this.recurse(e.left,n,c,function(){d.if_(d.notNull(c.context),function(){d.recurse(e.right,u),d.addEnsureSafeObject(d.member(c.context,c.name,c.computed)),f=d.member(c.context,c.name,c.computed)+e.operator+u,d.assign(t,f),i(t||f)})},1);break;case Qi.ArrayExpression:l=[],o(e.elements,function(e){d.recurse(e,d.nextId(),n,function(e){l.push(e)})}),f="["+l.join(",")+"]",this.assign(t,f),i(f);break;case Qi.ObjectExpression:l=[],o(e.properties,function(e){d.recurse(e.value,d.nextId(),n,function(t){l.push(d.escape(e.key.type===Qi.Identifier?e.key.name:""+e.key.value)+":"+t)})}),f="{"+l.join(",")+"}",this.assign(t,f),i(f);break;case Qi.ThisExpression:this.assign(t,"s"),i("s");break;case Qi.NGValueParameter:this.assign(t,"v"),i("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){return e?(this.current().body.push(e,"=",t,";"),e):void 0},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return e+"."+t},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},lazyRecurse:function(e,t,n,r,i,o){var a=this;return function(){a.recurse(e,t,n,r,i,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(_(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(E(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw Hi("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},an.prototype={compile:function(e,t){var n=this,r=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,Qt(r,n.$filter);var i,a;(i=tn(r))&&(a=this.recurse(i));var s,c=Jt(r.body);c&&(s=[],o(c,function(e,t){var r=n.recurse(e);e.input=r,s.push(r),e.watchId=t}));var u=[];o(r.body,function(e){u.push(n.recurse(e.expression))});var l=0===r.body.length?function(){}:1===r.body.length?u[0]:function(e,t){var n;return o(u,function(r){n=r(e,t)}),n};return a&&(l.assign=function(e,t,n){return a(e,n,t)}),s&&(l.inputs=s),l.literal=nn(r),l.constant=rn(r),l},recurse:function(e,t,r){var i,a,s,c=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Qi.Literal:return this.value(e.value,t);case Qi.UnaryExpression:return a=this.recurse(e.argument),this["unary"+e.operator](a,t);case Qi.BinaryExpression:return i=this.recurse(e.left),a=this.recurse(e.right),this["binary"+e.operator](i,a,t);case Qi.LogicalExpression:return i=this.recurse(e.left),a=this.recurse(e.right),this["binary"+e.operator](i,a,t);case Qi.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case Qi.Identifier:return Gt(e.name,c.expression),c.identifier(e.name,c.expensiveChecks||sn(e.name),t,r,c.expression);case Qi.MemberExpression:return i=this.recurse(e.object,!1,!!r),e.computed||(Gt(e.property.name,c.expression),a=e.property.name),e.computed&&(a=this.recurse(e.property)),e.computed?this.computedMember(i,a,t,r,c.expression):this.nonComputedMember(i,a,c.expensiveChecks,t,r,c.expression);case Qi.CallExpression:return s=[],o(e.arguments,function(e){s.push(c.recurse(e))}),e.filter&&(a=this.$filter(e.callee.name)),e.filter||(a=this.recurse(e.callee,!0)),e.filter?function(e,r,i,o){for(var c=[],u=0;u<s.length;++u)c.push(s[u](e,r,i,o));var l=a.apply(n,c,o);return t?{context:n,name:n,value:l}:l}:function(e,n,r,i){var o,u=a(e,n,r,i);if(null!=u.value){Kt(u.context,c.expression),Wt(u.value,c.expression);for(var l=[],f=0;f<s.length;++f)l.push(Kt(s[f](e,n,r,i),c.expression));o=Kt(u.value.apply(u.context,l),c.expression)}return t?{value:o}:o};case Qi.AssignmentExpression:return i=this.recurse(e.left,!0,1),a=this.recurse(e.right),function(e,n,r,o){var s=i(e,n,r,o),u=a(e,n,r,o);return Kt(s.value,c.expression),s.context[s.name]=u,t?{value:u}:u};case Qi.ArrayExpression:return s=[],o(e.elements,function(e){s.push(c.recurse(e))}),function(e,n,r,i){for(var o=[],a=0;a<s.length;++a)o.push(s[a](e,n,r,i));return t?{value:o}:o};case Qi.ObjectExpression:return s=[],o(e.properties,function(e){s.push({key:e.key.type===Qi.Identifier?e.key.name:""+e.key.value,value:c.recurse(e.value)})}),function(e,n,r,i){for(var o={},a=0;a<s.length;++a)o[s[a].key]=s[a].value(e,n,r,i);return t?{value:o}:o};case Qi.ThisExpression:return function(e){return t?{value:e}:e};case Qi.NGValueParameter:return function(e,n,r,i){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=w(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=w(a)?-a:0,t?{value:a}:a}},"unary!":function(e,t){return function(n,r,i,o){var a=!e(n,r,i,o);return t?{value:a}:a}},"binary+":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),c=t(r,i,o,a),u=Xt(s,c);return n?{value:u}:u}},"binary-":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),c=t(r,i,o,a),u=(w(s)?s:0)-(w(c)?c:0);return n?{value:u}:u}},"binary*":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)*t(r,i,o,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)/t(r,i,o,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)%t(r,i,o,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)===t(r,i,o,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!==t(r,i,o,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)==t(r,i,o,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!=t(r,i,o,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<t(r,i,o,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>t(r,i,o,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<=t(r,i,o,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>=t(r,i,o,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)&&t(r,i,o,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)||t(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,o,a,s){var c=e(i,o,a,s)?t(i,o,a,s):n(i,o,a,s);return r?{value:c}:c}},value:function(e,t){return function(){return t?{context:n,name:n,value:e}:e}},identifier:function(e,t,r,i,o){return function(a,s,c,u){var l=s&&e in s?s:a;i&&1!==i&&l&&!l[e]&&(l[e]={});var f=l?l[e]:n;return t&&Kt(f,o),r?{context:l,name:e,value:f}:f}},computedMember:function(e,t,n,r,i){return function(o,a,s,c){var u,l,f=e(o,a,s,c);return null!=f&&(u=t(o,a,s,c),Gt(u,i),r&&1!==r&&f&&!f[u]&&(f[u]={}),l=f[u],Kt(l,i)),n?{context:f,name:u,value:l}:l}},nonComputedMember:function(e,t,r,i,o,a){return function(s,c,u,l){var f=e(s,c,u,l);o&&1!==o&&f&&!f[t]&&(f[t]={});var d=null!=f?f[t]:n;return(r||sn(t))&&Kt(d,a),i?{context:f,name:t,value:d}:d}},inputs:function(e,t){return function(n,r,i,o){return o?o[t]:e(n,r,i)}}};var Ji=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new Qi(this.lexer),this.astCompiler=n.csp?new an(this.ast,t):new on(this.ast,t)};Ji.prototype={constructor:Ji,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var eo=(me(),me(),Object.prototype.valueOf),to=r("$sce"),no={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ki=r("$compile"),ro=t.createElement("a"),io=En(e.location.href);In.$inject=["$document"],xn.$inject=["$provide"],jn.$inject=["$locale"],$n.$inject=["$locale"];var oo=".",ao={yyyy:On("FullYear",4),yy:On("FullYear",2,0,!0),y:On("FullYear",1),MMMM:Pn("Month"),MMM:Pn("Month",!0),MM:On("Month",2,1),M:On("Month",1,1),dd:On("Date",2),d:On("Date",1),HH:On("Hours",2),H:On("Hours",1),hh:On("Hours",2,-12),h:On("Hours",1,-12),mm:On("Minutes",2),m:On("Minutes",1),ss:On("Seconds",2),
s:On("Seconds",1),sss:On("Milliseconds",3),EEEE:Pn("Day"),EEE:Pn("Day",!0),a:qn,Z:Un,ww:zn(2),w:zn(1),G:Hn,GG:Hn,GGG:Hn,GGGG:Gn},so=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,co=/^\-?\d+$/;Kn.$inject=["$locale"];var uo=v(yr),lo=v(wr);Xn.$inject=["$parse"];var fo=v({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Br.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),po={};o(di,function(e,t){function n(e,n,i){e.$watch(i[r],function(e){i.$set(t,!!e)})}if("multiple"!=e){var r=ut("ng-"+t),i=n;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),po[r]=function(){return{restrict:"A",priority:100,link:i}}}}),o(hi,function(e,t){po[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"==r.ngPattern.charAt(0)){var i=r.ngPattern.match(mr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),o(["src","srcset","href"],function(e){var t=ut("ng-"+e);po[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===Br.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){return t?(i.$set(a,t),void(_r&&o&&r.prop(o,i[a]))):void("href"===e&&i.$set(a,null))})}}}});var ho={$addControl:g,$$renameControl:Qn,$removeControl:g,$setValidity:g,$setDirty:g,$setPristine:g,$setSubmitted:g},go="ng-submitted";Jn.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var mo=function(e){return["$timeout","$parse",function(t,r){function i(e){return""===e?r('this[""]').assign:r(e).assign||g}var o={name:"form",restrict:e?"EAC":"E",controller:Jn,compile:function(r,o){r.addClass(Xo).addClass(Wo);var a=o.name?"name":e&&o.ngForm?"ngForm":!1;return{pre:function(e,r,o,s){if(!("action"in o)){var c=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};ei(r[0],"submit",c),r.on("$destroy",function(){t(function(){ti(r[0],"submit",c)},0,!1)})}var u=s.$$parentForm,l=a?i(s.$name):g;a&&(l(e,s),o.$observe(a,function(t){s.$name!==t&&(l(e,n),u.$$renameControl(s,t),(l=i(s.$name))(e,s))})),r.on("$destroy",function(){u.$removeControl(s),l(e,n),f(s,ho)})}}}};return o}]},vo=mo(),yo=mo(!0),bo=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,wo=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,So=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Co=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,_o=/^(\d{4})-(\d{2})-(\d{2})$/,Eo=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,To=/^(\d{4})-W(\d\d)$/,Ao=/^(\d{4})-(\d\d)$/,Io=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ko={text:tr,date:or("date",_o,ir(_o,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":or("datetimelocal",Eo,ir(Eo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:or("time",Io,ir(Io,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:or("week",To,rr,"yyyy-Www"),month:or("month",Ao,ir(Ao,["yyyy","MM"]),"yyyy-MM"),number:sr,url:cr,email:ur,radio:lr,checkbox:dr,hidden:g,button:g,submit:g,reset:g,file:g},xo=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(ko[yr(a.type)]||ko.text)(i,o,a,s[0],t,e,n,r)}}}}],Bo=/^(true|false|\d+)$/,No=function(){return{restrict:"A",priority:100,compile:function(e,t){return Bo.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Do=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,r,i){e.$$addBindingInfo(r,i.ngBind),r=r[0],t.$watch(i.ngBind,function(e){r.textContent=e===n?"":e})}}}}],Ro=["$interpolate","$compile",function(e,t){return{compile:function(r){return t.$$addBindingClass(r),function(r,i,o){var a=e(i.attr(o.$attr.ngBindTemplate));t.$$addBindingInfo(i,a.expressions),i=i[0],o.$observe("ngBindTemplate",function(e){i.textContent=e===n?"":e})}}}}],jo=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var o=t(i.ngBindHtml),a=t(i.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(a,function(){r.html(e.getTrustedHtml(o(t))||"")})}}}}],$o=v({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Lo=pr("",!0),Mo=pr("Odd",0),Oo=pr("Even",1),Po=Zn({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),Uo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Fo={},Vo={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=ut("ng-"+e);Fo[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[t],null,!0);return function(t,n){n.on(e,function(n){var i=function(){a(t,{$event:n})};Vo[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var zo=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,c,u;n.$watch(i.ngIf,function(n){n?c||a(function(n,o){c=o,n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},e.enter(n,r.parent(),r)}):(u&&(u.remove(),u=null),c&&(c.$destroy(),c=null),s&&(u=ge(s.clone),e.leave(u).then(function(){u=null}),s=null))})}}}],qo=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Rr.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,c,u,l){var f,d,p,h=0,g=function(){d&&(d.remove(),d=null),f&&(f.$destroy(),f=null),p&&(n.leave(p).then(function(){d=null}),d=p,p=null)};r.$watch(o,function(o){var c=function(){!w(s)||s&&!r.$eval(s)||t()},d=++h;o?(e(o,!0).then(function(e){if(d===h){var t=r.$new();u.template=e;var s=l(t,function(e){g(),n.enter(e,null,i).then(c)});f=t,p=s,f.$emit("$includeContentLoaded",o),r.$eval(a)}},function(){d===h&&(g(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(g(),u.template=null)})}}}}],Ho=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){return/SVG/.test(r[0].toString())?(r.empty(),void e(Ae(o.template,t).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(o.template),void e(r.contents())(n))}}}],Go=Zn({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Ko=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,i){var a=t.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,c=s?Or(a):a,u=function(e){if(!b(e)){var t=[];return e&&o(e.split(c),function(e){e&&t.push(s?Or(e):e)}),t}};i.$parsers.push(u),i.$formatters.push(function(e){return Lr(e)?e.join(a):n}),i.$isEmpty=function(e){return!e||!e.length}}}},Wo="ng-valid",Yo="ng-invalid",Xo="ng-pristine",Zo="ng-dirty",Qo="ng-untouched",Jo="ng-touched",ea="ng-pending",ta=r("ngModel"),na=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,r,i,a,s,c,u,l,f){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=f(r.name||"",!1)(e);var d,p=a(r.ngModel),h=p.assign,m=p,v=h,y=null,S=this;this.$$setOptions=function(e){if(S.$options=e,e&&e.getterSetter){var t=a(r.ngModel+"()"),n=a(r.ngModel+"($$$p)");m=function(e){var n=p(e);return A(n)&&(n=t(e)),n},v=function(e,t){A(p(e))?n(e,{$$$p:S.$modelValue}):h(e,S.$modelValue)}}else if(!p.assign)throw ta("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,Q(i))},this.$render=g,this.$isEmpty=function(e){return b(e)||""===e||null===e||e!==e};var C=i.inheritedData("$formController")||ho,_=0;hr({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:C,$animate:s}),this.$setPristine=function(){S.$dirty=!1,S.$pristine=!0,s.removeClass(i,Zo),s.addClass(i,Xo)},this.$setDirty=function(){S.$dirty=!0,S.$pristine=!1,s.removeClass(i,Xo),s.addClass(i,Zo),C.$setDirty()},this.$setUntouched=function(){S.$touched=!1,S.$untouched=!0,s.setClass(i,Qo,Jo)},this.$setTouched=function(){S.$touched=!0,S.$untouched=!1,s.setClass(i,Jo,Qo)},this.$rollbackViewValue=function(){c.cancel(y),S.$viewValue=S.$$lastCommittedViewValue,S.$render()},this.$validate=function(){if(!E(S.$modelValue)||!isNaN(S.$modelValue)){var e=S.$$lastCommittedViewValue,t=S.$$rawModelValue,r=S.$valid,i=S.$modelValue,o=S.$options&&S.$options.allowInvalid;S.$$runValidators(t,e,function(e){o||r===e||(S.$modelValue=e?t:n,S.$modelValue!==i&&S.$$writeModelToScope())})}},this.$$runValidators=function(e,t,r){function i(){var e=S.$$parserName||"parse";return d!==n?(d||(o(S.$validators,function(e,t){c(t,null)}),o(S.$asyncValidators,function(e,t){c(t,null)})),c(e,d),d):(c(e,null),!0)}function a(){var n=!0;return o(S.$validators,function(r,i){var o=r(e,t);n=n&&o,c(i,o)}),n?!0:(o(S.$asyncValidators,function(e,t){c(t,null)}),!1)}function s(){var r=[],i=!0;o(S.$asyncValidators,function(o,a){var s=o(e,t);if(!j(s))throw ta("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);c(a,n),r.push(s.then(function(){c(a,!0)},function(e){i=!1,c(a,!1)}))}),r.length?l.all(r).then(function(){u(i)},g):u(!0)}function c(e,t){f===_&&S.$setValidity(e,t)}function u(e){f===_&&r(e)}_++;var f=_;return i()&&a()?void s():void u(!1)},this.$commitViewValue=function(){var e=S.$viewValue;c.cancel(y),(S.$$lastCommittedViewValue!==e||""===e&&S.$$hasNativeValidators)&&(S.$$lastCommittedViewValue=e,S.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){S.$modelValue!==a&&S.$$writeModelToScope()}var r=S.$$lastCommittedViewValue,i=r;if(d=b(i)?n:!0)for(var o=0;o<S.$parsers.length;o++)if(i=S.$parsers[o](i),b(i)){d=!1;break}E(S.$modelValue)&&isNaN(S.$modelValue)&&(S.$modelValue=m(e));var a=S.$modelValue,s=S.$options&&S.$options.allowInvalid;S.$$rawModelValue=i,s&&(S.$modelValue=i,t()),S.$$runValidators(i,S.$$lastCommittedViewValue,function(e){s||(S.$modelValue=e?i:n,t())})},this.$$writeModelToScope=function(){v(e,S.$modelValue),o(S.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){S.$viewValue=e,(!S.$options||S.$options.updateOnDefault)&&S.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,i=S.$options;i&&w(i.debounce)&&(n=i.debounce,E(n)?r=n:E(n[t])?r=n[t]:E(n["default"])&&(r=n["default"])),c.cancel(y),r?y=c(function(){S.$commitViewValue()},r):u.$$phase?S.$commitViewValue():e.$apply(function(){S.$commitViewValue()})},e.$watch(function(){var t=m(e);if(t!==S.$modelValue&&(S.$modelValue===S.$modelValue||t===t)){S.$modelValue=S.$$rawModelValue=t,d=n;for(var r=S.$formatters,i=r.length,o=t;i--;)o=r[i](o);S.$viewValue!==o&&(S.$viewValue=S.$$lastCommittedViewValue=o,S.$render(),S.$$runValidators(t,o,g))}return t})}],ra=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:na,priority:1,compile:function(t){return t.addClass(Xo).addClass(Qo).addClass(Wo),{pre:function(e,t,n,r){var i=r[0],o=r[1]||ho;i.$$setOptions(r[2]&&r[2].$options),o.$addControl(i),n.$observe("name",function(e){i.$name!==e&&o.$$renameControl(i,e)}),e.$on("$destroy",function(){o.$removeControl(i)})},post:function(t,n,r,i){var o=i[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(e){o.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(n){o.$touched||(e.$$phase?t.$evalAsync(o.$setTouched):t.$apply(o.$setTouched))})}}}}}],ia=/(\s+|^)default(\s+|$)/,oa=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var r=this;this.$options=U(e.$eval(t.ngModelOptions)),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=Or(this.$options.updateOn.replace(ia,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},aa=Zn({terminal:!0,priority:1e3}),sa=r("ngOptions"),ca=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ua=["$compile","$parse",function(e,n){function r(e,t,r){function o(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function a(e){var t;if(!u&&i(e))t=e;else{t=[];for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n)}return t}var s=e.match(ca);if(!s)throw sa("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Q(t));var c=s[5]||s[7],u=s[6],l=/ as /.test(s[0])&&s[1],f=s[9],d=n(s[2]?s[1]:c),p=l&&n(l),h=p||d,g=f&&n(f),m=f?function(e,t){return g(r,t)}:function(e){return We(e)},v=function(e,t){return m(e,_(e,t))},y=n(s[2]||s[1]),b=n(s[3]||""),w=n(s[4]||""),S=n(s[8]),C={},_=u?function(e,t){return C[u]=t,C[c]=e,C}:function(e){return C[c]=e,C};return{trackBy:f,getTrackByValue:v,getWatchables:n(S,function(e){var t=[];e=e||[];for(var n=a(e),i=n.length,o=0;i>o;o++){var c=e===n?o:n[o],u=(e[c],_(e[c],c)),l=m(e[c],u);if(t.push(l),s[2]||s[1]){var f=y(r,u);t.push(f)}if(s[4]){var d=w(r,u);t.push(d)}}return t}),getOptions:function(){for(var e=[],t={},n=S(r)||[],i=a(n),s=i.length,c=0;s>c;c++){var u=n===i?c:i[c],l=n[u],d=_(l,u),p=h(r,d),g=m(p,d),C=y(r,d),E=b(r,d),T=w(r,d),A=new o(g,p,C,E,T);e.push(A),t[g]=A}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[v(e)]},getViewValueFromOption:function(e){return f?Rr.copy(e.viewValue):e.viewValue}}}}}var a=t.createElement("option"),s=t.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(t,n,i,c){function u(e,t){e.element=t,t.disabled=e.disabled,e.value!==t.value&&(t.value=e.selectValue),e.label!==t.label&&(t.label=e.label,t.textContent=e.label)}function l(e,t,n,r){var i;return t&&yr(t.nodeName)===n?i=t:(i=r.cloneNode(!1),t?e.insertBefore(i,t):e.appendChild(i)),i}function f(e){for(var t;e;)t=e.nextSibling,Ve(e),e=t}function d(e){var t=g&&g[0],n=C&&C[0];if(t||n)for(;e&&(e===t||e===n);)e=e.nextSibling;return e}function p(){var e=_&&m.readValue();_=E.getOptions();var t={},r=n[0].firstChild;if(S&&n.prepend(g),r=d(r),_.items.forEach(function(e){var i,o,c;e.group?(i=t[e.group],i||(o=l(n[0],r,"optgroup",s),r=o.nextSibling,o.label=e.group,i=t[e.group]={groupElement:o,currentOptionElement:o.firstChild}),c=l(i.groupElement,i.currentOptionElement,"option",a),u(e,c),i.currentOptionElement=c.nextSibling):(c=l(n[0],r,"option",a),u(e,c),r=c.nextSibling)}),Object.keys(t).forEach(function(e){f(t[e].currentOptionElement)}),f(r),h.$render(),!h.$isEmpty(e)){var i=m.readValue();(E.trackBy?V(e,i):e===i)||(h.$setViewValue(i),h.$render())}}var h=c[1];if(h){for(var g,m=c[0],v=i.multiple,y=0,b=n.children(),w=b.length;w>y;y++)if(""===b[y].value){g=b.eq(y);break}var S=!!g,C=Er(a.cloneNode(!1));C.val("?");var _,E=r(i.ngOptions,n,t),T=function(){S||n.prepend(g),n.val(""),g.prop("selected",!0),g.attr("selected",!0)},A=function(){S||g.remove()},I=function(){n.prepend(C),n.val("?"),C.prop("selected",!0),C.attr("selected",!0)},k=function(){C.remove()};v?(h.$isEmpty=function(e){return!e||0===e.length},m.writeValue=function(e){_.items.forEach(function(e){e.element.selected=!1}),e&&e.forEach(function(e){var t=_.getOptionFromViewValue(e);t&&!t.disabled&&(t.element.selected=!0)})},m.readValue=function(){var e=n.val()||[],t=[];return o(e,function(e){var n=_.selectValueMap[e];n&&!n.disabled&&t.push(_.getViewValueFromOption(n))}),t},E.trackBy&&t.$watchCollection(function(){return Lr(h.$viewValue)?h.$viewValue.map(function(e){return E.getTrackByValue(e)}):void 0},function(){h.$render()})):(m.writeValue=function(e){var t=_.getOptionFromViewValue(e);t&&!t.disabled?n[0].value!==t.selectValue&&(k(),A(),n[0].value=t.selectValue,t.element.selected=!0,t.element.setAttribute("selected","selected")):null===e||S?(k(),T()):(A(),I())},m.readValue=function(){var e=_.selectValueMap[n.val()];return e&&!e.disabled?(A(),k(),_.getViewValueFromOption(e)):null},E.trackBy&&t.$watch(function(){return E.getTrackByValue(h.$viewValue)},function(){h.$render()})),S?(g.remove(),e(g)(t),g.removeClass("ng-scope")):g=Er(a.cloneNode(!1)),p(),t.$watchCollection(E.getWatchables,p)}}}}],la=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,s,c){function u(e){s.text(e||"")}var l,f=c.count,d=c.$attr.when&&s.attr(c.$attr.when),p=c.offset||0,h=a.$eval(d)||{},m={},v=t.startSymbol(),y=t.endSymbol(),w=v+f+"-"+p+y,S=Rr.noop;o(c,function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+yr(n[2]);h[r]=s.attr(c.$attr[t])}}),o(h,function(e,n){m[n]=t(e.replace(r,w))}),a.$watch(f,function(t){var r=parseFloat(t),i=isNaN(r);if(i||r in h||(r=e.pluralCat(r-p)),r!==l&&!(i&&E(l)&&isNaN(l))){S();var o=m[r];b(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+d),S=g,u()):S=a.$watch(o,u),l=r}})}}}],fa=["$parse","$animate",function(e,a){var s="$$NG_REMOVED",c=r("ngRepeat"),u=function(e,t,n,r,i,o,a){e[n]=r,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},l=function(e){return e.clone[0]},f=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,d){var p=d.ngRepeat,h=t.createComment(" end ngRepeat: "+p+" "),g=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!g)throw c("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var m=g[1],v=g[2],y=g[3],b=g[4];if(g=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!g)throw c("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var w=g[3]||g[1],S=g[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw c("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);var C,_,E,T,A={$id:We};return b?C=e(b):(E=function(e,t){return We(t)},T=function(e){return e}),function(e,t,r,d,g){C&&(_=function(t,n,r){return S&&(A[S]=t),A[w]=n,A.$index=r,C(e,A)});var m=me();e.$watchCollection(v,function(r){var d,v,b,C,A,I,k,x,B,N,D,R,j=t[0],$=me();if(y&&(e[y]=r),i(r))B=r,x=_||E;else{x=_||T,B=[];for(var L in r)r.hasOwnProperty(L)&&"$"!==L.charAt(0)&&B.push(L)}for(C=B.length,D=new Array(C),d=0;C>d;d++)if(A=r===B?d:B[d],I=r[A],k=x(A,I,d),m[k])N=m[k],delete m[k],$[k]=N,D[d]=N;else{if($[k])throw o(D,function(e){e&&e.scope&&(m[e.id]=e)}),c("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,k,I);D[d]={id:k,scope:n,clone:n},$[k]=!0}for(var M in m){if(N=m[M],R=ge(N.clone),a.leave(R),R[0].parentNode)for(d=0,v=R.length;v>d;d++)R[d][s]=!0;N.scope.$destroy()}for(d=0;C>d;d++)if(A=r===B?d:B[d],I=r[A],N=D[d],N.scope){b=j;do b=b.nextSibling;while(b&&b[s]);l(N)!=b&&a.move(ge(N.clone),null,Er(j)),j=f(N),u(N.scope,d,w,I,S,A,C)}else g(function(e,t){N.scope=t;var n=h.cloneNode(!1);e[e.length++]=n,a.enter(e,null,Er(j)),j=n,N.clone=e,$[N.id]=N,u(N.scope,d,w,I,S,A,C)});m=$})}}}}],da="ng-hide",pa="ng-hide-animate",ha=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,da,{tempClasses:pa})})}}}],ga=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,da,{tempClasses:pa})})}}}],ma=Zn(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&o(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),va=["$animate",function(e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var s=i.ngSwitch||i.on,c=[],u=[],l=[],f=[],d=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var r,i;for(r=0,i=l.length;i>r;++r)e.cancel(l[r]);for(l.length=0,r=0,i=f.length;i>r;++r){var s=ge(u[r].clone);f[r].$destroy();var p=l[r]=e.leave(s);p.then(d(l,r))}u.length=0,f.length=0,(c=a.cases["!"+n]||a.cases["?"])&&o(c,function(n){n.transclude(function(r,i){f.push(i);var o=n.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");var a={clone:r};u.push(a),e.enter(r,o.parent(),o)})})})}}}],ya=Zn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),ba=Zn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),wa=Zn({restrict:"EAC",link:function(e,t,n,i,o){if(!o)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Q(t));o(function(e){t.empty(),t.append(e)})}}),Sa=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],Ca={$setViewValue:g,$render:g},_a=["$element","$scope","$attrs",function(e,r,i){var o=this,a=new Ye;o.ngModelCtrl=Ca,o.unknownOption=Er(t.createElement("option")),o.renderUnknownOption=function(t){var n="? "+We(t)+" ?";o.unknownOption.val(n),e.prepend(o.unknownOption),e.val(n)},r.$on("$destroy",function(){o.renderUnknownOption=g}),o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.readValue=function(){return o.removeUnknownOption(),e.val()},o.writeValue=function(t){o.hasOption(t)?(o.removeUnknownOption(),e.val(t),""===t&&o.emptyOption.prop("selected",!0)):null==t&&o.emptyOption?(o.removeUnknownOption(),e.val("")):o.renderUnknownOption(t)},o.addOption=function(e,t){pe(e,'"option value"'),""===e&&(o.emptyOption=t);var n=a.get(e)||0;a.put(e,n+1)},o.removeOption=function(e){var t=a.get(e);t&&(1===t?(a.remove(e),""===e&&(o.emptyOption=n)):a.put(e,t-1))},o.hasOption=function(e){return!!a.get(e)}}],Ea=function(){return{restrict:"E",require:["select","?ngModel"],controller:_a,link:function(e,t,n,r){var i=r[1];if(i){var a=r[0];if(a.ngModelCtrl=i,i.$render=function(){a.writeValue(i.$viewValue)},t.on("change",function(){e.$apply(function(){i.$setViewValue(a.readValue())})}),n.multiple){a.readValue=function(){var e=[];return o(t.find("option"),function(t){t.selected&&e.push(t.value)}),e},a.writeValue=function(e){var n=new Ye(e);o(t.find("option"),function(e){e.selected=w(n.get(e.value))})};var s,c=NaN;e.$watch(function(){c!==i.$viewValue||V(s,i.$viewValue)||(s=F(i.$viewValue),i.$render()),c=i.$viewValue}),i.$isEmpty=function(e){return!e||0===e.length}}}}}},Ta=["$interpolate",function(e){function t(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}return{restrict:"E",priority:100,compile:function(n,r){if(b(r.value)){var i=e(n.text(),!0);i||r.$set("value",n.text())}return function(e,n,r){var o="$selectController",a=n.parent(),s=a.data(o)||a.parent().data(o);s&&s.ngModelCtrl&&(i?e.$watch(i,function(e,i){r.$set("value",e),i!==e&&s.removeOption(i),s.addOption(e,n),s.ngModelCtrl.$render(),t(n)}):(s.addOption(r.value,n),s.ngModelCtrl.$render(),t(n)),n.on("$destroy",function(){s.removeOption(r.value),s.ngModelCtrl.$render()}))}}}}],Aa=v({restrict:"E",terminal:!1}),Ia=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},ka=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,o){if(o){var a,s=i.ngPattern||i.pattern;i.$observe("pattern",function(e){if(_(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,Q(t));a=e||n,o.$validate()}),o.$validators.pattern=function(e,t){return o.$isEmpty(t)||b(a)||a.test(t)}}}}},xa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=p(e);i=isNaN(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return 0>i||r.$isEmpty(t)||t.length<=i}}}}},Ba=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=p(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};return e.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(le(),we(Rr),Rr.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function r(e,r){var i=r;n===i&&(i=Math.min(t(e),3));var o=Math.pow(10,i),a=(e*o|0)%o;return{v:i,f:a}}var i={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",pluralCat:function(e,t){var n=0|e,o=r(e,t);return 1==n&&0==o.v?i.ONE:i.OTHER}})}]),void Er(t).ready(function(){oe(t,ae)}))}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')}(),r()}),function(){var e=System.get("@@amd-helpers").createDefine();define("npm:node-forge@0.6.34",["npm:node-forge@0.6.34/js/forge"],function(e){return e}),e()}(),System.registerDynamic("npm:moment@2.10.6",["npm:moment@2.10.6/moment"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:moment@2.10.6/moment"),r.define=i,n.exports}),System.registerDynamic("npm:ng-cordova@0.1.17-alpha",["npm:ng-cordova@0.1.17-alpha/dist/ng-cordova"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:ng-cordova@0.1.17-alpha/dist/ng-cordova"),r.define=i,n.exports}),System.registerDynamic("npm:qr-image@3.1.0",["npm:qr-image@3.1.0/lib/qr"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:qr-image@3.1.0/lib/qr"),r.define=i,n.exports}),System.registerDynamic("npm:ramda@0.17.1",["npm:ramda@0.17.1/dist/ramda"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:ramda@0.17.1/dist/ramda"),r.define=i,n.exports}),System.registerDynamic("npm:baobab@2.0.0-rc1",["npm:baobab@2.0.0-rc1/dist/baobab"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:baobab@2.0.0-rc1/dist/baobab"),r.define=i,n.exports}),System.registerDynamic("libraries/ionic/ionic-angular-library.js",["libraries/ionic/ionic-library.js","github:angular/bower-angular@1.4.5","github:angular/bower-angular-animate@1.4.5","github:angular/bower-angular-sanitize@1.4.5","github:angular-ui/ui-router@0.2.15"],!1,function(e,t,n){var r=System.get("@@global-helpers").prepareGlobal(n.id,null,null);return function(){"format global";"deps ./ionic-library";"deps angular";"deps angular-animate";"deps angular-sanitize";"deps angular-ui-router";!function(){function e(e,t,n,r,i,o){function a(r,a,s,c,u){function f(){O.resizeRequiresRefresh(b.__clientWidth,b.__clientHeight)&&m()}function d(){var e;return e={dataLength:0,width:0,height:0,resizeRequiresRefresh:function(t,n){var r=e.dataLength&&t&&n&&(t!==e.width||n!==e.height);return e.width=t,e.height=n,!!r},dataChangeRequiresRefresh:function(t){var n=t.length>0||t.length<e.dataLength;return e.dataLength=t.length,!!n}}}function p(){return T||(T=new e({afterItemsNode:M[0],containerNode:S,heightData:x,widthData:B,forceRefreshImages:!(!l(s.forceRefreshImages)||"false"===s.forceRefreshImages),keyExpression:A,renderBuffer:j,scope:r,scrollView:c.scrollView,transclude:u}))}function h(){var e=angular.element(b.__content.querySelector(".collection-repeat-after-container"));if(!e.length){var t=!1,n=[].filter.call(b.__content.childNodes,function(e){return ionic.DomUtil.contains(e,S)?(t=!0,!1):t});e=angular.element('<span class="collection-repeat-after-container">'),b.options.scrollingX&&e.addClass("horizontal"),e.append(n),b.__content.appendChild(e[0])}return e}function g(){$?v($,x):x.computed=!0,L?v(L,B):B.computed=!0}function m(){var e=D.length>0;if(e&&(x.computed||B.computed)&&y(),e&&x.computed){if(x.value=N.height,!x.value)throw new Error('collection-repeat tried to compute the height of repeated elements "'+_+'", but was unable to. Please provide the "item-height" attribute. http://ionicframework.com/docs/api/directive/collectionRepeat/')}else!x.dynamic&&x.getValue&&(x.value=x.getValue());if(e&&B.computed){if(B.value=N.width,!B.value)throw new Error('collection-repeat tried to compute the width of repeated elements "'+_+'", but was unable to. Please provide the "item-width" attribute. http://ionicframework.com/docs/api/directive/collectionRepeat/')}else!B.dynamic&&B.getValue&&(B.value=B.getValue());p().refreshLayout()}function v(e,n){if(e){var r;try{r=t(e)}catch(i){e.trim().match(/\d+(px|%)$/)&&(e='"'+e+'"'),r=t(e)}var o=e.replace(/(\'|\"|px|%)/g,"").trim(),a=o.length&&!/([a-zA-Z]|\$|:|\?)/.test(o);if(n.attrValue=e,a){var s=parseInt(r());if(e.indexOf("%")>-1){var c=s/100;n.getValue=n===x?function(){return Math.floor(c*b.__clientHeight)}:function(){return Math.floor(c*b.__clientWidth)}}else n.value=s}else n.dynamic=!0,n.getValue=n===x?function(e,t){var n=r(e,t);return n.charAt&&"%"===n.charAt(n.length-1)?Math.floor(parseInt(n)/100*b.__clientHeight):parseInt(n)}:function(e,t){var n=r(e,t);return n.charAt&&"%"===n.charAt(n.length-1)?Math.floor(parseInt(n)/100*b.__clientWidth):parseInt(n)}}}function y(){U||u(F=r.$new(),function(e){e[0].removeAttribute("collection-repeat"),U=e[0]}),F[A]=(k(r)||[])[0],i.$$phase||F.$digest(),S.appendChild(U);var e=n.getComputedStyle(U);N.width=parseInt(e.width),N.height=parseInt(e.height),S.removeChild(U)}var b=c.scrollView,w=a[0],S=angular.element('<div class="collection-repeat-container">')[0];if(w.parentNode.replaceChild(S,w),b.options.scrollingX&&b.options.scrollingY)throw new Error("collection-repeat expected a parent x or y scrollView, not an xy scrollView.");
var _=s.collectionRepeat,E=_.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!E)throw new Error("collection-repeat expected expression in form of '_item_ in _collection_[ track by _id_]' but got '"+s.collectionRepeat+"'.");var T,A=E[1],I=E[2],k=t(I),x={},B={},N={},D=[],R=s.itemRenderBuffer||s.collectionBufferSize,j=angular.isDefined(R)?parseInt(R):C,$=s.itemHeight||s.collectionItemHeight,L=s.itemWidth||s.collectionItemWidth,M=h(),O=d();g(),c.$element.on("scroll-resize",m),angular.element(n).on("resize",f);var P=i.$on("$ionicExposeAside",ionic.animationFrameThrottle(function(){c.scrollView.resize(),f()}));o(m,0,!1),r.$watchCollection(k,function(e){if(D=e||(e=[]),!angular.isArray(e))throw new Error("collection-repeat expected an array for '"+I+"', but got a "+typeof value);r.$$postDigest(function(){p().setData(D),O.dataChangeRequiresRefresh(D)&&m()})}),r.$on("$destroy",function(){angular.element(n).off("resize",f),P(),c.$element&&c.$element.off("scroll-resize",m),U&&U.parentNode&&U.parentNode.removeChild(U),F&&F.$destroy(),F=U=null,T&&T.destroy(),T=null});var U,F}return{restrict:"A",priority:1e3,transclude:"element",$$tlb:!0,require:"^^$ionicScroll",link:a}}function t(e,t,n){var r={primaryPos:0,secondaryPos:0,primarySize:0,secondarySize:0,rowPrimarySize:0};return function(i){function o(){return a(!0)}function a(t){if(!a.destroyed){var n,i,o,u,l,f=ee.getScrollValue(),d=f+ee.scrollPrimarySize;ee.updateRenderRange(f,d),q=Math.max(0,q-T),H=Math.min(x.length-1,H+T);for(n in Z)(q>n||n>H)&&(o=Z[n],delete Z[n],Y.push(o),o.isShown=!1);for(n=q;H>=n;n++)n>=x.length||Z[n]&&!t||(o=Z[n]||(Z[n]=Y.length?Y.pop():W.length?W.shift():new c),X.push(o),o.isShown=!0,l=o.scope,l.$index=n,l[E]=x[n],l.$first=0===n,l.$last=n===x.length-1,l.$middle=!(l.$first||l.$last),l.$odd=!(l.$even=0===(1&n)),l.$$disconnected&&ionic.Utils.reconnectScope(o.scope),u=ee.getDimensions(n),(o.secondaryPos!==u.secondaryPos||o.primaryPos!==u.primaryPos)&&(o.node.style[ionic.CSS.TRANSFORM]=U.replace(O,o.primaryPos=u.primaryPos).replace(P,o.secondaryPos=u.secondaryPos)),(o.secondarySize!==u.secondarySize||o.primarySize!==u.primarySize)&&(o.node.style.cssText=o.node.style.cssText.replace(S,F.replace(O,(o.primarySize=u.primarySize)+1).replace(P,o.secondarySize=u.secondarySize))));for(H===x.length-1&&(u=ee.getDimensions(x.length-1)||r,v.style[ionic.CSS.TRANSFORM]=U.replace(O,u.primaryPos+u.primarySize).replace(P,0));Y.length;)o=Y.pop(),o.scope.$broadcast("$collectionRepeatLeave"),ionic.Utils.disconnectScope(o.scope),W.push(o),o.node.style[ionic.CSS.TRANSFORM]="translate3d(-9999px,-9999px,0)",o.primaryPos=o.secondaryPos=null;if(b)for(n=0,i=X.length;i>n&&(o=X[n]);n++)if(o.images)for(var p,h=0,g=o.images.length;g>h&&(p=o.images[h]);h++){var m=p.src;p.src=w,p.src=m}if(t)for(var y=e.$$phase;X.length;)o=X.pop(),y||o.scope.$digest();else s()}}function s(){var t;s.running||(s.running=!0,n(function(){for(var n=e.$$phase;X.length;)t=X.pop(),t.isShown&&(n||t.scope.$digest());s.running=!1}))}function c(){var e=this;this.scope=A.$new(),this.id="item"+Q++,k(this.scope,function(t){e.element=t,e.element.data("$$collectionRepeatItem",e),e.node=t[0],e.node.style[ionic.CSS.TRANSFORM]="translate3d(-9999px,-9999px,0)",e.node.style.cssText+=" height: 0px; width: 0px;",ionic.Utils.disconnectScope(e.scope),y.appendChild(e.node),e.images=t[0].getElementsByTagName("img")})}function u(){this.getItemPrimarySize=D,this.getItemSecondarySize=j,this.getScrollValue=function(){return Math.max(0,Math.min(I.__scrollTop-V,I.__maxScrollTop-V-z))},this.refreshDirection=function(){this.scrollPrimarySize=I.__clientHeight,this.scrollSecondarySize=I.__clientWidth,this.estimatedPrimarySize=g,this.estimatedSecondarySize=m,this.estimatedItemsAcross=L&&Math.floor(I.__clientWidth/m)||1}}function l(){this.getItemPrimarySize=j,this.getItemSecondarySize=D,this.getScrollValue=function(){return Math.max(0,Math.min(I.__scrollLeft-V,I.__maxScrollLeft-V-z))},this.refreshDirection=function(){this.scrollPrimarySize=I.__clientWidth,this.scrollSecondarySize=I.__clientHeight,this.estimatedPrimarySize=m,this.estimatedSecondarySize=g,this.estimatedItemsAcross=L&&Math.floor(I.__clientHeight/g)||1}}function f(){this.getEstimatedSecondaryPos=function(e){return e%this.estimatedItemsAcross*this.estimatedSecondarySize},this.getEstimatedPrimaryPos=function(e){return Math.floor(e/this.estimatedItemsAcross)*this.estimatedPrimarySize},this.getEstimatedIndex=function(e){return Math.floor(e/this.estimatedPrimarySize)*this.estimatedItemsAcross}}function d(){this.getEstimatedSecondaryPos=function(){return 0},this.getEstimatedPrimaryPos=function(e){return e*this.estimatedPrimarySize},this.getEstimatedIndex=function(e){return Math.floor(e/this.estimatedPrimarySize)}}function p(){this.getContentSize=function(){return this.getEstimatedPrimaryPos(x.length-1)+this.estimatedPrimarySize+V+z};var e={};this.getDimensions=function(t){return e.primaryPos=this.getEstimatedPrimaryPos(t),e.secondaryPos=this.getEstimatedSecondaryPos(t),e.primarySize=this.estimatedPrimarySize,e.secondarySize=this.estimatedSecondarySize,e},this.updateRenderRange=function(e,t){q=Math.max(0,this.getEstimatedIndex(e)),H=Math.min(x.length-1,this.getEstimatedIndex(t)+this.estimatedItemsAcross-1),K=Math.max(0,this.getEstimatedPrimaryPos(q)),G=this.getEstimatedPrimaryPos(H)+this.estimatedPrimarySize}}function h(){function e(e){var t,o,a;for(t=Math.max(0,n);e>=t&&(a=s[t]);t++)o=s[t-1]||r,a.primarySize=i.getItemPrimarySize(t,x[t]),a.secondarySize=i.scrollSecondarySize,a.primaryPos=o.primaryPos+o.primarySize,a.secondaryPos=0}function t(e){var t,o,a;for(t=Math.max(n,0);e>=t&&(a=s[t]);t++)o=s[t-1]||r,a.secondarySize=Math.min(i.getItemSecondarySize(t,x[t]),i.scrollSecondarySize),a.secondaryPos=o.secondaryPos+o.secondarySize,0===t||a.secondaryPos+a.secondarySize>i.scrollSecondarySize?(a.secondaryPos=0,a.primarySize=i.getItemPrimarySize(t,x[t]),a.primaryPos=o.primaryPos+o.rowPrimarySize,a.rowStartIndex=t,a.rowPrimarySize=a.primarySize):(a.primarySize=i.getItemPrimarySize(t,x[t]),a.primaryPos=o.primaryPos,a.rowStartIndex=o.rowStartIndex,s[a.rowStartIndex].rowPrimarySize=a.rowPrimarySize=Math.max(s[a.rowStartIndex].rowPrimarySize,a.primarySize),a.rowPrimarySize=Math.max(a.primarySize,a.rowPrimarySize))}var n,i=this,o=ionic.debounce(J,25,!0),a=L?t:e,s=[];this.getContentSize=function(){var e=s[n]||r;return(e.primaryPos+e.primarySize||0)+this.getEstimatedPrimaryPos(x.length-n-1)+V+z},this.onDestroy=function(){s.length=0},this.onRefreshData=function(){var e,t;for(e=s.length,t=x.length;t>e;e++)s.push({});n=-1},this.onRefreshLayout=function(){n=-1},this.getDimensions=function(e){return e=Math.min(e,x.length-1),e>n&&(e>.9*x.length?(a(x.length-1),n=x.length-1,J()):(a(e),n=e,o())),s[e]};var c=-1,u=-1;this.updateRenderRange=function(e,t){var n,r,i;if(this.getDimensions(2*this.getEstimatedIndex(t)),-1===c||0===e)n=0;else if(e>=u)for(n=c,r=x.length;r>n&&!((i=this.getDimensions(n))&&i.primaryPos+i.rowPrimarySize>=e);n++);else for(n=c;n>=0;n--)if((i=this.getDimensions(n))&&i.primaryPos<=e){n=L?i.rowStartIndex:n;break}q=Math.min(Math.max(0,n),x.length-1),K=-1!==q?this.getDimensions(q).primaryPos:-1;var o;for(n=q+1,r=x.length;r>n;n++)if((i=this.getDimensions(n))&&i.primaryPos+i.rowPrimarySize>t){if(L)for(o=i;r-1>n&&(i=this.getDimensions(n+1)).primaryPos===o.primaryPos;)n++;break}H=Math.min(n,x.length-1),G=-1!==H?(i=this.getDimensions(H)).primaryPos+(i.rowPrimarySize||i.primarySize):-1,u=e,c=q}}var g,m,v=i.afterItemsNode,y=i.containerNode,b=i.forceRefreshImages,C=i.heightData,_=i.widthData,E=i.keyExpression,T=i.renderBuffer,A=i.scope,I=i.scrollView,k=i.transclude,x=[],B={},N=C.getValue||function(){return C.value},D=function(e,t){return B[E]=t,B.$index=e,N(A,B)},R=_.getValue||function(){return _.value},j=function(e,t){return B[E]=t,B.$index=e,R(A,B)},$=!!I.options.scrollingY,L=$?_.dynamic||_.value!==I.__clientWidth:C.dynamic||C.value!==I.__clientHeight,M=!C.dynamic&&!_.dynamic,O="PRIMARY",P="SECONDARY",U=$?"translate3d(SECONDARYpx,PRIMARYpx,0)":"translate3d(PRIMARYpx,SECONDARYpx,0)",F=$?"height: PRIMARYpx; width: SECONDARYpx;":"height: SECONDARYpx; width: PRIMARYpx;",V=0,z=0,q=-1,H=-1,G=-1,K=-1,W=[],Y=[],X=[],Z={},Q=0,J=$?function(){I.setDimensions(null,null,null,ee.getContentSize(),!0)}:function(){I.setDimensions(null,null,ee.getContentSize(),null,!0)},ee=$?new u:new l;(L?f:d).call(ee),(M?p:h).call(ee);var te=$?"getContentHeight":"getContentWidth",ne=I.options[te];I.options[te]=angular.bind(ee,ee.getContentSize),I.__$callback=I.__callback,I.__callback=function(e,t,n,r){var i=ee.getScrollValue();(-1===q||i+ee.scrollPrimarySize>G||K>i)&&a(),I.__$callback(e,t,n,r)};var re=!1,ie=!1;this.refreshLayout=function(){x.length?(g=D(0,x[0]),m=j(0,x[0])):(g=100,m=100);var e=getComputedStyle(v)||{},n=v.firstElementChild&&getComputedStyle(v.firstElementChild)||{},r=v.lastElementChild&&getComputedStyle(v.lastElementChild)||{};z=(parseInt(e[$?"height":"width"])||0)+(n&&parseInt(n[$?"marginTop":"marginLeft"])||0)+(r&&parseInt(r[$?"marginBottom":"marginRight"])||0),V=0;var i=y;do V+=i[$?"offsetTop":"offsetLeft"];while(ionic.DomUtil.contains(I.__content,i=i.offsetParent));var a=y.previousElementSibling,s=a?t.getComputedStyle(a):{},u=parseInt(s[$?"marginBottom":"marginRight"]||0);if(y.style[ionic.CSS.TRANSFORM]=U.replace(O,-u).replace(P,0),V-=u,I.__clientHeight&&I.__clientWidth||(I.__clientWidth=I.__container.clientWidth,I.__clientHeight=I.__container.clientHeight),(ee.onRefreshLayout||angular.noop)(),ee.refreshDirection(),J(),!re)for(var l=Math.max(20,3*T),f=0;l>f;f++)W.push(new c);re=!0,re&&ie&&((I.__scrollLeft>I.__maxScrollLeft||I.__scrollTop>I.__maxScrollTop)&&I.resize(),o(!0))},this.setData=function(e){x=e,(ee.onRefreshData||angular.noop)(),ie=!0},this.destroy=function(){a.destroyed=!0,W.forEach(function(e){e.scope.$destroy(),e.scope=e.element=e.node=e.images=null}),W.length=X.length=Y.length=0,Z={},I.options[te]=ne,I.__callback=I.__$callback,I.resize(),(ee.onDestroy||angular.noop)()}}}function n(e){return["$ionicGesture","$parse",function(t,n){var r=e.substr(2).toLowerCase();return function(i,o,a){var s=n(a[e]),c=function(e){i.$apply(function(){s(i,{$event:e})})},u=t.on(r,c,o);i.$on("$destroy",function(){t.off(u,r,c)})}}]}function r(){return["$ionicScrollDelegate",function(e){return{restrict:"E",link:function(t,n,r){function i(t){for(var r=3,i=t.target;r--&&i;){if(i.classList.contains("button")||i.tagName.match(/input|textarea|select/i)||i.isContentEditable)return;i=i.parentNode}var o=t.gesture&&t.gesture.touches[0]||t.detail.touches[0],a=n[0].getBoundingClientRect();ionic.DomUtil.rectContains(o.pageX,o.pageY,a.left,a.top-20,a.left+a.width,a.top+a.height)&&e.scrollTop(!0)}"true"!=r.noTapScroll&&(ionic.on("tap",i,n[0]),t.$on("$destroy",function(){ionic.off("tap",i,n[0])}))}}}]}function i(e){return["$document","$timeout",function(t,n){return{restrict:"E",controller:"$ionicHeaderBar",compile:function(r){function i(t,n,r,i){e?(t.$watch(function(){return n[0].className},function(e){var n=-1===e.indexOf("ng-hide"),r=-1!==e.indexOf("bar-subheader");t.$hasHeader=n&&!r,t.$hasSubheader=n&&r,t.$emit("$ionicSubheader",t.$hasSubheader)}),t.$on("$destroy",function(){delete t.$hasHeader,delete t.$hasSubheader}),i.align(),t.$on("$ionicHeader.align",function(){ionic.requestAnimationFrame(function(){i.align()})})):(t.$watch(function(){return n[0].className},function(e){var n=-1===e.indexOf("ng-hide"),r=-1!==e.indexOf("bar-subfooter");t.$hasFooter=n&&!r,t.$hasSubfooter=n&&r}),t.$on("$destroy",function(){delete t.$hasFooter,delete t.$hasSubfooter}),t.$watch("$hasTabs",function(e){n.toggleClass("has-tabs",!!e)}))}return r.addClass(e?"bar bar-header":"bar bar-footer"),n(function(){e&&t[0].getElementsByClassName("tabs-top").length&&r.addClass("has-tabs-top")}),{pre:i}}}}]}function o(e){return e.clientHeight}function a(e){e.stopPropagation()}var s=angular.module("ionic",["ngAnimate","ngSanitize","ui.router"]),c=angular.extend,u=angular.forEach,l=angular.isDefined,f=angular.isNumber,d=angular.isString,p=angular.element,h=angular.noop;s.factory("$ionicActionSheet",["$rootScope","$compile","$animate","$timeout","$ionicTemplateLoader","$ionicPlatform","$ionicBody","IONIC_BACK_PRIORITY",function(e,t,n,r,i,o,a,s){function u(i){function u(e){e&&/icon/.test(e)&&(l.$actionSheetHasIcon=!0)}var l=e.$new(!0);c(l,{cancel:h,destructiveButtonClicked:h,buttonClicked:h,$deregisterBackButton:h,buttons:[],cancelOnStateChange:!0},i||{});for(var f=0;f<l.buttons.length;f++)u(l.buttons[f].text);u(l.cancelText),u(l.destructiveText);var d=l.element=t('<ion-action-sheet ng-class="cssClass" buttons="buttons"></ion-action-sheet>')(l),g=p(d[0].querySelector(".action-sheet-wrapper")),m=l.cancelOnStateChange?e.$on("$stateChangeSuccess",function(){l.cancel()}):h;return l.removeSheet=function(e){l.removed||(l.removed=!0,g.removeClass("action-sheet-up"),r(function(){a.removeClass("action-sheet-open")},400),l.$deregisterBackButton(),m(),n.removeClass(d,"active").then(function(){l.$destroy(),d.remove(),l.cancel.$scope=g=null,(e||h)()}))},l.showSheet=function(e){l.removed||(a.append(d).addClass("action-sheet-open"),n.addClass(d,"active").then(function(){l.removed||(e||h)()}),r(function(){l.removed||g.addClass("action-sheet-up")},20,!1))},l.$deregisterBackButton=o.registerBackButtonAction(function(){r(l.cancel)},s.actionSheet),l.cancel=function(){l.removeSheet(i.cancel)},l.buttonClicked=function(e){i.buttonClicked(e,i.buttons[e])===!0&&l.removeSheet()},l.destructiveButtonClicked=function(){i.destructiveButtonClicked()===!0&&l.removeSheet()},l.showSheet(),l.cancel.$scope=l,l.cancel}return{show:u}}]),p.prototype.addClass=function(e){var t,n,r,i,o,a;if(e&&"ng-scope"!=e&&"ng-isolate-scope"!=e)for(t=0;t<this.length;t++)if(i=this[t],i.setAttribute)if(e.indexOf(" ")<0&&i.classList.add)i.classList.add(e);else{for(a=(" "+(i.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),o=e.split(" "),n=0;n<o.length;n++)r=o[n].trim(),-1===a.indexOf(" "+r+" ")&&(a+=r+" ");i.setAttribute("class",a.trim())}return this},p.prototype.removeClass=function(e){var t,n,r,i,o;if(e)for(t=0;t<this.length;t++)if(o=this[t],o.getAttribute)if(e.indexOf(" ")<0&&o.classList.remove)o.classList.remove(e);else for(r=e.split(" "),n=0;n<r.length;n++)i=r[n],o.setAttribute("class",(" "+(o.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+i.trim()+" "," ").trim());return this},s.factory("$ionicBackdrop",["$document","$timeout","$$rAF",function(e,t,n){function r(){s++,1===s&&(a.addClass("visible"),n(function(){s>=1&&a.addClass("active")}))}function i(){1===s&&(a.removeClass("active"),t(function(){0===s&&a.removeClass("visible")},400,!1)),s=Math.max(0,s-1)}function o(){return a}var a=p('<div class="backdrop">'),s=0;return e[0].body.appendChild(a[0]),{retain:r,release:i,getElement:o,_element:a}}]),s.factory("$ionicBind",["$parse","$interpolate",function(e,t){var n=/^\s*([@=&])(\??)\s*(\w*)\s*$/;return function(r,i,o){u(o||{},function(o,a){var s,c,u=o.match(n)||[],l=u[3]||a,f=u[1];switch(f){case"@":if(!i[l])return;i.$observe(l,function(e){r[a]=e}),i[l]&&(r[a]=t(i[l])(r));break;case"=":if(!i[l])return;c=r.$watch(i[l],function(e){r[a]=e}),r.$on("$destroy",c);break;case"&":if(i[l]&&i[l].match(RegExp(a+"(.*?)")))throw new Error('& expression binding "'+a+'" looks like it will recursively call "'+i[l]+'" and cause a stack overflow! Please choose a different scopeName.');s=e(i[l]),r[a]=function(e){return s(r,e)}}})}}]),s.factory("$ionicBody",["$document",function(e){return{addClass:function(){for(var t=0;t<arguments.length;t++)e[0].body.classList.add(arguments[t]);return this},removeClass:function(){for(var t=0;t<arguments.length;t++)e[0].body.classList.remove(arguments[t]);return this},enableClass:function(e){var t=Array.prototype.slice.call(arguments).slice(1);return e?this.addClass.apply(this,t):this.removeClass.apply(this,t),this},append:function(t){return e[0].body.appendChild(t.length?t[0]:t),this},get:function(){return e[0].body}}}]),s.factory("$ionicClickBlock",["$document","$ionicBody","$timeout",function(e,t,n){function r(e){e.preventDefault(),e.stopPropagation()}function i(){c&&(a?a.classList.remove(u):(a=e[0].createElement("div"),a.className="click-block",t.append(a),a.addEventListener("touchstart",r),a.addEventListener("mousedown",r)),c=!1)}function o(){a&&a.classList.add(u)}var a,s,c,u="click-block-hide";return{show:function(e){c=!0,n.cancel(s),s=n(this.hide,e||310,!1),i()},hide:function(){c=!1,n.cancel(s),o()}}}]),s.factory("$ionicGesture",[function(){return{on:function(e,t,n,r){return window.ionic.onGesture(e,t,n[0],r)},off:function(e,t,n){return window.ionic.offGesture(e,t,n)}}}]),s.factory("$ionicHistory",["$rootScope","$state","$location","$window","$timeout","$ionicViewSwitcher","$ionicNavViewDelegate",function(e,t,n,r,i,o,a){function s(e){return e?L.views[e]:null}function u(e){return e?s(e.backViewId):null}function f(e){return e?s(e.forwardViewId):null}function d(e){return e?L.histories[e]:null}function p(e){var t=h(e);return L.histories[t.historyId]||(L.histories[t.historyId]={historyId:t.historyId,parentHistoryId:h(t.scope.$parent).historyId,stack:[],cursor:-1}),d(t.historyId)}function h(t){for(var n=t;n;){if(n.hasOwnProperty("$historyId"))return{historyId:n.$historyId,scope:n};n=n.$parent}return{historyId:"root",scope:e}}function g(e){L.currentView=s(e),L.backView=u(L.currentView),L.forwardView=f(L.currentView)}function m(){var e;if(t&&t.current&&t.current.name){if(e=t.current.name,t.params)for(var n in t.params)t.params.hasOwnProperty(n)&&t.params[n]&&(e+="_"+n+"="+t.params[n]);return e}return ionic.Utils.nextUid()}function v(){var e;if(t&&t.params)for(var n in t.params)t.params.hasOwnProperty(n)&&(e=e||{},e[n]=t.params[n]);return e}function y(e){return e&&e.length&&/ion-side-menus|ion-tabs/i.test(e[0].tagName)}function b(e,t){return t&&t.$$state&&t.$$state.self.canSwipeBack===!1?!1:e&&"false"===e.attr("can-swipe-back")?!1:!0}var w,S,C,_,E,T="initialView",A="newView",I="moveBack",k="moveForward",x="back",B="forward",N="enter",D="exit",R="swap",j="none",$=0,L={histories:{root:{historyId:"root",parentHistoryId:null,stack:[],cursor:-1}},views:{},backView:null,forwardView:null,currentView:null},M=function(){};return M.prototype.initialize=function(e){if(e){for(var t in e)this[t]=e[t];return this}return null},M.prototype.go=function(){if(this.stateName)return t.go(this.stateName,this.stateParams);if(this.url&&this.url!==n.url()){if(L.backView===this)return r.history.go(-1);if(L.forwardView===this)return r.history.go(1);n.url(this.url)}return null},M.prototype.destroy=function(){this.scope&&(this.scope.$destroy&&this.scope.$destroy(),this.scope=null)},{register:function(e,t){var r,a,c,l=m(),f=p(e),y=L.currentView,M=L.backView,O=L.forwardView,P=null,U=null,F=j,V=f.historyId,z=n.url();if(w!==l&&(w=l,$++),E)P=E.viewId,U=E.action,F=E.direction,E=null;else if(M&&M.stateId===l)P=M.viewId,V=M.historyId,U=I,M.historyId===y.historyId?F=x:y&&(F=D,r=d(M.historyId),r&&r.parentHistoryId===y.historyId?F=N:(r=d(y.historyId),r&&r.parentHistoryId===f.parentHistoryId&&(F=R)));else if(O&&O.stateId===l)P=O.viewId,V=O.historyId,U=k,O.historyId===y.historyId?F=B:y&&(F=D,y.historyId===f.parentHistoryId?F=N:(r=d(y.historyId),r&&r.parentHistoryId===f.parentHistoryId&&(F=R))),r=h(e),O.historyId&&r.scope&&(r.scope.$historyId=O.historyId,V=O.historyId);else if(y&&y.historyId!==V&&f.cursor>-1&&f.stack.length>0&&f.cursor<f.stack.length&&f.stack[f.cursor].stateId===l){var q=f.stack[f.cursor];P=q.viewId,V=q.historyId,U=I,F=R,r=d(y.historyId),r&&r.parentHistoryId===V?F=D:(r=d(V),r&&r.parentHistoryId===y.historyId&&(F=N)),r=s(q.backViewId),r&&q.historyId!==r.historyId&&(f.stack[f.cursor].backViewId=y.viewId)}else{if(c=o.createViewEle(t),this.isAbstractEle(c,t))return{action:"abstractView",direction:j,ele:c};if(P=ionic.Utils.nextUid(),y){if(y.forwardViewId=P,U=A,O&&y.stateId!==O.stateId&&y.historyId===O.historyId&&(r=d(O.historyId))){for(a=r.stack.length-1;a>=O.index;a--){var H=r.stack[a];H&&H.destroy&&H.destroy(),r.stack.splice(a)}V=O.historyId}f.historyId===y.historyId?F=B:y.historyId!==f.historyId&&(F=N,r=d(y.historyId),r&&r.parentHistoryId===f.parentHistoryId?F=R:(r=d(r.parentHistoryId),r&&r.historyId===f.historyId&&(F=D)))}else U=T;2>$&&(F=j),L.views[P]=this.createView({viewId:P,index:f.stack.length,historyId:f.historyId,backViewId:y&&y.viewId?y.viewId:null,forwardViewId:null,stateId:l,stateName:this.currentStateName(),stateParams:v(),url:z,canSwipeBack:b(c,t)}),f.stack.push(L.views[P])}if(C&&C(),i.cancel(_),S){if(S.disableAnimate&&(F=j),S.disableBack&&(L.views[P].backViewId=null),S.historyRoot){for(a=0;a<f.stack.length;a++)f.stack[a].viewId===P?(f.stack[a].index=0,f.stack[a].backViewId=f.stack[a].forwardViewId=null):delete L.views[f.stack[a].viewId];f.stack=[L.views[P]]}S=null}if(g(P),L.backView&&V==L.backView.historyId&&l==L.backView.stateId&&z==L.backView.url)for(a=0;a<f.stack.length;a++)if(f.stack[a].viewId==P){U="dupNav",F=j,a>0&&(f.stack[a-1].forwardViewId=null),L.forwardView=null,L.currentView.index=L.backView.index,L.currentView.backViewId=L.backView.backViewId,L.backView=u(L.backView),f.stack.splice(a,1);break}return f.cursor=L.currentView.index,{viewId:P,action:U,direction:F,historyId:V,enableBack:this.enabledBack(L.currentView),isHistoryRoot:0===L.currentView.index,ele:c}},registerHistory:function(e){e.$historyId=ionic.Utils.nextUid()},createView:function(e){var t=new M;return t.initialize(e)},getViewById:s,viewHistory:function(){return L},currentView:function(e){return arguments.length&&(L.currentView=e),L.currentView},currentHistoryId:function(){return L.currentView?L.currentView.historyId:null},currentTitle:function(e){return L.currentView?(arguments.length&&(L.currentView.title=e),L.currentView.title):void 0},backView:function(e){return arguments.length&&(L.backView=e),L.backView},backTitle:function(e){var t=e&&s(e.backViewId)||L.backView;return t&&t.title},forwardView:function(e){return arguments.length&&(L.forwardView=e),L.forwardView},currentStateName:function(){return t&&t.current?t.current.name:null},isCurrentStateNavView:function(e){return!!(t&&t.current&&t.current.views&&t.current.views[e])},goToHistoryRoot:function(e){if(e){var t=d(e);if(t&&t.stack.length){if(L.currentView&&L.currentView.viewId===t.stack[0].viewId)return;E={viewId:t.stack[0].viewId,action:I,direction:x},t.stack[0].go()}}},goBack:function(e){if(l(e)&&-1!==e){if(e>-1)return;var t=L.histories[this.currentHistoryId()],n=t.cursor+e+1;1>n&&(n=1),t.cursor=n,g(t.stack[n].viewId);for(var r=n-1,o=[],a=s(t.stack[r].forwardViewId);a&&(o.push(a.stateId||a.viewId),r++,!(r>=t.stack.length));)a=s(t.stack[r].forwardViewId);var c=this;o.length&&i(function(){c.clearCache(o)},600)}L.backView&&L.backView.go()},enabledBack:function(e){var t=u(e);return!(!t||t.historyId!==e.historyId)},clearHistory:function(){var e=L.histories,t=L.currentView;if(e)for(var n in e)e[n].stack&&(e[n].stack=[],e[n].cursor=-1),t&&t.historyId===n?(t.backViewId=t.forwardViewId=null,e[n].stack.push(t)):e[n].destroy&&e[n].destroy();for(var r in L.views)r!==t.viewId&&delete L.views[r];t&&g(t.viewId)},clearCache:function(e){return i(function(){a._instances.forEach(function(t){t.clearCache(e)})})},nextViewOptions:function(t){return C&&C(),arguments.length&&(i.cancel(_),null===t?S=t:(S=S||{},c(S,t),S.expire&&(C=e.$on("$stateChangeSuccess",function(){_=i(function(){S=null},S.expire)})))),S},isAbstractEle:function(e,t){return t&&t.$$state&&t.$$state.self["abstract"]?!0:!(!e||!y(e)&&!y(e.children()))},isActiveScope:function(e){if(!e)return!1;for(var t,n=e,r=this.currentHistoryId();n;){if(n.$$disconnected)return!1;if(!t&&n.hasOwnProperty("$historyId")&&(t=!0),r){if(n.hasOwnProperty("$historyId")&&r==n.$historyId)return!0;if(n.hasOwnProperty("$activeHistoryId")&&r==n.$activeHistoryId){if(n.hasOwnProperty("$historyId"))return!0;if(!t)return!0}}t&&n.hasOwnProperty("$activeHistoryId")&&(t=!1),n=n.$parent}return r?"root"==r:!0}}}]).run(["$rootScope","$state","$location","$document","$ionicPlatform","$ionicHistory","IONIC_BACK_PRIORITY",function(e,t,n,r,i,o,a){function s(e){var t=o.backView();return t?t.go():ionic.Platform.exitApp(),e.preventDefault(),!1}e.$on("$ionicView.beforeEnter",function(){ionic.keyboard&&ionic.keyboard.hide&&ionic.keyboard.hide()}),e.$on("$ionicHistory.change",function(e,r){if(!r)return null;var i=o.viewHistory(),a=r.historyId?i.histories[r.historyId]:null;if(a&&a.cursor>-1&&a.cursor<a.stack.length){var s=a.stack[a.cursor];return s.go(r)}!r.url&&r.uiSref&&(r.url=t.href(r.uiSref)),r.url&&(0===r.url.indexOf("#")&&(r.url=r.url.replace("#","")),r.url!==n.url()&&n.url(r.url))}),e.$ionicGoBack=function(e){o.goBack(e)},e.$on("$ionicView.afterEnter",function(e,t){t&&t.title&&(r[0].title=t.title)}),i.registerBackButtonAction(s,a.view)}]),s.provider("$ionicConfig",function(){function e(e,r){a.platform[e]=r,i.platform[e]={},t(a,a.platform[e]),n(a.platform[e],i.platform[e],"")}function t(e,n){for(var r in e)r!=o&&e.hasOwnProperty(r)&&(angular.isObject(e[r])?(l(n[r])||(n[r]={}),t(e[r],n[r])):l(n[r])||(n[r]=null))}function n(e,t,i){u(e,function(s,c){angular.isObject(e[c])?(t[c]={},n(e[c],t[c],i+"."+c)):t[c]=function(n){if(arguments.length)return e[c]=n,t;if(e[c]==o){var s=r(a.platform,ionic.Platform.platform()+i+"."+c);return s||s===!1?s:r(a.platform,"default"+i+"."+c)}return e[c]}})}function r(e,t){t=t.split(".");for(var n=0;n<t.length;n++){if(!e||!l(e[t[n]]))return null;e=e[t[n]]}return e}var i=this;i.platform={};var o="platform",a={views:{maxCache:o,forwardCache:o,transition:o,swipeBackEnabled:o,swipeBackHitWidth:o},navBar:{alignTitle:o,positionPrimaryButtons:o,positionSecondaryButtons:o,transition:o},backButton:{icon:o,text:o,previousTitleText:o},form:{checkbox:o,toggle:o},scrolling:{jsScrolling:o},spinner:{icon:o},tabs:{style:o,position:o},templates:{maxPrefetch:o},platform:{}};n(a,i,""),e("default",{views:{maxCache:10,forwardCache:!1,transition:"ios",swipeBackEnabled:!0,swipeBackHitWidth:45},navBar:{alignTitle:"center",positionPrimaryButtons:"left",positionSecondaryButtons:"right",transition:"view"},backButton:{icon:"ion-ios-arrow-back",text:"Back",previousTitleText:!0},form:{checkbox:"circle",toggle:"large"},scrolling:{jsScrolling:!0},spinner:{icon:"ios"},tabs:{style:"standard",position:"bottom"},templates:{maxPrefetch:30}}),e("ios",{}),e("android",{views:{transition:"android",swipeBackEnabled:!1},navBar:{alignTitle:"left",positionPrimaryButtons:"right",positionSecondaryButtons:"right"},backButton:{icon:"ion-android-arrow-back",text:!1,previousTitleText:!1},form:{checkbox:"square",toggle:"small"},spinner:{icon:"android"},tabs:{style:"striped",position:"top"}}),e("windowsphone",{spinner:{icon:"android"}}),i.transitions={views:{},navBar:{}},i.transitions.views.ios=function(e,t,n,r){function i(e,t,n,r){var i={};i[ionic.CSS.TRANSITION_DURATION]=o.shouldAnimate?"":0,i.opacity=t,r>-1&&(i.boxShadow="0 0 10px rgba(0,0,0,"+(o.shouldAnimate?.45*r:.3)+")"),i[ionic.CSS.TRANSFORM]="translate3d("+n+"%,0,0)",ionic.DomUtil.cachedStyles(e,i)}var o={run:function(r){"forward"==n?(i(e,1,99*(1-r),1-r),i(t,1-.1*r,-33*r,-1)):"back"==n?(i(e,1-.1*(1-r),-33*(1-r),-1),i(t,1,100*r,1-r)):(i(e,1,0,-1),i(t,0,0,-1))},shouldAnimate:r&&("forward"==n||"back"==n)};return o},i.transitions.navBar.ios=function(e,t,n,r){function i(e,t,n,r){var i={};i[ionic.CSS.TRANSITION_DURATION]=s.shouldAnimate?"":"0ms",i.opacity=1===t?"":t,e.setCss("buttons-left",i),e.setCss("buttons-right",i),e.setCss("back-button",i),i[ionic.CSS.TRANSFORM]="translate3d("+r+"px,0,0)",e.setCss("back-text",i),i[ionic.CSS.TRANSFORM]="translate3d("+n+"px,0,0)",e.setCss("title",i)}function o(e,t,n){if(e&&t){var r=(e.titleTextX()+e.titleWidth())*(1-n),o=t&&(t.titleTextX()-e.backButtonTextLeft())*(1-n)||0;i(e,n,r,o)}}function a(e,t,n){if(e&&t){var r=(-(e.titleTextX()-t.backButtonTextLeft())-e.titleLeftRight())*n;i(e,1-n,r,0)}}var s={run:function(n){var r=e.controller(),i=t&&t.controller();"back"==s.direction?(a(r,i,1-n),o(i,r,1-n)):(o(r,i,n),a(i,r,n))},direction:n,shouldAnimate:r&&("forward"==n||"back"==n)};return s},i.transitions.views.android=function(e,t,n,r){function i(e,t){var n={};n[ionic.CSS.TRANSITION_DURATION]=o.shouldAnimate?"":0,n[ionic.CSS.TRANSFORM]="translate3d("+t+"%,0,0)",ionic.DomUtil.cachedStyles(e,n)}r=r&&("forward"==n||"back"==n);var o={run:function(r){"forward"==n?(i(e,99*(1-r)),i(t,-100*r)):"back"==n?(i(e,-100*(1-r)),i(t,100*r)):(i(e,0),i(t,0))},shouldAnimate:r};return o},i.transitions.navBar.android=function(e,t,n,r){function i(e,t){if(e){var n={};n.opacity=1===t?"":t,e.setCss("buttons-left",n),e.setCss("buttons-right",n),e.setCss("back-button",n),e.setCss("back-text",n),e.setCss("title",n)}}return{run:function(n){i(e.controller(),n),i(t&&t.controller(),1-n)},shouldAnimate:r&&("forward"==n||"back"==n)}},i.transitions.views.none=function(e,t){return{run:function(n){i.transitions.views.android(e,t,!1,!1).run(n)},shouldAnimate:!1}},i.transitions.navBar.none=function(e,t){return{run:function(n){i.transitions.navBar.ios(e,t,!1,!1).run(n),i.transitions.navBar.android(e,t,!1,!1).run(n)},shouldAnimate:!1}},i.setPlatformConfig=e,i.$get=function(){return i}}).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|tel|ftp|mailto|file|ghttps?|ms-appx|x-wmapp0):/),e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|content|blob|ms-appx|x-wmapp0):|data:image\//)}]);var g='<div class="loading-container"><div class="loading"></div></div>',m="$ionicLoading instance.hide() has been deprecated. Use $ionicLoading.hide().",v="$ionicLoading instance.show() has been deprecated. Use $ionicLoading.show().",y="$ionicLoading instance.setContent() has been deprecated. Use $ionicLoading.show({ template: 'my content' }).";s.constant("$ionicLoadingConfig",{template:"<ion-spinner></ion-spinner>"}).factory("$ionicLoading",["$ionicLoadingConfig","$ionicBody","$ionicTemplateLoader","$ionicBackdrop","$timeout","$q","$log","$compile","$ionicPlatform","$rootScope","IONIC_BACK_PRIORITY",function(e,t,n,r,i,o,a,s,u,l,f){function d(){return w||(w=n.compile({template:g,appendTo:t.get()}).then(function(e){return e.show=function(a){var c=a.templateUrl?n.load(a.templateUrl):o.when(a.template||a.content||"");e.scope=a.scope||e.scope,e.isShown||(e.hasBackdrop=!a.noBackdrop&&a.showBackdrop!==!1,e.hasBackdrop&&(r.retain(),r.getElement().addClass("backdrop-loading"))),a.duration&&(i.cancel(e.durationTimeout),e.durationTimeout=i(angular.bind(e,e.hide),+a.duration)),S(),S=u.registerBackButtonAction(h,f.loading),c.then(function(n){if(n){var r=e.element.children();r.html(n),s(r.contents())(e.scope)}e.isShown&&(e.element.addClass("visible"),ionic.requestAnimationFrame(function(){e.isShown&&(e.element.addClass("active"),t.addClass("loading-active"))}))}),e.isShown=!0},e.hide=function(){S(),e.isShown&&(e.hasBackdrop&&(r.release(),r.getElement().removeClass("backdrop-loading")),e.element.removeClass("active"),t.removeClass("loading-active"),setTimeout(function(){!e.isShown&&e.element.removeClass("visible")},200)),i.cancel(e.durationTimeout),e.isShown=!1},e})),w}function p(t){t=c({},e||{},t||{});var n=t.delay||t.showDelay||0;return C(),_(),t.hideOnStateChange&&(C=l.$on("$stateChangeSuccess",b),_=l.$on("$stateChangeError",b)),i.cancel(E),E=i(h,n),E.then(d).then(function(e){return e.show(t)}),{hide:function(){return a.error(m),b.apply(this,arguments)},show:function(){return a.error(v),p.apply(this,arguments)},setContent:function(e){return a.error(y),d().then(function(t){t.show({template:e})})}}}function b(){C(),_(),i.cancel(E),d().then(function(e){e.hide()})}var w,S=h,C=h,_=h,E=o.when();return{show:p,hide:b,_getLoader:d}}]),s.factory("$ionicModal",["$rootScope","$ionicBody","$compile","$timeout","$ionicPlatform","$ionicTemplateLoader","$$q","$log","$ionicClickBlock","$window","IONIC_BACK_PRIORITY",function(e,t,n,r,i,o,a,s,u,l,f){var d=ionic.views.Modal.inherit({initialize:function(e){ionic.views.Modal.prototype.initialize.call(this,e),this.animation=e.animation||"slide-in-up"},show:function(e){var n=this;if(n.scope.$$destroyed)return s.error("Cannot call "+n.viewType+".show() after remove(). Please create a new "+n.viewType+" instance."),
a.when();u.show(600),v.add(n);var o=p(n.modalEl);n.el.classList.remove("hide"),r(function(){n._isShown&&t.addClass(n.viewType+"-open")},400,!1),n.el.parentElement||(o.addClass(n.animation),t.append(n.el));var c=o.data("$$ionicScrollController");return c&&c.resize(),e&&n.positionView&&(n.positionView(e,o),n._onWindowResize=function(){n._isShown&&n.positionView(e,o)},ionic.on("resize",n._onWindowResize,window)),o.addClass("ng-enter active").removeClass("ng-leave ng-leave-active"),n._isShown=!0,n._deregisterBackButton=i.registerBackButtonAction(n.hardwareBackButtonClose?angular.bind(n,n.hide):h,f.modal),ionic.views.Modal.prototype.show.call(n),r(function(){n._isShown&&(o.addClass("ng-enter-active"),n.scope.$parent&&n.scope.$parent.$broadcast(n.viewType+".shown",n),n.el.classList.add("active"),n.scope.$broadcast("$ionicHeader.align"))},20),r(function(){n._isShown&&n.$el.on("click",function(e){n.backdropClickToClose&&e.target===n.el&&v.isHighest(n)&&n.hide()})},400)},hide:function(){var e=this,n=p(e.modalEl);return u.show(600),v.remove(e),e.el.classList.remove("active"),n.addClass("ng-leave"),r(function(){e._isShown||n.addClass("ng-leave-active").removeClass("ng-enter ng-enter-active active")},20,!1),e.$el.off("click"),e._isShown=!1,e.scope.$parent&&e.scope.$parent.$broadcast(e.viewType+".hidden",e),e._deregisterBackButton&&e._deregisterBackButton(),ionic.views.Modal.prototype.hide.call(e),e.positionView&&ionic.off("resize",e._onWindowResize,window),r(function(){t.removeClass(e.viewType+"-open"),e.el.classList.add("hide")},e.hideDelay||320)},remove:function(){var e=this;return e.scope.$parent&&e.scope.$parent.$broadcast(e.viewType+".removed",e),e.hide().then(function(){e.scope.$destroy(),e.$el.remove()})},isShown:function(){return!!this._isShown}}),g=function(t,r){var i=r.scope&&r.scope.$new()||e.$new(!0);r.viewType=r.viewType||"modal",c(i,{$hasHeader:!1,$hasSubheader:!1,$hasFooter:!1,$hasSubfooter:!1,$hasTabs:!1,$hasTabsTop:!1});var o=n("<ion-"+r.viewType+">"+t+"</ion-"+r.viewType+">")(i);r.$el=o,r.el=o[0],r.modalEl=r.el.querySelector("."+r.viewType);var a=new d(r);return a.scope=i,r.scope||(i[r.viewType]=a),a},m=[],v={add:function(e){m.push(e)},remove:function(e){var t=m.indexOf(e);t>-1&&t<m.length&&m.splice(t,1)},isHighest:function(e){var t=m.indexOf(e);return t>-1&&t===m.length-1}};return{fromTemplate:function(e,t){var n=g(e,t||{});return n},fromTemplateUrl:function(e,t,n){var r;return angular.isFunction(t)&&(r=t,t=n),o.load(e).then(function(e){var n=g(e,t||{});return r&&r(n),n})},stack:v}}]),s.service("$ionicNavBarDelegate",ionic.DelegateService(["align","showBackButton","showBar","title","changeTitle","setTitle","getTitle","back","getPreviousTitle"])),s.service("$ionicNavViewDelegate",ionic.DelegateService(["clearCache"])),s.constant("IONIC_BACK_PRIORITY",{view:100,sideMenu:150,modal:200,actionSheet:300,popup:400,loading:500}).provider("$ionicPlatform",function(){return{$get:["$q",function(e){var t={onHardwareBackButton:function(e){ionic.Platform.ready(function(){document.addEventListener("backbutton",e,!1)})},offHardwareBackButton:function(e){ionic.Platform.ready(function(){document.removeEventListener("backbutton",e)})},$backButtonActions:{},registerBackButtonAction:function(e,n,r){t._hasBackButtonHandler||(t.$backButtonActions={},t.onHardwareBackButton(t.hardwareBackButtonClick),t._hasBackButtonHandler=!0);var i={id:r?r:ionic.Utils.nextUid(),priority:n?n:0,fn:e};return t.$backButtonActions[i.id]=i,function(){delete t.$backButtonActions[i.id]}},hardwareBackButtonClick:function(e){var n,r;for(r in t.$backButtonActions)(!n||t.$backButtonActions[r].priority>=n.priority)&&(n=t.$backButtonActions[r]);return n?(n.fn(e),n):void 0},is:function(e){return ionic.Platform.is(e)},on:function(e,t){return ionic.Platform.ready(function(){document.addEventListener(e,t,!1)}),function(){ionic.Platform.ready(function(){document.removeEventListener(e,t)})}},ready:function(t){var n=e.defer();return ionic.Platform.ready(function(){n.resolve(),t&&t()}),n.promise}};return t}]}}),s.factory("$ionicPopover",["$ionicModal","$ionicPosition","$document","$window",function(e,t,n,r){function i(e,n){var i=p(e.target||e),a=t.offset(i),s=n.prop("offsetWidth"),c=n.prop("offsetHeight"),u=r.innerWidth,l=r.innerHeight,f={left:a.left+a.width/2-s/2},d=p(n[0].querySelector(".popover-arrow"));f.left<o?f.left=o:f.left+s+o>u&&(f.left=u-s-o),a.top+a.height+c>l&&a.top-c>0?(f.top=a.top-c,n.addClass("popover-bottom")):(f.top=a.top+a.height,n.removeClass("popover-bottom")),d.css({left:a.left+a.width/2-d.prop("offsetWidth")/2-f.left+"px"}),n.css({top:f.top+"px",left:f.left+"px",marginLeft:"0",opacity:"1"})}var o=6,a={viewType:"popover",hideDelay:1,animation:"none",positionView:i};return{fromTemplate:function(t,n){return e.fromTemplate(t,ionic.Utils.extend(a,n||{}))},fromTemplateUrl:function(t,n){return e.fromTemplateUrl(t,ionic.Utils.extend(a,n||{}))}}}]);var b='<div class="popup-container" ng-class="cssClass"><div class="popup"><div class="popup-head"><h3 class="popup-title" ng-bind-html="title"></h3><h5 class="popup-sub-title" ng-bind-html="subTitle" ng-if="subTitle"></h5></div><div class="popup-body"></div><div class="popup-buttons" ng-show="buttons.length"><button ng-repeat="button in buttons" ng-click="$buttonTapped(button, $event)" class="button" ng-class="button.type || \'button-default\'" ng-bind-html="button.text"></button></div></div></div>';s.factory("$ionicPopup",["$ionicTemplateLoader","$ionicBackdrop","$q","$timeout","$rootScope","$ionicBody","$compile","$ionicPlatform","$ionicModal","IONIC_BACK_PRIORITY",function(e,t,n,r,i,o,a,s,u,l){function f(t){t=c({scope:null,title:"",buttons:[]},t||{});var s={};return s.scope=(t.scope||i).$new(),s.element=p(b),s.responseDeferred=n.defer(),o.get().appendChild(s.element[0]),a(s.element)(s.scope),c(s.scope,{title:t.title,buttons:t.buttons,subTitle:t.subTitle,cssClass:t.cssClass,$buttonTapped:function(e,t){var n=(e.onTap||h)(t);t=t.originalEvent||t,t.defaultPrevented||s.responseDeferred.resolve(n)}}),n.when(t.templateUrl?e.load(t.templateUrl):t.template||t.content||"").then(function(e){var t=p(s.element[0].querySelector(".popup-body"));e?(t.html(e),a(t.contents())(s.scope)):t.remove()}),s.show=function(){s.isShown||s.removed||(u.stack.add(s),s.isShown=!0,ionic.requestAnimationFrame(function(){s.isShown&&(s.element.removeClass("popup-hidden"),s.element.addClass("popup-showing active"),m(s.element))}))},s.hide=function(e){return e=e||h,s.isShown?(u.stack.remove(s),s.isShown=!1,s.element.removeClass("active"),s.element.addClass("popup-hidden"),void r(e,250,!1)):e()},s.remove=function(){!s.removed&&u.stack.isHighest(s)&&(s.hide(function(){s.element.remove(),s.scope.$destroy()}),s.removed=!0)},s}function d(){var e=C[C.length-1];e&&e.responseDeferred.resolve()}function g(e){function n(){C.push(i),r(i.show,a,!1),i.responseDeferred.promise.then(function(e){var n=C.indexOf(i);return-1!==n&&C.splice(n,1),C.length>0?C[C.length-1].show():(t.release(),r(function(){C.length||o.removeClass("popup-open")},400,!1),(_._backButtonActionDone||h)()),i.remove(),e})}var i=_._createPopup(e),a=0;return C.length>0?(C[C.length-1].hide(),a=S.stackPushDelay):(o.addClass("popup-open"),t.retain(),_._backButtonActionDone=s.registerBackButtonAction(d,l.popup)),i.responseDeferred.promise.close=function(e){i.removed||i.responseDeferred.resolve(e)},i.responseDeferred.notify({close:i.responseDeferred.close}),n(),i.responseDeferred.promise}function m(e){var t=e[0].querySelector("[autofocus]");t&&t.focus()}function v(e){return g(c({buttons:[{text:e.okText||"OK",type:e.okType||"button-positive",onTap:function(){return!0}}]},e||{}))}function y(e){return g(c({buttons:[{text:e.cancelText||"Cancel",type:e.cancelType||"button-default",onTap:function(){return!1}},{text:e.okText||"OK",type:e.okType||"button-positive",onTap:function(){return!0}}]},e||{}))}function w(e){var t=i.$new(!0);t.data={};var n="";return e.template&&/<[a-z][\s\S]*>/i.test(e.template)===!1&&(n="<span>"+e.template+"</span>",delete e.template),g(c({template:n+'<input ng-model="data.response" type="'+(e.inputType||"text")+'" placeholder="'+(e.inputPlaceholder||"")+'">',scope:t,buttons:[{text:e.cancelText||"Cancel",type:e.cancelType||"button-default",onTap:function(){}},{text:e.okText||"OK",type:e.okType||"button-positive",onTap:function(){return t.data.response||""}}]},e||{}))}var S={stackPushDelay:75},C=[],_={show:g,alert:v,confirm:y,prompt:w,_createPopup:f,_popupStack:C};return _}]),s.factory("$ionicPosition",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function r(e){return"static"===(n(e,"position")||"static")}var i=function(t){for(var n=e[0],i=t.offsetParent||n;i&&i!==n&&r(i);)i=i.offsetParent;return i||n};return{position:function(t){var n=this.offset(t),r={top:0,left:0},o=i(t[0]);o!=e[0]&&(r=this.offset(p(o)),r.top+=o.clientTop-o.scrollTop,r.left+=o.clientLeft-o.scrollLeft);var a=t[0].getBoundingClientRect();return{width:a.width||t.prop("offsetWidth"),height:a.height||t.prop("offsetHeight"),top:n.top-r.top,left:n.left-r.left}},offset:function(n){var r=n[0].getBoundingClientRect();return{width:r.width||n.prop("offsetWidth"),height:r.height||n.prop("offsetHeight"),top:r.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}}]),s.service("$ionicScrollDelegate",ionic.DelegateService(["resize","scrollTop","scrollBottom","scrollTo","scrollBy","zoomTo","zoomBy","getScrollPosition","anchorScroll","freezeScroll","freezeAllScrolls","getScrollView"])),s.service("$ionicSideMenuDelegate",ionic.DelegateService(["toggleLeft","toggleRight","getOpenRatio","isOpen","isOpenLeft","isOpenRight","canDragContent","edgeDragThreshold"])),s.service("$ionicSlideBoxDelegate",ionic.DelegateService(["update","slide","select","enableSlide","previous","next","stop","autoPlay","start","currentIndex","selected","slidesCount","count","loop"])),s.service("$ionicTabsDelegate",ionic.DelegateService(["select","selectedIndex"])),function(){var e=[];s.factory("$ionicTemplateCache",["$http","$templateCache","$timeout",function(t,n,r){function i(e){return"undefined"==typeof e?o():(d(e)&&(e=[e]),u(e,function(e){s.push(e)}),void(a&&o()))}function o(){var e;if(i._runCount++,a=!0,0!==s.length){for(var c=0;4>c&&(e=s.pop());)d(e)&&t.get(e,{cache:n}),c++;s.length&&r(o,1e3)}}var a,s=e;return i._runCount=0,i}]).config(["$stateProvider","$ionicConfigProvider",function(t,n){var r=t.state;t.state=function(i,o){if("object"==typeof o){var a=o.prefetchTemplate!==!1&&e.length<n.templates.maxPrefetch();if(a&&d(o.templateUrl)&&e.push(o.templateUrl),angular.isObject(o.views))for(var s in o.views)a=o.views[s].prefetchTemplate!==!1&&e.length<n.templates.maxPrefetch(),a&&d(o.views[s].templateUrl)&&e.push(o.views[s].templateUrl)}return r.call(t,i,o)}}]).run(["$ionicTemplateCache",function(e){e()}])}(),s.factory("$ionicTemplateLoader",["$compile","$controller","$http","$q","$rootScope","$templateCache",function(e,t,n,r,i,o){function a(e){return n.get(e,{cache:o}).then(function(e){return e.data&&e.data.trim()})}function s(n){n=c({template:"",templateUrl:"",scope:null,controller:null,locals:{},appendTo:null},n||{});var o=n.templateUrl?this.load(n.templateUrl):r.when(n.template);return o.then(function(r){var o,a=n.scope||i.$new(),s=p("<div>").html(r).contents();return n.controller&&(o=t(n.controller,c(n.locals,{$scope:a})),s.children().data("$ngControllerController",o)),n.appendTo&&p(n.appendTo).append(s),e(s)(a),{element:s,scope:a}})}return{load:a,compile:s}}]),s.factory("$ionicViewService",["$ionicHistory","$log",function(e,t){function n(e,n){t.warn("$ionicViewService"+e+" is deprecated, please use $ionicHistory"+n+" instead: http://ionicframework.com/docs/nightly/api/service/$ionicHistory/")}n("","");var r={getCurrentView:"currentView",getBackView:"backView",getForwardView:"forwardView",getCurrentStateName:"currentStateName",nextViewOptions:"nextViewOptions",clearHistory:"clearHistory"};return u(r,function(t,i){r[i]=function(){return n("."+i,"."+t),e[t].apply(this,arguments)}}),r}]),s.factory("$ionicViewSwitcher",["$timeout","$document","$q","$ionicClickBlock","$ionicConfig","$ionicNavBarDelegate",function(e,t,n,r,i,o){function a(e,t){return s(e)["abstract"]?s(e).name:t?t.stateId||t.viewId:ionic.Utils.nextUid()}function s(e){return e&&e.$$state&&e.$$state.self||{}}function f(e,t,n,r){var o=s(e),a=m||N(t,"view-transition")||o.viewTransition||i.views.transition()||"ios",u=i.navBar.transition();return n=v||N(t,"view-direction")||o.viewDirection||n||"none",c(d(r),{transition:a,navBarTransition:"view"===u?a:u,direction:n,shouldAnimate:"none"!==a&&"none"!==n})}function d(e){return e=e||{},{viewId:e.viewId,historyId:e.historyId,stateId:e.stateId,stateName:e.stateName,stateParams:e.stateParams}}function h(e,t){return arguments.length>1?void N(e,T,t):N(e,T)}function g(e){if(e&&e.length){var t=e.scope();t&&(t.$emit("$ionicView.unloaded",e.data(E)),t.$destroy()),e.remove()}}var m,v,y="webkitTransitionEnd transitionend",b="$noCache",w="$destroyEle",S="$eleId",C="$accessed",_="$fallbackTimer",E="$viewData",T="nav-view",A="active",I="cached",k="stage",x=0;ionic.transition=ionic.transition||{},ionic.transition.isActive=!1;var B,N=ionic.DomUtil.cachedAttr,D=[],R=1100,j={create:function(t,u,p,T,B,$){var L,M,O,P=++x,U={init:function(e,t){j.isTransitioning(!0),U.loadViewElements(e),U.render(e,function(){t&&t()})},loadViewElements:function(e){var n,r,i,o=t.getViewElements(),s=a(u,p),c=t.activeEleId();for(n=0,r=o.length;r>n&&(i=o.eq(n),i.data(S)===s?i.data(b)?(i.data(S,s+ionic.Utils.nextUid()),i.data(w,!0)):L=i:l(c)&&i.data(S)===c&&(M=i),!L||!M);n++);O=!!L,O||(L=e.ele||j.createViewEle(u),L.data(S,s)),$&&t.activeEleId(s),e.ele=null},render:function(e,n){if(O)ionic.Utils.reconnectScope(L.scope());else{h(L,k);var r=f(u,L,e.direction,p),o=i.transitions.views[r.transition]||i.transitions.views.none;o(L,null,r.direction,!0).run(0),L.data(E,{viewId:r.viewId,historyId:r.historyId,stateName:r.stateName,stateParams:r.stateParams}),(s(u).cache===!1||"false"===s(u).cache||"false"==L.attr("cache-view")||0===i.views.maxCache())&&L.data(b,!0);var a=t.appendViewElement(L,u);delete r.direction,delete r.transition,a.$emit("$ionicView.loaded",r)}L.data(C,Date.now()),n&&n()},transition:function(a,s,l){function g(){h(L,q.shouldAnimate?"entering":A),h(M,q.shouldAnimate?"leaving":I),q.run(1),o._instances.forEach(function(e){e.triggerTransitionStart(P)}),q.shouldAnimate||w()}function b(e){e.target===this&&w()}function w(){w.x||(w.x=!0,L.off(y,b),e.cancel(L.data(_)),M&&e.cancel(M.data(_)),U.emit("after",F,V),E&&E.resolve(t),P===x&&(n.all(D).then(j.transitionEnd),U.cleanup(F)),o._instances.forEach(function(e){e.triggerTransitionEnd()}),m=v=p=T=L=M=null)}function S(e){e.target===this&&C()}function C(){h(L,I),h(M,A),L.off(y,S),e.cancel(L.data(_)),j.transitionEnd([t])}var E,F=f(u,L,a,p),V=c(c({},F),d(T));F.transitionId=V.transitionId=P,F.fromCache=!!O,F.enableBack=!!s,F.renderStart=B,F.renderEnd=$,N(L.parent(),"nav-view-transition",F.transition),N(L.parent(),"nav-view-direction",F.direction),e.cancel(L.data(_));var z=i.transitions.views[F.transition]||i.transitions.views.none,q=z(L,M,F.direction,F.shouldAnimate&&l&&$);if(q.shouldAnimate&&(L.on(y,b),L.data(_,e(w,R)),r.show(R)),B&&(U.emit("before",F,V),h(L,k),q.run(0)),$&&(E=n.defer(),D.push(E.promise)),B&&$)e(g,16);else{if(!$)return h(L,"entering"),h(M,"leaving"),{run:q.run,cancel:function(t){t?(L.on(y,S),L.data(_,e(C,R)),r.show(R)):C(),q.shouldAnimate=t,q.run(0),q=null}};$&&g()}},emit:function(e,t,n){var r=L.scope(),i=M&&M.scope();"after"==e&&(r&&r.$emit("$ionicView.enter",t),i?i.$emit("$ionicView.leave",n):r&&n&&n.viewId&&r.$emit("$ionicNavView.leave",n)),r&&r.$emit("$ionicView."+e+"Enter",t),i?i.$emit("$ionicView."+e+"Leave",n):r&&n&&n.viewId&&r.$emit("$ionicNavView."+e+"Leave",n)},cleanup:function(e){M&&"back"==e.direction&&!i.views.forwardCache()&&g(M);var n,r,o,a=t.getViewElements(),s=a.length,c=s-1>i.views.maxCache(),u=Date.now();for(n=0;s>n;n++)r=a.eq(n),c&&r.data(C)<u?(u=r.data(C),o=a.eq(n)):r.data(w)&&h(r)!=A&&g(r);g(o),L.data(b)&&L.data(w,!0)},enteringEle:function(){return L},leavingEle:function(){return M}};return U},transitionEnd:function(e){u(e,function(e){e.transitionEnd()}),j.isTransitioning(!1),r.hide(),D=[]},nextTransition:function(e){m=e},nextDirection:function(e){v=e},isTransitioning:function(t){return arguments.length&&(ionic.transition.isActive=!!t,e.cancel(B),t&&(B=e(function(){j.isTransitioning(!1)},999))),ionic.transition.isActive},createViewEle:function(e){var n=t[0].createElement("div");return e&&e.$template&&(n.innerHTML=e.$template,1===n.children.length)?(n.children[0].classList.add("pane"),p(n.children[0])):(n.className="pane",p(n))},viewEleIsActive:function(e,t){h(e,t?A:I)},getTransitionData:f,navViewAttr:h,destroyViewEle:g};return j}]),s.config(["$provide",function(e){e.decorator("$compile",["$delegate",function(e){return e.$$addScopeInfo=function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)},e}])}]),s.config(["$provide",function(e){function t(e,t){return e.__hash=e.hash,e.hash=function(n){return l(n)&&n.length>0&&t(function(){var e=document.querySelector(".scroll-content");e&&(e.scrollTop=0)},0,!1),e.__hash(n)},e}e.decorator("$location",["$delegate","$timeout",t])}]),s.controller("$ionicHeaderBar",["$scope","$element","$attrs","$q","$ionicConfig","$ionicHistory",function(e,t,n,r,i,o){function a(e){return E[e]||(E[e]=t[0].querySelector("."+e)),E[e]}var s="title",c="back-text",u="back-button",l="default-title",f="previous-title",d="hide",p=this,h="",g="",m=0,v=0,y="",b=!1,w=!0,S=!0,C=!1,_=0;p.beforeEnter=function(t){e.$broadcast("$ionicView.beforeEnter",t)},p.title=function(e){return arguments.length&&e!==h&&(a(s).innerHTML=e,h=e,_=0),h},p.enableBack=function(e,t){return arguments.length&&(b=e,t||p.updateBackButton()),b},p.showBack=function(e,t){return arguments.length&&(w=e,t||p.updateBackButton()),w},p.showNavBack=function(e){S=e,p.updateBackButton()},p.updateBackButton=function(){var e;(w&&S&&b)!==C&&(C=w&&S&&b,e=a(u),e&&e.classList[C?"remove":"add"](d)),b&&(e=e||a(u),e&&(p.backButtonIcon!==i.backButton.icon()&&(e=a(u+" .icon"),e&&(p.backButtonIcon=i.backButton.icon(),e.className="icon "+p.backButtonIcon)),p.backButtonText!==i.backButton.text()&&(e=a(u+" .back-text"),e&&(e.textContent=p.backButtonText=i.backButton.text()))))},p.titleTextWidth=function(){if(!_){var e=ionic.DomUtil.getTextBounds(a(s));_=Math.min(e&&e.width||30)}return _},p.titleWidth=function(){var e=p.titleTextWidth(),t=a(s).offsetWidth;return e>t&&(e=t+(m-v-5)),e},p.titleTextX=function(){return t[0].offsetWidth/2-p.titleWidth()/2},p.titleLeftRight=function(){return m-v},p.backButtonTextLeft=function(){for(var e=0,t=a(c);t;)e+=t.offsetLeft,t=t.parentElement;return e},p.resetBackButton=function(e){if(i.backButton.previousTitleText()){var t=a(f);if(t){t.classList.remove(d);var n=e&&o.getViewById(e.viewId),r=o.backTitle(n);r!==g&&(g=t.innerHTML=r)}var s=a(l);s&&s.classList.remove(d)}},p.align=function(e){var r=a(s);e=e||n.alignTitle||i.navBar.alignTitle();var o=p.calcWidths(e,!1);if(w&&g&&i.backButton.previousTitleText()){var c=p.calcWidths(e,!0),u=t[0].offsetWidth-c.titleLeft-c.titleRight;p.titleTextWidth()<=u&&(o=c)}return p.updatePositions(r,o.titleLeft,o.titleRight,o.buttonsLeft,o.buttonsRight,o.css,o.showPrevTitle)},p.calcWidths=function(e,n){var r,i,o,p,h,g,m,v,y,b=a(s),S=a(u),C=t[0].childNodes,_=0,E=0,T=0,A=0,I="",k=0;for(r=0;r<C.length;r++){if(h=C[r],m=0,1==h.nodeType){if(h===b){y=!0;continue}if(h.classList.contains(d))continue;if(w&&h===S){for(i=0;i<h.childNodes.length;i++)if(p=h.childNodes[i],1==p.nodeType)if(p.classList.contains(c))for(o=0;o<p.children.length;o++)if(g=p.children[o],n){if(g.classList.contains(l))continue;k+=g.offsetWidth}else{if(g.classList.contains(f))continue;k+=g.offsetWidth}else k+=p.offsetWidth;else 3==p.nodeType&&p.nodeValue.trim()&&(v=ionic.DomUtil.getTextBounds(p),k+=v&&v.width||0);m=k||h.offsetWidth}else m=h.offsetWidth}else 3==h.nodeType&&h.nodeValue.trim()&&(v=ionic.DomUtil.getTextBounds(h),m=v&&v.width||0);y?E+=m:_+=m}if("left"==e)I="title-left",_&&(T=_+15),E&&(A=E+15);else if("right"==e)I="title-right",_&&(T=_+15),E&&(A=E+15);else{var x=Math.max(_,E)+10;x>10&&(T=A=x)}return{backButtonWidth:k,buttonsLeft:_,buttonsRight:E,titleLeft:T,titleRight:A,showPrevTitle:n,css:I}},p.updatePositions=function(e,n,o,s,c,u,h){var g=r.defer();if(e&&(n!==m&&(e.style.left=n?n+"px":"",m=n),o!==v&&(e.style.right=o?o+"px":"",v=o),u!==y&&(u&&e.classList.add(u),y&&e.classList.remove(y),y=u)),i.backButton.previousTitleText()){var b=a(f),w=a(l);b&&b.classList[h?"remove":"add"](d),w&&w.classList[h?"add":"remove"](d)}return ionic.requestAnimationFrame(function(){if(e&&e.offsetWidth+10<e.scrollWidth){var n=c+5,r=t[0].offsetWidth-m-p.titleTextWidth()-20;o=n>r?n:r,o!==v&&(e.style.right=o+"px",v=o)}g.resolve()}),g.promise},p.setCss=function(e,t){ionic.DomUtil.cachedStyles(a(e),t)};var E={};e.$on("$destroy",function(){for(var e in E)E[e]=null})}]),s.controller("$ionInfiniteScroll",["$scope","$attrs","$element","$timeout",function(e,t,n,r){function i(){ionic.requestAnimationFrame(function(){n[0].classList.add("active")}),c.isLoading=!0,e.$parent&&e.$parent.$apply(t.onInfinite||"")}function o(){ionic.requestAnimationFrame(function(){n[0].classList.remove("active")}),r(function(){c.jsScrolling&&c.scrollView.resize(),(c.jsScrolling&&c.scrollView.__container&&c.scrollView.__container.offsetHeight>0||!c.jsScrolling)&&c.checkBounds()},30,!1),c.isLoading=!1}function a(){if(!c.isLoading){var e={};if(c.jsScrolling){e=c.getJSMaxScroll();var t=c.scrollView.getValues();(-1!==e.left&&t.left>=e.left||-1!==e.top&&t.top>=e.top)&&i()}else e=c.getNativeMaxScroll(),(-1!==e.left&&c.scrollEl.scrollLeft>=e.left-c.scrollEl.clientWidth||-1!==e.top&&c.scrollEl.scrollTop>=e.top-c.scrollEl.clientHeight)&&i()}}function s(e){var n=(t.distance||"2.5%").trim(),r=-1!==n.indexOf("%");return r?e*(1-parseFloat(n)/100):e-parseFloat(n)}var c=this;c.isLoading=!1,e.icon=function(){return l(t.icon)?t.icon:"ion-load-d"},e.spinner=function(){return l(t.spinner)?t.spinner:""},e.$on("scroll.infiniteScrollComplete",function(){o()}),e.$on("$destroy",function(){c.scrollCtrl&&c.scrollCtrl.$element&&c.scrollCtrl.$element.off("scroll",c.checkBounds),c.scrollEl&&c.scrollEl.removeEventListener&&c.scrollEl.removeEventListener("scroll",c.checkBounds)}),c.checkBounds=ionic.Utils.throttle(a,300),c.getJSMaxScroll=function(){var e=c.scrollView.getScrollMax();return{left:c.scrollView.options.scrollingX?s(e.left):-1,top:c.scrollView.options.scrollingY?s(e.top):-1}},c.getNativeMaxScroll=function(){var e={left:c.scrollEl.scrollWidth,top:c.scrollEl.scrollHeight},t=window.getComputedStyle(c.scrollEl)||{};return{left:"scroll"===t.overflowX||"auto"===t.overflowX||"scroll"===c.scrollEl.style["overflow-x"]?s(e.left):-1,top:"scroll"===t.overflowY||"auto"===t.overflowY||"scroll"===c.scrollEl.style["overflow-y"]?s(e.top):-1}},c.__finishInfiniteScroll=o}]),s.service("$ionicListDelegate",ionic.DelegateService(["showReorder","showDelete","canSwipeItems","closeOptionButtons"])).controller("$ionicList",["$scope","$attrs","$ionicListDelegate","$ionicHistory",function(e,t,n,r){var i=this,o=!0,a=!1,s=!1,c=n._registerInstance(i,t.delegateHandle,function(){return r.isActiveScope(e)});e.$on("$destroy",c),i.showReorder=function(e){return arguments.length&&(a=!!e),a},i.showDelete=function(e){return arguments.length&&(s=!!e),s},i.canSwipeItems=function(e){return arguments.length&&(o=!!e),o},i.closeOptionButtons=function(){i.listView&&i.listView.clearDragEffects()}}]),s.controller("$ionicNavBar",["$scope","$element","$attrs","$compile","$timeout","$ionicNavBarDelegate","$ionicConfig","$ionicHistory",function(e,t,n,r,i,o,a,s){function c(e,t){var n=console.warn||console.log;n&&n.call(console,"navBarController."+e+" is deprecated, please use "+t+" instead")}function f(e){return k[e]?p(k[e]):void 0}function d(){for(var e=0;e<I.length;e++)if(I[e].isActive)return I[e]}function h(){for(var e=0;e<I.length;e++)if(!I[e].isActive)return I[e]}function g(e,t){e&&ionic.DomUtil.cachedAttr(e.containerEle(),"nav-bar",t)}function m(e){ionic.DomUtil.cachedAttr(t,"nav-swipe",e)}var v,y,b,w="hide",S="$ionNavBarController",C="primaryButtons",_="secondaryButtons",E="backButton",T="primaryButtons secondaryButtons leftButtons rightButtons title".split(" "),A=this,I=[],k={},x=!0;t.parent().data(S,A);var B=n.delegateHandle||"navBar"+ionic.Utils.nextUid(),N=o._registerInstance(A,B);A.init=function(){t.addClass("nav-bar-container"),ionic.DomUtil.cachedAttr(t,"nav-bar-transition",a.views.transition()),A.createHeaderBar(!1),A.createHeaderBar(!0),e.$emit("ionNavBar.init",B)},A.createHeaderBar=function(i){function o(e,t){e&&("title"===t?m.append(e):"rightButtons"==t||t==_&&"left"!=a.navBar.positionSecondaryButtons()||t==C&&"right"==a.navBar.positionPrimaryButtons()?(g||(g=p('<div class="buttons buttons-right">'),d.append(g)),t==_?g.append(e):g.prepend(e)):(h||(h=p('<div class="buttons buttons-left">'),v[E]?v[E].after(h):d.prepend(h)),t==_?h.append(e):h.prepend(e)))}var s=p('<div class="nav-bar-block">');ionic.DomUtil.cachedAttr(s,"nav-bar",i?"active":"cached");var c=n.alignTitle||a.navBar.alignTitle(),d=p("<ion-header-bar>").addClass(n["class"]).attr("align-title",c);l(n.noTapScroll)&&d.attr("no-tap-scroll",n.noTapScroll);var h,g,m=p('<div class="title title-'+c+'">'),v={},y={};v[E]=f(E),v[E]&&d.append(v[E]),d.append(m),u(T,function(e){v[e]=f(e),o(v[e],e)});for(var b=0;b<d[0].children.length;b++)d[0].children[b].classList.add("header-item");s.append(d),t.append(r(s)(e.$new()));var S=d.data("$ionHeaderBarController");S.backButtonIcon=a.backButton.icon(),S.backButtonText=a.backButton.text();var A={isActive:i,title:function(e){S.title(e)},setItem:function(e,t){A.removeItem(t),e?("title"===t&&A.title(""),o(e,t),v[t]&&v[t].addClass(w),y[t]=e):v[t]&&v[t].removeClass(w)},removeItem:function(e){y[e]&&(y[e].scope().$destroy(),y[e].remove(),y[e]=null)},containerEle:function(){return s},headerBarEle:function(){return d},afterLeave:function(){u(T,function(e){A.removeItem(e)}),S.resetBackButton()},controller:function(){return S},destroy:function(){u(T,function(e){A.removeItem(e)}),s.scope().$destroy();for(var e in v)v[e]&&(v[e].removeData(),v[e]=null);h&&h.removeData(),g&&g.removeData(),m.removeData(),d.removeData(),s.remove(),s=d=m=h=g=null}};return I.push(A),A},A.navElement=function(e,t){return l(t)&&(k[e]=t),k[e]},A.update=function(e){var t=!e.hasHeaderBar&&e.showNavBar;e.transition=a.views.transition(),t||(e.direction="none"),A.enable(t);var n=A.isInitialized?h():d(),r=A.isInitialized?d():null,i=n.controller();i.enableBack(e.enableBack,!0),i.showBack(e.showBack,!0),i.updateBackButton(),A.title(e.title,n),A.showBar(t),e.navBarItems&&u(T,function(t){n.setItem(e.navBarItems[t],t)}),A.transition(n,r,e),A.isInitialized=!0,m("")},A.transition=function(n,r,o){function s(){for(var e=0;e<I.length;e++)I[e].isActive=!1;n.isActive=!0,g(n,"active"),g(r,"cached"),A.activeTransition=f=y=null}var c=n.controller(),u=a.transitions.navBar[o.navBarTransition]||a.transitions.navBar.none,l=o.transitionId;c.beforeEnter(o);var f=u(n,r,o.direction,o.shouldAnimate&&A.isInitialized);ionic.DomUtil.cachedAttr(t,"nav-bar-transition",o.navBarTransition),ionic.DomUtil.cachedAttr(t,"nav-bar-direction",o.direction),f.shouldAnimate&&o.renderEnd?g(n,"stage"):(g(n,"entering"),g(r,"leaving")),c.resetBackButton(o),f.run(0),A.activeTransition={run:function(e){f.shouldAnimate=!1,f.direction="back",f.run(e)},cancel:function(t,i,o){m(i),g(r,"active"),g(n,"cached"),f.shouldAnimate=t,f.run(0),A.activeTransition=f=null;var a;o.showBar!==A.showBar()&&A.showBar(o.showBar),o.showBackButton!==A.showBackButton()&&A.showBackButton(o.showBackButton),a&&e.$apply()},complete:function(e,t){m(t),f.shouldAnimate=e,f.run(1),y=s}},i(c.align,16),(v=function(){b===l&&(g(n,"entering"),g(r,"leaving"),f.run(1),y=function(){b!=l&&f.shouldAnimate||s()},v=null)})()},A.triggerTransitionStart=function(e){b=e,v&&v()},A.triggerTransitionEnd=function(){y&&y()},A.showBar=function(t){return arguments.length&&(A.visibleBar(t),e.$parent.$hasHeader=!!t),!!e.$parent.$hasHeader},A.visibleBar=function(e){e&&!x?(t.removeClass(w),A.align()):!e&&x&&t.addClass(w),x=e},A.enable=function(e){A.visibleBar(e);for(var t=0;t<o._instances.length;t++)o._instances[t]!==A&&o._instances[t].visibleBar(!1)},A.showBackButton=function(t){if(arguments.length){for(var n=0;n<I.length;n++)I[n].controller().showNavBack(!!t);e.$isBackButtonShown=!!t}return e.$isBackButtonShown},A.showActiveBackButton=function(e){var t=d();return t?arguments.length?t.controller().showBack(e):t.controller().showBack():void 0},A.title=function(t,n){return l(t)&&(t=t||"",n=n||d(),n&&n.title(t),e.$title=t,s.currentTitle(t)),e.$title},A.align=function(e,t){t=t||d(),t&&t.controller().align(e)},A.hasTabsTop=function(e){t[e?"addClass":"removeClass"]("nav-bar-tabs-top")},A.hasBarSubheader=function(e){t[e?"addClass":"removeClass"]("nav-bar-has-subheader")},A.changeTitle=function(e){c("changeTitle(val)","title(val)"),A.title(e)},A.setTitle=function(e){c("setTitle(val)","title(val)"),A.title(e)},A.getTitle=function(){return c("getTitle()","title()"),A.title()},A.back=function(){c("back()","$ionicHistory.goBack()"),s.goBack()},A.getPreviousTitle=function(){c("getPreviousTitle()","$ionicHistory.backTitle()"),s.goBack()},e.$on("$destroy",function(){e.$parent.$hasHeader=!1,t.parent().removeData(S);for(var n=0;n<I.length;n++)I[n].destroy();t.remove(),t=I=null,N()})}]),s.controller("$ionicNavView",["$scope","$element","$attrs","$compile","$controller","$ionicNavBarDelegate","$ionicNavViewDelegate","$ionicHistory","$ionicViewSwitcher","$ionicConfig","$ionicScrollDelegate",function(e,t,n,r,i,o,a,s,u,l,f){function d(e,n){for(var r,i,o=t.children(),a=0,s=o.length;s>a;a++)if(r=o.eq(a),x(r)==T){i=r.scope(),i&&i.$emit(e.name.replace("Tabs","View"),n);break}}function p(e){ionic.DomUtil.cachedAttr(t,"nav-swipe",e)}function h(e,t){var n=m();n&&n.hasTabsTop(t)}function g(e,t){var n=m();n&&n.hasBarSubheader(t)}function m(){if(y)for(var e=0;e<o._instances.length;e++)if(o._instances[e].$$delegateHandle==y)return o._instances[e];return t.inheritedData("$ionNavBarController")}var v,y,b,w,S,C="$eleId",_="$destroyEle",E="$noCache",T="active",A="cached",I=this,k=!1,x=u.navViewAttr;I.scope=e,I.element=t,I.init=function(){var r=n.name||"",i=t.parent().inheritedData("$uiView"),o=i&&i.state?i.state.name:"";r.indexOf("@")<0&&(r=r+"@"+o);var s={name:r,state:null};t.data("$uiView",s);var c=a._registerInstance(I,n.delegateHandle);return e.$on("$destroy",function(){c(),I.isSwipeFreeze&&f.freezeAllScrolls(!1)}),e.$on("$ionicHistory.deselect",I.cacheCleanup),e.$on("$ionicTabs.top",h),e.$on("$ionicSubheader",g),e.$on("$ionicTabs.beforeLeave",d),e.$on("$ionicTabs.afterLeave",d),e.$on("$ionicTabs.leave",d),ionic.Platform.ready(function(){ionic.Platform.isWebView()&&l.views.swipeBackEnabled()&&I.initSwipeBack()}),s},I.register=function(t){var n=c({},s.currentView()),r=s.register(e,t);I.update(r);var i=s.getViewById(r.viewId)||{},o=w!==r.viewId;I.render(r,t,i,n,o,!0)},I.update=function(e){k=!0,v=e.direction;var n=t.parent().inheritedData("$ionNavViewController");n&&(n.isPrimary(!1),("enter"===v||"exit"===v)&&(n.direction(v),"enter"===v&&(v="none")))},I.render=function(e,t,n,r,i,o){var a=u.create(I,t,n,r,i,o);a.init(e,function(){a.transition(I.direction(),e.enableBack,!S),w=S=null})},I.beforeEnter=function(e){if(k){y=e.navBarDelegate;var t=m();t&&t.update(e),p("")}},I.activeEleId=function(e){return arguments.length&&(b=e),b},I.transitionEnd=function(){var e,n,r,i=t.children();for(e=0,n=i.length;n>e;e++)r=i.eq(e),r.data(C)===b?x(r,T):("leaving"===x(r)||x(r)===T||x(r)===A)&&(r.data(_)||r.data(E)?u.destroyViewEle(r):(x(r,A),ionic.Utils.disconnectScope(r.scope())));p(""),I.isSwipeFreeze&&f.freezeAllScrolls(!1)},I.cacheCleanup=function(){
for(var e=t.children(),n=0,r=e.length;r>n;n++)e.eq(n).data(_)&&u.destroyViewEle(e.eq(n))},I.clearCache=function(e){var n,r,i,o,a,s,c=t.children();for(i=0,o=c.length;o>i;i++)if(n=c.eq(i),e)for(s=n.data(C),a=0;a<e.length;a++)s===e[a]&&u.destroyViewEle(n);else x(n)==A?u.destroyViewEle(n):x(n)==T&&(r=n.scope(),r&&r.$broadcast("$ionicView.clearCache"))},I.getViewElements=function(){return t.children()},I.appendViewElement=function(n,o){var a=r(n);t.append(n);var s=e.$new();if(o&&o.$$controller){o.$scope=s;var c=i(o.$$controller,o);t.children().data("$ngControllerController",c)}return a(s),s},I.title=function(e){var t=m();t&&t.title(e)},I.enableBackButton=function(e){var t=m();t&&t.enableBackButton(e)},I.showBackButton=function(e){var t=m();return t?arguments.length?t.showActiveBackButton(e):t.showActiveBackButton():!0},I.showBar=function(e){var t=m();return t?arguments.length?t.showBar(e):t.showBar():!0},I.isPrimary=function(e){return arguments.length&&(k=e),k},I.direction=function(e){return arguments.length&&(v=e),v},I.initSwipeBack=function(){function n(e){if(k&&(C=o(e),!(C>E))){h=s.backView();var n=s.currentView();if(h&&h.historyId===n.historyId&&n.canSwipeBack!==!1){b||(b=window.innerWidth),I.isSwipeFreeze=f.freezeAllScrolls(!0);var a={direction:"back"};_=[],T={showBar:I.showBar(),showBackButton:I.showBackButton()};var l=u.create(I,a,h,n,!0,!1);l.loadViewElements(a),l.render(a),c=l.transition("back",s.enabledBack(h),!0),d=m(),v=ionic.onGesture("drag",r,t[0]),y=ionic.onGesture("release",i,t[0])}}}function r(e){if(k&&c){var t=o(e);if(_.push({t:Date.now(),x:t}),t>=b-15)i(e);else{var n=Math.min(Math.max(a(t),0),1);c.run(n),d&&d.activeTransition&&d.activeTransition.run(n)}}}function i(e){if(k&&c&&_&&_.length>1){for(var t=Date.now(),n=o(e),s=_[_.length-1],u=_.length-2;u>=0&&!(t-s.t>200);u--)s=_[u];var l=n>=_[_.length-2].x,g=a(n),m=Math.abs(s.x-n)/(t-s.t);if(w=h.viewId,S=.03>g||g>.97,l&&(g>.5||m>.1)){var C=m>.5||.05>m||n>b-45?"fast":"slow";p(S?"":C),h.go(),d&&d.activeTransition&&d.activeTransition.complete(!S,C)}else p(S?"":"fast"),w=null,c.cancel(!S),d&&d.activeTransition&&d.activeTransition.cancel(!S,"fast",T),S=null}ionic.offGesture(v,"drag",r),ionic.offGesture(y,"release",i),b=c=_=null,I.isSwipeFreeze=f.freezeAllScrolls(!1)}function o(e){return ionic.tap.pointerCoord(e.gesture.srcEvent).x}function a(e){return(e-C)/b}var c,d,h,g,v,y,b,C,_,E=l.views.swipeBackHitWidth(),T={};g=ionic.onGesture("dragstart",n,t[0]),e.$on("$destroy",function(){ionic.offGesture(g,"dragstart",n),ionic.offGesture(v,"drag",r),ionic.offGesture(y,"release",i),I.element=c=d=null})}}]),s.controller("$ionicRefresher",["$scope","$attrs","$element","$ionicBind","$timeout",function(e,t,n,r,i){function o(){(D||_)&&(B=null,_?(_=!1,T=0,A>I?(m(),d(I,x)):(d(0,x,g),E=!1)):(T=0,E=!1,f(!1)))}function a(e){if(D&&!(e.touches.length>1)){if(null===B&&(B=parseInt(e.touches[0].screenY,10)),ionic.Platform.isAndroid()&&4.4===ionic.Platform.version()&&0===w.scrollTop&&(_=!0,e.preventDefault()),N=parseInt(e.touches[0].screenY,10)-B,0>=N-T||0!==w.scrollTop)return E&&(E=!1,f(!1)),_&&u(w,-1*parseInt(N-T,10)),void(0!==A&&c(0));N>0&&0===w.scrollTop&&!E&&(T=N),e.preventDefault(),E||(E=!0,f(!0)),_=!0,c(parseInt((N-T)/3,10)),!k&&A>I?(k=!0,ionic.requestAnimationFrame(h)):k&&I>A&&(k=!1,ionic.requestAnimationFrame(g))}}function s(e){D=0===e.target.scrollTop||_}function c(e){S.style[ionic.CSS.TRANSFORM]="translateY("+e+"px)",A=e}function u(e,t){e.scrollTop=t;var n=document.createEvent("UIEvents");n.initUIEvent("scroll",!0,!0,window,1),e.dispatchEvent(n)}function f(e){e?ionic.requestAnimationFrame(function(){S.classList.add("overscroll"),v()}):ionic.requestAnimationFrame(function(){S.classList.remove("overscroll"),y(),g()})}function d(e,t,n){function r(e){return--e*e*e+1}function i(){var s=Date.now(),u=Math.min(1,(s-o)/t),l=r(u);c(parseInt(l*(e-a)+a,10)),1>u?ionic.requestAnimationFrame(i):(5>e&&e>-5&&(E=!1,f(!1)),n&&n())}var o=Date.now(),a=A;return a===e?void n():void ionic.requestAnimationFrame(i)}function p(){ionic.off("touchmove",a,S),ionic.off("touchend",o,S),ionic.off("scroll",s,w),w=null,S=null}function h(){n[0].classList.add("active"),e.$onPulling()}function g(){i(function(){n.removeClass("active refreshing refreshing-tail"),k&&(k=!1)},150)}function m(){n[0].classList.add("refreshing"),e.$onRefresh()}function v(){n[0].classList.remove("invisible")}function y(){n[0].classList.add("invisible")}function b(){n[0].classList.add("refreshing-tail")}var w,S,C=this,_=!1,E=!1,T=0,A=0,I=60,k=!1,x=500,B=null,N=null,D=!0;l(t.pullingIcon)||t.$set("pullingIcon","ion-android-arrow-down"),e.showSpinner=!l(t.refreshingIcon)&&"none"!=t.spinner,e.showIcon=l(t.refreshingIcon),r(e,t,{pullingIcon:"@",pullingText:"@",refreshingIcon:"@",refreshingText:"@",spinner:"@",disablePullingRotation:"@",$onRefresh:"&onRefresh",$onPulling:"&onPulling"}),e.$on("scroll.refreshComplete",function(){i(function(){ionic.requestAnimationFrame(b),d(0,x,g),i(function(){E&&(E=!1,f(!1))},x)},x)}),C.init=function(){if(w=n.parent().parent()[0],S=n.parent()[0],!(w&&w.classList.contains("ionic-scroll")&&S&&S.classList.contains("scroll")))throw new Error("Refresher must be immediate child of ion-content or ion-scroll");ionic.on("touchmove",a,S),ionic.on("touchend",o,S),ionic.on("scroll",s,w),e.$on("$destroy",p)},C.getRefresherDomMethods=function(){return{activate:h,deactivate:g,start:m,show:v,hide:y,tail:b}},C.__handleTouchmove=a,C.__getScrollChild=function(){return S},C.__getScrollParent=function(){return w}}]),s.controller("$ionicScroll",["$scope","scrollViewOptions","$timeout","$window","$location","$document","$ionicScrollDelegate","$ionicHistory",function(e,t,n,r,i,o,a,s){var c=this;c.__timeout=n,c._scrollViewOptions=t,c.isNative=function(){return!!t.nativeScrolling};var u,f=c.element=t.el,d=c.$element=p(f);u=c.isNative()?c.scrollView=new ionic.views.ScrollNative(t):c.scrollView=new ionic.views.Scroll(t),(d.parent().length?d.parent():d).data("$$ionicScrollController",c);var h=a._registerInstance(c,t.delegateHandle,function(){return s.isActiveScope(e)});l(t.bouncing)||ionic.Platform.ready(function(){u.options&&(u.options.bouncing=!0,ionic.Platform.isAndroid()&&(u.options.bouncing=!1,u.options.deceleration=.95))});var g=angular.bind(u,u.resize);angular.element(r).on("resize",g);var m=function(t){var n=(t.originalEvent||t).detail||{};e.$onScroll&&e.$onScroll({event:t,scrollTop:n.scrollTop||0,scrollLeft:n.scrollLeft||0})};d.on("scroll",m),e.$on("$destroy",function(){h(),u&&u.__cleanup&&u.__cleanup(),angular.element(r).off("resize",g),d.off("scroll",m),u=c.scrollView=t=c._scrollViewOptions=t.el=c._scrollViewOptions.el=d=c.$element=f=null}),n(function(){u&&u.run&&u.run()}),c.getScrollView=function(){return u},c.getScrollPosition=function(){return u.getValues()},c.resize=function(){return n(g,0,!1).then(function(){d&&d.triggerHandler("scroll-resize")})},c.scrollTop=function(e){c.resize().then(function(){u.scrollTo(0,0,!!e)})},c.scrollBottom=function(e){c.resize().then(function(){var t=u.getScrollMax();u.scrollTo(t.left,t.top,!!e)})},c.scrollTo=function(e,t,n){c.resize().then(function(){u.scrollTo(e,t,!!n)})},c.zoomTo=function(e,t,n,r){c.resize().then(function(){u.zoomTo(e,!!t,n,r)})},c.zoomBy=function(e,t,n,r){c.resize().then(function(){u.zoomBy(e,!!t,n,r)})},c.scrollBy=function(e,t,n){c.resize().then(function(){u.scrollBy(e,t,!!n)})},c.anchorScroll=function(e){c.resize().then(function(){var t=i.hash(),n=t&&o[0].getElementById(t);if(!t||!n)return void u.scrollTo(0,0,!!e);var r=n,a=0,s=0;do null!==r&&(a+=r.offsetLeft),null!==r&&(s+=r.offsetTop),r=r.offsetParent;while(r.attributes!=c.element.attributes&&r.offsetParent);u.scrollTo(a,s,!!e)})},c.freezeScroll=u.freeze,c.freezeAllScrolls=function(e){for(var t=0;t<a._instances.length;t++)a._instances[t].freezeScroll(e)},c._setRefresher=function(e,t,n){c.refresher=t;var r=c.refresher.clientHeight||60;u.activatePullToRefresh(r,n)}}]),s.controller("$ionicSideMenus",["$scope","$attrs","$ionicSideMenuDelegate","$ionicPlatform","$ionicBody","$ionicHistory","$ionicScrollDelegate","IONIC_BACK_PRIORITY","$rootScope",function(e,t,n,r,i,o,a,s,c){function u(e){e&&!b.isScrollFreeze?a.freezeAllScrolls(e):!e&&b.isScrollFreeze&&a.freezeAllScrolls(!1),b.isScrollFreeze=e}var l,d,p,g,m,v,y,b=this,w=!0;b.$scope=e,b.initialize=function(e){b.left=e.left,b.right=e.right,b.setContent(e.content),b.dragThresholdX=e.dragThresholdX||10,o.registerHistory(b.$scope)},b.setContent=function(e){e&&(b.content=e,b.content.onDrag=function(e){b._handleDrag(e)},b.content.endDrag=function(e){b._endDrag(e)})},b.isOpenLeft=function(){return b.getOpenAmount()>0},b.isOpenRight=function(){return b.getOpenAmount()<0},b.toggleLeft=function(e){if(!y&&b.left.isEnabled){var t=b.getOpenAmount();0===arguments.length&&(e=0>=t),b.content.enableAnimation(),e?(b.openPercentage(100),c.$emit("$ionicSideMenuOpen","left")):(b.openPercentage(0),c.$emit("$ionicSideMenuClose","left"))}},b.toggleRight=function(e){if(b.right.isEnabled){var t=b.getOpenAmount();0===arguments.length&&(e=t>=0),b.content.enableAnimation(),e?(b.openPercentage(-100),c.$emit("$ionicSideMenuOpen","right")):(b.openPercentage(0),c.$emit("$ionicSideMenuClose","right"))}},b.toggle=function(e){"right"==e?b.toggleRight():b.toggleLeft()},b.close=function(){b.openPercentage(0),c.$emit("$ionicSideMenuClose","left"),c.$emit("$ionicSideMenuClose","right")},b.getOpenAmount=function(){return b.content&&b.content.getTranslateX()||0},b.getOpenRatio=function(){var e=b.getOpenAmount();return e>=0?e/b.left.width:e/b.right.width},b.isOpen=function(){return 0!==b.getOpenAmount()},b.getOpenPercentage=function(){return 100*b.getOpenRatio()},b.openPercentage=function(e){var t=e/100;b.left&&e>=0?b.openAmount(b.left.width*t):b.right&&0>e&&b.openAmount(b.right.width*t),i.enableClass(0!==e,"menu-open"),u(!1)},b.openAmount=function(e){var t=b.left&&b.left.width||0,n=b.right&&b.right.width||0;return(b.left&&b.left.isEnabled||!(e>0))&&(b.right&&b.right.isEnabled||!(0>e))?d&&e>t?void b.content.setTranslateX(t):l&&-n>e?void b.content.setTranslateX(-n):(b.content.setTranslateX(e),void(e>=0?(d=!0,l=!1,e>0&&(b.right&&b.right.pushDown&&b.right.pushDown(),b.left&&b.left.bringUp&&b.left.bringUp())):(l=!0,d=!1,b.right&&b.right.bringUp&&b.right.bringUp(),b.left&&b.left.pushDown&&b.left.pushDown()))):void b.content.setTranslateX(0)},b.snapToRest=function(e){b.content.enableAnimation(),p=!1;var t=b.getOpenRatio();if(0===t)return void b.openPercentage(0);var n=.3,r=e.gesture.velocityX,i=e.gesture.direction;t>0&&.5>t&&"right"==i&&n>r?b.openPercentage(0):t>.5&&"left"==i&&n>r?b.openPercentage(100):0>t&&t>-.5&&"left"==i&&n>r?b.openPercentage(0):.5>t&&"right"==i&&n>r?b.openPercentage(-100):"right"==i&&t>=0&&(t>=.5||r>n)?b.openPercentage(100):"left"==i&&0>=t&&(-.5>=t||r>n)?b.openPercentage(-100):b.openPercentage(0)},b.enableMenuWithBackViews=function(e){return arguments.length&&(w=!!e),w},b.isAsideExposed=function(){return!!y},b.exposeAside=function(e){(b.left&&b.left.isEnabled||b.right&&b.right.isEnabled)&&(b.close(),y=e,b.left&&b.left.isEnabled?b.content.setMarginLeft(y?b.left.width:0):b.right&&b.right.isEnabled&&b.content.setMarginRight(y?b.right.width:0),b.$scope.$emit("$ionicExposeAside",y))},b.activeAsideResizing=function(e){i.enableClass(e,"aside-resizing")},b._endDrag=function(e){u(!1),y||(p&&b.snapToRest(e),g=null,m=null,v=null)},b._handleDrag=function(t){!y&&e.dragContent&&(g?m=t.gesture.touches[0].pageX:(g=t.gesture.touches[0].pageX,m=g),!p&&Math.abs(m-g)>b.dragThresholdX&&(g=m,p=!0,b.content.disableAnimation(),v=b.getOpenAmount()),p&&(b.openAmount(v+(m-g)),u(!0)))},b.canDragContent=function(t){return arguments.length&&(e.dragContent=!!t),e.dragContent},b.edgeThreshold=25,b.edgeThresholdEnabled=!1,b.edgeDragThreshold=function(e){return arguments.length&&(f(e)&&e>0?(b.edgeThreshold=e,b.edgeThresholdEnabled=!0):b.edgeThresholdEnabled=!!e),b.edgeThresholdEnabled},b.isDraggableTarget=function(t){var n=b.edgeThresholdEnabled&&!b.isOpen(),r=t.gesture.startEvent&&t.gesture.startEvent.center&&t.gesture.startEvent.center.pageX,i=!n||r<=b.edgeThreshold||r>=b.content.element.offsetWidth-b.edgeThreshold,a=o.backView(),s=w?!0:!a;if(!s){var c=o.currentView()||{};return a.historyId!==c.historyId}return(e.dragContent||b.isOpen())&&i&&!t.gesture.srcEvent.defaultPrevented&&s&&!t.target.tagName.match(/input|textarea|select|object|embed/i)&&!t.target.isContentEditable&&!(t.target.dataset?t.target.dataset.preventScroll:"true"==t.target.getAttribute("data-prevent-scroll"))},e.sideMenuContentTranslateX=0;var S=h,C=angular.bind(b,b.close);e.$watch(function(){return 0!==b.getOpenAmount()},function(e){S(),e&&(S=r.registerBackButtonAction(C,s.sideMenu))});var _=n._registerInstance(b,t.delegateHandle,function(){return o.isActiveScope(e)});e.$on("$destroy",function(){_(),S(),b.$scope=null,b.content&&(b.content.element=null,b.content=null),u(!1)}),b.initialize({left:{width:275},right:{width:275}})}]),function(e){function t(e,r,i,o){var a,s,c,u=document.createElement(d[e]||e);for(a in r)if(angular.isArray(r[a]))for(s=0;s<r[a].length;s++)if(r[a][s].fn)for(c=0;c<r[a][s].t;c++)t(a,r[a][s].fn(c,o),u,o);else t(a,r[a][s],u,o);else n(u,a,r[a]);i.appendChild(u)}function n(e,t,n){e.setAttribute(d[t]||t,n)}function r(e,t){var n=e.split(";"),r=n.slice(t),i=n.slice(0,n.length-r.length);return n=r.concat(i).reverse(),n.join(";")+";"+n[0]}function i(e,t){return e/=t/2,1>e?.5*e*e*e:(e-=2,.5*(e*e*e+2))}var o="translate(32,32)",a="stroke-opacity",c="round",u="indefinite",l="750ms",f="none",d={a:"animate",an:"attributeName",at:"animateTransform",c:"circle",da:"stroke-dasharray",os:"stroke-dashoffset",f:"fill",lc:"stroke-linecap",rc:"repeatCount",sw:"stroke-width",t:"transform",v:"values"},p={v:"0,32,32;360,32,32",an:"transform",type:"rotate",rc:u,dur:l},h={sw:4,lc:c,line:[{fn:function(e,t){return{y1:"ios"==t?17:12,y2:"ios"==t?29:20,t:o+" rotate("+(30*e+(6>e?180:-180))+")",a:[{fn:function(){return{an:a,dur:l,v:r("0;.1;.15;.25;.35;.45;.55;.65;.7;.85;1",e),rc:u}},t:1}]}},t:12}]},g={android:{c:[{sw:6,da:128,os:82,r:26,cx:32,cy:32,f:f}]},ios:h,"ios-small":h,bubbles:{sw:0,c:[{fn:function(e){return{cx:24*Math.cos(2*Math.PI*e/8),cy:24*Math.sin(2*Math.PI*e/8),t:o,a:[{fn:function(){return{an:"r",dur:l,v:r("1;2;3;4;5;6;7;8",e),rc:u}},t:1}]}},t:8}]},circles:{c:[{fn:function(e){return{r:5,cx:24*Math.cos(2*Math.PI*e/8),cy:24*Math.sin(2*Math.PI*e/8),t:o,sw:0,a:[{fn:function(){return{an:"fill-opacity",dur:l,v:r(".3;.3;.3;.4;.7;.85;.9;1",e),rc:u}},t:1}]}},t:8}]},crescent:{c:[{sw:4,da:128,os:82,r:26,cx:32,cy:32,f:f,at:[p]}]},dots:{c:[{fn:function(e){return{cx:16+16*e,cy:32,sw:0,a:[{fn:function(){return{an:"fill-opacity",dur:l,v:r(".5;.6;.8;1;.8;.6;.5",e),rc:u}},t:1},{fn:function(){return{an:"r",dur:l,v:r("4;5;6;5;4;3;3",e),rc:u}},t:1}]}},t:3}]},lines:{sw:7,lc:c,line:[{fn:function(e){return{x1:10+14*e,x2:10+14*e,a:[{fn:function(){return{an:"y1",dur:l,v:r("16;18;28;18;16",e),rc:u}},t:1},{fn:function(){return{an:"y2",dur:l,v:r("48;44;36;46;48",e),rc:u}},t:1},{fn:function(){return{an:a,dur:l,v:r("1;.8;.5;.4;1",e),rc:u}},t:1}]}},t:4}]},ripple:{f:f,"fill-rule":"evenodd",sw:3,circle:[{fn:function(e){return{cx:32,cy:32,a:[{fn:function(){return{an:"r",begin:-1*e+"s",dur:"2s",v:"0;24",keyTimes:"0;1",keySplines:"0.1,0.2,0.3,1",calcMode:"spline",rc:u}},t:1},{fn:function(){return{an:a,begin:-1*e+"s",dur:"2s",v:".2;1;.2;0",rc:u}},t:1}]}},t:2}]},spiral:{defs:[{linearGradient:[{id:"sGD",gradientUnits:"userSpaceOnUse",x1:55,y1:46,x2:2,y2:46,stop:[{offset:.1,"class":"stop1"},{offset:1,"class":"stop2"}]}]}],g:[{sw:4,lc:c,f:f,path:[{stroke:"url(#sGD)",d:"M4,32 c0,15,12,28,28,28c8,0,16-4,21-9"},{d:"M60,32 C60,16,47.464,4,32,4S4,16,4,32"}],at:[p]}]}},m={android:function(t){function r(){var t=i(Date.now()-o,650),l=1,f=0,d=188-58*t,p=182-182*t;a%2&&(l=-1,f=-64,d=128- -58*t,p=182*t);var h=[0,-101,-90,-11,-180,79,-270,-191][a];n(u,"da",Math.max(Math.min(d,188),128)),n(u,"os",Math.max(Math.min(p,182),0)),n(u,"t","scale("+l+",1) translate("+f+",0) rotate("+h+",32,32)"),s+=4.1,s>359&&(s=0),n(c,"t","rotate("+s+",32,32)"),t>=1&&(a++,a>7&&(a=0),o=Date.now()),e.requestAnimationFrame(r)}var o,a=0,s=0,c=t.querySelector("g"),u=t.querySelector("circle");return function(){o=Date.now(),r()}}};s.controller("$ionicSpinner",["$element","$attrs","$ionicConfig",function(e,n,r){var i;this.init=function(){i=n.icon||r.spinner.icon();var o=document.createElement("div");return t("svg",{viewBox:"0 0 64 64",g:[g[i]]},o,i),e.html(o.innerHTML),this.start(),i},this.start=function(){m[i]&&m[i](e[0])()}}])}(ionic),s.controller("$ionicTab",["$scope","$ionicHistory","$attrs","$location","$state",function(e,t,n,r,i){this.$scope=e,this.hrefMatchesState=function(){return n.href&&0===r.path().indexOf(n.href.replace(/^#/,"").replace(/\/$/,""))},this.srefMatchesState=function(){return n.uiSref&&i.includes(n.uiSref.split("(")[0])},this.navNameMatchesState=function(){return this.navViewName&&t.isCurrentStateNavView(this.navViewName)},this.tabMatchesState=function(){return this.hrefMatchesState()||this.srefMatchesState()||this.navNameMatchesState()}}]),s.controller("$ionicTabs",["$scope","$element","$ionicHistory",function(e,t,n){var r,i=this,o=null,a=null;i.tabs=[],i.selectedIndex=function(){return i.tabs.indexOf(o)},i.selectedTab=function(){return o},i.previousSelectedTab=function(){return a},i.add=function(e){n.registerHistory(e),i.tabs.push(e)},i.remove=function(e){var t=i.tabs.indexOf(e);if(-1!==t){if(e.$tabSelected)if(i.deselect(e),1===i.tabs.length);else{var n=t===i.tabs.length-1?t-1:t+1;i.select(i.tabs[n])}i.tabs.splice(t,1)}},i.deselect=function(e){e.$tabSelected&&(a=o,o=r=null,e.$tabSelected=!1,(e.onDeselect||h)(),e.$broadcast&&e.$broadcast("$ionicHistory.deselect"))},i.select=function(t,a){var s;if(f(t)){if(s=t,s>=i.tabs.length)return;t=i.tabs[s]}else s=i.tabs.indexOf(t);1===arguments.length&&(a=!(!t.navViewName&&!t.uiSref)),o&&o.$historyId==t.$historyId?a&&n.goToHistoryRoot(t.$historyId):r!==s&&(u(i.tabs,function(e){i.deselect(e)}),o=t,r=s,i.$scope&&i.$scope.$parent&&(i.$scope.$parent.$activeHistoryId=t.$historyId),t.$tabSelected=!0,(t.onSelect||h)(),a&&e.$emit("$ionicHistory.change",{type:"tab",tabIndex:s,historyId:t.$historyId,navViewName:t.navViewName,hasNavView:!!t.navViewName,title:t.title,url:t.href,uiSref:t.uiSref}))},i.hasActiveScope=function(){for(var e=0;e<i.tabs.length;e++)if(n.isActiveScope(i.tabs[e]))return!0;return!1}}]),s.controller("$ionicView",["$scope","$element","$attrs","$compile","$rootScope",function(e,t,n,r,i){function o(){var t=l(n.viewTitle)&&"viewTitle"||l(n.title)&&"title";t&&(a(n[t]),y.push(n.$observe(t,a))),l(n.hideBackButton)&&y.push(e.$watch(n.hideBackButton,function(e){d.showBackButton(!e)})),l(n.hideNavBar)&&y.push(e.$watch(n.hideNavBar,function(e){d.showBar(!e)}))}function a(e){l(e)&&e!==g&&(g=e,d.title(g))}function s(){for(var e=0;e<y.length;e++)y[e]();y=[]}function u(t){return t?r(t)(e.$new()):void 0}function f(t){return!!e.$eval(n[t])}var d,p,h,g,m=this,v={},y=[],b=e.$on("ionNavBar.init",function(e,t){e.stopPropagation(),p=t});m.init=function(){b();var n=t.inheritedData("$ionModalController");d=t.inheritedData("$ionNavViewController"),d&&!n&&(e.$on("$ionicView.beforeEnter",m.beforeEnter),e.$on("$ionicView.afterEnter",o),e.$on("$ionicView.beforeLeave",s))},m.beforeEnter=function(t,r){if(r&&!r.viewNotified){r.viewNotified=!0,i.$$phase||e.$digest(),g=l(n.viewTitle)?n.viewTitle:n.title;var o={};for(var a in v)o[a]=u(v[a]);d.beforeEnter(c(r,{title:g,showBack:!f("hideBackButton"),navBarItems:o,navBarDelegate:p||null,showNavBar:!f("hideNavBar"),hasHeaderBar:!!h})),s()}},m.navElement=function(e,t){v[e]=t}}]),s.directive("ionActionSheet",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,link:function(t,n){var r=function(e){27==e.which&&(t.cancel(),t.$apply())},i=function(e){e.target==n[0]&&(t.cancel(),t.$apply())};t.$on("$destroy",function(){n.remove(),e.unbind("keyup",r)}),e.bind("keyup",r),n.bind("click",i)},template:'<div class="action-sheet-backdrop"><div class="action-sheet-wrapper"><div class="action-sheet" ng-class="{\'action-sheet-has-icons\': $actionSheetHasIcon}"><div class="action-sheet-group action-sheet-options"><div class="action-sheet-title" ng-if="titleText" ng-bind-html="titleText"></div><button class="button action-sheet-option" ng-click="buttonClicked($index)" ng-repeat="b in buttons" ng-bind-html="b.text"></button><button class="button destructive action-sheet-destructive" ng-if="destructiveText" ng-click="destructiveButtonClicked()" ng-bind-html="destructiveText"></button></div><div class="action-sheet-group action-sheet-cancel" ng-if="cancelText"><button class="button" ng-click="cancel()" ng-bind-html="cancelText"></button></div></div></div></div>'}}]),s.directive("ionCheckbox",["$ionicConfig",function(e){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<label class="item item-checkbox"><div class="checkbox checkbox-input-hidden disable-pointer-events"><input type="checkbox"><i class="checkbox-icon"></i></div><div class="item-content disable-pointer-events" ng-transclude></div></label>',compile:function(t,n){var r=t.find("input");u({name:n.name,"ng-value":n.ngValue,"ng-model":n.ngModel,"ng-checked":n.ngChecked,"ng-disabled":n.ngDisabled,"ng-true-value":n.ngTrueValue,"ng-false-value":n.ngFalseValue,"ng-change":n.ngChange,"ng-required":n.ngRequired,required:n.required},function(e,t){l(e)&&r.attr(t,e)});var i=t[0].querySelector(".checkbox");i.classList.add("checkbox-"+e.form.checkbox())}}}]),s.directive("collectionRepeat",e).factory("$ionicCollectionManager",t);var w="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",S=/height:.*?px;\s*width:.*?px/,C=3;e.$inject=["$ionicCollectionManager","$parse","$window","$$rAF","$rootScope","$timeout"],t.$inject=["$rootScope","$window","$$rAF"],s.directive("ionContent",["$timeout","$controller","$ionicBind","$ionicConfig",function(e,t,n,r){return{restrict:"E",require:"^?ionNavView",scope:!0,priority:800,compile:function(e,i){function o(e,r,o){function u(){e.$onScrollComplete({scrollTop:s.scrollView.__scrollTop,scrollLeft:s.scrollView.__scrollLeft})}var f=e.$parent;if(e.$watch(function(){return(f.$hasHeader?" has-header":"")+(f.$hasSubheader?" has-subheader":"")+(f.$hasFooter?" has-footer":"")+(f.$hasSubfooter?" has-subfooter":"")+(f.$hasTabs?" has-tabs":"")+(f.$hasTabsTop?" has-tabs-top":"")},function(e,t){r.removeClass(t),r.addClass(e)}),e.$hasHeader=e.$hasSubheader=e.$hasFooter=e.$hasSubfooter=e.$hasTabs=e.$hasTabsTop=!1,n(e,o,{$onScroll:"&onScroll",$onScrollComplete:"&onScrollComplete",hasBouncing:"@",padding:"@",direction:"@",scrollbarX:"@",scrollbarY:"@",startX:"@",startY:"@",scrollEventInterval:"@"}),e.direction=e.direction||"y",l(o.padding)&&e.$watch(o.padding,function(e){(a||r).toggleClass("padding",!!e)}),"false"===o.scroll);else{var d={};c?(r.addClass("overflow-scroll"),d={el:r[0],delegateHandle:i.delegateHandle,startX:e.$eval(e.startX)||0,startY:e.$eval(e.startY)||0,nativeScrolling:!0}):d={el:r[0],delegateHandle:i.delegateHandle,locking:"true"===(i.locking||"true"),bouncing:e.$eval(e.hasBouncing),startX:e.$eval(e.startX)||0,startY:e.$eval(e.startY)||0,scrollbarX:e.$eval(e.scrollbarX)!==!1,scrollbarY:e.$eval(e.scrollbarY)!==!1,scrollingX:e.direction.indexOf("x")>=0,scrollingY:e.direction.indexOf("y")>=0,scrollEventInterval:parseInt(e.scrollEventInterval,10)||10,scrollingComplete:u},s=t("$ionicScroll",{$scope:e,scrollViewOptions:d}),e.$on("$destroy",function(){d&&(d.scrollingComplete=h,delete d.el),a=null,r=null,i.$$element=null})}}var a,s;e.addClass("scroll-content ionic-scroll"),"false"!=i.scroll?(a=p('<div class="scroll"></div>'),a.append(e.contents()),e.append(a)):e.addClass("scroll-content-false");var c="true"===i.overflowScroll||!r.scrolling.jsScrolling();return c&&(c=!e[0].querySelector("[collection-repeat]")),{pre:o}}}}]),s.directive("exposeAsideWhen",["$window",function(e){return{restrict:"A",require:"^ionSideMenus",link:function(t,n,r,i){function o(){var t="large"==r.exposeAsideWhen?"(min-width:768px)":r.exposeAsideWhen;i.exposeAside(e.matchMedia(t).matches),i.activeAsideResizing(!1)}function a(){i.activeAsideResizing(!0),s()}var s=ionic.debounce(function(){t.$apply(o)},300,!1);t.$evalAsync(o),ionic.on("resize",a,e),t.$on("$destroy",function(){ionic.off("resize",a,e)})}}}]);var _="onHold onTap onDoubleTap onTouch onRelease onDragStart onDrag onDragEnd onDragUp onDragRight onDragDown onDragLeft onSwipe onSwipeUp onSwipeRight onSwipeDown onSwipeLeft".split(" ");_.forEach(function(e){s.directive(e,n(e))}),s.directive("ionHeaderBar",r()).directive("ionHeaderBar",i(!0)).directive("ionFooterBar",i(!1)),s.directive("ionInfiniteScroll",["$timeout",function(e){return{restrict:"E",require:["?^$ionicScroll","ionInfiniteScroll"],template:function(e,t){return t.icon?'<i class="icon {{icon()}} icon-refreshing {{scrollingType}}"></i>':'<ion-spinner icon="{{spinner()}}"></ion-spinner>'},scope:!0,controller:"$ionInfiniteScroll",link:function(t,n,r,i){var o=i[1],a=o.scrollCtrl=i[0],s=o.jsScrolling=!a.isNative();if(s)o.scrollView=a.scrollView,t.scrollingType="js-scrolling",a.$element.on("scroll",o.checkBounds);else{var c=ionic.DomUtil.getParentOrSelfWithClass(n[0].parentNode,"overflow-scroll");if(o.scrollEl=c,!c)throw"Infinite scroll must be used inside a scrollable div";o.scrollEl.addEventListener("scroll",o.checkBounds)}var u=l(r.immediateCheck)?t.$eval(r.immediateCheck):!0;u&&e(function(){o.checkBounds()})}}}]),s.directive("ionItem",["$$rAF",function(e){return{restrict:"E",controller:["$scope","$element",function(e,t){this.$scope=e,this.$element=t}],scope:!0,compile:function(t,n){var r=l(n.href)||l(n.ngHref)||l(n.uiSref),i=r||/ion-(delete|option|reorder)-button/i.test(t.html());if(i){var o=p(r?"<a></a>":"<div></div>");o.addClass("item-content"),(l(n.href)||l(n.ngHref))&&(o.attr("ng-href","{{$href()}}"),l(n.target)&&o.attr("target","{{$target()}}")),o.append(t.contents()),t.addClass("item item-complex").append(o)}else t.addClass("item");return function(t,n,r){t.$href=function(){return r.href||r.ngHref},t.$target=function(){return r.target};var i=n[0].querySelector(".item-content");i&&t.$on("$collectionRepeatLeave",function(){i&&i.$$ionicOptionsOpen&&(i.style[ionic.CSS.TRANSFORM]="",i.style[ionic.CSS.TRANSITION]="none",e(function(){i.style[ionic.CSS.TRANSITION]=""}),i.$$ionicOptionsOpen=!1)})}}}}]);var E='<div class="item-left-edit item-delete enable-pointer-events"></div>';s.directive("ionDeleteButton",function(){function e(e){e.stopPropagation()}return{restrict:"E",require:["^^ionItem","^?ionList"],priority:Number.MAX_VALUE,compile:function(t,n){return n.$set("class",(n["class"]||"")+" button icon button-icon",!0),function(t,n,r,i){function o(){s=s||n.controller("ionList"),s&&s.showDelete()&&c.addClass("visible active")}var a=i[0],s=i[1],c=p(E);c.append(n),a.$element.append(c).addClass("item-left-editable"),n.on("click",e),o(),t.$on("$ionic.reconnectScope",o)}}}}),s.directive("itemFloatingLabel",function(){return{restrict:"C",link:function(e,t){var n=t[0],r=n.querySelector("input, textarea"),i=n.querySelector(".input-label");if(r&&i){var o=function(){r.value?i.classList.add("has-input"):i.classList.remove("has-input")};r.addEventListener("input",o);var a=p(r).controller("ngModel");a&&(a.$render=function(){r.value=a.$viewValue||"",o()}),e.$on("$destroy",function(){r.removeEventListener("input",o)})}}}});var T='<div class="item-options invisible"></div>';s.directive("ionOptionButton",[function(){function e(e){e.stopPropagation()}return{restrict:"E",require:"^ionItem",priority:Number.MAX_VALUE,compile:function(t,n){return n.$set("class",(n["class"]||"")+" button",!0),function(t,n,r,i){i.optionsContainer||(i.optionsContainer=p(T),i.$element.append(i.optionsContainer)),i.optionsContainer.append(n),i.$element.addClass("item-right-editable"),n.on("click",e)}}}}]);var A='<div data-prevent-scroll="true" class="item-right-edit item-reorder enable-pointer-events"></div>';s.directive("ionReorderButton",["$parse",function(e){return{restrict:"E",require:["^ionItem","^?ionList"],priority:Number.MAX_VALUE,compile:function(t,n){return n.$set("class",(n["class"]||"")+" button icon button-icon",!0),t[0].setAttribute("data-prevent-scroll",!0),function(t,n,r,i){var o=i[0],a=i[1],s=e(r.onReorder);t.$onReorder=function(e,n){s(t,{$fromIndex:e,$toIndex:n})},r.ngClick||r.onClick||r.onclick||(n[0].onclick=function(e){return e.stopPropagation(),!1});var c=p(A);c.append(n),o.$element.append(c).addClass("item-right-editable"),a&&a.showReorder()&&c.addClass("visible active")}}}}]),s.directive("keyboardAttach",function(){return function(e,t){function n(e){if(!ionic.Platform.isAndroid()||ionic.Platform.isFullScreen){var n=e.keyboardHeight||e.detail.keyboardHeight;t.css("bottom",n+"px"),i=t.controller("$ionicScroll"),i&&(i.scrollView.__container.style.bottom=n+o(t[0])+"px")}}function r(){(!ionic.Platform.isAndroid()||ionic.Platform.isFullScreen)&&(t.css("bottom",""),i&&(i.scrollView.__container.style.bottom=""))}ionic.on("native.keyboardshow",n,window),ionic.on("native.keyboardhide",r,window),ionic.on("native.showkeyboard",n,window),ionic.on("native.hidekeyboard",r,window);var i;e.$on("$destroy",function(){ionic.off("native.keyboardshow",n,window),ionic.off("native.keyboardhide",r,window),ionic.off("native.showkeyboard",n,window),ionic.off("native.hidekeyboard",r,window)})}}),s.directive("ionList",["$timeout",function(e){return{restrict:"E",require:["ionList","^?$ionicScroll"],controller:"$ionicList",compile:function(t,n){var r=p('<div class="list">').append(t.contents()).addClass(n.type);return t.append(r),function(t,r,i,o){function a(){function i(e,t){t()&&e.addClass("visible")||e.removeClass("active"),ionic.requestAnimationFrame(function(){t()&&e.addClass("active")||e.removeClass("visible")})}var o=s.listView=new ionic.views.ListView({el:r[0],listEl:r.children()[0],scrollEl:c&&c.element,scrollView:c&&c.scrollView,onReorder:function(t,n,r){var i=p(t).scope();i&&i.$onReorder&&e(function(){i.$onReorder(n,r)})},canSwipe:function(){return s.canSwipeItems()}});t.$on("$destroy",function(){o&&(o.deregister&&o.deregister(),o=null)}),l(n.canSwipe)&&t.$watch("!!("+n.canSwipe+")",function(e){s.canSwipeItems(e)}),l(n.showDelete)&&t.$watch("!!("+n.showDelete+")",function(e){s.showDelete(e)}),l(n.showReorder)&&t.$watch("!!("+n.showReorder+")",function(e){s.showReorder(e)}),t.$watch(function(){return s.showDelete()},function(e,t){if(e||t){e&&s.closeOptionButtons(),s.canSwipeItems(!e),r.children().toggleClass("list-left-editing",e),r.toggleClass("disable-pointer-events",e);var n=p(r[0].getElementsByClassName("item-delete"));i(n,s.showDelete)}}),t.$watch(function(){return s.showReorder()},function(e,t){if(e||t){e&&s.closeOptionButtons(),s.canSwipeItems(!e),r.children().toggleClass("list-right-editing",e),r.toggleClass("disable-pointer-events",e);var n=p(r[0].getElementsByClassName("item-reorder"));i(n,s.showReorder)}})}var s=o[0],c=o[1];e(a)}}}}]),s.directive("menuClose",["$ionicHistory","$timeout",function(e,t){return{restrict:"AC",link:function(n,r){r.bind("click",function(){var n=r.inheritedData("$ionSideMenusController");n&&(e.nextViewOptions({historyRoot:!0,disableAnimate:!0,expire:300}),t(function(){e.nextViewOptions({historyRoot:!1,disableAnimate:!1})},300),n.close())})}}}]),s.directive("menuToggle",function(){return{restrict:"AC",link:function(e,t,n){e.$on("$ionicView.beforeEnter",function(e,n){if(n.enableBack){var r=t.inheritedData("$ionSideMenusController");r.enableMenuWithBackViews()||t.addClass("hide")}else t.removeClass("hide")}),t.bind("click",function(){var e=t.inheritedData("$ionSideMenusController");e&&e.toggle(n.menuToggle)})}}}),s.directive("ionModal",[function(){return{restrict:"E",transclude:!0,replace:!0,controller:[function(){}],template:'<div class="modal-backdrop"><div class="modal-backdrop-bg"></div><div class="modal-wrapper" ng-transclude></div></div>'}}]),s.directive("ionModalView",function(){return{restrict:"E",compile:function(e){e.addClass("modal")}}}),s.directive("ionNavBackButton",["$ionicConfig","$document",function(e,t){
return{restrict:"E",require:"^ionNavBar",compile:function(n,r){function i(e){return/ion-|icon/.test(e.className)}var o=t[0].createElement("button");for(var a in r.$attr)o.setAttribute(r.$attr[a],r[a]);r.ngClick||o.setAttribute("ng-click","$ionicGoBack()"),o.className="button back-button hide buttons "+(n.attr("class")||""),o.innerHTML=n.html()||"";for(var s,c,u,l,f=i(n[0]),d=0;d<n[0].childNodes.length;d++)s=n[0].childNodes[d],1===s.nodeType?i(s)?f=!0:s.classList.contains("default-title")?u=!0:s.classList.contains("previous-title")&&(l=!0):c||3!==s.nodeType||(c=!!s.nodeValue.trim());var p=e.backButton.icon();if(!f&&p&&"none"!==p&&(o.innerHTML='<i class="icon '+p+'"></i> '+o.innerHTML,o.className+=" button-clear"),!c){var h=t[0].createElement("span");h.className="back-text",!u&&e.backButton.text()&&(h.innerHTML+='<span class="default-title">'+e.backButton.text()+"</span>"),!l&&e.backButton.previousTitleText()&&(h.innerHTML+='<span class="previous-title"></span>'),o.appendChild(h)}return n.attr("class","hide"),n.empty(),{pre:function(e,t,n,r){r.navElement("backButton",o.outerHTML),o=null}}}}}]),s.directive("ionNavBar",function(){return{restrict:"E",controller:"$ionicNavBar",scope:!0,link:function(e,t,n,r){r.init()}}}),s.directive("ionNavButtons",["$document",function(e){return{require:"^ionNavBar",restrict:"E",compile:function(t,n){var r="left";/^primary|secondary|right$/i.test(n.side||"")&&(r=n.side.toLowerCase());var i=e[0].createElement("span");i.className=r+"-buttons",i.innerHTML=t.html();var o=r+"Buttons";return t.attr("class","hide"),t.empty(),{pre:function(e,t,n,r){var a=t.parent().data("$ionViewController");a?a.navElement(o,i.outerHTML):r.navElement(o,i.outerHTML),i=null}}}}}]),s.directive("navDirection",["$ionicViewSwitcher",function(e){return{restrict:"A",priority:1e3,link:function(t,n,r){n.bind("click",function(){e.nextDirection(r.navDirection)})}}}]),s.directive("ionNavTitle",["$document",function(e){return{require:"^ionNavBar",restrict:"E",compile:function(t,n){var r="title",i=e[0].createElement("span");for(var o in n.$attr)i.setAttribute(n.$attr[o],n[o]);return i.classList.add("nav-bar-title"),i.innerHTML=t.html(),t.attr("class","hide"),t.empty(),{pre:function(e,t,n,o){var a=t.parent().data("$ionViewController");a?a.navElement(r,i.outerHTML):o.navElement(r,i.outerHTML),i=null}}}}}]),s.directive("navTransition",["$ionicViewSwitcher",function(e){return{restrict:"A",priority:1e3,link:function(t,n,r){n.bind("click",function(){e.nextTransition(r.navTransition)})}}}]),s.directive("ionNavView",["$state","$ionicConfig",function(e,t){return{restrict:"E",terminal:!0,priority:2e3,transclude:!0,controller:"$ionicNavView",compile:function(n,r,i){return n.addClass("view-container"),ionic.DomUtil.cachedAttr(n,"nav-view-transition",t.views.transition()),function(t,n,r,o){function a(t){var n=e.$current&&e.$current.locals[c.name];n&&(t||n!==s)&&(s=n,c.state=n.$$state,o.register(n))}var s;i(t,function(e){n.append(e)});var c=o.init();t.$on("$stateChangeSuccess",function(){a(!1)}),t.$on("$viewContentLoading",function(){a(!1)}),a(!0)}}}}]),s.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]).factory("$ionicNgClick",["$parse",function(e){return function(t,n,r){var i=angular.isFunction(r)?r:e(r);n.on("click",function(e){t.$apply(function(){i(t,{$event:e})})}),n.onclick=h}}]).directive("ngClick",["$ionicNgClick",function(e){return function(t,n,r){e(t,n,r.ngClick)}}]).directive("ionStopEvent",function(){return{restrict:"A",link:function(e,t,n){t.bind(n.ionStopEvent,a)}}}),s.directive("ionPane",function(){return{restrict:"E",link:function(e,t){t.addClass("pane")}}}),s.directive("ionPopover",[function(){return{restrict:"E",transclude:!0,replace:!0,controller:[function(){}],template:'<div class="popover-backdrop"><div class="popover-wrapper" ng-transclude></div></div>'}}]),s.directive("ionPopoverView",function(){return{restrict:"E",compile:function(e){e.append(p('<div class="popover-arrow">')),e.addClass("popover")}}}),s.directive("ionRadio",function(){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<label class="item item-radio"><input type="radio" name="radio-group"><div class="item-content disable-pointer-events" ng-transclude></div><i class="radio-icon disable-pointer-events icon ion-checkmark"></i></label>',compile:function(e,t){t.icon&&e.children().eq(2).removeClass("ion-checkmark").addClass(t.icon);var n=e.find("input");return u({name:t.name,value:t.value,disabled:t.disabled,"ng-value":t.ngValue,"ng-model":t.ngModel,"ng-disabled":t.ngDisabled,"ng-change":t.ngChange,"ng-required":t.ngRequired,required:t.required},function(e,t){l(e)&&n.attr(t,e)}),function(e,t,n){e.getValue=function(){return e.ngValue||n.value}}}}}),s.directive("ionRefresher",[function(){return{restrict:"E",replace:!0,require:["?^$ionicScroll","ionRefresher"],controller:"$ionicRefresher",template:'<div class="scroll-refresher invisible" collection-repeat-ignore><div class="ionic-refresher-content" ng-class="{\'ionic-refresher-with-text\': pullingText || refreshingText}"><div class="icon-pulling" ng-class="{\'pulling-rotation-disabled\':disablePullingRotation}"><i class="icon {{pullingIcon}}"></i></div><div class="text-pulling" ng-bind-html="pullingText"></div><div class="icon-refreshing"><ion-spinner ng-if="showSpinner" icon="{{spinner}}"></ion-spinner><i ng-if="showIcon" class="icon {{refreshingIcon}}"></i></div><div class="text-refreshing" ng-bind-html="refreshingText"></div></div></div>',link:function(e,t,n,r){var i=r[0],o=r[1];!i||i.isNative()?o.init():(t[0].classList.add("js-scrolling"),i._setRefresher(e,t[0],o.getRefresherDomMethods()),e.$on("scroll.refreshComplete",function(){e.$evalAsync(function(){i.scrollView.finishPullToRefresh()})}))}}}]),s.directive("ionScroll",["$timeout","$controller","$ionicBind",function(e,t,n){return{restrict:"E",scope:!0,controller:function(){},compile:function(e){function r(e,r,o){n(e,o,{direction:"@",paging:"@",$onScroll:"&onScroll",scroll:"@",scrollbarX:"@",scrollbarY:"@",zooming:"@",minZoom:"@",maxZoom:"@"}),e.direction=e.direction||"y",l(o.padding)&&e.$watch(o.padding,function(e){i.toggleClass("padding",!!e)}),e.$eval(e.paging)===!0&&i.addClass("scroll-paging"),e.direction||(e.direction="y");var a=e.$eval(e.paging)===!0,s={el:r[0],delegateHandle:o.delegateHandle,locking:"true"===(o.locking||"true"),bouncing:e.$eval(o.hasBouncing),paging:a,scrollbarX:e.$eval(e.scrollbarX)!==!1,scrollbarY:e.$eval(e.scrollbarY)!==!1,scrollingX:e.direction.indexOf("x")>=0,scrollingY:e.direction.indexOf("y")>=0,zooming:e.$eval(e.zooming)===!0,maxZoom:e.$eval(e.maxZoom)||3,minZoom:e.$eval(e.minZoom)||.5,preventDefault:!0};a&&(s.speedMultiplier=.8,s.bouncing=!1),t("$ionicScroll",{$scope:e,scrollViewOptions:s})}e.addClass("scroll-view ionic-scroll");var i=p('<div class="scroll"></div>');return i.append(e.contents()),e.append(i),{pre:r}}}}]),s.directive("ionSideMenu",function(){return{restrict:"E",require:"^ionSideMenus",scope:!0,compile:function(e,t){return angular.isUndefined(t.isEnabled)&&t.$set("isEnabled","true"),angular.isUndefined(t.width)&&t.$set("width","275"),e.addClass("menu menu-"+t.side),function(e,n,r,i){e.side=r.side||"left";var o=i[e.side]=new ionic.views.SideMenu({width:t.width,el:n[0],isEnabled:!0});e.$watch(r.width,function(e){var t=+e;t&&t==e&&o.setWidth(+e)}),e.$watch(r.isEnabled,function(e){o.setIsEnabled(!!e)})}}}}),s.directive("ionSideMenuContent",["$timeout","$ionicGesture","$window",function(e,t,n){return{restrict:"EA",require:"^ionSideMenus",scope:!0,compile:function(r,i){function o(o,a,s,c){function u(e){0!==c.getOpenAmount()?(c.close(),e.gesture.srcEvent.preventDefault(),g=null,m=null):g||(g=ionic.tap.pointerCoord(e.gesture.srcEvent))}function f(e){c.isDraggableTarget(e)&&"x"==h(e)&&(c._handleDrag(e),e.gesture.srcEvent.preventDefault())}function d(e){"x"==h(e)&&e.gesture.srcEvent.preventDefault()}function p(e){c._endDrag(e),g=null,m=null}function h(e){if(m)return m;if(e&&e.gesture){if(g){var t=ionic.tap.pointerCoord(e.gesture.srcEvent),n=Math.abs(t.x-g.x),r=Math.abs(t.y-g.y),i=r>n?"y":"x";return Math.max(n,r)>30&&(m=i),i}g=ionic.tap.pointerCoord(e.gesture.srcEvent)}return"y"}var g=null,m=null;l(i.dragContent)?o.$watch(i.dragContent,function(e){c.canDragContent(e)}):c.canDragContent(!0),l(i.edgeDragThreshold)&&o.$watch(i.edgeDragThreshold,function(e){c.edgeDragThreshold(e)});var v={element:r[0],onDrag:function(){},endDrag:function(){},getTranslateX:function(){return o.sideMenuContentTranslateX||0},setTranslateX:ionic.animationFrameThrottle(function(t){var n=v.offsetX+t;a[0].style[ionic.CSS.TRANSFORM]="translate3d("+n+"px,0,0)",e(function(){o.sideMenuContentTranslateX=t})}),setMarginLeft:ionic.animationFrameThrottle(function(e){e?(e=parseInt(e,10),a[0].style[ionic.CSS.TRANSFORM]="translate3d("+e+"px,0,0)",a[0].style.width=n.innerWidth-e+"px",v.offsetX=e):(a[0].style[ionic.CSS.TRANSFORM]="translate3d(0,0,0)",a[0].style.width="",v.offsetX=0)}),setMarginRight:ionic.animationFrameThrottle(function(e){e?(e=parseInt(e,10),a[0].style.width=n.innerWidth-e+"px",v.offsetX=e):(a[0].style.width="",v.offsetX=0),a[0].style[ionic.CSS.TRANSFORM]="translate3d(0,0,0)"}),enableAnimation:function(){o.animationEnabled=!0,a[0].classList.add("menu-animated")},disableAnimation:function(){o.animationEnabled=!1,a[0].classList.remove("menu-animated")},offsetX:0};c.setContent(v);var y={stop_browser_behavior:!1};ionic.DomUtil.getParentOrSelfWithClass(a[0],"overflow-scroll")&&(y.prevent_default_directions=["left","right"]);var b=t.on("tap",u,a,y),w=t.on("dragright",f,a,y),S=t.on("dragleft",f,a,y),C=t.on("dragup",d,a,y),_=t.on("dragdown",d,a,y),E=t.on("release",p,a,y);o.$on("$destroy",function(){v&&(v.element=null,v=null),t.off(S,"dragleft",f),t.off(w,"dragright",f),t.off(C,"dragup",d),t.off(_,"dragdown",d),t.off(E,"release",p),t.off(b,"tap",u)})}return r.addClass("menu-content pane"),{pre:o}}}}]),s.directive("ionSideMenus",["$ionicBody",function(e){return{restrict:"ECA",controller:"$ionicSideMenus",compile:function(t,n){function r(t,n,r,i){i.enableMenuWithBackViews(t.$eval(r.enableMenuWithBackViews)),t.$on("$ionicExposeAside",function(n,r){t.$exposeAside||(t.$exposeAside={}),t.$exposeAside.active=r,e.enableClass(r,"aside-open")}),t.$on("$ionicView.beforeEnter",function(e,n){n.historyId&&(t.$activeHistoryId=n.historyId)}),t.$on("$destroy",function(){e.removeClass("menu-open","aside-open")})}return n.$set("class",(n["class"]||"")+" view"),{pre:r}}}}]),s.directive("ionSlideBox",["$timeout","$compile","$ionicSlideBoxDelegate","$ionicHistory","$ionicScrollDelegate",function(e,t,n,r,i){return{restrict:"E",replace:!0,transclude:!0,scope:{autoPlay:"=",doesContinue:"@",slideInterval:"@",showPager:"@",pagerClick:"&",disableScroll:"@",onSlideChanged:"&",delegateHandle:"@",activeSlide:"=?"},controller:["$scope","$element","$attrs",function(t,o,a){function s(e){e&&!c.isScrollFreeze?i.freezeAllScrolls(e):!e&&c.isScrollFreeze&&i.freezeAllScrolls(!1),c.isScrollFreeze=e}var c=this,u=t.$eval(t.doesContinue)===!0,f=l(a.autoPlay)?!!t.autoPlay:!1,d=f?t.$eval(t.slideInterval)||4e3:0,p=new ionic.views.Slider({el:o[0],auto:d,continuous:u,startSlide:t.activeSlide,slidesChanged:function(){t.currentSlide=p.currentIndex(),e(function(){})},callback:function(n){t.currentSlide=n,t.onSlideChanged({index:t.currentSlide,$index:t.currentSlide}),t.$parent.$broadcast("slideBox.slideChanged",n),t.activeSlide=n,e(function(){})},onDrag:function(){s(!0)},onDragEnd:function(){s(!1)}});p.enableSlide(t.$eval(a.disableScroll)!==!0),t.$watch("activeSlide",function(e){l(e)&&p.slide(e)}),t.$on("slideBox.nextSlide",function(){p.next()}),t.$on("slideBox.prevSlide",function(){p.prev()}),t.$on("slideBox.setSlide",function(e,t){p.slide(t)}),this.__slider=p;var h=n._registerInstance(p,t.delegateHandle,function(){return r.isActiveScope(t)});t.$on("$destroy",function(){h(),p.kill()}),this.slidesCount=function(){return p.slidesCount()},this.onPagerClick=function(e){t.pagerClick({index:e})},e(function(){p.load()})}],template:'<div class="slider"><div class="slider-slides" ng-transclude></div></div>',link:function(e,n,r){function i(){if(!o){var r=e.$new();o=p("<ion-pager></ion-pager>"),n.append(o),o=t(o)(r)}return o}l(r.showPager)||(e.showPager=!0,i().toggleClass("hide",!1)),r.$observe("showPager",function(t){void 0!==t&&(t=e.$eval(t),i().toggleClass("hide",!t))});var o}}}]).directive("ionSlide",function(){return{restrict:"E",require:"^ionSlideBox",compile:function(e){e.addClass("slider-slide")}}}).directive("ionPager",function(){return{restrict:"E",replace:!0,require:"^ionSlideBox",template:'<div class="slider-pager"><span class="slider-pager-page" ng-repeat="slide in numSlides() track by $index" ng-class="{active: $index == currentSlide}" ng-click="pagerClick($index)"><i class="icon ion-record"></i></span></div>',link:function(e,t,n,r){var i=function(e){for(var n=t[0].children,r=n.length,i=0;r>i;i++)i==e?n[i].classList.add("active"):n[i].classList.remove("active")};e.pagerClick=function(e){r.onPagerClick(e)},e.numSlides=function(){return new Array(r.slidesCount())},e.$watch("currentSlide",function(e){i(e)})}}}),s.directive("ionSpinner",function(){return{restrict:"E",controller:"$ionicSpinner",link:function(e,t,n,r){var i=r.init();t.addClass("spinner spinner-"+i)}}}),s.directive("ionTab",["$compile","$ionicConfig","$ionicBind","$ionicViewSwitcher",function(e,t,n,r){function i(e,t){return l(t)?" "+e+'="'+t+'"':""}return{restrict:"E",require:["^ionTabs","ionTab"],controller:"$ionicTab",scope:!0,compile:function(o,a){for(var s="<ion-tab-nav"+i("ng-click",a.ngClick)+i("title",a.title)+i("icon",a.icon)+i("icon-on",a.iconOn)+i("icon-off",a.iconOff)+i("badge",a.badge)+i("badge-style",a.badgeStyle)+i("hidden",a.hidden)+i("disabled",a.disabled)+i("class",a["class"])+"></ion-tab-nav>",c=document.createElement("div"),u=0;u<o[0].children.length;u++)c.appendChild(o[0].children[u].cloneNode(!0));var l=c.childElementCount;o.empty();var f,d;return l&&("ION-NAV-VIEW"===c.children[0].tagName&&(f=c.children[0].getAttribute("name"),c.children[0].classList.add("view-container"),d=!0),1===l&&(c=c.children[0]),d||c.classList.add("pane"),c.classList.add("tab-content")),function(i,o,a,u){function d(){b.tabMatchesState()&&y.select(i,!1)}function h(n){n&&l?(w||(m=i.$new(),v=p(c),r.viewEleIsActive(v,!0),y.$element.append(v),e(v)(m),w=!0),r.viewEleIsActive(v,!0)):w&&v&&(t.views.maxCache()>0?r.viewEleIsActive(v,!1):g())}function g(){m&&m.$destroy(),w&&v&&v.remove(),c.innerHTML="",w=m=v=null}var m,v,y=u[0],b=u[1],w=!1;i.$tabSelected=!1,n(i,a,{onSelect:"&",onDeselect:"&",title:"@",uiSref:"@",href:"@"}),y.add(i),i.$on("$destroy",function(){i.$tabsDestroy||y.remove(i),S.isolateScope().$destroy(),S.remove(),S=c=v=null}),o[0].removeAttribute("title"),f&&(b.navViewName=i.navViewName=f),i.$on("$stateChangeSuccess",d),d();var S=p(s);S.data("$ionTabsController",y),S.data("$ionTabController",b),y.$tabsElement.append(e(S)(i)),i.$watch("$tabSelected",h),i.$on("$ionicView.afterEnter",function(){r.viewEleIsActive(v,i.$tabSelected)}),i.$on("$ionicView.clearCache",function(){i.$tabSelected||g()})}}}}]),s.directive("ionTabNav",[function(){return{restrict:"E",replace:!0,require:["^ionTabs","^ionTab"],template:"<a ng-class=\"{'tab-item-active': isTabActive(), 'has-badge':badge, 'tab-hidden':isHidden()}\" "+' ng-disabled="disabled()" class="tab-item"><span class="badge {{badgeStyle}}" ng-if="badge">{{badge}}</span><i class="icon {{getIconOn()}}" ng-if="getIconOn() && isTabActive()"></i><i class="icon {{getIconOff()}}" ng-if="getIconOff() && !isTabActive()"></i><span class="tab-title" ng-bind-html="title"></span></a>',scope:{title:"@",icon:"@",iconOn:"@",iconOff:"@",badge:"=",hidden:"@",disabled:"&",badgeStyle:"@","class":"@"},link:function(e,t,n,r){var i=r[0],o=r[1];t[0].removeAttribute("title"),e.selectTab=function(e){e.preventDefault(),i.select(o.$scope,!0)},n.ngClick||t.on("click",function(t){e.$apply(function(){e.selectTab(t)})}),e.isHidden=function(){return"true"===n.hidden||n.hidden===!0?!0:!1},e.getIconOn=function(){return e.iconOn||e.icon},e.getIconOff=function(){return e.iconOff||e.icon},e.isTabActive=function(){return i.selectedTab()===o.$scope}}}}]),s.directive("ionTabs",["$ionicTabsDelegate","$ionicConfig",function(e,t){return{restrict:"E",scope:!0,controller:"$ionicTabs",compile:function(n){function r(t,n,r,i){function a(e,t){e.stopPropagation();var n=i.previousSelectedTab();n&&n.$broadcast(e.name.replace("NavView","Tabs"),t)}var s=e._registerInstance(i,r.delegateHandle,i.hasActiveScope);i.$scope=t,i.$element=n,i.$tabsElement=p(n[0].querySelector(".tabs")),t.$watch(function(){return n[0].className},function(e){var n=-1!==e.indexOf("tabs-top"),r=-1!==e.indexOf("tabs-item-hide");t.$hasTabs=!n&&!r,t.$hasTabsTop=n&&!r,t.$emit("$ionicTabs.top",t.$hasTabsTop)}),t.$on("$ionicNavView.beforeLeave",a),t.$on("$ionicNavView.afterLeave",a),t.$on("$ionicNavView.leave",a),t.$on("$destroy",function(){t.$tabsDestroy=!0,s(),i.$tabsElement=i.$element=i.$scope=o=null,delete t.$hasTabs,delete t.$hasTabsTop})}function i(e,t,n,r){r.selectedTab()||r.select(0)}var o=p('<div class="tab-nav tabs">');return o.append(n.contents()),n.append(o).addClass("tabs-"+t.tabs.position()+" tabs-"+t.tabs.style()),{pre:r,post:i}}}}]),s.directive("ionToggle",["$timeout","$ionicConfig",function(e,t){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<div class="item item-toggle"><div ng-transclude></div><label class="toggle"><input type="checkbox"><div class="track"><div class="handle"></div></div></label></div>',compile:function(e,n){var r=e.find("input");return u({name:n.name,"ng-value":n.ngValue,"ng-model":n.ngModel,"ng-checked":n.ngChecked,"ng-disabled":n.ngDisabled,"ng-true-value":n.ngTrueValue,"ng-false-value":n.ngFalseValue,"ng-change":n.ngChange,"ng-required":n.ngRequired,required:n.required},function(e,t){l(e)&&r.attr(t,e)}),n.toggleClass&&e[0].getElementsByTagName("label")[0].classList.add(n.toggleClass),e.addClass("toggle-"+t.form.toggle()),function(e,t){var n=t[0].getElementsByTagName("label")[0],r=n.children[0],i=n.children[1],o=i.children[0],a=p(r).controller("ngModel");e.toggle=new ionic.views.Toggle({el:n,track:i,checkbox:r,handle:o,onChange:function(){a&&(a.$setViewValue(r.checked),e.$apply())}}),e.$on("$destroy",function(){e.toggle.destroy()})}}}}]),s.directive("ionView",function(){return{restrict:"EA",priority:1e3,controller:"$ionicView",compile:function(e){return e.addClass("pane"),e[0].removeAttribute("title"),function(e,t,n,r){r.init()}}}})}()}(),r()}),System.registerDynamic("libraries/remote-storage/remote-storage-library.js",[],!1,function(e,t,n){var r=System.get("@@global-helpers").prepareGlobal(n.id,null,null);return function(){var e=this.CHARS;!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Promise=e()}}(function(){var e,t,n;return function r(e,t,n){function i(a,s){if(!t[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=t[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n?n:t)},u,u.exports,r,e,t,n)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,n){"use strict";function r(){this._isTickUsed=!1,this._schedule=i,this._length=0,this._lateBuffer=new o(16),this._functionBuffer=new o(65536);var e=this;this.consumeFunctionBuffer=function(){e._consumeFunctionBuffer()}}var i=e("./schedule.js"),o=e("./queue.js"),a=e("./util.js").errorObj,s=e("./util.js").tryCatch1,c="undefined"!=typeof process?process:void 0;r.prototype.haveItemsQueued=function(){return this._length>0},r.prototype.invokeLater=function(e,t,n){void 0===c||null==c.domain||e.domain||(e=c.domain.bind(e)),this._lateBuffer.push(e,t,n),this._queueTick()},r.prototype.invoke=function(e,t,n){void 0===c||null==c.domain||e.domain||(e=c.domain.bind(e));var r=this._functionBuffer;r.push(e,t,n),this._length=r.length(),this._queueTick()},r.prototype._consumeFunctionBuffer=function(){for(var e=this._functionBuffer;e.length()>0;){var t=e.shift(),n=e.shift(),r=e.shift();t.call(n,r)}this._reset(),this._consumeLateBuffer()},r.prototype._consumeLateBuffer=function(){for(var e=this._lateBuffer;e.length()>0;){var t=e.shift(),n=e.shift(),r=e.shift(),i=s(t,n,r);if(i===a){if(this._queueTick(),null==t.domain)throw i.e;t.domain.emit("error",i.e)}}},r.prototype._queueTick=function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)},r.prototype._reset=function(){this._isTickUsed=!1,this._length=0},t.exports=new r},{"./queue.js":15,"./schedule.js":16,"./util.js":19}],2:[function(e,t,n){"use strict";var r=e("./promise.js")();t.exports=r},{"./promise.js":12}],3:[function(e,t,n){"use strict";t.exports=function(){function t(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e.toString();var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(t))try{var i=JSON.stringify(e);t=i}catch(o){}0===t.length&&(t="(empty array)")}return"(<"+n(t)+">, no stack trace)"}function n(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function r(e,t){this.captureStackTrace(r,t)}var i=e("./util.js").inherits,o=e("./es5.js").defineProperty,a=new RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|3|4|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),s=null,c=null;i(r,Error),r.prototype.captureStackTrace=function(e,t){u(this,e,t)},r.possiblyUnhandledRejection=function(e){if("object"==typeof console){var t;if("object"==typeof e||"function"==typeof e){var n=e.stack;t="Possibly unhandled "+c(n,e)}else t="Possibly unhandled "+String(e);"function"==typeof console.error||"object"==typeof console.error?console.error(t):("function"==typeof console.log||"object"==typeof console.log)&&console.log(t)}},r.combine=function(e,t){for(var n=e.length-1,r=t.length-1;r>=0;--r){var i=t[r];if(e[n]!==i)break;e.pop(),n--}e.push("From previous event:");for(var o=e.concat(t),c=[],r=0,u=o.length;u>r;++r)a.test(o[r])&&s.test(o[r])||r>0&&!s.test(o[r])&&"From previous event:"!==o[r]||c.push(o[r]);return c},r.protectErrorMessageNewlines=function(e){for(var t=0;t<e.length&&!s.test(e[t]);++t);if(!(1>=t)){for(var n=[],r=0;t>r;++r)n.push(e.shift());e.unshift(n.join("\x00"))}},r.isSupported=function(){return"function"==typeof u};var u=function l(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){s=/^\s*at\s*/,c=function(e,n){return"string"==typeof e?e:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:t(n)};var e=Error.captureStackTrace;return function(t,n){e(t,n)}}var n=new Error;if("string"==typeof n.stack&&"function"==typeof"".startsWith&&n.stack.startsWith("stackDetection@")&&"stackDetection"===l.name){o(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),s=/@/;var r=/[@\n]/;return c=function(e,n){return"string"==typeof e?n.name+". "+n.message+"\n"+e:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:t(n)},function(e){for(var t=(new Error).stack,n=t.split(r),i=n.length,o="",a=0;i>a;a+=2)o+=n[a],o+="@",o+=n[a+1],o+="\n";e.stack=o}}return c=function(e,n){return"string"==typeof e?e:"object"!=typeof n&&"function"!=typeof n||void 0===n.name||void 0===n.message?t(n):n.name+". "+n.message},null}();return r}},{"./es5.js":8,"./util.js":19}],4:[function(e,t,n){"use strict";t.exports=function(t){function n(e,t,n){this._instances=e,this._callback=t,this._promise=n}function r(e,t){var n={},r=a(e,n,t);if(r===s)return r;var i=c(n);return i.length?(s.e=new u("Catch filter must inherit from Error or be a simple predicate function"),s):r}var i=e("./util.js"),o=e("./errors.js"),a=i.tryCatch1,s=i.errorObj,c=e("./es5.js").keys,u=o.TypeError;return n.prototype.doFilter=function(e){for(var n=this._callback,i=this._promise,c=i._boundTo,u=0,l=this._instances.length;l>u;++u){var f=this._instances[u],d=f===Error||null!=f&&f.prototype instanceof Error;if(d&&e instanceof f){var p=a(n,c,e);return p===s?(t.e=p.e,t):p}if("function"==typeof f&&!d){var h=r(f,e);if(h===s){var g=o.canAttach(s.e)?s.e:new Error(s.e+"");this._promise._attachExtraTrace(g),e=s.e;break}if(h){var p=a(n,c,e);return p===s?(t.e=p.e,t):p}}}return t.e=e,t},n}},{"./errors.js":6,"./es5.js":8,"./util.js":19}],5:[function(e,t,n){"use strict";var r=e("./util.js"),i=r.isPrimitive,o=r.wrapsPrimitiveReceiver;t.exports=function(e){var t=function(){return this},n=function(){throw this},r=function(e,t){return 1===t?function(){throw e}:2===t?function(){return e}:void 0};e.prototype["return"]=e.prototype.thenReturn=function(e){return o&&i(e)?this._then(r(e,2),void 0,void 0,void 0,void 0):this._then(t,void 0,void 0,e,void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return o&&i(e)?this._then(r(e,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,e,void 0)}}},{"./util.js":19}],6:[function(e,t,n){"use strict";function r(e){try{h(e,"isOperational",!0)}catch(t){}}function i(e){return null==e?!1:e instanceof c||e.isOperational===!0}function o(e){return e instanceof Error}function a(e){return o(e)}function s(e,t){function n(r){return this instanceof n?(this.message="string"==typeof r?r:t,this.name=e,void(Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new n(r)}return p(n,Error),n}function c(e){this.name="OperationalError",this.message=e,this.cause=e,this.isOperational=!0,e instanceof Error?(this.message=e.message,this.stack=e.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var u,l,f=e("./es5.js").freeze,d=e("./util.js"),p=d.inherits,h=d.notEnumerableProp,g=s("CancellationError","cancellation error"),m=s("TimeoutError","timeout error"),v=s("AggregateError","aggregate error");try{u=TypeError,l=RangeError}catch(y){u=s("TypeError","type error"),l=s("RangeError","range error")}for(var b="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),w=0;w<b.length;++w)"function"==typeof Array.prototype[b[w]]&&(v.prototype[b[w]]=Array.prototype[b[w]]);v.prototype.length=0,v.prototype.isOperational=!0;var S=0;v.prototype.toString=function(){var e=Array(4*S+1).join(" "),t="\n"+e+"AggregateError of:\n";S++,e=Array(4*S+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];r=i.join("\n"),t+=r+"\n"}return S--,t},p(c,Error);var C="__BluebirdErrorTypes__",_=Error[C];_||(_=f({CancellationError:g,TimeoutError:m,OperationalError:c,RejectionError:c,AggregateError:v}),h(Error,C,_)),t.exports={Error:Error,TypeError:u,RangeError:l,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,originatesFromRejection:i,markAsOriginatingFromRejection:r,canAttach:a}},{"./es5.js":8,"./util.js":19}],7:[function(e,t,n){"use strict";t.exports=function(t){function n(e){var n=new r(e),i=t.rejected(n),o=i._peekContext();return null!=o&&o._attachExtraTrace(n),i}var r=e("./errors.js").TypeError;return n}},{"./errors.js":6}],8:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},c=function(e,t,n){return e[t]=n.value,e},u=function(e){return e},l=function(e){try{return Object(e).constructor.prototype}catch(t){return a}},f=function(e){try{return"[object Array]"===o.call(e)}catch(t){return!1}};t.exports={isArray:f,keys:s,defineProperty:c,freeze:u,getPrototypeOf:l,isES5:r}}},{}],9:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(){return this}function o(){throw this}function a(e){return function(){return e}}function s(e){return function(){throw e}}function c(e,t,n){var r;return r=d&&p(t)?n?a(t):s(t):n?i:o,e._then(r,h,void 0,t,void 0)}function u(e){var i=this.promise,o=this.handler,a=i._isBound()?o.call(i._boundTo):o();if(void 0!==a){var s=r(a,void 0);if(s instanceof t)return c(s,e,i.isFulfilled())}return i.isRejected()?(n.e=e,n):e}function l(e){var n=this.promise,i=this.handler,o=n._isBound()?i.call(n._boundTo,e):i(e);if(void 0!==o){var a=r(o,void 0);if(a instanceof t)return c(a,e,!0)}return e}var f=e("./util.js"),d=f.wrapsPrimitiveReceiver,p=f.isPrimitive,h=f.thrower;t.prototype._passThroughHandler=function(e,t){if("function"!=typeof e)return this.then();var n={promise:this,handler:e};return this._then(t?u:l,t?u:void 0,void 0,n,void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThroughHandler(e,!0)},t.prototype.tap=function(e){return this._passThroughHandler(e,!1)}}},{"./util.js":19}],10:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util.js"),a=o.canEvaluate,s=o.tryCatch1,c=o.errorObj;if(a){for(var u=function(e){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,e))},l=function(e){for(var t=[],n=1;e>=n;++n)t.push("holder.p"+n);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,t.join(", ")))},f=[],d=[void 0],p=1;5>=p;++p)f.push(u(p)),d.push(l(p));var h=function(e,t){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=t,this.total=e,this.now=0};h.prototype.callers=d,h.prototype.checkFulfillment=function(e){var t=this.now;t++;var n=this.total;if(t>=n){var r=this.callers[n],i=s(r,void 0,this);i===c?e._rejectUnchecked(i.e):e._tryFollow(i)||e._fulfillUnchecked(i)}else this.now=t}}t.join=function(){var e,o=arguments.length-1;if(o>0&&"function"==typeof arguments[o]&&(e=arguments[o],6>o&&a)){var s=new t(i);s._setTrace(void 0);for(var c=new h(o,e),u=s._reject,l=f,d=0;o>d;++d){var p=r(arguments[d],void 0);p instanceof t?p.isPending()?p._then(l[d],u,void 0,s,c):p.isFulfilled()?l[d].call(s,p._settledValue,c):(s._reject(p._settledValue),p._unsetRejectionIsUnhandled()):l[d].call(s,p,c)}return s}for(var g=arguments.length,m=new Array(g),v=0;g>v;++v)m[v]=arguments[v];var s=new n(m).promise();return void 0!==e?s.spread(e):s}}},{"./util.js":19}],11:[function(e,t,n){"use strict";t.exports=function(t){function n(e){throw e}function r(e,t){if(!a.isArray(e))return i(e,t);var r=a.tryCatchApply(this,[null].concat(e),t);r===l&&s.invokeLater(n,void 0,r.e)}function i(e,t){var r=this,i=void 0===e?u(r,t,null):c(r,t,null,e);i===l&&s.invokeLater(n,void 0,i.e)}function o(e,t){var r=this,i=u(r,t,e);i===l&&s.invokeLater(n,void 0,i.e)}var a=e("./util.js"),s=e("./async.js"),c=a.tryCatch2,u=a.tryCatch1,l=a.errorObj;t.prototype.nodeify=function(e,t){if("function"==typeof e){var n=i;void 0!==t&&Object(t).spread&&(n=r),this._then(n,o,void 0,e,this._boundTo)}return this}}},{"./async.js":1,"./util.js":19}],12:[function(e,t,n){"use strict";function r(e){try{Promise===e&&(Promise=i)}catch(t){}return e}var i;"undefined"!=typeof Promise&&(i=Promise),t.exports=function(){function t(e){if("function"!=typeof e)throw new S("the promise constructor requires a resolver function");if(this.constructor!==t)throw new S("the promise constructor cannot be invoked directly");
this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,e!==s&&this._resolveFromResolver(e)}function n(e){return e[0]}var i=e("./util.js"),o=e("./async.js"),a=e("./errors.js"),s=function(){},c={},u={e:null},l=e("./thenables.js")(t,s),f=e("./promise_array.js")(t,s,l),d=e("./captured_trace.js")(),p=e("./catch_filter.js")(u),h=e("./promise_resolver.js"),g=i.isArray,m=i.errorObj,v=i.tryCatch1,y=i.tryCatch2,b=i.tryCatchApply,w=a.RangeError,S=a.TypeError,C=a.CancellationError,_=a.TimeoutError,E=a.OperationalError,T=a.originatesFromRejection,A=a.markAsOriginatingFromRejection,I=a.canAttach,k=i.thrower,x=e("./errors_api_rejection")(t),B=function(){return new S("circular promise resolution chain")};t.prototype.bind=function(e){var r=l(e,void 0),i=new t(s);if(r instanceof t){var o=r.then(function(e){i._setBoundTo(e)}),a=t.all([this,o]).then(n);i._follow(a)}else i._follow(this),i._setBoundTo(e);return i._propagateFrom(this,3),i},t.prototype.toString=function(){return"[object Promise]"},t.prototype.caught=t.prototype["catch"]=function(e){var n=arguments.length;if(n>1){var r,i=new Array(n-1),o=0;for(r=0;n-1>r;++r){var a=arguments[r];if("function"!=typeof a){var s=new S("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(s),t.reject(s)}i[o++]=a}i.length=o,e=arguments[r],this._resetTrace();var c=new p(i,e,this);return this._then(void 0,c.doFilter,void 0,c,void 0)}return this._then(void 0,e,void 0,void 0,void 0)},t.prototype.then=function(e,t,n){return this._then(e,t,n,void 0,void 0)},t.prototype.done=function(e,t,n){var r=this._then(e,t,n,void 0,void 0);r._setIsFinal()},t.prototype.spread=function(e,t){return this._then(e,t,void 0,c,void 0)},t.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},t.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this._settledValue,e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this._settledValue,e.isRejected=!0),e},t.prototype.all=function(){return new f(this).promise()},t.is=function(e){return e instanceof t},t.all=function(e){return new f(e).promise()},t.prototype.error=function(e){return this.caught(T,e)},t.prototype._resolveFromSyncValue=function(e){if(e===m)this._cleanValues(),this._setRejected(),this._settledValue=e.e,this._ensurePossibleRejectionHandled();else{var n=l(e,void 0);n instanceof t?this._follow(n):(this._cleanValues(),this._setFulfilled(),this._settledValue=e)}},t.method=function(e){if("function"!=typeof e)throw new S("fn must be a function");return function(){var n;switch(arguments.length){case 0:n=v(e,this,void 0);break;case 1:n=v(e,this,arguments[0]);break;case 2:n=y(e,this,arguments[0],arguments[1]);break;default:for(var r=arguments.length,i=new Array(r),o=0;r>o;++o)i[o]=arguments[o];n=b(e,i,this)}var a=new t(s);return a._setTrace(void 0),a._resolveFromSyncValue(n),a}},t.attempt=t["try"]=function(e,n,r){if("function"!=typeof e)return x("fn must be a function");var i=g(n)?b(e,n,r):v(e,r,n),o=new t(s);return o._setTrace(void 0),o._resolveFromSyncValue(i),o},t.defer=t.pending=function(){var e=new t(s);return e._setTrace(void 0),new h(e)},t.bind=function(e){var n=l(e,void 0),r=new t(s);if(r._setTrace(void 0),n instanceof t){var i=n.then(function(e){r._setBoundTo(e)});r._follow(i)}else r._setBoundTo(e),r._setFulfilled();return r},t.cast=function(e){var n=l(e,void 0);if(!(n instanceof t)){var r=n;n=new t(s),n._setTrace(void 0),n._setFulfilled(),n._cleanValues(),n._settledValue=r}return n},t.resolve=t.fulfilled=t.cast,t.reject=t.rejected=function(e){var n=new t(s);if(n._setTrace(void 0),A(e),n._cleanValues(),n._setRejected(),n._settledValue=e,!I(e)){var r=new Error(e+"");n._setCarriedStackTrace(r)}return n._ensurePossibleRejectionHandled(),n},t.onPossiblyUnhandledRejection=function(e){d.possiblyUnhandledRejection="function"==typeof e?e:void 0};var N;t.onUnhandledRejectionHandled=function(e){N="function"==typeof e?e:void 0};var D=!("undefined"==typeof process||"string"!=typeof process.execPath||"object"!=typeof process.env||!process.env.BLUEBIRD_DEBUG&&"development"!==process.env.NODE_ENV);t.longStackTraces=function(){if(o.haveItemsQueued()&&D===!1)throw new Error("cannot enable long stack traces after promises have been created");D=d.isSupported()},t.hasLongStackTraces=function(){return D&&d.isSupported()},t.prototype._then=function(e,n,r,i,a){var c=void 0!==a,u=c?a:new t(s);if(!c){if(D){var l=this._peekContext()===this._traceParent;u._traceParent=l?this._traceParent:this}u._propagateFrom(this,7)}var f=this._addCallbacks(e,n,r,u,i);return this.isResolved()&&o.invoke(this._queueSettleAt,this,f),u},t.prototype._length=function(){return 262143&this._bitField},t.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},t.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},t.prototype._setLength=function(e){this._bitField=-262144&this._bitField|262143&e},t.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},t.prototype._setRejected=function(){this._bitField=134217728|this._bitField},t.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},t.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},t.prototype._isFinal=function(){return(33554432&this._bitField)>0},t.prototype._cancellable=function(){return(67108864&this._bitField)>0},t.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},t.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},t.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},t.prototype._setCarriedStackTrace=function(e){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=e},t.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},t.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},t.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},t.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[(e<<2)+e-5+4];return this._isBound()&&void 0===t?this._boundTo:t},t.prototype._promiseAt=function(e){return 0===e?this._promise0:this[(e<<2)+e-5+3]},t.prototype._fulfillmentHandlerAt=function(e){return 0===e?this._fulfillmentHandler0:this[(e<<2)+e-5+0]},t.prototype._rejectionHandlerAt=function(e){return 0===e?this._rejectionHandler0:this[(e<<2)+e-5+1]},t.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=262138&&(o=0,this._setLength(0)),0===o)this._promise0=r,void 0!==i&&(this._receiver0=i),"function"!=typeof e||this._isCarryingStackTrace()||(this._fulfillmentHandler0=e),"function"==typeof t&&(this._rejectionHandler0=t),"function"==typeof n&&(this._progressHandler0=n);else{var a=(o<<2)+o-5;this[a+3]=r,this[a+4]=i,this[a+0]="function"==typeof e?e:void 0,this[a+1]="function"==typeof t?t:void 0,this[a+2]="function"==typeof n?n:void 0}return this._setLength(o+1),o},t.prototype._setProxyHandlers=function(e,t){var n=this._length();if(n>=262138&&(n=0,this._setLength(0)),0===n)this._promise0=t,this._receiver0=e;else{var r=(n<<2)+n-5;this[r+3]=t,this[r+4]=e,this[r+0]=this[r+1]=this[r+2]=void 0}this._setLength(n+1)},t.prototype._proxyPromiseArray=function(e,t){this._setProxyHandlers(e,t)},t.prototype._proxyPromise=function(e){e._setProxied(),this._setProxyHandlers(e,-15)},t.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=8388608|this._bitField,this._boundTo=e):this._bitField=-8388609&this._bitField},t.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},t.prototype._resolveFromResolver=function(e){function t(e){r._tryFollow(e)||r._fulfill(e)}function n(e){var t=I(e)?e:new Error(e+"");r._attachExtraTrace(t),A(e),r._reject(e,t===e?void 0:t)}var r=this;this._setTrace(void 0),this._pushContext();var i=y(e,void 0,t,n);if(this._popContext(),void 0!==i&&i===m){var o=i.e,a=I(o)?o:new Error(o+"");r._reject(o,a)}},t.prototype._spreadSlowCase=function(e,t,n,r){var i=new f(n).promise(),o=i._then(function(){return e.apply(r,arguments)},void 0,void 0,c,void 0);t._follow(o)},t.prototype._callSpread=function(e,n,r){var i=this._boundTo;if(g(r))for(var o=0,a=r.length;a>o;++o)if(l(r[o],void 0)instanceof t)return void this._spreadSlowCase(e,n,r,i);return n._pushContext(),b(e,r,i)},t.prototype._callHandler=function(e,t,n,r){var i;return t!==c||this.isRejected()?(n._pushContext(),i=v(e,t,r)):i=this._callSpread(e,n,r),n._popContext(),i},t.prototype._settlePromiseFromHandler=function(e,n,r,i){if(!(i instanceof t))return void e.call(n,r,i);var o=this._callHandler(e,n,i,r);if(!i._isFollowing())if(o===m||o===i||o===u){var a=o===i?B():o.e,s=I(a)?a:new Error(a+"");o!==u&&i._attachExtraTrace(s),i._rejectUnchecked(a,s)}else{var c=l(o,i);if(c instanceof t){if(c.isRejected()&&!c._isCarryingStackTrace()&&!I(c._settledValue)){var s=new Error(c._settledValue+"");i._attachExtraTrace(s),c._setCarriedStackTrace(s)}i._follow(c),i._propagateFrom(c,1)}else i._fulfillUnchecked(o)}},t.prototype._follow=function(e){this._setFollowing(),e.isPending()?(this._propagateFrom(e,1),e._proxyPromise(this)):e.isFulfilled()?this._fulfillUnchecked(e._settledValue):this._rejectUnchecked(e._settledValue,e._getCarriedStackTrace()),e._isRejectionUnhandled()&&e._unsetRejectionIsUnhandled(),D&&null==e._traceParent&&(e._traceParent=this)},t.prototype._tryFollow=function(e){if(this._isFollowingOrFulfilledOrRejected()||e===this)return!1;var n=l(e,void 0);return n instanceof t?(this._follow(n),!0):!1},t.prototype._resetTrace=function(){D&&(this._trace=new d(void 0===this._peekContext()))},t.prototype._setTrace=function(e){if(D){var t=this._peekContext();this._traceParent=t;var n=void 0===t;void 0!==e&&e._traceParent===t?this._trace=e._trace:this._trace=new d(n)}return this},t.prototype._attachExtraTrace=function(e){if(D){var t=this,n=e.stack;n="string"==typeof n?n.split("\n"):[],d.protectErrorMessageNewlines(n);for(var r=1,i=1;null!=t&&null!=t._trace;)n=d.combine(n,t._trace.stack.split("\n")),t=t._traceParent,i++;var o=Error.stackTraceLimit||10,a=(o+r)*i,s=n.length;s>a&&(n.length=a),s>0&&(n[0]=n[0].split("\x00").join("\n")),n.length<=r?e.stack="(No stack trace)":e.stack=n.join("\n")}},t.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},t.prototype._propagateFrom=function(e,t){(1&t)>0&&e._cancellable()&&(this._setCancellable(),this._cancellationParent=e),(4&t)>0&&this._setBoundTo(e._boundTo),(2&t)>0&&this._setTrace(e)},t.prototype._fulfill=function(e){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(e)},t.prototype._reject=function(e,t){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(e,t)},t.prototype._settlePromiseAt=function(e){var n=this.isFulfilled()?this._fulfillmentHandlerAt(e):this._rejectionHandlerAt(e),r=this._settledValue,i=this._receiverAt(e),o=this._promiseAt(e);if("function"==typeof n)this._settlePromiseFromHandler(n,i,r,o);else{var a=!1,s=this.isFulfilled();void 0!==i&&(i instanceof t&&i._isProxied()?(i._unsetProxied(),s?i._fulfillUnchecked(r):i._rejectUnchecked(r,this._getCarriedStackTrace()),a=!0):i instanceof f&&(s?i._promiseFulfilled(r,o):i._promiseRejected(r,o),a=!0)),a||(s?o._fulfill(r):o._reject(r,this._getCarriedStackTrace()))}e>=4&&this._queueGC()},t.prototype._isProxied=function(){return 4194304===(4194304&this._bitField)},t.prototype._setProxied=function(){this._bitField=4194304|this._bitField},t.prototype._unsetProxied=function(){this._bitField=-4194305&this._bitField},t.prototype._isGcQueued=function(){return-1073741824===(-1073741824&this._bitField)},t.prototype._setGcQueued=function(){this._bitField=-1073741824|this._bitField},t.prototype._unsetGcQueued=function(){this._bitField=1073741823&this._bitField},t.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),o.invokeLater(this._gc,this,void 0))},t.prototype._gc=function(){for(var e=5*this._length()-5,t=0;e>t;t++)delete this[t];this._clearFirstHandlerData(),this._setLength(0),this._unsetGcQueued()},t.prototype._clearFirstHandlerData=function(){this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0},t.prototype._queueSettleAt=function(e){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),o.invoke(this._settlePromiseAt,this,e)},t.prototype._fulfillUnchecked=function(e){if(this.isPending()){if(e===this){var t=B();return this._attachExtraTrace(t),this._rejectUnchecked(t,void 0)}this._cleanValues(),this._setFulfilled(),this._settledValue=e;var n=this._length();n>0&&o.invoke(this._settlePromises,this,n)}},t.prototype._rejectUncheckedCheckError=function(e){var t=I(e)?e:new Error(e+"");this._rejectUnchecked(e,t===e?void 0:t)},t.prototype._rejectUnchecked=function(e,t){if(this.isPending()){if(e===this){var n=B();return this._attachExtraTrace(n),this._rejectUnchecked(n)}if(this._cleanValues(),this._setRejected(),this._settledValue=e,this._isFinal())return void o.invokeLater(k,void 0,void 0===t?e:t);var r=this._length();void 0!==t&&this._setCarriedStackTrace(t),r>0?o.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled()}},t.prototype._rejectPromises=function(){this._settlePromises(),this._unsetCarriedStackTrace()},t.prototype._settlePromises=function(){for(var e=this._length(),t=0;e>t;t++)this._settlePromiseAt(t)},t.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==d.possiblyUnhandledRejection&&o.invokeLater(this._notifyUnhandledRejection,this,void 0)},t.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof N&&o.invokeLater(N,void 0,this)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue,t=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==t&&(this._unsetCarriedStackTrace(),e=t),"function"==typeof d.possiblyUnhandledRejection&&d.possiblyUnhandledRejection(e,this)}};var R=[];return t.prototype._peekContext=function(){var e=R.length-1;return e>=0?R[e]:void 0},t.prototype._pushContext=function(){D&&R.push(this)},t.prototype._popContext=function(){D&&R.pop()},t.noConflict=function(){return r(t)},t.setScheduler=function(e){if("function"!=typeof e)throw new S("fn must be a function");o._schedule=e},d.isSupported()||(t.longStackTraces=function(){},D=!1),t._makeSelfResolutionError=B,e("./finally.js")(t,u,l),e("./direct_resolve.js")(t),e("./synchronous_inspection.js")(t),e("./join.js")(t,f,l,s),t.RangeError=w,t.CancellationError=C,t.TimeoutError=_,t.TypeError=S,t.OperationalError=E,t.RejectionError=E,t.AggregateError=a.AggregateError,i.toFastProperties(t),i.toFastProperties(t.prototype),t.Promise=t,e("./nodeify.js")(t),t.prototype=t.prototype,t}},{"./async.js":1,"./captured_trace.js":3,"./catch_filter.js":4,"./direct_resolve.js":5,"./errors.js":6,"./errors_api_rejection":7,"./finally.js":9,"./join.js":10,"./nodeify.js":11,"./promise_array.js":13,"./promise_resolver.js":14,"./synchronous_inspection.js":17,"./thenables.js":18,"./util.js":19}],13:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){switch(e){case-1:return void 0;case-2:return[];case-3:return{}}}function o(e){var r=this._promise=new t(n),i=void 0;e instanceof t&&(i=e,r._propagateFrom(i,5)),r._setTrace(i),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=e("./errors.js").canAttach,s=e("./util.js"),c=s.isArray;return o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function u(e,n){var o=r(this._values,void 0);if(o instanceof t){if(this._values=o,o._setBoundTo(this._promise._boundTo),!o.isFulfilled())return o.isPending()?void o._then(u,this._reject,void 0,this,n):(o._unsetRejectionIsUnhandled(),void this._reject(o._settledValue));if(o=o._settledValue,!c(o)){var a=new t.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(a)}}else if(!c(o)){var a=new t.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(a)}if(0===o.length)return void(-5===n?this._resolveEmptyArray():this._resolve(i(n)));for(var s=this.getActualLength(o.length),l=s,f=this.shouldCopyValues()?new Array(s):this._values,d=!1,p=0;s>p;++p){var h=r(o[p],void 0);h instanceof t?h.isPending()?h._proxyPromiseArray(this,p):(h._unsetRejectionIsUnhandled(),d=!0):d=!0,f[p]=h}this._values=f,this._length=l,d&&this._scanDirectValues(s)},o.prototype._settlePromiseAt=function(e){var n=this._values[e];n instanceof t?n.isFulfilled()?this._promiseFulfilled(n._settledValue,e):n.isRejected()&&this._promiseRejected(n._settledValue,e):this._promiseFulfilled(n,e)},o.prototype._scanDirectValues=function(e){for(var t=0;e>t&&!this._isResolved();++t)this._settlePromiseAt(t)},o.prototype._isResolved=function(){return null===this._values},o.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},o.prototype.__hardReject__=o.prototype._reject=function(e){this._values=null;var t=a(e)?e:new Error(e+"");this._promise._attachExtraTrace(t),this._promise._reject(e,t)},o.prototype._promiseProgressed=function(e,t){this._isResolved()||this._promise._progress({index:t,value:e})},o.prototype._promiseFulfilled=function(e,t){if(!this._isResolved()){this._values[t]=e;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)}},o.prototype._promiseRejected=function(e,t){this._isResolved()||(this._totalResolved++,this._reject(e))},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(e){return e},o}},{"./errors.js":6,"./util.js":19}],14:[function(e,t,n){"use strict";function r(e){return e instanceof Error&&h.getPrototypeOf(e)===Error.prototype}function i(e){var t;return t=r(e)?new f(e):e,u.markAsOriginatingFromRejection(t),t}function o(e){function t(t,n){if(null!==e){if(t){var r=i(c(t));e._attachExtraTrace(r),e._reject(r)}else if(arguments.length>2){for(var o=arguments.length,a=new Array(o-1),s=1;o>s;++s)a[s-1]=arguments[s];e._fulfill(a)}else e._fulfill(n);e=null}}return t}var a,s=e("./util.js"),c=s.maybeWrapAsError,u=e("./errors.js"),l=u.TimeoutError,f=u.OperationalError,d=e("./async.js"),p=s.haveGetters,h=e("./es5.js");if(a=p?function(e){this.promise=e}:function(e){this.promise=e,this.asCallback=o(e),this.callback=this.asCallback},p){var g={get:function(){return o(this.promise)}};h.defineProperty(a.prototype,"asCallback",g),h.defineProperty(a.prototype,"callback",g)}a._nodebackForPromise=o,a.prototype.toString=function(){return"[object PromiseResolver]"},a.prototype.resolve=a.prototype.fulfill=function(e){if(!(this instanceof a))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var t=this.promise;t._tryFollow(e)||d.invoke(t._fulfill,t,e)},a.prototype.reject=function(e){if(!(this instanceof a))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var t=this.promise;u.markAsOriginatingFromRejection(e);var n=u.canAttach(e)?e:new Error(e+"");t._attachExtraTrace(n),d.invoke(t._reject,t,e),n!==e&&d.invoke(this._setCarriedStackTrace,this,n)},a.prototype.progress=function(e){if(!(this instanceof a))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");d.invoke(this.promise._progress,this.promise,e)},a.prototype.cancel=function(){d.invoke(this.promise.cancel,this.promise,void 0)},a.prototype.timeout=function(){this.reject(new l("timeout"))},a.prototype.isResolved=function(){return this.promise.isResolved()},a.prototype.toJSON=function(){return this.promise.toJSON()},a.prototype._setCarriedStackTrace=function(e){this.promise.isRejected()&&this.promise._setCarriedStackTrace(e)},t.exports=a},{"./async.js":1,"./errors.js":6,"./es5.js":8,"./util.js":19}],15:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var o=0;i>o;++o)n[o+r]=e[o+t]}function i(e){this._capacity=e,this._length=0,this._front=0,this._makeCapacity()}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},i.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._makeCapacity=function(){for(var e=this._capacity,t=0;e>t;++t)this[t]=void 0},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<3)},i.prototype._resizeTo=function(e){var t=this._front,n=this._capacity,i=new Array(n),o=this.length();if(r(this,0,i,0,n),this._capacity=e,this._makeCapacity(),this._front=0,n>=t+o)r(i,t,this,0,o);else{var a=o-(t+o&n-1);r(i,t,this,0,a),r(i,0,this,a,o-a)}},t.exports=i},{}],16:[function(e,t,n){"use strict";var r,i;if("object"==typeof process&&"string"==typeof process.version)r=function(e){process.nextTick(e)};else if("undefined"!=typeof MutationObserver&&(i=MutationObserver)||"undefined"!=typeof WebKitMutationObserver&&(i=WebKitMutationObserver))r=function(){var e=document.createElement("div"),t=void 0,n=new i(function(){var e=t;t=void 0,e()});return n.observe(e,{attributes:!0}),function(n){t=n,e.classList.toggle("foo")}}();else{if("undefined"==typeof setTimeout)throw new Error("no async scheduler available");r=function(e){setTimeout(e,0)}}t.exports=r},{}],17:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(this._bitField=e._bitField,this._settledValue=e.isResolved()?e._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}t.prototype.isFulfilled=e.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},t.prototype.isRejected=e.prototype.isRejected=function(){return(134217728&this._bitField)>0},t.prototype.isPending=e.prototype.isPending=function(){return 0===(402653184&this._bitField)},t.prototype.value=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue},t.prototype.error=t.prototype.reason=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue},t.prototype.isResolved=e.prototype.isResolved=function(){return(402653184&this._bitField)>0},e.PromiseInspection=t}},{}],18:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){try{return e.then}catch(t){return u.e=t,u}}function i(e,i){if(l(e)){if(e instanceof t)return e;if(o(e)){var s=new t(n);return s._setTrace(void 0),e._then(s._fulfillUnchecked,s._rejectUncheckedCheckError,s._progressUnchecked,s,null),s._setFollowing(),s}var f=r(e);if(f===u)return void 0!==i&&c(f.e)&&i._attachExtraTrace(f.e),t.reject(f.e);if("function"==typeof f)return a(e,f,i)}return e}function o(e){return f.call(e,"_promise0")}function a(e,n,r){function i(n){if(!u){if(u=!0,e===n){var i=t._makeSelfResolutionError();return void 0!==r&&r._attachExtraTrace(i),void s.promise._reject(i,void 0)}s.resolve(n)}}function o(e){if(!u){u=!0;var t=c(e)?e:new Error(e+"");void 0!==r&&r._attachExtraTrace(t),s.promise._reject(e,t)}}function a(e){if(!u){var t=s.promise;"function"==typeof t._progress&&t._progress(e)}}var s=t.defer(),u=!1;try{n.call(e,i,o,a)}catch(l){if(!u){u=!0;var f=c(l)?l:new Error(l+"");void 0!==r&&r._attachExtraTrace(f),s.promise._reject(l,f)}}return s.promise}var s=e("./util.js"),c=e("./errors.js").canAttach,u=s.errorObj,l=s.isObject,f={}.hasOwnProperty;return i}},{"./errors.js":6,"./util.js":19}],19:[function(e,t,n){"use strict";function r(e,t,n){try{return e.call(t,n)}catch(r){return _.e=r,_}}function i(e,t,n,r){try{return e.call(t,n,r)}catch(i){return _.e=i,_}}function o(e,t,n,r,i){try{return e.call(t,n,r,i)}catch(o){return _.e=o,_}}function a(e,t,n,r,i,o){try{return e.call(t,n,r,i,o)}catch(a){return _.e=a,_}}function s(e,t,n){try{return e.apply(n,t)}catch(r){return _.e=r,_}}function c(e){return"string"==typeof e?e:""+e}function u(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function l(e){return!u(e)}function f(e){return u(e)?new Error(c(e)):e}function d(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=e[n];return i[n]=t,i}function p(e,t,n){if(!w.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function h(e,t,n){if(u(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return w.defineProperty(e,t,r),e}function g(e){throw e}function m(e){try{if("function"==typeof e){var t=w.keys(e.prototype);return t.length>0&&!(1===t.length&&"constructor"===t[0])}return!1}catch(n){return!1}}function v(e){function t(){}return t.prototype=e,t}function y(e){return I.test(e)}function b(e,t,n){for(var r=new Array(e),i=0;e>i;++i)r[i]=t+i+n;return r}var w=e("./es5.js"),S=function(){try{var e={};return w.defineProperty(e,"f",{get:function(){return 3}}),3===e.f}catch(t){return!1}}(),C="undefined"==typeof navigator,_={e:{}},E=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},T=function(){return"string"!==this}.call("string"),A=function(){return w.isES5?function(e,t){for(var n=[],r=Object.create(null),i=Object(t).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=e;){var o;try{o=i(e)}catch(a){return n}for(var s=0;s<o.length;++s){var c=o[s];if(!r[c]){r[c]=!0;var u=Object.getOwnPropertyDescriptor(e,c);null!=u&&null==u.get&&null==u.set&&n.push(c)}}e=w.getPrototypeOf(e)}return n}:function(e){var t=[];for(var n in e)t.push(n);return t}}(),I=/^[a-z$_][a-z$_0-9]*$/i,k={isClass:m,isIdentifier:y,inheritedDataKeys:A,getDataPropertyOrDefault:p,thrower:g,isArray:w.isArray,haveGetters:S,notEnumerableProp:h,isPrimitive:u,isObject:l,canEvaluate:C,errorObj:_,tryCatch1:r,tryCatch2:i,tryCatch3:o,tryCatch4:a,tryCatchApply:s,inherits:E,withAppended:d,asString:c,maybeWrapAsError:f,wrapsPrimitiveReceiver:T,toFastProperties:v,filledRange:b};t.exports=k},{"./es5.js":8}]},{},[2])(2)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),function(e){function t(e){"string"==typeof e?console.error(e):console.error(e.message,e.stack)}function n(e){return(403===e.statusCode||401===e.statusCode)&&this._emit("error",new o.Unauthorized),Promise.resolve(e)}function r(e){return"dropbox"===this.backend&&e.match(/^\/public\/.*[^\/]$/)}Promise.defer=function(){var e,t,n=new Promise(function(){e=arguments[0],t=arguments[1]});return{resolve:e,reject:t,promise:n}};var i={get:function(e,t){if(this.local){void 0===t&&(t=this.connected?2*this.getSyncInterval():!1);var n=function(e){return e!==!1&&"number"!=typeof e};return n(t)?Promise.reject("Argument 'maxAge' must be false or a number"):this.local.get(e,t,this.sync.queueGetRequest.bind(this.sync))}return this.remote.get(e)},put:function(e,t,n){return r.bind(this)(e)?i._wrapBusyDone.call(this,this.remote.put(e,t,n)):this.local?this.local.put(e,t,n):i._wrapBusyDone.call(this,this.remote.put(e,t,n))},"delete":function(e){return this.local?this.local["delete"](e):i._wrapBusyDone.call(this,this.remote["delete"](e))},_wrapBusyDone:function(e){var t=this;return this._emit("wire-busy"),e.then(function(e){return t._emit("wire-done",{success:!0}),Promise.resolve(e)},function(e){return t._emit("wire-done",{success:!1}),Promise.reject(e)})}},o=function(e){if("object"==typeof e&&(o.config.logging=!!e.logging),o.eventHandling(this,"ready","connected","disconnected","not-connected","conflict","error","features-loaded","connecting","authing","wire-busy","wire-done","sync-interval-change"),this._pending=[],this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),"delete":this._pendingGPD("delete")}),this._cleanups=[],this._pathHandlers={change:{}},this.apiKeys={},this.localStorageAvailable()){try{this.apiKeys=JSON.parse(localStorage["remotestorage:api-keys"])}catch(t){}this.setBackend(localStorage["remotestorage:backend"]||"remotestorage")}var n=this.on;this.on=function(e,t){return"ready"===e&&this.remote.connected&&this._allLoaded?setTimeout(t,0):"features-loaded"===e&&this._allLoaded&&setTimeout(t,0),n.call(this,e,t)},this._init(),this.fireInitial=function(){this.local&&setTimeout(this.local.fireInitial.bind(this.local),0)}.bind(this),this.on("ready",this.fireInitial.bind(this))};o.SyncedGetPutDelete=i,o.DiscoveryError=function(e){Error.apply(this,arguments),this.message=e},o.DiscoveryError.prototype=Object.create(Error.prototype),o.Unauthorized=function(){Error.apply(this,arguments)},o.Unauthorized.prototype=Object.create(Error.prototype),o.log=function(){o.config.logging&&console.log.apply(console,arguments)},o.config={logging:!1,changeEvents:{local:!0,window:!1,remote:!0,conflict:!0},discoveryTimeout:1e4},o.prototype={connect:function(t,n){if(this.setBackend("remotestorage"),t.indexOf("@")<0)return void this._emit("error",new o.DiscoveryError("User address doesn't contain an @."));if(e.cordova&&!n)return void this._emit("error",new o.DiscoveryError("Please supply a custom HTTPS redirect URI for your Cordova app"));this.remote.configure({userAddress:t}),this._emit("connecting");var r=setTimeout(function(){this._emit("error",new o.DiscoveryError("No storage information found at that user address."))}.bind(this),o.config.discoveryTimeout);o.Discover(t).then(function(e){clearTimeout(r),this._emit("authing"),e.userAddress=t,this.remote.configure(e),this.remote.connected||(e.authURL?this.authorize(e.authURL,n):this.impliedauth())}.bind(this),function(e){this._emit("error",new o.DiscoveryError("Failed to contact storage server."))}.bind(this))},disconnect:function(){this.remote&&this.remote.configure({userAddress:null,href:null,storageApi:null,token:null,properties:null}),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),"delete":this._pendingGPD("delete")});var e=this._cleanups.length,t=0,n=function(){t++,t>=e&&(this._init(),o.log("Done cleaning up, emitting disconnected and disconnect events"),this._emit("disconnected"))}.bind(this);e>0?this._cleanups.forEach(function(e){var t=e(this);"object"==typeof e&&"function"==typeof e.then?t.then(n):n()}.bind(this)):n()},setBackend:function(e){this.backend=e,this.localStorageAvailable()&&(e?localStorage["remotestorage:backend"]=e:delete localStorage["remotestorage:backend"])},onChange:function(e,t){this._pathHandlers.change[e]||(this._pathHandlers.change[e]=[]),this._pathHandlers.change[e].push(t)},enableLog:function(){
o.config.logging=!0},disableLog:function(){o.config.logging=!1},log:function(){o.log.apply(o,arguments)},setApiKeys:function(e,t){t?this.apiKeys[e]=t:delete this.apiKeys[e],this.localStorageAvailable()&&(localStorage["remotestorage:api-keys"]=JSON.stringify(this.apiKeys))},_init:function(){function e(){try{r||(n._emit("ready"),r=!0)}catch(e){console.error("'ready' failed: ",e,e.stack),n._emit("error",e)}}var n=this,r=!1;this._loadFeatures(function(r){this.log("[RemoteStorage] All features loaded"),this.local=r.local&&new r.local,this.local&&this.remote?(this._setGPD(i,this),this._bindChange(this.local)):this.remote&&this._setGPD(this.remote,this.remote),this.remote&&(this.remote.on("connected",function(){e(),n._emit("connected")}),this.remote.on("not-connected",function(){e(),n._emit("not-connected")}),this.remote.connected&&(e(),n._emit("connected")),this.hasFeature("Authorize")||this.remote.stopWaitingForToken()),this._collectCleanupFunctions();try{this._allLoaded=!0,this._emit("features-loaded")}catch(o){t(o),this._emit("error",o)}this._processPending()}.bind(this))},_collectCleanupFunctions:function(){for(var e=0;e<this.features.length;e++){var t=this.features[e].cleanup;"function"==typeof t&&this._cleanups.push(t)}},_loadFeatures:function(e){function t(){u++,u===s.length&&setTimeout(function(){c.caching=!!o.Caching,c.sync=!!o.Sync,["IndexedDB","LocalStorage","InMemoryStorage"].some(function(e){return c.some(function(t){return t.name===e})?(c.local=o[e],!0):void 0}),l.features=c,e(c)},0)}function n(e){l.log("[RemoteStorage] [FEATURE "+e+"] initialized."),c.push({name:e,init:o[e]._rs_init,supported:!0,cleanup:o[e]._rs_cleanup}),t()}function r(e,n){l.log("[RemoteStorage] [FEATURE "+e+"] initialization failed ( "+n+")"),t()}function i(e,n){l.log("[RemoteStorage] [FEATURE "+e+"]"+n?"":" not supported"),n||t()}function a(e){var t;try{t=o[e]._rs_init(l)}catch(i){return void r(e,i)}"object"==typeof t&&"function"==typeof t.then?t.then(function(){n(e)},function(t){r(e,t)}):n(e)}var s=["WireClient","I18n","Dropbox","GoogleDrive","Access","Caching","Discover","Authorize","Widget","IndexedDB","LocalStorage","InMemoryStorage","Sync","BaseClient","Env"],c=[],u=0,l=this;s.forEach(function(e){l.log("[RemoteStorage] [FEATURE "+e+"] initializing...");var t,n=o[e];n?(t=!n._rs_supported||n._rs_supported(),"object"==typeof t?t.then(function(){i(e,!0),a(e)},function(){i(e,!1)}):"boolean"==typeof t&&(i(e,t),t&&a(e))):i(e,!1)})},hasFeature:function(e){for(var t=this.features.length-1;t>=0;t--)if(this.features[t].name===e)return this.features[t].supported;return!1},localStorageAvailable:function(){try{return!!e.localStorage}catch(t){return!1}},_setGPD:function(e,t){function r(e){return function(){return e.apply(t,arguments).then(n.bind(this))}}this.get=r(e.get),this.put=r(e.put),this["delete"]=r(e["delete"])},_pendingGPD:function(e){return function(){var t=Promise.defer();return this._pending.push({method:e,args:Array.prototype.slice.call(arguments),promise:t}),t.promise}.bind(this)},_processPending:function(){this._pending.forEach(function(e){try{this[e.method].apply(this,e.args).then(e.promise.resolve,e.promise.reject)}catch(t){e.promise.reject(t)}}.bind(this)),this._pending=[]},_bindChange:function(e){e.on("change",this._dispatchEvent.bind(this,"change"))},_dispatchEvent:function(e,t){var n=this;Object.keys(this._pathHandlers[e]).forEach(function(r){var i=r.length;t.path.substr(0,i)===r&&n._pathHandlers[e][r].forEach(function(e){var i={};for(var o in t)i[o]=t[o];i.relativePath=t.path.replace(new RegExp("^"+r),"");try{e(i)}catch(a){console.error("'change' handler failed: ",a,a.stack),n._emit("error",a)}})})}},Object.defineProperty(o.prototype,"connected",{get:function(){return this.remote.connected}}),"object"==typeof module&&void 0!==typeof module.exports?module.exports=o:e.RemoteStorage=o}("undefined"!=typeof window?window:global),function(){function e(t,n){var r,i,o;if("object"==typeof t&&!Array.isArray(t)&&null!==t)for(r in t)"object"==typeof t[r]&&null!==t[r]&&("[object ArrayBuffer]"===t[r].toString()?(n[r]=new ArrayBuffer(t[r].byteLength),i=new Int8Array(t[r]),o=new Int8Array(n[r]),o.set(i)):e(t[r],n[r]))}RemoteStorage.util={getEventEmitter:function(){var e={},t=Array.prototype.slice.call(arguments);return t.unshift(e),RemoteStorage.eventHandling.apply(RemoteStorage,t),e.emit=e._emit,e},extend:function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){for(var n in t)e[n]=t[n]}),e},asyncEach:function(e,t){return this.asyncMap(e,t).then(function(){return e})},asyncMap:function(e,t){function n(){o++,o===i&&r.resolve(a,s)}var r=Promise.defer(),i=e.length,o=0,a=[],s=[];return e.forEach(function(e,r){var i;try{i=t(e)}catch(o){n(),s[r]=o}"object"==typeof i&&"function"==typeof i.then?i.then(function(e){a[r]=e,n()},function(e){s[r]=e,n()}):(n(),a[r]=i)}),r.promise},containingFolder:function(e){if(""===e)return"/";if(!e)throw"Path not given!";return e.replace(/\/+/g,"/").replace(/[^\/]+\/?$/,"")},isFolder:function(e){return"/"===e.substr(-1)},isDocument:function(e){return"/"!==e.substr(-1)},baseName:function(e){var t=e.split("/");return this.isFolder(e)?t[t.length-2]+"/":t[t.length-1]},cleanPath:function(e){return e.replace(/\/+/g,"/").split("/").map(encodeURIComponent).join("/").replace(/'/g,"%27")},bindAll:function(e){for(var t in this)"function"==typeof e[t]&&(e[t]=e[t].bind(e))},equal:function(e,t,n){var r;if(n=n||[],typeof e!=typeof t)return!1;if("number"==typeof e||"boolean"==typeof e||"string"==typeof e)return e===t;if("function"==typeof e)return e.toString()===t.toString();if(e instanceof ArrayBuffer&&t instanceof ArrayBuffer&&(e=new Uint8Array(e),t=new Uint8Array(t)),e instanceof Array){if(e.length!==t.length)return!1;for(var i=0,o=e.length;o>i;i++)if(!RemoteStorage.util.equal(e[i],t[i],n))return!1}else{for(r in e)if(e.hasOwnProperty(r)&&!(r in t))return!1;for(r in t)if(t.hasOwnProperty(r)){if(!(r in e))return!1;var a;if("object"==typeof t[r]){if(n.indexOf(t[r])>=0)continue;a=n.slice(),a.push(t[r])}if(!RemoteStorage.util.equal(e[r],t[r],a))return!1}}return!0},equalObj:function(e,t){return console.warn("DEPRECATION WARNING: RemoteStorage.util.equalObj has been replaced by RemoteStorage.util.equal."),RemoteStorage.util.equal(e,t)},deepClone:function(t){var n;return void 0===t?void 0:(n=JSON.parse(JSON.stringify(t)),e(t,n),n)},pathsFromRoot:function(e){for(var t=[e],n=e.replace(/\/$/,"").split("/");n.length>1;)n.pop(),t.push(n.join("/")+"/");return t},md5sum:function(e){function t(e,t){var n=e[0],s=e[1],c=e[2],u=e[3];n=r(n,s,c,u,t[0],7,-680876936),u=r(u,n,s,c,t[1],12,-389564586),c=r(c,u,n,s,t[2],17,606105819),s=r(s,c,u,n,t[3],22,-1044525330),n=r(n,s,c,u,t[4],7,-176418897),u=r(u,n,s,c,t[5],12,1200080426),c=r(c,u,n,s,t[6],17,-1473231341),s=r(s,c,u,n,t[7],22,-45705983),n=r(n,s,c,u,t[8],7,1770035416),u=r(u,n,s,c,t[9],12,-1958414417),c=r(c,u,n,s,t[10],17,-42063),s=r(s,c,u,n,t[11],22,-1990404162),n=r(n,s,c,u,t[12],7,1804603682),u=r(u,n,s,c,t[13],12,-40341101),c=r(c,u,n,s,t[14],17,-1502002290),s=r(s,c,u,n,t[15],22,1236535329),n=i(n,s,c,u,t[1],5,-165796510),u=i(u,n,s,c,t[6],9,-1069501632),c=i(c,u,n,s,t[11],14,643717713),s=i(s,c,u,n,t[0],20,-373897302),n=i(n,s,c,u,t[5],5,-701558691),u=i(u,n,s,c,t[10],9,38016083),c=i(c,u,n,s,t[15],14,-660478335),s=i(s,c,u,n,t[4],20,-405537848),n=i(n,s,c,u,t[9],5,568446438),u=i(u,n,s,c,t[14],9,-1019803690),c=i(c,u,n,s,t[3],14,-187363961),s=i(s,c,u,n,t[8],20,1163531501),n=i(n,s,c,u,t[13],5,-1444681467),u=i(u,n,s,c,t[2],9,-51403784),c=i(c,u,n,s,t[7],14,1735328473),s=i(s,c,u,n,t[12],20,-1926607734),n=o(n,s,c,u,t[5],4,-378558),u=o(u,n,s,c,t[8],11,-2022574463),c=o(c,u,n,s,t[11],16,1839030562),s=o(s,c,u,n,t[14],23,-35309556),n=o(n,s,c,u,t[1],4,-1530992060),u=o(u,n,s,c,t[4],11,1272893353),c=o(c,u,n,s,t[7],16,-155497632),s=o(s,c,u,n,t[10],23,-1094730640),n=o(n,s,c,u,t[13],4,681279174),u=o(u,n,s,c,t[0],11,-358537222),c=o(c,u,n,s,t[3],16,-722521979),s=o(s,c,u,n,t[6],23,76029189),n=o(n,s,c,u,t[9],4,-640364487),u=o(u,n,s,c,t[12],11,-421815835),c=o(c,u,n,s,t[15],16,530742520),s=o(s,c,u,n,t[2],23,-995338651),n=a(n,s,c,u,t[0],6,-198630844),u=a(u,n,s,c,t[7],10,1126891415),c=a(c,u,n,s,t[14],15,-1416354905),s=a(s,c,u,n,t[5],21,-57434055),n=a(n,s,c,u,t[12],6,1700485571),u=a(u,n,s,c,t[3],10,-1894986606),c=a(c,u,n,s,t[10],15,-1051523),s=a(s,c,u,n,t[1],21,-2054922799),n=a(n,s,c,u,t[8],6,1873313359),u=a(u,n,s,c,t[15],10,-30611744),c=a(c,u,n,s,t[6],15,-1560198380),s=a(s,c,u,n,t[13],21,1309151649),n=a(n,s,c,u,t[4],6,-145523070),u=a(u,n,s,c,t[11],10,-1120210379),c=a(c,u,n,s,t[2],15,718787259),s=a(s,c,u,n,t[9],21,-343485551),e[0]=p(n,e[0]),e[1]=p(s,e[1]),e[2]=p(c,e[2]),e[3]=p(u,e[3])}function n(e,t,n,r,i,o){return t=p(p(t,e),p(r,o)),p(t<<i|t>>>32-i,n)}function r(e,t,r,i,o,a,s){return n(t&r|~t&i,e,t,o,a,s)}function i(e,t,r,i,o,a,s){return n(t&i|r&~i,e,t,o,a,s)}function o(e,t,r,i,o,a,s){return n(t^r^i,e,t,o,a,s)}function a(e,t,r,i,o,a,s){return n(r^(t|~i),e,t,o,a,s)}function s(e){txt="";var n,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)t(i,c(e.substring(n-64,n)));e=e.substring(n-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)o[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(t(i,o),n=0;16>n;n++)o[n]=0;return o[14]=8*r,t(i,o),i}function c(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function u(e){for(var t="",n=0;4>n;n++)t+=d[e>>8*n+4&15]+d[e>>8*n&15];return t}function l(e){for(var t=0;t<e.length;t++)e[t]=u(e[t]);return e.join("")}function f(e){return l(s(e))}var d="0123456789abcdef".split(""),p=function(e,t){return e+t&4294967295};return"5d41402abc4b2a76b9719d911017c592"!==f("hello")&&(p=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),f(e)}},RemoteStorage.prototype.util||Object.defineProperty(RemoteStorage.prototype,"util",{get:function(){return console.log("DEPRECATION WARNING: remoteStorage.util was moved to RemoteStorage.util"),RemoteStorage.util}})}(),function(e){var t={addEventListener:function(e,t){if("string"!=typeof e)throw new Error("Argument eventName should be a string");if("function"!=typeof t)throw new Error("Argument handler should be a function");RemoteStorage.log("[Eventhandling] Adding event listener",e,t),this._validateEvent(e),this._handlers[e].push(t)},removeEventListener:function(e,t){this._validateEvent(e);for(var n=this._handlers[e].length,r=0;n>r;r++)if(this._handlers[e][r]===t)return void this._handlers[e].splice(r,1)},_emit:function(e){this._validateEvent(e);var t=Array.prototype.slice.call(arguments,1);this._handlers[e].forEach(function(e){e.apply(this,t)})},_validateEvent:function(e){if(!(e in this._handlers))throw new Error("Unknown event: "+e)},_delegateEvent:function(e,t){t.on(e,function(t){this._emit(e,t)}.bind(this))},_addEvent:function(e){this._handlers[e]=[]}};t.on=t.addEventListener,RemoteStorage.eventHandling=function(e){var n=Array.prototype.slice.call(arguments,1);for(var r in t)e[r]=t[r];e._handlers={},n.forEach(function(t){e._addEvent(t)})}}("undefined"!=typeof window?window:global),function(e){function t(e){return"string"!=typeof e?e:"*"===e?"*":'"'+e+'"'}function n(e){return"string"!=typeof e?e:e.replace(/^["']|["']$/g,"")}function r(t,n,r){var i;if(e.BlobBuilder=e.BlobBuilder||e.WebKitBlobBuilder,"undefined"!=typeof e.BlobBuilder){var o=new e.BlobBuilder;o.append(t),i=o.getBlob(n)}else i=new Blob([t],{type:n});var a=new FileReader;"function"==typeof a.addEventListener?a.addEventListener("loadend",function(){r(a.result)}):a.onloadend=function(){r(a.result)},a.readAsArrayBuffer(i)}function i(t,n){var r=Promise.defer();if("undefined"==typeof Blob){var i=new Buffer(new Uint8Array(t));r.resolve(i.toString(n))}else{var o;if(e.BlobBuilder=e.BlobBuilder||e.WebKitBlobBuilder,"undefined"!=typeof e.BlobBuilder){var a=new e.BlobBuilder;a.append(t),o=a.getBlob()}else o=new Blob([t]);var s=new FileReader;"function"==typeof s.addEventListener?s.addEventListener("loadend",function(e){r.resolve(e.target.result)}):s.onloadend=function(e){r.resolve(e.target.result)},s.readAsText(o,n)}return r.promise}function o(e){var t,n="UTF-8";return e&&(t=e.match(/charset=(.+)$/),t&&(n=t[1])),n}function a(e){return"http://remotestorage.io/spec/folder-description"===e["@context"]&&"object"==typeof e.items}function s(e){return[201,204,304].indexOf(e)>=0}function c(e){return[401,403,404,412].indexOf(e)>=0}var u,l,f=RemoteStorage,d="remotestorage:wireclient",p=1,h=2,g=3,m=4,v=5,y={"draft-dejong-remotestorage-00":h,"draft-dejong-remotestorage-01":g,"draft-dejong-remotestorage-02":m,"https://www.w3.org/community/rww/wiki/read-write-web-00#simple":p};if("function"==typeof ArrayBufferView)l=function(e){return e&&e instanceof ArrayBufferView};else{var b=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];l=function(e){for(var t=0;8>t;t++)if(e instanceof b[t])return!0;return!1}}var w,S=RemoteStorage.util.isFolder,C=RemoteStorage.util.cleanPath;f.WireClient=function(e){if(this.connected=!1,f.eventHandling(this,"change","connected","wire-busy","wire-done","not-connected"),w=function(e){e instanceof RemoteStorage.Unauthorized&&this.configure({token:null})}.bind(this),e.on("error",w),u){var t;try{t=JSON.parse(localStorage[d])}catch(n){}t&&setTimeout(function(){this.configure(t)}.bind(this),0)}this._revisionCache={},this.connected&&setTimeout(this._emit.bind(this),0,"connected")},f.WireClient.REQUEST_TIMEOUT=3e4,f.WireClient.prototype={_request:function(e,t,r,a,u,l,d){if(("PUT"===e||"DELETE"===e)&&"/"===t[t.length-1])return Promise.reject("Don't "+e+" on directories!");var p,h=this;return r!==RemoteStorage.Authorize.IMPLIED_FAKE_TOKEN&&(a.Authorization="Bearer "+r),this._emit("wire-busy",{method:e,isFolder:S(t)}),f.WireClient.request(e,t,{body:u,headers:a,responseType:"arraybuffer"}).then(function(r){if(h._emit("wire-done",{method:e,isFolder:S(t),success:!0}),h.online=!0,c(r.status))return RemoteStorage.log("[WireClient] Error response status",r.status),p=l?n(r.getResponseHeader("ETag")):void 0,Promise.resolve({statusCode:r.status,revision:p});if(s(r.status)||200===r.status&&"GET"!==e)return p=n(r.getResponseHeader("ETag")),RemoteStorage.log("[WireClient] Successful request",p),Promise.resolve({statusCode:r.status,revision:p});var a=r.getResponseHeader("Content-Type");p=l?n(r.getResponseHeader("ETag")):200===r.status?d:void 0;var u=o(a);return a&&"binary"!==u?i(r.response,u).then(function(e){return RemoteStorage.log("[WireClient] Successful request",p),Promise.resolve({statusCode:r.status,body:e,contentType:a,revision:p})}):(RemoteStorage.log("[WireClient] Successful request with unknown or binary mime-type",p),Promise.resolve({statusCode:r.status,body:r.response,contentType:a,revision:p}))},function(n){return h._emit("wire-done",{method:e,isFolder:S(t),success:!1}),Promise.reject(n)})},configure:function(e){if("object"!=typeof e)throw new Error("WireClient configure settings parameter should be an object");"undefined"!=typeof e.userAddress&&(this.userAddress=e.userAddress),"undefined"!=typeof e.href&&(this.href=e.href),"undefined"!=typeof e.storageApi&&(this.storageApi=e.storageApi),"undefined"!=typeof e.token&&(this.token=e.token),"undefined"!=typeof e.properties&&(this.properties=e.properties),"undefined"!=typeof this.storageApi&&(this._storageApi=y[this.storageApi]||v,this.supportsRevs=this._storageApi>=h),this.href&&this.token?(this.connected=!0,this.online=!0,this._emit("connected")):this.connected=!1,u&&(localStorage[d]=JSON.stringify({userAddress:this.userAddress,href:this.href,storageApi:this.storageApi,token:this.token,properties:this.properties}))},stopWaitingForToken:function(){this.connected||this._emit("not-connected")},get:function(e,n){var r=this;if(!this.connected)return Promise.reject("not connected (path: "+e+")");n||(n={});var i={};if(this.supportsRevs)n.ifNoneMatch&&(i["If-None-Match"]=t(n.ifNoneMatch));else if(n.ifNoneMatch){this._revisionCache[e]}return this._request("GET",this.href+C(e),this.token,i,void 0,this.supportsRevs,this._revisionCache[e]).then(function(t){if(!S(e))return Promise.resolve(t);var n={};if("undefined"!=typeof t.body)try{t.body=JSON.parse(t.body)}catch(i){return Promise.reject("Folder description at "+r.href+C(e)+" is not JSON")}if(200===t.statusCode&&"object"==typeof t.body){if(0===Object.keys(t.body).length)t.statusCode=404;else if(a(t.body)){for(var o in t.body.items)r._revisionCache[e+o]=t.body.items[o].ETag;n=t.body.items}else Object.keys(t.body).forEach(function(i){r._revisionCache[e+i]=t.body[i],n[i]={ETag:t.body[i]}});return t.body=n,Promise.resolve(t)}return Promise.resolve(t)})},put:function(e,n,r,i){if(!this.connected)return Promise.reject("not connected (path: "+e+")");i||(i={}),!r.match(/charset=/)&&(n instanceof ArrayBuffer||l(n))&&(r+="; charset=binary");var o={"Content-Type":r};return this.supportsRevs&&(i.ifMatch&&(o["If-Match"]=t(i.ifMatch)),i.ifNoneMatch&&(o["If-None-Match"]=t(i.ifNoneMatch))),this._request("PUT",this.href+C(e),this.token,o,n,this.supportsRevs)},"delete":function(e,n){if(!this.connected)throw new Error("not connected (path: "+e+")");n||(n={});var r={};return this.supportsRevs&&n.ifMatch&&(r["If-Match"]=t(n.ifMatch)),this._request("DELETE",this.href+C(e),this.token,r,void 0,this.supportsRevs)}},f.WireClient.cleanPath=C,f.WireClient.isArrayBufferView=l,f.WireClient.readBinaryData=r,f.WireClient.request=function(e,t,n){var r=Promise.defer();RemoteStorage.log("[WireClient]",e,t);var i=!1,o=setTimeout(function(){i=!0,r.reject("timeout")},f.WireClient.REQUEST_TIMEOUT),a=new XMLHttpRequest;if(a.open(e,t,!0),n.responseType&&(a.responseType=n.responseType),n.headers)for(var s in n.headers)a.setRequestHeader(s,n.headers[s]);a.onload=function(){i||(clearTimeout(o),r.resolve(a))},a.onerror=function(e){i||(clearTimeout(o),r.reject(e))};var c=n.body;return"object"==typeof c&&!l(c)&&c instanceof ArrayBuffer&&(c=new Uint8Array(c)),a.send(c),r.promise},Object.defineProperty(RemoteStorage.WireClient.prototype,"storageType",{get:function(){if(this.storageApi){var e=this.storageApi.match(/draft-dejong-(remotestorage-\d\d)/);return e?e[1]:"2012.04"}}}),f.WireClient._rs_init=function(e){u=e.localStorageAvailable(),e.remote=new f.WireClient(e),this.online=!0},f.WireClient._rs_supported=function(){return!!e.XMLHttpRequest},f.WireClient._rs_cleanup=function(e){u&&delete localStorage[d],e.removeEventListener("error",w)}}("undefined"!=typeof window?window:global),function(e){var t,n,r="remotestorage:discover",i={};RemoteStorage.Discover=function(e){if(e in i)return Promise.resolve(i[e]);var t=new WebFinger({tls_only:!1,uri_fallback:!0,request_timeout:5e3}),o=Promise.defer();return t.lookup(e,function(t,a){if(t)return o.reject(t.message);if("object"!=typeof a.idx.links.remotestorage||"number"!=typeof a.idx.links.remotestorage.length||a.idx.links.remotestorage.length<=0)return RemoteStorage.log("[Discover] WebFinger record for "+e+" does not have remotestorage defined in the links section ",JSON.stringify(a.json)),o.reject("WebFinger record for "+e+" does not have remotestorage defined in the links section.");var s=a.idx.links.remotestorage[0],c=s.properties["http://tools.ietf.org/html/rfc6749#section-4.2"]||s.properties["auth-endpoint"],u=s.properties["http://remotestorage.io/spec/version"]||s.type;return i[e]={href:s.href,storageType:u,authURL:c,properties:s.properties},n&&(localStorage[r]=JSON.stringify({cache:i})),o.resolve(i[e])}),o.promise},RemoteStorage.Discover._rs_init=function(e){if(n=e.localStorageAvailable()){var t;try{t=JSON.parse(localStorage[r])}catch(o){}t&&(i=t.cache)}},RemoteStorage.Discover._rs_supported=function(){return t=!!e.XMLHttpRequest},RemoteStorage.Discover._rs_cleanup=function(){n&&delete localStorage[r]}}("undefined"!=typeof window?window:global),"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest),function(e){function t(e){return e.toString=function(){return this.message},e}function n(e){"object"!=typeof e&&(e={}),this.config={tls_only:"undefined"!=typeof e.tls_only?e.tls_only:!0,webfist_fallback:"undefined"!=typeof e.webfist_fallback?e.webfist_fallback:!1,uri_fallback:"undefined"!=typeof e.uri_fallback?e.uri_fallback:!1,request_timeout:"undefined"!=typeof e.request_timeout?e.request_timeout:1e4}}var r={"http://webfist.org/spec/rel":"webfist","http://webfinger.net/rel/avatar":"avatar",remotestorage:"remotestorage",remoteStorage:"remotestorage","http://www.packetizer.com/rel/share":"share","http://webfinger.net/rel/profile-page":"profile",me:"profile",vcard:"vcard",blog:"blog","http://packetizer.com/rel/blog":"blog","http://schemas.google.com/g/2010#updates-from":"updates","https://camlistore.org/rel/server":"camilstore"},i={avatar:[],remotestorage:[],blog:[],vcard:[],updates:[],share:[],profile:[],webfist:[],camilstore:[]},o=["webfinger","host-meta","host-meta.json"];if(n.prototype._fetchJRD=function(e,n){var r=this,i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status?r._isValidJSON(i.responseText)?n(null,i.responseText):n(t({message:"invalid json",url:e,status:i.status})):n(404===i.status?t({message:"endpoint unreachable",url:e,status:i.status}):t({message:"error during request",url:e,status:i.status})))},i.open("GET",e,!0),i.setRequestHeader("Accept","application/jrd+json, application/json"),i.send()},n.prototype._isValidJSON=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},n.prototype._isLocalhost=function(e){var t=/^localhost(\.localdomain)?(\:[0-9]+)?$/;return t.test(e)},n.prototype._processJRD=function(n,o){var a=JSON.parse(n);if("object"!=typeof a||"object"!=typeof a.links)return o(t("undefined"!=typeof a.error?{message:a.error}:{message:"unknown response from server"})),!1;var s=a.links,c={object:a,json:n,idx:{}};c.idx.properties={name:e},c.idx.links=JSON.parse(JSON.stringify(i)),s.map(function(e,t){if(r.hasOwnProperty(e.rel)&&c.idx.links[r[e.rel]]){var n={};Object.keys(e).map(function(t,r){n[t]=e[t]}),c.idx.links[r[e.rel]].push(n)}});var u=JSON.parse(n).properties;for(var l in u)u.hasOwnProperty(l)&&"http://packetizer.com/ns/name"===l&&(c.idx.properties.name=u[l]);o(null,c)},n.prototype.lookup=function(e,n){function r(){return f+"://"+u+"/.well-known/"+o[l]+"?resource=acct:"+e}function i(e){if(s.config.uri_fallback&&"webfist.org"!==u&&l!==o.length-1)l+=1,a();else if(s.config.tls_only||"https"!==f){if(!s.config.webfist_fallback||"webfist.org"===u)return n(e),!1;l=0,f="http",u="webfist.org",s._fetchJRD(r(),function(e,t){return e?(n(e),!1):void s._processJRD(t,function(e,t){"object"==typeof t.idx.links.webfist&&"string"==typeof t.idx.links.webfist[0].href&&s._fetchJRD(t.idx.links.webfist[0].href,function(e,t){e?n(e):s._processJRD(t,n)})})})}else l=0,f="http",a()}function a(){s._fetchJRD(r(),function(e,t){e?i(e):s._processJRD(t,n)})}if("string"!=typeof e)throw new Error("first parameter must be a user address");if("function"!=typeof n)throw new Error("second parameter must be a callback");var s=this,c=e.replace(/ /g,"").split("@"),u=c[1],l=0,f="https";return 2!==c.length?(n(t({message:"invalid user address "+e+" ( expected format: user@host.com )"})),!1):(s._isLocalhost(u)&&(f="http"),void setTimeout(a,0))},"object"==typeof window)window.WebFinger=n;else if("function"==typeof define&&define.amd)define([],function(){return n});else try{module.exports=n}catch(a){}}(),function(e){function t(e){var t,n=e||RemoteStorage.Authorize.getLocation().href,r=n.indexOf("#");if(-1!==r&&(t=n.substring(r+1),-1!==t.indexOf("=")))return t.split("&").reduce(function(e,t){var n=t.split("=");return e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]),e},{})}RemoteStorage.ImpliedAuth=function(e,t){RemoteStorage.log("ImpliedAuth proceeding due to absent authURL; storageApi = "+e+" redirectUri = "+t),remoteStorage.remote.configure({token:RemoteStorage.Authorize.IMPLIED_FAKE_TOKEN}),document.location=t},RemoteStorage.Authorize=function(t,n,r,i){RemoteStorage.log("[Authorize] authURL = ",t,"scope = ",n,"redirectUri = ",r,"clientId = ",i);var o=t,a=r.indexOf("#");return o+=t.indexOf("?")>0?"&":"?",o+="redirect_uri="+encodeURIComponent(r.replace(/#.*$/,"")),o+="&scope="+encodeURIComponent(n),o+="&client_id="+encodeURIComponent(i),-1!==a&&(o+="&state="+encodeURIComponent(r.substring(a+1))),o+="&response_type=token",e.cordova?RemoteStorage.Authorize.openWindow(o,r,"location=no,clearsessioncache=yes,clearcache=yes").then(function(t){remoteStorage.remote.configure({token:t.access_token}),e.location.reload()}).then(null,function(e){console.error(e)}):void RemoteStorage.Authorize.setLocation(o)},RemoteStorage.Authorize.IMPLIED_FAKE_TOKEN=!1,RemoteStorage.prototype.authorize=function(t,n){this.access.setStorageType(this.remote.storageType);var r=this.access.scopeParameter,i=e.cordova?n:String(RemoteStorage.Authorize.getLocation()),o=i.match(/^(https?:\/\/[^\/]+)/)[0];RemoteStorage.Authorize(t,r,i,o)},RemoteStorage.Authorize.getLocation=function(){return e.document.location},RemoteStorage.Authorize.setLocation=function(t){if("string"==typeof t)e.document.location.href=t;else{if("object"!=typeof t)throw"Invalid location "+t;e.document.location=t}},RemoteStorage.Authorize.openWindow=function(n,r,i){var o=Promise.defer(),a=e.open(n,"_blank",i);if(!a||a.closed)return o.reject("Authorization popup was blocked"),o.promise;var s=function(){o.reject("Authorization was canceled")},c=function(e){if(0===e.url.indexOf(r)){a.removeEventListener("exit",s),a.close();var n=t(e.url);return n?o.resolve(n):o.reject("Authorization error")}};return a.addEventListener("loadstart",c),a.addEventListener("exit",s),o.promise},RemoteStorage.prototype.impliedauth=function(){RemoteStorage.ImpliedAuth(this.remote.storageApi,String(document.location))},RemoteStorage.Authorize._rs_supported=function(){return"undefined"!=typeof document};var n;RemoteStorage.Authorize._rs_init=function(e){n=function(){var t=!1;if(i){if(i.error)throw"Authorization server errored: "+i.error;i.access_token&&(e.remote.configure({token:i.access_token}),t=!0),i.remotestorage&&(e.connect(i.remotestorage),t=!0),i.state&&RemoteStorage.Authorize.setLocation("#"+i.state)}t||e.remote.stopWaitingForToken()};var r,i=t();i&&(r=RemoteStorage.Authorize.getLocation(),r.hash=""),e.on("features-loaded",n)},RemoteStorage.Authorize._rs_cleanup=function(e){e.removeEventListener("features-loaded",n)}}("undefined"!=typeof window?window:global),function(e){RemoteStorage.Access=function(){this.reset()},RemoteStorage.Access.prototype={claim:function(e,t){if("string"!=typeof e||-1!==e.indexOf("/")||0===e.length)throw new Error("Scope should be a non-empty string without forward slashes");if(!t.match(/^rw?$/))throw new Error("Mode should be either 'r' or 'rw'");this._adjustRootPaths(e),this.scopeModeMap[e]=t},get:function(e){return this.scopeModeMap[e]},remove:function(e){var t,n={};for(t in this.scopeModeMap)n[t]=this.scopeModeMap[t];this.reset(),delete n[e];for(t in n)this.set(t,n[t])},checkPermission:function(e,t){var n=this.get(e);return n&&("r"===t||"rw"===n)},checkPathPermission:function(e,t){return this.checkPermission("*",t)?!0:!!this.checkPermission(this._getModuleName(e),t)},reset:function(){this.rootPaths=[],this.scopeModeMap={}},_getModuleName:function(e){if("/"!==e[0])throw new Error("Path should start with a slash");var t=e.replace(/^\/public/,"").match(/^\/([^\/]*)\//);return t?t[1]:"*"},_adjustRootPaths:function(e){"*"in this.scopeModeMap||"*"===e?this.rootPaths=["/"]:e in this.scopeModeMap||(this.rootPaths.push("/"+e+"/"),this.rootPaths.push("/public/"+e+"/"))},_scopeNameForParameter:function(e){if("*"===e.name&&this.storageType){if("2012.04"===this.storageType)return"";if(this.storageType.match(/remotestorage-0[01]/))return"root"}return e.name},setStorageType:function(e){this.storageType=e}},Object.defineProperty(RemoteStorage.Access.prototype,"scopes",{get:function(){return Object.keys(this.scopeModeMap).map(function(e){return{name:e,mode:this.scopeModeMap[e]}}.bind(this))}}),Object.defineProperty(RemoteStorage.Access.prototype,"scopeParameter",{get:function(){return this.scopes.map(function(e){return this._scopeNameForParameter(e)+":"+e.mode}.bind(this)).join(" ")}}),Object.defineProperty(RemoteStorage.prototype,"access",{get:function(){var e=new RemoteStorage.Access;return Object.defineProperty(this,"access",{value:e}),e},configurable:!0}),RemoteStorage.Access._rs_init=function(){}}("undefined"!=typeof window?window:global),function(e){var t=e,n={},r=!1;RemoteStorage.Env=function(){return n},RemoteStorage.Env.isBrowser=function(){return"browser"===t},RemoteStorage.Env.isNode=function(){return"node"===t},RemoteStorage.Env.goBackground=function(){r=!0,RemoteStorage.Env._emit("background")},RemoteStorage.Env.goForeground=function(){r=!1,RemoteStorage.Env._emit("foreground")},RemoteStorage.Env._rs_init=function(e){function r(){document[n.hiddenProperty]?RemoteStorage.Env.goBackground():RemoteStorage.Env.goForeground()}RemoteStorage.eventHandling(RemoteStorage.Env,"background","foreground"),"browser"===t&&("undefined"!=typeof document.hidden?(n.hiddenProperty="hidden",n.visibilityChangeEvent="visibilitychange"):"undefined"!=typeof document.mozHidden?(n.hiddenProperty="mozHidden",n.visibilityChangeEvent="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(n.hiddenProperty="msHidden",n.visibilityChangeEvent="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(n.hiddenProperty="webkitHidden",n.visibilityChangeEvent="webkitvisibilitychange"),document.addEventListener(n.visibilityChangeEvent,r,!1),r())},RemoteStorage.Env._rs_cleanup=function(e){}}("undefined"!=typeof window?"browser":"node"),function(){"use strict";var e={view_info:'This app allows you to use your own storage. <a href="http://remotestorage.io/" target="_blank">Learn more!</a>',view_connect:"<strong>Connect</strong> remote storage",view_connecting:"Connecting <strong>%s</strong>",view_offline:"Offline",view_error_occured:"Sorry! An error occured.",view_invalid_key:"Wrong key!",view_confirm_reset:"Are you sure you want to reset everything? This will clear your local data and reload the page.",view_get_me_out:"Get me out of here!",view_error_plz_report:'If this problem persists, please <a href="http://remotestorage.io/community/" target="_blank">let us know</a>!',view_unauthorized:"Unauthorized! Click here to reconnect."};RemoteStorage.I18n={translate:function(){var t=arguments[0],n=Array.prototype.splice.call(arguments,1);if("string"!=typeof e[t])throw"Unknown translation string: "+t;return t=e[t],t.replace(/%s/g,function(){return n.shift()})},getDictionary:function(){return e},setDictionary:function(t){e=t}}}(),RemoteStorage.Assets={cipherIcon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHdpZHRoPSIyNS4xNzciIHZlcnNpb249IjEuMSIgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KIDxwYXRoIGQ9Im0yNS4xNzcgNS41MzIzYy0wLjA1NjQtMC4xMTI5MS0wLjA1NjQtMC4yMjU4MS0wLjE2OTM2LTAuMzM4NzEtMC4xMTI5LTAuMTEyOS0wLjI4MjI1LTAuMTY5MzYtMC4zOTUxNi0wLjE2OTM2aC0xMS40MDNjLTAuNzMzLTIuODc5LTMuMzg2NC01LjAyNDItNi40OTEzLTUuMDI0Mi0zLjY2OTMgMC02LjcxNzcgMy4wNDg0LTYuNzE3NyA2LjcxNzcgMCAzLjcyNjMgMy4wNDg0IDYuNzE3MyA2LjcxNzcgNi43MTczIDMuMzMwNyAwIDYuMDQwMy0yLjQyNzQgNi42MDQ4LTUuNTg4N2gyLjU0MDN2My42Njk0YzAgMC4yODIyNiAwLjI4MjI2IDAuNTA4MDYgMC41NjQ1MiAwLjUwODA2aDEuNzVjMC4yODIyNiAwIDAuNTY0NTItMC4yMjU4IDAuNTY0NTItMC41MDgwNnYtMy42Njk0aDEuNDY3N3Y1LjY0NTJjMCAwLjI4MjI1IDAuMjI1OCAwLjUwODA2IDAuNTA4MDYgMC41MDgwNmgxLjgwNjRjMC4yODIyNiAwIDAuNTA4MDctMC4yMjU4MSAwLjU2NDUyLTAuNTA4MDZ2LTUuNjQ1MmgxLjUyNDJjMC4xMTI5MSAwIDAuMjgyMjYgMCAwLjM5NTE2LTAuMTEyOSAwLjExMjkxLTAuMTEyOSAwLjE2OTM2LTAuMjgyMjYgMC4xNjkzNi0wLjM5NTE2di0xLjgwNjR6bS0xOC40NTkgNS4wODA3Yy0yLjA4ODcgMC0zLjgzODctMS42OTM2LTMuODM4Ny0zLjgzODcgMC0yLjE0NTIgMS43NS0zLjgzODcgMy44Mzg3LTMuODM4NyAyLjE0NTIgMCAzLjgzODcgMS42OTM2IDMuODM4NyAzLjgzODcgMCAyLjE0NTItMS42OTM2IDMuODM4Ny0zLjgzODcgMy44Mzg3eiIgZmlsbD0iI2ZmZiIvPgo8L3N2Zz4K",
connectIcon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTYiIHdpZHRoPSIxNiIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPgogPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtMTAzNi40KSI+CiAgPHBhdGggZD0ibTEgMTA0Ny40di02aDd2LTRsNyA3LTcgN3YtNHoiIGZpbGw9IiNmZmYiLz4KIDwvZz4KPC9zdmc+Cg==",disconnectIcon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTYiIHdpZHRoPSIxNiIgdmVyc2lvbj0iMS4wIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KIDxwYXRoIHN0eWxlPSJibG9jay1wcm9ncmVzc2lvbjp0Yjt0ZXh0LWluZGVudDowO2NvbG9yOiMwMDAwMDA7dGV4dC10cmFuc2Zvcm06bm9uZSIgZD0ibTguMDAwMSAwYy0wLjQ3MTQgMC0wLjk2MTAzIDAuNTQxOS0wLjk1IDF2NmMtMC4wMDc0NyAwLjUyODMxIDAuNDIxNjMgMSAwLjk1IDFzMC45NTc0Ny0wLjQ3MTY5IDAuOTUtMXYtNmMwLjAxNDYyMi0wLjYwNTEtMC40Nzg2LTEtMC45NS0xem0tMy4zNDM4IDIuNWMtMC4wODcxODYgMC4wMTkyOTQtMC4xNzE2MyAwLjA1MDk1OS0wLjI1IDAuMDkzNzUtMi45OTk1IDEuNTcxNS0zLjkxODQgNC43OTc5LTMuMTI1IDcuNDY4OCAwLjc5MzQgMi42NyAzLjI3OTkgNC45MzcgNi42ODc1IDQuOTM3IDMuMzU5MiAwIDUuODc3Mi0yLjE0OSA2LjcxOTItNC43ODEgMC44NDEtMi42MzIxLTAuMDU4LTUuODIzNC0zLjEyNS03LjU5NC0wLjQzNC0wLjI1MzYtMS4wNTktMC4wODk5LTEuMzEzIDAuMzQzNy0wLjI1MzYgMC40MzM2LTAuMDkgMS4wNTg5IDAuMzQ0IDEuMzEyNSAyLjM5MDggMS4zNzk4IDIuODgyNSAzLjQ5NDQgMi4yODEyIDUuMzc1LTAuNjAxMiAxLjg4MDYtMi4zNDQgMy40Mzc1LTQuOTA2MiAzLjQzNzUtMi41NzU5IDAtNC4yOTc2LTEuNjUwMi00Ljg3NS0zLjU5MzgtMC41Nzc2LTEuOTQzNS0wLjA0Ny00LjA0OCAyLjE4NzMtNS4yMTg3IDAuMzc4Ny0wLjIwNjMgMC41NzkxLTAuNjkyNSAwLjQ1NTgtMS4xMDU3LTAuMTIzMi0wLjQxMzMtMC41NTcyLTAuNzEwMy0wLjk4Ny0wLjY3NTUtMC4wMzEzLTAuMDAxNS0wLjA2MjYtMC4wMDE1LTAuMDkzOCAweiIgZmlsbD0iI2ZmZiIvPgo8L3N2Zz4K",dropbox:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QgPEBAhEOpfuQAABhZJREFUWMPVl31snVUdxz+/5/2577e3b7QbHaOD0nXshW4ZZkpGQmJYZkJUDAaZzCBGAxGd+pdZQsJIjCaKgFu09GWybIggm8yhMCsY92rcOkPHunbdtKOUbX36svX23uc+xz+eDsrWlztiNJzk5D7JPS+fc8739/2dA5+EsqJtyK18ZlCKbX9Lk6fd1uo5xbTVZmtwa4v35Np5Mry4TLYXCzAnyhsry2SwrmnokdnaTruq6i3e0lXl0tqQlkURCxwdDp9Th5p3+p9iS8afqk/VZq9kaZoDN8apdU3B1KFnmLde7AkezH0n3V0UQOJpz2hIsqEhLU+WOeAagmtCxISYBe1nVf4vfWrByYdSpyf3W9ziLapy6JgbAduAiBn2S1rCQBYODAQP7H01/zxby4JpAW5s8mproxypiRKNGIJrQNT8EMA1wTGEU8MBP/q7umPw0dSbAA3N3n3zI2yLG2oScPgbNYWICY4Be86o/le6g0W576bPXQWwcqvXdJ2t1idMsA1hJoCoCRfGYdOhwsa4TUWFrr7pGmDrzAiQCHfD//Xxwk/33Z/6HoA0tnhLXZ3XMoYqsy4PYs4M4Ohg6pB2ddqO+vR6BWL27AARXbBNiBjwh9Oqs+O8ukcT4eaopjLqGsJSCdSX29SX23x/lctXlzgE1zBAANxWIQuGxlWNACxr8WozJp0lljKsGXbA0qGu1GRBxsTUQRAGLgboIuQVvHI8S+f7eeK2TLsDSQd296rhPaeDm09+PdX/gQYqN3uZ+jh7ro+oRusKDdgmVEY1GqstSiOhdegCmoQAIoImIWTPYIHdXVlyBYhaVwLA70+rPz7fllvLi2W5KcPw9q3eS/VJ7kmYgm1A3BIWV5osq7IIlMLUQJOrAXQBXQtr1BR2d2XpOu8TtULR+gq2nQh+vv8rqUdnNaKGZm/9qnJpmp/U+fxCB5lYsaGFdTYAY9L3jmNj9F9S7OgKVh9/KNVelBVf8untv8TYSS8gbsrHyh8C2LqQtGE0z9CJYfVuUblgRZv3WGOJvJG0cF8/lWPNdo+O93xsHYoVuqkL/xzIs/HPHt2DPg0Zko+v0I8vbfHun9aKE5sH9YaobJsf5V4mRLXv33kSlmAYwspqgw23R7A1EJlahKYOSsHTB0cZHQ9IOBA3NSrjGo4hWAY82xH8rH1b/jF2laoPAOb80jPqYtKTMdRcTQNd+xAgbgmuJbiGELfh3lsc7q41KQSTABBcC1qPjLH/XzniNqScsP1kgMsm9nJ34e2mNcmFAMby1qFPZyz1WlxXrprhuEUgUPDbd8Y59n6edbe61KZ1TF14vSfPLw5dYjhXIOMIM6lGAV+u0+tv+ttI/2+6/LsMQVXpUFCAqJkS9MT5anB2NGDjWxf5Yp3DvjN5th/LUhETolaRTqigxMGIWVKtHVyX2tGTJd2X5agUIfi8CmvUFOKGT++gT8wqLlKUgnwATxwq7P32m35Z+32pPQZA54MpH1iSb/XWZmx2VthTD1AATCBlCZ+dpwNg6EJjlUH3hQIKRaCujhZFaOPtfUH+8HvBnQceSP11yjA8vC616+A5FevL8jt/YiCR0HiQcAUVrnDHHO0jHTUNllXrpC0NRXiefjAxM4rhHLzQpZqf+eFFd/LkM17JGlu9p+xC8IgPhGlaqE1rNJZrxOzQok0dnjviY+nhbSntCH3DAWN+QMIWEhYsqTD4wYHChrPfSP9kqnmM6QAMkYtz4xqmDqeGA+rLNObGZVozkglx1ZfqZAvC2ZGAz9RYlEbAlsLoNd+Kx5RqO5/njKXDsnKdhCXFOaFAZUzjznlhyt5xIjiSLbBz2oVO98fRdalOoGZ5m/dUQ4pvJZ3Zr/CXlS5A74gabzlYePztr6U2faxr+eRy/RYvtjgjHauvkxvi9oTDXaGBuAUJWyh1hb3vqsOvfiG5/L/yMAE483BqdNeuXO3LvcGX3vEUhsZVsaYL9IzACz3BXcVOXvQOfKRsupBZv8R4bnW19rmqGPzqHz4BcMGn5U/Hgod5oiT3P3kvVj7rrfnx/pHBu7d7Azc1eY3/l0drzWbPXNjsGXySy38AbtMqneWU7BkAAAAASUVORK5CYII=",googledrive:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QgPEA85ztzJcQAABZVJREFUWMPtl1uoXVcVhr8x5tprn7M1NG1i0pQqSG2jLcXipYJXjPogqFgpaHMSFUkpIjU+leKbDxIQSiHgjZgmrfXgQ6SKj5Ji7YVS05aUUqKQlNLQeDnN5Zzk9Jy99xy/D3OttU/StDlV33TBZM3FXmuMf/5jjv+fG/7XL1vti9tnv3Dtnnf+87JY8YmZNxEMM1sZ7tWpjz764mriVqvKvmfb1ONLy3+dGyWu6EWbvQwoydv5BMSqFuereakmfnls1GP25IDaBGYYjplhljDz5tk7YMtPfurAf6UE9Z6tNwDPAPXwtcxL1x9n4zRgDjjm1gCyC6JpCLoW/OX65of1nzCwG6gNo3aYeXF981mTvK2/WWFiMmoj7X+z5JcE0N87c4e7b3EvyTwZT5/r8ezZHu6GuWGpSegJ8/ZeBu6fHv35s1/7t0rQv29mjWF/ATZ1L4bQwohrpkYc/sBpwhJYAVdKYECzYAESIk4Am3sf+sPCW2LAzb9jbpvMDXfD3fEqkRIcGdbsevlt9LylPYG1K6/K3QzK75uAr78lBgb3b7sc2cl2Uaa21sDiGMvB2iQeu/EMm6bKHjD3SUsCEChnpEAKiLisd/PB+UsyMPjZNwzzh1ixcnOfsFCX51NU/PTvA6pkTUdYw4R3zyu1ArMDqyvBQB82+FiJUQJ4C8YgVT1SSvSTs+vEmkcwe7qEsUnt233Aij0BW4ZPbfngKpRQs7hXpYQNvRiuEtATWOW4bLi+z04pJbCnBAkBJggBQlIBIZCUJM0Cm9+QgcED2+/G7BprdMZaAFZExm1FWcz+NLdj32G/6XfPCB5GoJKp7H5FARHRtgRI1y0/+cm7Lwpg+v7t64DvNd5S2mqirKXHy6RoArp1Ykrc2hKtKCtXlNEyoQ6Ydi498fF1F2FAdwEbV9UnZne+8q19Z7o63vTb+TPnRneeWxwxHGdyziii6wApQNEydKUUd5wHYGrftvci7tKKLSME5bvCaruynI9rNL7vdZgiHhiP898Wl8bMnxty+uyIhcURo1FgjSg1DCDph4uPfuR9AFbvvS25p2cxbiyKVuh2o1O44n2lLLacb5v75v5fX6yl5h753IwUD+YcRAQ5B6FMMhj0jboSRhnAE258wvp7Z7aYcbCYCeCGt97ubfICLDP/q4WZ32x7M20fPfb+hxbH9ZdjHOQIIoR74EDywA3coa6MqtJnrP+LmRmcB63ob8dA1wllRm95LVc//22S16TGeKqqpqoHk10ESGJj/zjjgIhAISKCyJmcY6Uu8Pbq7C0V6ABh35dzvYWQG0QAhmSYCaUlNhzdCrlX2jpE6tV4b9DYcGFKEgG8svQucoicC4CsII8zeTxutAEQzx1duPL3vrxjdlnou0SDLdTulxJQmalXNzN98jpEJiSo+qTeoEnsnWC5lVZNRhkOZiq0G8XCmz1gpp3j/ZYdYLhj9qCkn3fJQ4QKeh9OccWxz6O0hGKM9wakeoBEZ1BmqfOMyYFk4gXS+edG4J4ju6/644VK+AOJhSIYpVRBpn/qPVRL65A51dRavJoG2UQkOqf0hgVrGG7u6syoJDObB+55nRANb589Afy40W0UwkY91h39CiLweg1UU+W3ohLNvC2VurJ1htR6A3QaYPCjI7uvOvGGOlfv2XoSuBzEhmNfZXDqBrweUPVqUlWodneSG+6J1NTevThfDpEjmnsmzuuCPPfCvRvfcakT0S2Aeq9tYPr0ZryeBvOOlZBKUIEiCAVZwTgy41x6v6hm0LFZ4o7N7IuXPA+EDx+XjQ+tP/4lUrW2vCI1ydR0iYgmWdtu4yzG7bOiAdn8iYlA0iFJh1Z1JJv+ye2b3n1419XRH2riP0aqqlKClABIjUMW+rtSlw5qmCpgsynnl56/d+M/+P91wfUvQjDgTzx9h9AAAAAASUVORK5CYII=",nocipherIcon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTYiIHdpZHRoPSIxNiIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPgogPHBhdGggZD0ibSAxMy4yMDMxMjQsMTEuNzczNDM4IGMgMC4yODEyNSwwLjI4MTI1IDAuNDIxODc1LDAuNjA5Mzc1IDAuNDIxODc1LDEuMDMxMjUgMCwwLjM3NSAtMC4xNDA2MjUsMC43NSAtMC40MjE4NzUsMS4wMzEyNSAtMC4yODEyNSwwLjIzNDM3NSAtMC42MDkzNzUsMC4zNzUgLTEuMDMxMjUsMC4zNzUgLTAuMzc1LDAgLTAuNzUsLTAuMTQwNjI1IC0xLjAzMTI1LC0wLjM3NSAwLDAgLTMuMTg3NDk4MSwtMy42NTYyNSAtMy4xODc0OTgxLC0zLjY1NjI1IDAsMCAtMy4xNDA2MjUsMy42NTYyNSAtMy4xNDA2MjUsMy42NTYyNSAtMC4yODEyNSwwLjIzNDM3NSAtMC42NTYyNSwwLjM3NSAtMS4wMzEyNSwwLjM3NSAtMC40MjE4NzUsMCAtMC43NSwtMC4xNDA2MjUgLTEuMDMxMjUsLTAuMzc1IC0wLjI4MTI1LC0wLjI4MTI1IC0wLjM3NSwtMC42NTYyNSAtMC4zNzUsLTEuMDMxMjUgMCwtMC40MjE4NzUgMC4wOTM3NSwtMC43NSAwLjM3NSwtMS4wMzEyNSAwLDAgMy4zMjgxMjUsLTMuNzUwMDAwNSAzLjMyODEyNSwtMy43NTAwMDA1IDAsMCAtMy4zMjgxMjUsLTMuNzk2ODc1IC0zLjMyODEyNSwtMy43OTY4NzUgLTAuMjgxMjUsLTAuMjgxMjUgLTAuMzc1LC0wLjYwOTM3NSAtMC4zNzUsLTEuMDMxMjUgMCwtMC4zNzUgMC4wOTM3NSwtMC43NSAwLjM3NSwtMS4wMzEyNSAwLjI4MTI1LC0wLjIzNDM3NSAwLjYwOTM3NSwtMC4zNzUgMS4wMzEyNSwtMC4zNzUgMC4zNzUsMCAwLjc1LDAuMTQwNjI1IDEuMDMxMjUsMC4zNzUgMCwwIDMuMTQwNjI1LDMuNjU2MjUgMy4xNDA2MjUsMy42NTYyNSAwLDAgMy4xODc0OTgxLC0zLjY1NjI1IDMuMTg3NDk4MSwtMy42NTYyNSAwLjI4MTI1LC0wLjIzNDM3NSAwLjY1NjI1LC0wLjM3NSAxLjAzMTI1LC0wLjM3NSAwLjQyMTg3NSwwIDAuNzUsMC4xNDA2MjUgMS4wMzEyNSwwLjM3NSAwLjI4MTI1LDAuMjgxMjUgMC40MjE4NzUsMC42NTYyNSAwLjQyMTg3NSwxLjAzMTI1IDAsMC40MjE4NzUgLTAuMTQwNjI1LDAuNzUgLTAuNDIxODc1LDEuMDMxMjUgMCwwIC0zLjMyODEyMzEsMy43OTY4NzUgLTMuMzI4MTIzMSwzLjc5Njg3NSAwLDAgMy4zMjgxMjMxLDMuNzUwMDAwNSAzLjMyODEyMzEsMy43NTAwMDA1IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=",remoteStorageIcon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzIiIHdpZHRoPSIzMiIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KIDxkZWZzPgogIDxyYWRpYWxHcmFkaWVudCBpZD0iYSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGN5PSI1NzEuNDIiIGN4PSIxMDQ2LjUiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoLjE0NDMzIDAgMCAuMTY2NjcgMTIwMS41IDg3Ny4xMSkiIHI9Ijk2Ij4KICAgPHN0b3Agc3RvcC1jb2xvcj0iI2ZmNGEwNCIgc3RvcC1vcGFjaXR5PSIuNzYxNTQiIG9mZnNldD0iMCIvPgogICA8c3RvcCBzdG9wLWNvbG9yPSIjZmY0YTA0IiBvZmZzZXQ9IjEiLz4KICA8L3JhZGlhbEdyYWRpZW50PgogPC9kZWZzPgogPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEzMzYuNiAtOTU2LjM1KSI+CiAgPHBhdGggc3R5bGU9ImNvbG9yOiMwMDAwMDAiIGQ9Im0xMzUyLjYgOTU2LjM1IDAuMjg4NiAxNS4xMzYgMTMuNTY3LTcuMTM1Mi0xMy44NTUtOC4wMDExemwtMTMuODU1IDguMDAxMSAxMy41NjcgNy4xMzUyIDAuMjg4Ny0xNS4xMzZ6bS0xMy44NTUgOC4wMDExdjE1Ljk5OGwxMi45NTgtNy44MTYyLTEyLjk1OC04LjE4MTV6bTAgMTUuOTk4IDEzLjg1NSA4LjAwMTEtMC42MDg5LTE1LjMxNy0xMy4yNDYgNy4zMTU2em0xMy44NTUgOC4wMDExIDEzLjg1NS04LjAwMTEtMTMuMjUxLTcuMzE1Ni0wLjYwNDQgMTUuMzE3em0xMy44NTUtOC4wMDExdi0xNS45OThsLTEyLjk2MiA4LjE4MTUgMTIuOTYyIDcuODE2MnoiIGZpbGw9InVybCgjYSkiLz4KIDwvZz4KPC9zdmc+Cg==",remoteStorageIconCiphered:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzIiIHdpZHRoPSIzMiIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KIDxkZWZzPgogIDxyYWRpYWxHcmFkaWVudCBpZD0iYSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGN5PSI1NzEuNDIiIGN4PSIxMDQ2LjUiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoLjE0NDMzIDAgMCAuMTY2NjcgMTIwMS41IDg3Ny4xMSkiIHI9Ijk2Ij4KICAgPHN0b3Agc3RvcC1jb2xvcj0iI2ZmNGEwNCIgc3RvcC1vcGFjaXR5PSIuNzYxNTQiIG9mZnNldD0iMCIvPgogICA8c3RvcCBzdG9wLWNvbG9yPSIjZmY0YTA0IiBvZmZzZXQ9IjEiLz4KICA8L3JhZGlhbEdyYWRpZW50PgogPC9kZWZzPgogPHBhdGggc3R5bGU9ImNvbG9yOiMwMDAwMDAiIGQ9Im0xNiAwbDAuMTI1IDYuMzc1YzIuMDk4IDAuMDY3IDMuNzUgMS43NTk1IDMuNzUgMy44NzV2MS45NjloMS45MzcgMC4wMzJsOC00LjIxOS0xMy44NDQtOHpsLTEzLjg0NCA4IDggNC4yMTloMC4wMzIgMS45MDZ2LTEuOTY5YzAtMi4xMTU1IDEuNjgzLTMuODA4IDMuNzgxLTMuODc1bDAuMTI1LTYuMzc1em0tMTMuODQ0IDh2MTZsNy45OTk4LTQuODQ0di02LjA5NGwtNy45OTk4LTUuMDYyem0wIDE2bDEzLjg0NCA4LTAuMzc1LTEwLjA2MmgtNS40Njl2LTIuMzQ0bC03Ljk5OTggNC40MDZ6bTEzLjg0NCA4bDEzLjg0NC04LTgtNC40MDZ2Mi4zNDRoLTUuNDY5bC0wLjM3NSAxMC4wNjJ6bTEzLjg0NC04di0xNmwtOCA1LjA2MnY2LjA5NGw4IDQuODQ0em0tMTMuOTY5LTE3Yy0xLjczNSAwLjA2NjYtMy4xMjUgMS40OTg3LTMuMTI1IDMuMjV2MS45NjloMy4wMzFsMC4wOTQtNS4yMTl6bTAuMjUgMGwwLjA5NCA1LjIxOWgzLjAzMXYtMS45NjljMC0xLjc1MTMtMS4zOS0zLjE4MzQtMy4xMjUtMy4yNXptLTQuNzUgNS44NDRsNC4zNDQgMi4yODEgMC4wMzEtMi4yODFoLTQuMzc1em00Ljg3NSAwbDAuMDMxIDIuMjgxIDQuMzQ0LTIuMjgxaC00LjM3NXptLTUuNDM4IDAuNjI1djUuMzEybDQuMjgyLTIuNTkzLTQuMjgyLTIuNzE5em0xMC4zNzYgMGwtNC4yODIgMi43MTkgNC4yODIgMi41OTN2LTUuMzEyem0tNS43ODIgMy4yMTlsLTQuNTk0IDIuNTMxdjIuMDYyaDQuNzgybC0wLjE4OC00LjU5M3ptMS4xODggMGwtMC4xODggNC41OTNoNC43ODJ2LTIuMDYybC00LjU5NC0yLjUzMXoiIGZpbGw9InVybCgjYSkiLz4KPC9zdmc+Cg==",remoteStorageIconError:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzIiIHdpZHRoPSIzMiIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KIDxkZWZzPgogIDxyYWRpYWxHcmFkaWVudCBpZD0iYSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGN5PSI1NzEuNDIiIGN4PSIxMDQ2LjUiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoLjE0NDMzIDAgMCAuMTY2NjcgMTIwMS41IDg3Ny4xMSkiIHI9Ijk2Ij4KICAgPHN0b3Agc3RvcC1jb2xvcj0iI2U5MDAwMCIgc3RvcC1vcGFjaXR5PSIuNzYwNzgiIG9mZnNldD0iMCIvPgogICA8c3RvcCBzdG9wLWNvbG9yPSIjZTkwMDAwIiBvZmZzZXQ9IjEiLz4KICA8L3JhZGlhbEdyYWRpZW50PgogPC9kZWZzPgogPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEzMzYuNiAtOTU2LjM1KSI+CiAgPHBhdGggc3R5bGU9ImNvbG9yOiMwMDAwMDAiIGQ9Im0xMzUyLjYgOTU2LjM1IDAuMjg4NiAxNS4xMzYgMTMuNTY3LTcuMTM1Mi0xMy44NTUtOC4wMDExemwtMTMuODU1IDguMDAxMSAxMy41NjcgNy4xMzUyIDAuMjg4Ny0xNS4xMzZ6bS0xMy44NTUgOC4wMDExdjE1Ljk5OGwxMi45NTgtNy44MTYyLTEyLjk1OC04LjE4MTV6bTAgMTUuOTk4IDEzLjg1NSA4LjAwMTEtMC42MDg5LTE1LjMxNy0xMy4yNDYgNy4zMTU2em0xMy44NTUgOC4wMDExIDEzLjg1NS04LjAwMTEtMTMuMjUxLTcuMzE1Ni0wLjYwNDQgMTUuMzE3em0xMy44NTUtOC4wMDExdi0xNS45OThsLTEyLjk2MiA4LjE4MTUgMTIuOTYyIDcuODE2MnoiIGZpbGw9InVybCgjYSkiLz4KIDwvZz4KPC9zdmc+Cg==",remoteStorageIconOffline:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzIiIHdpZHRoPSIzMiIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KIDxkZWZzPgogIDxyYWRpYWxHcmFkaWVudCBpZD0iYSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGN5PSI1NzEuNDIiIGN4PSIxMDQ2LjUiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoLjE0NDMzIDAgMCAuMTY2NjcgMTIwMS41IDg3Ny4xMSkiIHI9Ijk2Ij4KICAgPHN0b3Agc3RvcC1jb2xvcj0iIzY5Njk2OSIgc3RvcC1vcGFjaXR5PSIuNzYxNTQiIG9mZnNldD0iMCIvPgogICA8c3RvcCBzdG9wLWNvbG9yPSIjNjc2NzY3IiBvZmZzZXQ9IjEiLz4KICA8L3JhZGlhbEdyYWRpZW50PgogPC9kZWZzPgogPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEzMzYuNiAtOTU2LjM1KSI+CiAgPHBhdGggc3R5bGU9ImNvbG9yOiMwMDAwMDAiIGQ9Im0xMzUyLjYgOTU2LjM1IDAuMjg4NiAxNS4xMzYgMTMuNTY3LTcuMTM1Mi0xMy44NTUtOC4wMDExemwtMTMuODU1IDguMDAxMSAxMy41NjcgNy4xMzUyIDAuMjg4Ny0xNS4xMzZ6bS0xMy44NTUgOC4wMDExdjE1Ljk5OGwxMi45NTgtNy44MTYyLTEyLjk1OC04LjE4MTV6bTAgMTUuOTk4IDEzLjg1NSA4LjAwMTEtMC42MDg5LTE1LjMxNy0xMy4yNDYgNy4zMTU2em0xMy44NTUgOC4wMDExIDEzLjg1NS04LjAwMTEtMTMuMjUxLTcuMzE1Ni0wLjYwNDQgMTUuMzE3em0xMy44NTUtOC4wMDExdi0xNS45OThsLTEyLjk2MiA4LjE4MTUgMTIuOTYyIDcuODE2MnoiIGZpbGw9InVybCgjYSkiLz4KIDwvZz4KPC9zdmc+Cg==",syncIcon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDg3LjUgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMTUuOTk5OTk5IDE2IiB3aWR0aD0iMTYiIHZlcnNpb249IjEuMSIgeT0iMHB4IiB4PSIwcHgiIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01LjUxMTIgLTc2LjUyNSkiIGRpc3BsYXk9Im5vbmUiPgoJPHBhdGggZGlzcGxheT0iaW5saW5lIiBkPSJtNTEuNDczIDQyLjI1NS0yLjIwNSAyLjIxMmMxLjQ3OCAxLjQ3NyAyLjI5NSAzLjQ0MiAyLjI5NSA1LjUzMyAwIDQuMzA5LTMuNTA0IDcuODEyLTcuODEyIDcuODEydi0xLjU2MmwtMy4xMjUgMy4xMjUgMy4xMjQgMy4xMjV2LTEuNTYyYzYuMDI5IDAgMTAuOTM4LTQuOTA2IDEwLjkzOC0xMC45MzggMC0yLjkyNy0xLjE0MS01LjY3Ni0zLjIxNS03Ljc0NXoiLz4KCTxwYXRoIGRpc3BsYXk9ImlubGluZSIgZD0ibTQ2Ljg3NSA0MC42MjUtMy4xMjUtMy4xMjV2MS41NjJjLTYuMDMgMC0xMC45MzggNC45MDctMTAuOTM4IDEwLjkzOCAwIDIuOTI3IDEuMTQxIDUuNjc2IDMuMjE3IDcuNzQ1bDIuMjAzLTIuMjEyYy0xLjQ3Ny0xLjQ3OS0yLjI5NC0zLjQ0Mi0yLjI5NC01LjUzMyAwLTQuMzA5IDMuNTA0LTcuODEyIDcuODEyLTcuODEydjEuNTYybDMuMTI1LTMuMTI1eiIvPgo8L2c+CjxwYXRoIGZpbGw9IiNmZmYiIGQ9Im0xMCAwbC0wLjc1IDEuOTA2MmMtMS4wMDc4LTAuMjk0Mi0zLjQ1ODYtMC43NzA4LTUuNjU2MiAwLjkzNzYgMC0wLjAwMDItMy45MzAyIDIuNTk0MS0yLjA5MzggNy41OTQybDEuNjU2Mi0wLjcxOTJzLTEuNTM5OS0zLjExMjIgMS42ODc2LTUuNTMxM2MwIDAgMS42OTU3LTEuMTMzOSAzLjY4NzQtMC41OTM3bC0wLjcxODcgMS44MTI0IDMuODEyNS0xLjYyNS0xLjYyNS0zLjc4MTJ6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTE0IDUuNTYyNWwtMS42NTYgMC43MTg3czEuNTQxIDMuMTEzNS0xLjY4OCA1LjUzMDhjMCAwLTEuNzI3MiAxLjEzNS0zLjcxODUgMC41OTRsMC43NS0xLjgxMi0zLjgxMjUgMS41OTQgMS41OTM4IDMuODEyIDAuNzgxMi0xLjkwNmMxLjAxMTMgMC4yOTUgMy40NjE1IDAuNzY2IDUuNjU2LTAuOTM4IDAgMCAzLjkyOC0yLjU5NCAyLjA5NC03LjU5MzV6Ii8+Cjwvc3ZnPgo=",widget:'<div class="rs-bubble rs-hidden">   <div class="rs-bubble-text remotestorage-initial remotestorage-error remotestorage-authing remotestorage-offline">     <span class="rs-status-text">{{view_connect}}</span>   </div>   <div class="rs-bubble-expandable">     <!-- error -->     <div class="remotestorage-error">       <pre class="rs-status-text rs-error-msg">{{ERROR_MSG}}</pre>       <button class="remotestorage-reset">{{view_get_me_out}}</button>       <p class="rs-centered-text rs-error-plz-report">{{view_error_plz_report}}</p>     </div>     <!-- connected -->     <div class="rs-bubble-text remotestorage-connected">       <strong class="userAddress">{{USER_ADDRESS}}</strong>       <p class="remotestorage-unauthorized">{{view_unauthorized}}</p>       <p class="remotestorage-invalid-key">{{view_invalid_key}}</p>       <form novalidate class="remotestorage-cipher-form">         <input placeholder="Secret key" name="userSecretKey" novalidate>         <button class="rs-cipher" name="rs-cipher" title="cipher" disabled="disabled">           <img>         </button>         <button class="rs-nocipher" name="rs-nocipher" title="no cipher">           <img>         </button>       </form>     </div>     <div class="rs-content remotestorage-connected">       <button class="rs-sync" title="sync"><img></button>       <button class="rs-disconnect" title="disconnect"><img></button>     </div>     <!-- initial -->     <form novalidate class="remotestorage-initial">       <input type="email" placeholder="user@provider.com" name="userAddress" novalidate>       <button class="connect" name="connect" title="connect" disabled="disabled">         <img>       </button>     </form>     <div class="rs-info-msg remotestorage-initial">{{view_info}}</div>   </div> </div> <img class="rs-dropbox rs-backends rs-action" alt="Connect to Dropbox"> <img class="rs-googledrive rs-backends rs-action" alt="Connect to Google Drive"> <img class="rs-cube rs-action"> ',widgetCss:'/** encoding:utf-8 **/ /* RESET */ #remotestorage-widget{text-align:left;}#remotestorage-widget input, #remotestorage-widget button{font-size:11px;}#remotestorage-widget form input[type=email]{margin-bottom:0;/* HTML5 Boilerplate */}#remotestorage-widget form input[type=submit]{margin-top:0;/* HTML5 Boilerplate */}/* /RESET */ #remotestorage-widget, #remotestorage-widget *{-moz-box-sizing:border-box;box-sizing:border-box;}#remotestorage-widget{position:absolute;right:10px;top:10px;font:normal 16px/100% sans-serif !important;user-select:none;-webkit-user-select:none;-moz-user-select:-moz-none;cursor:default;z-index:10000;}#remotestorage-widget .rs-bubble{background:rgba(80, 80, 80, .7);border-radius:5px 15px 5px 5px;color:white;font-size:0.8em;padding:5px;position:absolute;right:3px;top:9px;min-height:24px;white-space:nowrap;text-decoration:none;}.rs-bubble .rs-bubble-text{padding-right:32px;/* make sure the bubble doesn\'t "jump" when initially opening. */ min-width:182px;}#remotestorage-widget .rs-action{cursor:pointer;}/* less obtrusive cube when connected */ #remotestorage-widget.remotestorage-state-connected .rs-cube, #remotestorage-widget.remotestorage-state-busy .rs-cube{opacity:.3;-webkit-transition:opacity .3s ease;-moz-transition:opacity .3s ease;-ms-transition:opacity .3s ease;-o-transition:opacity .3s ease;transition:opacity .3s ease;}#remotestorage-widget.remotestorage-state-connected:hover .rs-cube, #remotestorage-widget.remotestorage-state-busy:hover .rs-cube, #remotestorage-widget.remotestorage-state-connected .rs-bubble:not(.rs-hidden) + .rs-cube{opacity:1 !important;}#remotestorage-widget .rs-backends{position:relative;top:5px;right:0;}#remotestorage-widget .rs-cube{position:relative;top:5px;right:0;}/* pulsing animation for cube when loading */ #remotestorage-widget .rs-cube.remotestorage-loading{-webkit-animation:remotestorage-loading .5s ease-in-out infinite alternate;-moz-animation:remotestorage-loading .5s ease-in-out infinite alternate;-o-animation:remotestorage-loading .5s ease-in-out infinite alternate;-ms-animation:remotestorage-loading .5s ease-in-out infinite alternate;animation:remotestorage-loading .5s ease-in-out infinite alternate;}@-webkit-keyframes remotestorage-loading{to{opacity:.7}}@-moz-keyframes remotestorage-loading{to{opacity:.7}}@-o-keyframes remotestorage-loading{to{opacity:.7}}@-ms-keyframes remotestorage-loading{to{opacity:.7}}@keyframes remotestorage-loading{to{opacity:.7}}#remotestorage-widget a{text-decoration:underline;color:inherit;}#remotestorage-widget form{margin-top:.7em;position:relative;}#remotestorage-widget form input{display:table-cell;vertical-align:top;border:none;border-radius:6px;font-weight:bold;color:white;outline:none;line-height:1.5em;height:2em;}#remotestorage-widget form input:disabled{color:#999;background:#444 !important;cursor:default !important;}#remotestorage-widget form input[type=email]:focus, #remotestorage-widget form input[type=password]:focus{background:#223;}#remotestorage-widget form input[type=email], #remotestorage-widget form input[type=password]{background:#000;width:100%;height:26px;padding:0 30px 0 5px;border-top:1px solid #111;border-bottom:1px solid #999;}#remotestorage-widget form input[type=email]:focus, #remotestorage-widget form input[type=password]:focus{background:#223;}#remotestorage-widget button:focus, #remotestorage-widget input:focus{box-shadow:0 0 4px #ccc;}#remotestorage-widget form input[type=email]::-webkit-input-placeholder, #remotestorage-widget form input[type=password]::-webkit-input-placeholder{color:#999;}#remotestorage-widget form input[type=email]:-moz-placeholder, #remotestorage-widget form input[type=password]:-moz-placeholder{color:#999;}#remotestorage-widget form input[type=email]::-moz-placeholder, #remotestorage-widget form input[type=password]::-moz-placeholder{color:#999;}#remotestorage-widget form input[type=email]:-ms-input-placeholder, #remotestorage-widget form input[type=password]:-ms-input-placeholder{color:#999;}#remotestorage-widget form input[type=submit]{background:#000;cursor:pointer;padding:0 5px;}#remotestorage-widget form input[type=submit]:hover{background:#333;}#remotestorage-widget .rs-info-msg{font-size:10px;color:#eee;margin-top:0.7em;white-space:normal;}#remotestorage-widget .rs-info-msg.last-synced-message{display:inline;white-space:nowrap;margin-bottom:.7em}#remotestorage-widget .rs-info-msg a:hover, #remotestorage-widget .rs-info-msg a:active{color:#fff;}#remotestorage-widget button img{vertical-align:baseline;}#remotestorage-widget button{border:none;border-radius:6px;font-weight:bold;color:white;outline:none;line-height:1.5em;height:26px;width:26px;background:#000;cursor:pointer;margin:0;padding:5px;}#remotestorage-widget button:hover{background:#333;}#remotestorage-widget .rs-bubble button.connect, #remotestorage-widget .rs-bubble button.rs-cipher, #remotestorage-widget .rs-bubble button.rs-nocipher{display:block;background:none;position:absolute;right:0;top:0;opacity:1;/* increase clickable area of connect, rs-cipher & rs-nocipher buttons */ margin:-5px;padding:10px;width:36px;height:36px;}#remotestorage-widget .rs-bubble button.rs-cipher{width:46px;}#remotestorage-widget .rs-bubble button.rs-nocipher{height:26px;margin:0;padding:4px 5px 5px;right:-32px;width:26px;}#remotestorage-widget .rs-bubble button.connect:not([disabled]):hover, #remotestorage-widget .rs-bubble button.rs-cipher:not([disabled]):hover, #remotestorage-widget .rs-bubble button.rs-nocipher:not([disabled]):hover{background:rgba(150,150,150,.5);}#remotestorage-widget .rs-bubble button.connect[disabled], #remotestorage-widget .rs-bubble button.rs-cipher[disabled]{opacity:.5;cursor:default !important;}#remotestorage-widget .rs-bubble button.rs-sync{position:relative;left:-5px;bottom:-5px;padding:4px 4px 0 4px;background:#555;}#remotestorage-widget .rs-bubble button.rs-sync:hover{background:#444;}#remotestorage-widget .rs-bubble button.rs-disconnect{background:#721;position:absolute;right:0;bottom:0;padding:4px 4px 0 4px;}#remotestorage-widget .rs-bubble button.rs-disconnect:hover{background:#921;}#remotestorage-widget .remotestorage-error-info{color:#f92;}#remotestorage-widget .remotestorage-reset{width:100%;background:#721;}#remotestorage-widget .remotestorage-reset:hover{background:#921;}#remotestorage-widget .rs-bubble .rs-content{margin-top:7px;}#remotestorage-widget pre{user-select:initial;-webkit-user-select:initial;-moz-user-select:text;max-width:27em;margin-top:1em;overflow:auto;}#remotestorage-widget .rs-centered-text{text-align:center;}#remotestorage-widget .rs-bubble.rs-hidden{padding-bottom:2px;border-radius:5px 15px 15px 5px;}#remotestorage-widget .rs-error-msg{min-height:5em;}.rs-bubble.rs-hidden .rs-bubble-expandable{display:none;}.remotestorage-state-connected .rs-bubble.rs-hidden{display:none;}.remotestorage-connected{display:none;}.remotestorage-state-connected .remotestorage-connected{display:block;}.remotestorage-cipher-form{display:none;}.remotestorage-cipher .remotestorage-cipher-form{display:block;}.remotestorage-invalid-key{display:none;}.remotestorage-invalid-key.remotestorage-cipher-error{display:block;}.remotestorage-initial{display:none;}.remotestorage-state-initial .remotestorage-initial{display:block;}.remotestorage-error{display:none;}.remotestorage-state-error .remotestorage-error{display:block;}.remotestorage-state-authing .remotestorage-authing{display:block;}.remotestorage-state-offline .remotestorage-connected, .remotestorage-state-offline .remotestorage-offline{display:block;}.remotestorage-unauthorized{display:none;}.remotestorage-state-unauthorized .rs-bubble.rs-hidden{display:none;}.remotestorage-state-unauthorized .remotestorage-connected, .remotestorage-state-unauthorized .remotestorage-unauthorized{display:block;}.remotestorage-state-unauthorized .rs-sync{display:none;}.remotestorage-state-busy .rs-bubble.rs-hidden{display:none;}.remotestorage-state-busy .rs-bubble{display:block;}.remotestorage-state-busy .remotestorage-connected{display:block;}.remotestorage-state-authing .rs-bubble-expandable{display:none;}'},function(e){function t(e,t){return RemoteStorage.log("[Widget] Producing stateSetter for",t),function(){RemoteStorage.log("[Widget] Setting state",t,arguments),i&&(localStorage[o]=t),e.view?(e.rs.remote&&e.view.setUserAddress(e.rs.remote.userAddress),e.view.setState(t,arguments)):e._rememberedState=t}}function n(e){return function(n){var r;n instanceof RemoteStorage.DiscoveryError?(console.error("Discovery failed",n,'"'+n.message+'"'),r=t(e,"initial",[n.message])):n instanceof RemoteStorage.SyncError?r=t(e,"offline",[]):n instanceof RemoteStorage.Unauthorized?r=t(e,"unauthorized"):(RemoteStorage.log("[Widget] Unknown error"),r=t(e,"error",[n])),r.apply()}}function r(e){return"GET"===e.method&&e.isFolder?!1:!0}var i,o="remotestorage:widget:state",a={initial:!0,connected:!0,offline:!0};RemoteStorage.Widget=function(e){var s=this,c=0;if(this.rs=e,this.rs.remote.on("connected",t(this,"connected")),this.rs.on("disconnected",t(this,"initial")),this.rs.on("connecting",t(this,"authing")),this.rs.on("authing",t(this,"authing")),this.rs.on("error",n(this)),this.rs.remote&&(this.rs.remote.on("wire-busy",function(e){r(e)&&(c++,t(s,"busy")())}),this.rs.remote.on("wire-done",function(e){r(e)&&c--,0>=c&&e.success&&t(s,"connected")()})),i){var u=localStorage[o];u&&a[u]&&(this._rememberedState=u)}},RemoteStorage.Widget.prototype={display:function(e){return"string"==typeof e?e={domID:e}:"undefined"==typeof e&&(e={}),this.view||this.setView(new RemoteStorage.Widget.View(this.rs)),this.view.display(e),this},linkWidgetToSync:function(){"object"==typeof this.rs.sync&&"function"==typeof this.rs.sync.sync?this.view.on("sync",this.rs.sync.sync.bind(this.rs.sync)):(RemoteStorage.log("[Widget] typeof this.rs.sync check fail",this.rs.sync),setTimeout(this.linkWidgetToSync.bind(this),1e3))},setView:function(e){this.view=e,this.view.on("connect",function(e){"string"==typeof e?this.rs.connect(e):e.special&&this.rs[e.special].connect(e)}.bind(this)),this.view.on("secret-entered",function(e){this.view.setUserSecretKey(e),t(this,"ciphered")()}.bind(this)),this.view.on("secret-cancelled",function(){t(this,"notciphered")()}.bind(this)),this.view.on("disconnect",this.rs.disconnect.bind(this.rs)),this.linkWidgetToSync();try{this.view.on("reset",function(){var e=RemoteStorage.Authorize.getLocation();this.rs.on("disconnected",e.reload.bind(e)),this.rs.disconnect()}.bind(this))}catch(n){if(!n.message||!n.message.match(/Unknown event/))throw n}this._rememberedState&&(setTimeout(t(this,this._rememberedState),0),delete this._rememberedState)}},RemoteStorage.prototype.displayWidget=function(e){return this.widget.display(e)},RemoteStorage.Widget._rs_init=function(e){i=e.localStorageAvailable(),e.widget||(e.widget=new RemoteStorage.Widget(e))},RemoteStorage.Widget._rs_supported=function(e){return"undefined"!=typeof document}}("undefined"!=typeof window?window:global),function(e){function t(e,t){return e.classList.remove(t)}function n(e,t){return e.classList.add(t)}function r(e){"function"==typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function i(e,t,n,r){var i=e.querySelector("."+t);if("undefined"!=typeof n){var o=i.querySelector("img");(o||i).src=RemoteStorage.Assets[n]}return i.addEventListener("click",r),i}function o(e){e.target.value?e.target.nextElementSibling.removeAttribute("disabled"):e.target.nextElementSibling.setAttribute("disabled","disabled")}var a=RemoteStorage.I18n.translate;RemoteStorage.Widget.View=function(e){if(this.rs=e,"undefined"==typeof document)throw"Widget not supported";RemoteStorage.eventHandling(this,"connect","secret-entered","secret-cancelled","disconnect","sync","display","reset");for(var t in this.events)this.events[t]=this.events[t].bind(this);this.hideBubbleOnBodyClick=function(e){for(var t=e.target;t!==document.body;t=t.parentElement)if("remotestorage-widget"===t.id)return;this.hideBubble()}.bind(this)},RemoteStorage.Widget.View.prototype={connectGdrive:function(){this._emit("connect",{special:"googledrive"})},connectDropbox:function(){this._emit("connect",{special:"dropbox"})},setState:function(e,t){RemoteStorage.log("[View] widget.view.setState(",e,",",t,");");var n=this.states[e];if("undefined"==typeof n)throw new Error("Bad State assigned to view: "+e);n.apply(this,t)},setUserAddress:function(e){this.userAddress=e||"";var t;this.div&&(t=this.div.querySelector("form.remotestorage-initial").userAddress)&&(t.value=this.userAddress)},setUserSecretKey:function(e){this.userSecretKey=e},toggleBubble:function(e){this.bubble.className.search("rs-hidden")<0?this.hideBubble(e):this.showBubble(e)},hideBubble:function(){n(this.bubble,"rs-hidden"),document.body.removeEventListener("click",this.hideBubbleOnBodyClick)},showBubble:function(e){t(this.bubble,"rs-hidden"),"undefined"!=typeof e&&r(e),document.body.addEventListener("click",this.hideBubbleOnBodyClick),this.div.querySelector(".remotestorage-connected").classList.contains("remotestorage-cipher")&&!this.userSecretKey?this.bubble.querySelector("form.remotestorage-cipher-form").userSecretKey.focus():this.bubble.querySelector("form.remotestorage-initial").userAddress.focus()},display:function(e){if("undefined"!=typeof this.div)return this.div;var t=document.createElement("div"),n=document.createElement("style");if(n.innerHTML=RemoteStorage.Assets.widgetCss,t.id="remotestorage-widget",t.innerHTML=RemoteStorage.Assets.widget,t.appendChild(n),e.domID){var r=document.getElementById(e.domID);if(!r)throw'Failed to find target DOM element with id="'+e.domID+'"';
r.appendChild(t)}else document.body.appendChild(t);i(t,"rs-sync","syncIcon",this.events.sync),i(t,"rs-disconnect","disconnectIcon",this.events.disconnect),i(t,"remotestorage-reset",void 0,this.events.reset);i(t,"connect","connectIcon",this.events.connect);this.form=t.querySelector("form.remotestorage-initial");var a=this.form.userAddress;if(a.addEventListener("load",o),a.addEventListener("keyup",o),this.userAddress&&(a.value=this.userAddress),e.encryption){this.cipher=!0;var s=t.querySelector("form.remotestorage-cipher-form").userSecretKey;s.type="password";i(t,"rs-cipher","cipherIcon",this.events["secret-entered"]);s.addEventListener("load",o),s.addEventListener("keyup",o),i(t,"rs-nocipher","nocipherIcon",this.events["secret-cancelled"])}this.cube=i(t,"rs-cube","remoteStorageIcon",this.toggleBubble.bind(this)),i(t,"rs-dropbox","dropbox",this.connectDropbox.bind(this)),i(t,"rs-googledrive","googledrive",this.connectGdrive.bind(this));var c={INPUT:!0,BUTTON:!0,IMG:!0},u=function(e){c[e.target.tagName]||this.div.classList.contains("remotestorage-state-unauthorized")||this.showBubble(e)}.bind(this);return this.bubble=i(t,"rs-bubble",void 0,u),this.hideBubble(),this.div=t,this.states.initial.call(this),this.events.display.call(this),this.div},states:{initial:function(e){var n=this.cube,r=e||a("view_info");n.src=RemoteStorage.Assets.remoteStorageIcon,this._renderTranslatedInitialContent(),e?(n.src=RemoteStorage.Assets.remoteStorageIconError,t(this.cube,"remotestorage-loading"),this.showBubble(),setTimeout(function(){n.src=RemoteStorage.Assets.remoteStorageIcon},2e3)):this.hideBubble(),this.div.className="remotestorage-state-initial",this.userSecretKey&&delete this.userSecretKey;var i=1;this._activateBackend("dropbox")&&(i+=1),this._activateBackend("googledrive")&&(i+=1),this.div.querySelector(".rs-bubble-text").style.paddingRight=32*i+8+"px";var o=this.div.querySelector(".connect");this.form.userAddress.value&&o.removeAttribute("disabled");var s=this.div.querySelector(".rs-info-msg");s.innerHTML=r,e?s.classList.add("remotestorage-error-info"):s.classList.remove("remotestorage-error-info")},authing:function(){this.div.removeEventListener("click",this.events.connect),this.div.className="remotestorage-state-authing",this.div.querySelector(".rs-status-text").innerHTML=a("view_connecting",this.userAddress),n(this.cube,"remotestorage-loading")},connected:function(){var e=this.cube;this.div.className="remotestorage-state-connected",this.div.querySelector(".userAddress").innerHTML=this.userAddress,e.src=RemoteStorage.Assets.remoteStorageIcon,t(e,"remotestorage-loading"),this.cipher&&(this.userSecretKey?this.userSecretKeyError?(e.src=RemoteStorage.Assets.remoteStorageIconError,n(this.div.querySelector(".remotestorage-connected"),"remotestorage-cipher"),n(this.div.querySelector(".remotestorage-invalid-key"),"remotestorage-cipher-error"),this.showBubble(),setTimeout(function(){e.src=RemoteStorage.Assets.remoteStorageIcon},5e3)):(t(this.div.querySelector(".remotestorage-invalid-key"),"remotestorage-cipher-error"),e.src=RemoteStorage.Assets.remoteStorageIconCiphered):(n(this.div.querySelector(".remotestorage-connected"),"remotestorage-cipher"),this.showBubble()));var r={googledrive:this.div.querySelector(".rs-googledrive"),dropbox:this.div.querySelector(".rs-dropbox")};r.googledrive.style.display=r.dropbox.style.display="none",r[this.rs.backend]?(r[this.rs.backend].style.display="inline-block",this.div.querySelector(".rs-bubble-text").style.paddingRight="72px"):this.div.querySelector(".rs-bubble-text").style.paddingRight="40px"},ciphered:function(){this.div.querySelector("form.remotestorage-cipher-form").userSecretKey.value="",t(this.div.querySelector(".remotestorage-invalid-key"),"remotestorage-cipher-error"),t(this.div.querySelector(".remotestorage-connected"),"remotestorage-cipher"),this.cube.src=RemoteStorage.Assets.remoteStorageIconCiphered,this.hideBubble()},notciphered:function(){this.cipher=!1,t(this.div.querySelector(".remotestorage-invalid-key"),"remotestorage-cipher-error"),t(this.div.querySelector(".remotestorage-connected"),"remotestorage-cipher"),this.hideBubble()},busy:function(){this.div.className="remotestorage-state-busy",n(this.cube,"remotestorage-loading")},offline:function(){this.div.className="remotestorage-state-offline",this.cube.src=RemoteStorage.Assets.remoteStorageIconOffline,this.div.querySelector(".rs-status-text").innerHTML=a("view_offline")},error:function(e){var t=e;this.div.className="remotestorage-state-error",this.div.querySelector(".rs-bubble-text").innerHTML="<strong>"+a("view_error_occured")+"</strong>",e instanceof Error&&(t=e.message+"\n\n"+e.stack),this.div.querySelector(".rs-error-msg").textContent=t,this.cube.src=RemoteStorage.Assets.remoteStorageIconError,this.showBubble()},unauthorized:function(){this.div.className="remotestorage-state-unauthorized",this.cube.src=RemoteStorage.Assets.remoteStorageIconError,this.showBubble(),this.div.addEventListener("click",this.events.connect)}},events:{connect:function(e){r(e),e.preventDefault(),this._emit("connect",this.div.querySelector("form.remotestorage-initial").userAddress.value)},"secret-entered":function(e){r(e),e.preventDefault(),this._emit("secret-entered",this.div.querySelector("form.remotestorage-cipher-form").userSecretKey.value)},"secret-cancelled":function(e){r(e),e.preventDefault(),this._emit("secret-cancelled")},sync:function(e){r(e),e.preventDefault(),this._emit("sync")},disconnect:function(e){r(e),e.preventDefault(),this._emit("disconnect")},reset:function(t){t.preventDefault();var n=e.confirm(a("view_confirm_reset"));n&&this._emit("reset")},display:function(e){e&&e.preventDefault(),this._emit("display")}},_renderTranslatedInitialContent:function(){this.div.querySelector(".rs-status-text").innerHTML=a("view_connect"),this.div.querySelector(".remotestorage-reset").innerHTML=a("view_get_me_out"),this.div.querySelector(".rs-error-plz-report").innerHTML=a("view_error_plz_report"),this.div.querySelector(".remotestorage-unauthorized").innerHTML=a("view_unauthorized"),this.div.querySelector(".remotestorage-invalid-key").innerHTML=a("view_invalid_key")},_activateBackend:function(e){var t="rs-"+e;return this.rs.apiKeys[e]?(this.div.querySelector("."+t).style.display="inline-block",!0):(this.div.querySelector("."+t).style.display="none",!1)}}}("undefined"!=typeof window?window:global),function(e,t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof module&&module.exports?module.exports=t():e.tv4=t()}(this,function(){function e(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function t(t){var n="";f[t.charAt(0)]&&(n=t.charAt(0),t=t.substring(1));var r="",i="",o=!0,a=!1,s=!1;"+"===n?o=!1:"."===n?(i=".",r="."):"/"===n?(i="/",r="/"):"#"===n?(i="#",o=!1):";"===n?(i=";",r=";",a=!0,s=!0):"?"===n?(i="?",r="&",a=!0):"&"===n&&(i="&",r="&",a=!0);for(var c=[],u=t.split(","),l=[],p={},h=0;h<u.length;h++){var g=u[h],m=null;if(-1!==g.indexOf(":")){var v=g.split(":");g=v[0],m=parseInt(v[1],10)}for(var y={};d[g.charAt(g.length-1)];)y[g.charAt(g.length-1)]=!0,g=g.substring(0,g.length-1);var b={truncate:m,name:g,suffices:y};l.push(b),p[g]=b,c.push(g)}var w=function(t){for(var n="",c=0,u=0;u<l.length;u++){var f=l[u],d=t(f.name);if(null===d||void 0===d||Array.isArray(d)&&0===d.length||"object"==typeof d&&0===Object.keys(d).length)c++;else if(n+=u===c?i:r||",",Array.isArray(d)){a&&(n+=f.name+"=");for(var p=0;p<d.length;p++)p>0&&(n+=f.suffices["*"]?r||",":",",f.suffices["*"]&&a&&(n+=f.name+"=")),n+=o?encodeURIComponent(d[p]).replace(/!/g,"%21"):e(d[p])}else if("object"==typeof d){a&&!f.suffices["*"]&&(n+=f.name+"=");var h=!0;for(var g in d)h||(n+=f.suffices["*"]?r||",":","),h=!1,n+=o?encodeURIComponent(g).replace(/!/g,"%21"):e(g),n+=f.suffices["*"]?"=":",",n+=o?encodeURIComponent(d[g]).replace(/!/g,"%21"):e(d[g])}else a&&(n+=f.name,s&&""===d||(n+="=")),null!=f.truncate&&(d=d.substring(0,f.truncate)),n+=o?encodeURIComponent(d).replace(/!/g,"%21"):e(d)}return n};return w.varNames=c,{prefix:i,substitution:w}}function n(e){if(!(this instanceof n))return new n(e);for(var r=e.split("{"),i=[r.shift()],o=[],a=[],s=[];r.length>0;){var c=r.shift(),u=c.split("}")[0],l=c.substring(u.length+1),f=t(u);a.push(f.substitution),o.push(f.prefix),i.push(l),s=s.concat(f.substitution.varNames)}this.fill=function(e){for(var t=i[0],n=0;n<a.length;n++){var r=a[n];t+=r(e),t+=i[n+1]}return t},this.varNames=s,this.template=e}function r(e,t){if(e===t)return!0;if("object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else{var i;for(i in e)if(void 0===t[i]&&void 0!==e[i])return!1;for(i in t)if(void 0===e[i]&&void 0!==t[i])return!1;for(i in e)if(!r(e[i],t[i]))return!1}return!0}return!1}function i(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function o(e,t){function n(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return t=i(t||""),e=i(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+n(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null}function a(e){return e.split("#")[0]}function s(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=o(t,e.id),e.id=t),Array.isArray(e))for(var n=0;n<e.length;n++)s(e[n],t);else{"string"==typeof e.$ref&&(e.$ref=o(t,e.$ref));for(var r in e)"enum"!==r&&s(e[r],t)}}function c(e,t,n,r,i,o){if(Error.call(this),void 0===e)throw new Error("No code supplied for error: "+t);this.message=t,this.params=n,this.code=e,this.dataPath=r||"",this.schemaPath=i||"",this.subErrors=o||null;var a=new Error(this.message);if(this.stack=a.stack||a.stacktrace,!this.stack)try{throw a}catch(a){this.stack=a.stack||a.stacktrace}}function u(e,t){if(t.substring(0,e.length)===e){var n=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===n.charAt(0)||"?"===n.charAt(0))return!0}return!1}function l(e){var t=new p,n=e||"en",r={addFormat:function(){t.addFormat.apply(t,arguments)},language:function(e){return e?(w[e]||(e=e.split("-")[0]),w[e]?(n=e,e):!1):n},addLanguage:function(e,t){var n;for(n in m)t[n]&&!t[m[n]]&&(t[m[n]]=t[n]);var r=e.split("-")[0];if(w[r]){w[e]=Object.create(w[r]);for(n in t)"undefined"==typeof w[r][n]&&(w[r][n]=t[n]),w[e][n]=t[n]}else w[e]=t,w[r]=t;return this},freshApi:function(e){var t=l();return e&&t.language(e),t},validate:function(e,r,i,o){var a=new p(t,!1,w[n],i,o);"string"==typeof r&&(r={$ref:r}),a.addSchema("",r);var s=a.validateAll(e,r,null,null,"");return!s&&o&&(s=a.banUnknownProperties()),this.error=s,this.missing=a.missing,this.valid=null===s,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,r,i,o){var a=new p(t,!0,w[n],i,o);"string"==typeof r&&(r={$ref:r}),a.addSchema("",r),a.validateAll(e,r,null,null,""),o&&a.banUnknownProperties();var s={};return s.errors=a.errors,s.missing=a.missing,s.valid=0===s.errors.length,s},addSchema:function(){return t.addSchema.apply(t,arguments)},getSchema:function(){return t.getSchema.apply(t,arguments)},getSchemaMap:function(){return t.getSchemaMap.apply(t,arguments)},getSchemaUris:function(){return t.getSchemaUris.apply(t,arguments)},getMissingUris:function(){return t.getMissingUris.apply(t,arguments)},dropSchemas:function(){t.dropSchemas.apply(t,arguments)},defineKeyword:function(){t.defineKeyword.apply(t,arguments)},defineError:function(e,t,n){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!==0||1e4>t)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof m[e])throw new Error("Error already defined: "+e+" as "+m[e]);if("undefined"!=typeof v[t])throw new Error("Error code already used: "+v[t]+" as "+t);m[e]=t,v[t]=e,b[e]=b[t]=n;for(var r in w){var i=w[r];i[e]&&(i[t]=i[t]||i[e])}},reset:function(){t.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:s,resolveUrl:o,getDocumentUri:a,errorCodes:m};return r}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var o=[];for(var a in i)e.call(i,a)&&o.push(a);if(t)for(var s=0;r>s;s++)e.call(i,n[s])&&o.push(n[s]);return o}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);n>i;i++)if(i in t&&t[i]===e)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(n){return!0}});var f={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},d={"*":!0};n.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(function(t){return e[t]})}};var p=function(e,t,n,r,i){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,r&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),i&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=n,this.definedKeywords={},e)for(var o in e.definedKeywords)this.definedKeywords[o]=e.definedKeywords[o].slice(0)};p.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},p.prototype.createError=function(e,t,n,r,i){var o=this.errorMessages[e]||b[e];if("string"!=typeof o)return new c(e,"Unknown error code "+e+": "+JSON.stringify(t),t,n,r,i);var a=o.replace(/\{([^{}]*)\}/g,function(e,n){var r=t[n];return"string"==typeof r||"number"==typeof r?r:e});return new c(e,a,t,n,r,i)},p.prototype.returnError=function(e){return e},p.prototype.collectError=function(e){return e&&this.errors.push(e),null},p.prototype.prefixErrors=function(e,t,n){for(var r=e;r<this.errors.length;r++)this.errors[r]=this.errors[r].prefixWith(t,n);return this},p.prototype.banUnknownProperties=function(){for(var e in this.unknownPropertyPaths){var t=this.createError(m.UNKNOWN_PROPERTY,{path:e},e,""),n=this.handleError(t);if(n)return n}return null},p.prototype.addFormat=function(e,t){if("object"==typeof e){for(var n in e)this.addFormat(n,e[n]);return this}this.formatValidators[e]=t},p.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(m.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","");t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},p.prototype.getSchema=function(e,t){var n;if(void 0!==this.schemas[e])return n=this.schemas[e],this.resolveRefs(n,t);var r=e,i="";if(-1!==e.indexOf("#")&&(i=e.substring(e.indexOf("#")+1),r=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[r]){n=this.schemas[r];var o=decodeURIComponent(i);if(""===o)return this.resolveRefs(n,t);if("/"!==o.charAt(0))return void 0;for(var a=o.split("/").slice(1),s=0;s<a.length;s++){var c=a[s].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===n[c]){n=void 0;break}n=n[c]}if(void 0!==n)return this.resolveRefs(n,t)}void 0===this.missing[r]&&(this.missing.push(r),this.missing[r]=r,this.missingMap[r]=r)},p.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.searchSchemas(e[n],t);else if(e&&"object"==typeof e){"string"==typeof e.id&&u(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var r in e)if("enum"!==r)if("object"==typeof e[r])this.searchSchemas(e[r],t);else if("$ref"===r){var i=a(e[r]);i&&void 0===this.schemas[i]&&void 0===this.missingMap[i]&&(this.missingMap[i]=i)}}},p.prototype.addSchema=function(e,t){if("string"!=typeof e||"undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}e===a(e)+"#"&&(e=a(e)),this.schemas[e]=t,delete this.missingMap[e],s(t,e),this.searchSchemas(t,e)},p.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},p.prototype.getSchemaUris=function(e){var t=[];for(var n in this.schemas)(!e||e.test(n))&&t.push(n);return t},p.prototype.getMissingUris=function(e){var t=[];for(var n in this.missingMap)(!e||e.test(n))&&t.push(n);return t},p.prototype.dropSchemas=function(){this.schemas={},this.reset()},p.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},p.prototype.validateAll=function(e,t,n,r,i){var o;if(t=this.resolveRefs(t),!t)return null;if(t instanceof c)return this.errors.push(t),t;var a,s=this.errors.length,u=null,l=null;if(this.checkRecursive&&e&&"object"==typeof e){if(o=!this.scanned.length,e[this.validatedSchemasKey]){var f=e[this.validatedSchemasKey].indexOf(t);if(-1!==f)return this.errors=this.errors.concat(e[this.validationErrorsKey][f]),null}if(Object.isFrozen(e)&&(a=this.scannedFrozen.indexOf(e),-1!==a)){var d=this.scannedFrozenSchemas[a].indexOf(t);if(-1!==d)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[a][d]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===a&&(a=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),u=this.scannedFrozenSchemas[a].length,this.scannedFrozenSchemas[a][u]=t,this.scannedFrozenValidationErrors[a][u]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(p){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}l=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][l]=t,e[this.validationErrorsKey][l]=[]}}var h=this.errors.length,g=this.validateBasic(e,t,i)||this.validateNumeric(e,t,i)||this.validateString(e,t,i)||this.validateArray(e,t,i)||this.validateObject(e,t,i)||this.validateCombinations(e,t,i)||this.validateHypermedia(e,t,i)||this.validateFormat(e,t,i)||this.validateDefinedKeywords(e,t,i)||null;if(o){for(;this.scanned.length;){var m=this.scanned.pop();delete m[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(g||h!==this.errors.length)for(;n&&n.length||r&&r.length;){var v=n&&n.length?""+n.pop():null,y=r&&r.length?""+r.pop():null;g&&(g=g.prefixWith(v,y)),this.prefixErrors(h,v,y)}return null!==u?this.scannedFrozenValidationErrors[a][u]=this.errors.slice(s):null!==l&&(e[this.validationErrorsKey][l]=this.errors.slice(s)),this.handleError(g)},p.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var n=this.formatValidators[t.format].call(null,e,t);return"string"==typeof n||"number"==typeof n?this.createError(m.FORMAT_CUSTOM,{message:n}).prefixWith(null,"format"):n&&"object"==typeof n?this.createError(m.FORMAT_CUSTOM,{message:n.message||"?"},n.dataPath||null,n.schemaPath||"/format"):null},p.prototype.validateDefinedKeywords=function(e,t){for(var n in this.definedKeywords)if("undefined"!=typeof t[n])for(var r=this.definedKeywords[n],i=0;i<r.length;i++){var o=r[i],a=o(e,t[n],t);if("string"==typeof a||"number"==typeof a)return this.createError(m.KEYWORD_CUSTOM,{key:n,message:a}).prefixWith(null,"format");if(a&&"object"==typeof a){var s=a.code||m.KEYWORD_CUSTOM;if("string"==typeof s){if(!m[s])throw new Error("Undefined error code (use defineError): "+s);s=m[s]}var c="object"==typeof a.message?a.message:{key:n,message:a.message||"?"},u=a.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(s,c,a.dataPath||null,u)}}return null},p.prototype.validateBasic=function(e,t,n){var r;return(r=this.validateType(e,t,n))?r.prefixWith(null,"type"):(r=this.validateEnum(e,t,n))?r.prefixWith(null,"type"):null},p.prototype.validateType=function(e,t){if(void 0===t.type)return null;var n=typeof e;null===e?n="null":Array.isArray(e)&&(n="array");var r=t.type;"object"!=typeof r&&(r=[r]);for(var i=0;i<r.length;i++){var o=r[i];if(o===n||"integer"===o&&"number"===n&&e%1===0)return null}return this.createError(m.INVALID_TYPE,{type:n,expected:r.join("/")})},p.prototype.validateEnum=function(e,t){if(void 0===t["enum"])return null;for(var n=0;n<t["enum"].length;n++){var i=t["enum"][n];if(r(e,i))return null}return this.createError(m.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e})},p.prototype.validateNumeric=function(e,t,n){return this.validateMultipleOf(e,t,n)||this.validateMinMax(e,t,n)||this.validateNaN(e,t,n)||null};var h=Math.pow(2,-51),g=1-h;p.prototype.validateMultipleOf=function(e,t){var n=t.multipleOf||t.divisibleBy;if(void 0===n)return null;if("number"==typeof e){var r=e/n%1;if(r>=h&&g>r)return this.createError(m.NUMBER_MULTIPLE_OF,{value:e,multipleOf:n})}return null},p.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(m.NUMBER_MINIMUM,{value:e,minimum:t.minimum}).prefixWith(null,"minimum");if(t.exclusiveMinimum&&e===t.minimum)return this.createError(m.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(m.NUMBER_MAXIMUM,{value:e,maximum:t.maximum}).prefixWith(null,"maximum");if(t.exclusiveMaximum&&e===t.maximum)return this.createError(m.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum}).prefixWith(null,"exclusiveMaximum")}return null},p.prototype.validateNaN=function(e){return"number"!=typeof e?null:isNaN(e)===!0||e===1/0||e===-(1/0)?this.createError(m.NUMBER_NOT_A_NUMBER,{value:e}).prefixWith(null,"type"):null},p.prototype.validateString=function(e,t,n){return this.validateStringLength(e,t,n)||this.validateStringPattern(e,t,n)||null},p.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(m.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength}).prefixWith(null,"minLength"):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(m.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength}).prefixWith(null,"maxLength"):null},p.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||void 0===t.pattern)return null;var n=new RegExp(t.pattern);return n.test(e)?null:this.createError(m.STRING_PATTERN,{pattern:t.pattern}).prefixWith(null,"pattern")},p.prototype.validateArray=function(e,t,n){return Array.isArray(e)?this.validateArrayLength(e,t,n)||this.validateArrayUniqueItems(e,t,n)||this.validateArrayItems(e,t,n)||null:null},p.prototype.validateArrayLength=function(e,t){var n;return void 0!==t.minItems&&e.length<t.minItems&&(n=this.createError(m.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems}).prefixWith(null,"minItems"),this.handleError(n))?n:void 0!==t.maxItems&&e.length>t.maxItems&&(n=this.createError(m.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems}).prefixWith(null,"maxItems"),this.handleError(n))?n:null},p.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var n=0;n<e.length;n++)for(var i=n+1;i<e.length;i++)if(r(e[n],e[i])){var o=this.createError(m.ARRAY_UNIQUE,{match1:n,match2:i}).prefixWith(null,"uniqueItems");if(this.handleError(o))return o}return null},p.prototype.validateArrayItems=function(e,t,n){if(void 0===t.items)return null;var r,i;if(Array.isArray(t.items)){for(i=0;i<e.length;i++)if(i<t.items.length){if(r=this.validateAll(e[i],t.items[i],[i],["items",i],n+"/"+i))return r}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(r=this.createError(m.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+i,"additionalItems"),this.handleError(r)))return r}else if(r=this.validateAll(e[i],t.additionalItems,[i],["additionalItems"],n+"/"+i))return r}else for(i=0;i<e.length;i++)if(r=this.validateAll(e[i],t.items,[i],["items"],n+"/"+i))return r;return null},p.prototype.validateObject=function(e,t,n){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,n)||this.validateObjectRequiredProperties(e,t,n)||this.validateObjectProperties(e,t,n)||this.validateObjectDependencies(e,t,n)||null},p.prototype.validateObjectMinMaxProperties=function(e,t){var n,r=Object.keys(e);return void 0!==t.minProperties&&r.length<t.minProperties&&(n=this.createError(m.OBJECT_PROPERTIES_MINIMUM,{propertyCount:r.length,minimum:t.minProperties}).prefixWith(null,"minProperties"),this.handleError(n))?n:void 0!==t.maxProperties&&r.length>t.maxProperties&&(n=this.createError(m.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:r.length,maximum:t.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(n))?n:null},p.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var n=0;n<t.required.length;n++){var r=t.required[n];if(void 0===e[r]){var i=this.createError(m.OBJECT_REQUIRED,{key:r}).prefixWith(null,""+n).prefixWith(null,"required");if(this.handleError(i))return i}}return null},p.prototype.validateObjectProperties=function(e,t,n){var r;for(var i in e){var o=n+"/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),a=!1;if(void 0!==t.properties&&void 0!==t.properties[i]&&(a=!0,r=this.validateAll(e[i],t.properties[i],[i],["properties",i],o)))return r;if(void 0!==t.patternProperties)for(var s in t.patternProperties){var c=new RegExp(s);if(c.test(i)&&(a=!0,r=this.validateAll(e[i],t.patternProperties[s],[i],["patternProperties",s],o)))return r}if(a)this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(r=this.createError(m.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(i,"additionalProperties"),this.handleError(r)))return r}else if(r=this.validateAll(e[i],t.additionalProperties,[i],["additionalProperties"],o))return r}else this.trackUnknownProperties&&!this.knownPropertyPaths[o]&&(this.unknownPropertyPaths[o]=!0)}return null},p.prototype.validateObjectDependencies=function(e,t,n){var r;if(void 0!==t.dependencies)for(var i in t.dependencies)if(void 0!==e[i]){var o=t.dependencies[i];if("string"==typeof o){if(void 0===e[o]&&(r=this.createError(m.OBJECT_DEPENDENCY_KEY,{key:i,missing:o}).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(Array.isArray(o))for(var a=0;a<o.length;a++){var s=o[a];if(void 0===e[s]&&(r=this.createError(m.OBJECT_DEPENDENCY_KEY,{key:i,missing:s}).prefixWith(null,""+a).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(r=this.validateAll(e,o,[],["dependencies",i],n))return r}return null},p.prototype.validateCombinations=function(e,t,n){return this.validateAllOf(e,t,n)||this.validateAnyOf(e,t,n)||this.validateOneOf(e,t,n)||this.validateNot(e,t,n)||null},p.prototype.validateAllOf=function(e,t,n){if(void 0===t.allOf)return null;for(var r,i=0;i<t.allOf.length;i++){var o=t.allOf[i];if(r=this.validateAll(e,o,[],["allOf",i],n))return r}return null},p.prototype.validateAnyOf=function(e,t,n){if(void 0===t.anyOf)return null;var r,i,o=[],a=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var s=!0,c=0;c<t.anyOf.length;c++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.anyOf[c],l=this.errors.length,f=this.validateAll(e,u,[],["anyOf",c],n);if(null===f&&l===this.errors.length){if(this.errors=this.errors.slice(0,a),this.trackUnknownProperties){for(var d in this.knownPropertyPaths)i[d]=!0,delete r[d];for(var p in this.unknownPropertyPaths)i[p]||(r[p]=!0);s=!1;continue}return null}f&&o.push(f.prefixWith(null,""+c).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),s?(o=o.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(m.ANY_OF_MISSING,{},"","/anyOf",o)):void 0},p.prototype.validateOneOf=function(e,t,n){if(void 0===t.oneOf)return null;var r,i,o=null,a=[],s=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var c=0;c<t.oneOf.length;c++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.oneOf[c],l=this.errors.length,f=this.validateAll(e,u,[],["oneOf",c],n);if(null===f&&l===this.errors.length){if(null!==o)return this.errors=this.errors.slice(0,s),this.createError(m.ONE_OF_MULTIPLE,{index1:o,index2:c},"","/oneOf");if(o=c,this.trackUnknownProperties){for(var d in this.knownPropertyPaths)i[d]=!0,delete r[d];for(var p in this.unknownPropertyPaths)i[p]||(r[p]=!0)}}else f&&a.push(f)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),null===o?(a=a.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(m.ONE_OF_MISSING,{},"","/oneOf",a)):(this.errors=this.errors.slice(0,s),null)},p.prototype.validateNot=function(e,t,n){if(void 0===t.not)return null;var r,i,o=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var a=this.validateAll(e,t.not,null,null,n),s=this.errors.slice(o);return this.errors=this.errors.slice(0,o),this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),null===a&&0===s.length?this.createError(m.NOT_PASSED,{},"","/not"):null},p.prototype.validateHypermedia=function(e,t,r){if(!t.links)return null;for(var i,o=0;o<t.links.length;o++){var a=t.links[o];if("describedby"===a.rel){for(var s=new n(a.href),c=!0,u=0;u<s.varNames.length;u++)if(!(s.varNames[u]in e)){c=!1;break}if(c){var l=s.fillFromObject(e),f={$ref:l};if(i=this.validateAll(e,f,[],["links",o],r))return i}}}};var m={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,
CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},v={};for(var y in m)v[m[y]]=y;var b={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="ValidationError",c.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var n=0;n<this.subErrors.length;n++)this.subErrors[n].prefixWith(e,t);return this};var w={},S=l();return S.addLanguage("en-gb",b),S.tv4=S,S});var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(t,n){var r,i=e,o=[];if(n=n||i.length,t)for(r=0;t>r;r++)o[r]=i[0|Math.random()*n];else{var a;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;36>r;r++)o[r]||(a=0|16*Math.random(),o[r]=i[19==r?3&a|8:a])}return o.join("")},function(e){function t(e,t){console.log("WARNING: "+e+" is deprecated. Use "+t+" instead.")}var n=RemoteStorage;n.BaseClient=function(e,t){if("/"!==t[t.length-1])throw"Not a folder: "+t;"/"===t&&(this.makePath=function(e){return("/"===e[0]?"":"/")+e}),this.storage=e,this.base=t;var r=this.base.split("/");r.length>2?this.moduleName=r[1]:this.moduleName="root",n.eventHandling(this,"change"),this.on=this.on.bind(this),e.onChange(this.base,this._fireChange.bind(this))},n.BaseClient.prototype={extend:function(e){for(var t in e)this[t]=e[t];return this},scope:function(e){return new n.BaseClient(this.storage,this.makePath(e))},getListing:function(e,t){return"string"!=typeof e?e="":e.length>0&&"/"!==e[e.length-1]&&Promise.reject("Not a folder: "+e),this.storage.get(this.makePath(e),t).then(function(e){return 404===e.statusCode?{}:e.body})},getAll:function(e,t){if("string"!=typeof e)e="";else if(e.length>0&&"/"!==e[e.length-1])return Promise.reject("Not a folder: "+e);return this.storage.get(this.makePath(e),t).then(function(n){if(404===n.statusCode)return{};if("object"==typeof n.body){var r=Object.keys(n.body);if(0===r.length)return{};var i=r.map(function(r){return this.storage.get(this.makePath(e+r),t).then(function(e){if("string"==typeof e.body)try{e.body=JSON.parse(e.body)}catch(t){}"object"==typeof e.body&&(n.body[r]=e.body)})}.bind(this));return Promise.all(i).then(function(){return n.body})}}.bind(this))},getFile:function(e,t){return"string"!=typeof e?Promise.reject("Argument 'path' of baseClient.getFile must be a string"):this.storage.get(this.makePath(e),t).then(function(e){return{data:e.body,contentType:e.contentType,revision:e.revision}})},storeFile:function(e,t,n){return"string"!=typeof e?Promise.reject("Argument 'mimeType' of baseClient.storeFile must be a string"):"string"!=typeof t?Promise.reject("Argument 'path' of baseClient.storeFile must be a string"):"string"!=typeof n&&"object"!=typeof n?Promise.reject("Argument 'body' of baseClient.storeFile must be a string, ArrayBuffer, or ArrayBufferView"):(this.storage.access.checkPathPermission(this.makePath(t),"rw")||console.warn("WARNING: Editing a document to which only read access ('r') was claimed"),this.storage.put(this.makePath(t),n,e).then(function(e){return 200===e.statusCode||201===e.statusCode?e.revision:Promise.reject("Request (PUT "+this.makePath(t)+") failed with status: "+e.statusCode)}.bind(this)))},getObject:function(e,t){return"string"!=typeof e?Promise.reject("Argument 'path' of baseClient.getObject must be a string"):this.storage.get(this.makePath(e),t).then(function(t){if("object"==typeof t.body)return t.body;if("string"==typeof t.body)try{return JSON.parse(t.body)}catch(n){throw"Not valid JSON: "+this.makePath(e)}else if("undefined"!=typeof t.body&&200===t.statusCode)return Promise.reject("Not an object: "+this.makePath(e))}.bind(this))},storeObject:function(e,t,n){if("string"!=typeof e)return Promise.reject("Argument 'typeAlias' of baseClient.storeObject must be a string");if("string"!=typeof t)return Promise.reject("Argument 'path' of baseClient.storeObject must be a string");if("object"!=typeof n)return Promise.reject("Argument 'object' of baseClient.storeObject must be an object");this._attachType(n,e);try{var r=this.validate(n);if(!r.valid)return Promise.reject(r)}catch(i){return Promise.reject(i)}return this.storage.put(this.makePath(t),JSON.stringify(n),"application/json; charset=UTF-8").then(function(e){return 200===e.statusCode||201===e.statusCode?e.revision:Promise.reject("Request (PUT "+this.makePath(t)+") failed with status: "+e.statusCode)}.bind(this))},remove:function(e){return"string"!=typeof e?Promise.reject("Argument 'path' of baseClient.remove must be a string"):(this.storage.access.checkPathPermission(this.makePath(e),"rw")||console.warn("WARNING: Removing a document to which only read access ('r') was claimed"),this.storage["delete"](this.makePath(e)))},cache:function(e,n){if("string"!=typeof e)throw"Argument 'path' of baseClient.cache must be a string";if(n===!1?(t("caching strategy <false>",'<"FLUSH">'),n="FLUSH"):void 0===n?n="ALL":"string"!=typeof n&&(t("that caching strategy",'<"ALL">'),n="ALL"),"FLUSH"!==n&&"SEEN"!==n&&"ALL"!==n)throw'Argument \'strategy\' of baseclient.cache must be one of ["FLUSH", "SEEN", "ALL"]';return this.storage.caching.set(this.makePath(e),n),this},flush:function(e){return this.storage.local.flush(e)},makePath:function(e){return this.base+(e||"")},_fireChange:function(e){RemoteStorage.config.changeEvents[e.origin]&&(["new","old","lastCommon"].forEach(function(t){if((!e[t+"ContentType"]||/^application\/(.*)json(.*)/.exec(e[t+"ContentType"]))&&"string"==typeof e[t+"Value"])try{e[t+"Value"]=JSON.parse(e[t+"Value"])}catch(n){}}),this._emit("change",e))},_cleanPath:RemoteStorage.util.cleanPath,getItemURL:function(e){if("string"!=typeof e)throw"Argument 'path' of baseClient.getItemURL must be a string";return this.storage.connected?(e=this._cleanPath(this.makePath(e)),this.storage.remote.href+e):void 0},uuid:function(){return Math.uuid()}},n.BaseClient._rs_init=function(){n.prototype.scope=function(e){if("string"!=typeof e)throw"Argument 'path' of baseClient.scope must be a string";if(!this.access.checkPathPermission(e,"r")){var t=e.replace(/(['\\])/g,"\\$1");console.warn("WARNING: please call remoteStorage.access.claim('"+t+"', 'r') (read only) or remoteStorage.access.claim('"+t+"', 'rw') (read/write) first")}return new n.BaseClient(this,e)}}}("undefined"!=typeof window?window:global),function(e){RemoteStorage.BaseClient.Types={uris:{},schemas:{},aliases:{},declare:function(e,t,n,r){var i=e+"/"+t;if(r["extends"]){var o,a=r["extends"].split("/");o=1===a.length?e+"/"+a.shift():a.join("/");var s=this.uris[o];if(!s)throw"Type '"+i+"' tries to extend unknown schema '"+o+"'";r["extends"]=this.schemas[s]}this.uris[i]=n,this.aliases[n]=i,this.schemas[n]=r},resolveAlias:function(e){return this.uris[e]},getSchema:function(e){return this.schemas[e]},inScope:function(e){var t=e.length,n={};for(var r in this.uris)if(r.substr(0,t+1)===e+"/"){var i=this.uris[r];n[i]=this.schemas[i]}return n}};var t=function(e){var t=new Error("Schema not found: "+e);return t.name="SchemaNotFound",t};t.prototype=Error.prototype,RemoteStorage.BaseClient.Types.SchemaNotFound=t,RemoteStorage.BaseClient.prototype.extend({declareType:function(e,t,n){n||(n=t,t=this._defaultTypeURI(e)),RemoteStorage.BaseClient.Types.declare(this.moduleName,e,t,n)},validate:function(e){var n=RemoteStorage.BaseClient.Types.getSchema(e["@context"]);if(n)return tv4.validateResult(e,n);throw new t(e["@context"])},_defaultTypeURI:function(e){return"http://remotestorage.io/spec/modules/"+encodeURIComponent(this.moduleName)+"/"+encodeURIComponent(e)},_attachType:function(e,t){e["@context"]=RemoteStorage.BaseClient.Types.resolveAlias(this.moduleName+"/"+t)||this._defaultTypeURI(t)}}),Object.defineProperty(RemoteStorage.BaseClient.prototype,"schemas",{configurable:!0,get:function(){return RemoteStorage.BaseClient.Types.inScope(this.moduleName)}})}("undefined"!=typeof window?window:global),function(e){var t=RemoteStorage.util.containingFolder;RemoteStorage.Caching=function(){this.reset()},RemoteStorage.Caching.prototype={pendingActivations:[],set:function(e,t){if("string"!=typeof e)throw new Error("path should be a string");if("undefined"==typeof t)throw new Error("value should be 'FLUSH', 'SEEN', or 'ALL'");this._rootPaths[e]=t,"ALL"===t&&(this.activateHandler?this.activateHandler(e):this.pendingActivations.push(e))},enable:function(e){this.set(e,"ALL")},disable:function(e){this.set(e,"FLUSH")},onActivate:function(e){var t;for(RemoteStorage.log("[Caching] Setting activate handler",e,this.pendingActivations),this.activateHandler=e,t=0;t<this.pendingActivations.length;t++)e(this.pendingActivations[t]);delete this.pendingActivations},checkPath:function(e){return void 0!==this._rootPaths[e]?this._rootPaths[e]:"/"===e?"SEEN":this.checkPath(t(e))},reset:function(){this._rootPaths={}}},Object.defineProperty(RemoteStorage.prototype,"caching",{configurable:!0,get:function(){var e=new RemoteStorage.Caching;return Object.defineProperty(this,"caching",{value:e}),e}}),RemoteStorage.Caching._rs_init=function(){}}("undefined"!=typeof window?window:global),function(e){function t(e,t,n){return{action:e,path:t,promise:n}}function n(e){return e.remote&&e.remote.revision&&!e.remote.itemsMap&&!e.remote.body}function r(e){return e.common&&e.common.revision}function o(){function e(e){var n,r;n=t.getCurrentSyncInterval(),u=!e,r=t.getCurrentSyncInterval(),t._emit("sync-interval-change",{oldValue:n,newValue:r})}var t=this;RemoteStorage.Env.on("background",function(){e(!1)}),RemoteStorage.Env.on("foreground",function(){e(!0)})}function a(e){return"number"==typeof e&&e>1e3&&36e5>e}var s=1e4,c=6e4,u=!1,l=RemoteStorage.util.isFolder,f=RemoteStorage.util.isDocument,d=RemoteStorage.util.equal,p=RemoteStorage.util.deepClone,h=RemoteStorage.util.pathsFromRoot;RemoteStorage.Sync=function(e,t,n,r){this.local=e,this.local.onDiff(function(e){this.addTask(e),this.doTasks()}.bind(this)),this.remote=t,this.access=n,this.caching=r,this._tasks={},this._running={},this._timeStarted={},RemoteStorage.eventHandling(this,"done","req-done"),this.caching.onActivate(function(e){this.addTask(e),this.doTasks()}.bind(this))},RemoteStorage.Sync.prototype={now:function(){return(new Date).getTime()},queueGetRequest:function(e){var t=Promise.defer();return this.remote.connected?this.remote.online?(this.addTask(e,function(){this.local.get(e).then(function(e){return t.resolve(e)})}.bind(this)),this.doTasks()):t.reject("cannot fulfill maxAge requirement - remote is not online"):t.reject("cannot fulfill maxAge requirement - remote is not connected"),t.promise},corruptServerItemsMap:function(e,t){if("object"!=typeof e||Array.isArray(e))return!0;for(var n in e){var r=e[n];if("object"!=typeof r)return!0;if("string"!=typeof r.ETag)return!0;if(l(n)){if(-1!==n.substring(0,n.length-1).indexOf("/"))return!0}else{if(-1!==n.indexOf("/"))return!0;if(t){if("string"!=typeof r["Content-Type"])return!0;if("number"!=typeof r["Content-Length"])return!0}}}return!1},corruptItemsMap:function(e){if("object"!=typeof e||Array.isArray(e))return!0;for(var t in e)if("boolean"!=typeof e[t])return!0;return!1},corruptRevision:function(e){return"object"!=typeof e||Array.isArray(e)||e.revision&&"string"!=typeof e.revision||e.body&&"string"!=typeof e.body&&"object"!=typeof e.body||e.contentType&&"string"!=typeof e.contentType||e.contentLength&&"number"!=typeof e.contentLength||e.timestamp&&"number"!=typeof e.timestamp||e.itemsMap&&this.corruptItemsMap(e.itemsMap)},isCorrupt:function(e){return"object"!=typeof e||Array.isArray(e)||"string"!=typeof e.path||this.corruptRevision(e.common)||e.local&&this.corruptRevision(e.local)||e.remote&&this.corruptRevision(e.remote)||e.push&&this.corruptRevision(e.push)},hasTasks:function(){return Object.getOwnPropertyNames(this._tasks).length>0},collectDiffTasks:function(){var e=0;return this.local.forAllNodes(function(t){e>100||(this.isCorrupt(t)?(RemoteStorage.log("[Sync] WARNING: corrupt node in local cache",t),"object"==typeof t&&t.path&&(this.addTask(t.path),e++)):this.needsFetch(t)&&this.access.checkPathPermission(t.path,"r")?(this.addTask(t.path),e++):f(t.path)&&this.needsPush(t)&&this.access.checkPathPermission(t.path,"rw")&&(this.addTask(t.path),e++))}.bind(this)).then(function(){return e},function(e){throw e})},inConflict:function(e){return e.local&&e.remote&&(void 0!==e.remote.body||e.remote.itemsMap)},needsRefresh:function(e){return e.common?e.common.timestamp?this.now()-e.common.timestamp>s:!0:!1},needsFetch:function(e){return this.inConflict(e)?!0:e.common&&void 0===e.common.itemsMap&&void 0===e.common.body?!0:e.remote&&void 0===e.remote.itemsMap&&void 0===e.remote.body?!0:!1},needsPush:function(e){return this.inConflict(e)?!1:e.local&&!e.push?!0:void 0},needsRemotePut:function(e){return e.local&&e.local.body},needsRemoteDelete:function(e){return e.local&&e.local.body===!1},getParentPath:function(e){var t=e.match(/^(.*\/)([^\/]+\/?)$/);if(t)return t[1];throw new Error('Not a valid path: "'+e+'"')},deleteChildPathsFromTasks:function(){for(var e in this._tasks){paths=h(e);for(var t=1;t<paths.length;t++)this._tasks[paths[t]]&&delete this._tasks[e]}},collectRefreshTasks:function(){return this.local.forAllNodes(function(e){var t;if(this.needsRefresh(e)){try{t=this.getParentPath(e.path)}catch(n){}t&&this.access.checkPathPermission(t,"r")?this.addTask(t):this.access.checkPathPermission(e.path,"r")&&this.addTask(e.path)}}.bind(this)).then(function(){this.deleteChildPathsFromTasks()}.bind(this),function(e){throw e})},flush:function(e){for(var t in e)"FLUSH"===this.caching.checkPath(t)&&e[t]&&!e[t].local&&(RemoteStorage.log("[Sync] Flushing",t),e[t]=void 0);return e},doTask:function(e){return this.local.getNodes([e]).then(function(i){var o=i[e];return"undefined"==typeof o?t("get",e,this.remote.get(e)):n(o)?t("get",e,this.remote.get(e)):this.needsRemotePut(o)?(o.push=p(o.local),o.push.timestamp=this.now(),this.local.setNodes(this.flush(i)).then(function(){var n;return n=r(o)?{ifMatch:o.common.revision}:{ifNoneMatch:"*"},t("put",e,this.remote.put(e,o.push.body,o.push.contentType,n))}.bind(this))):this.needsRemoteDelete(o)?(o.push={body:!1,timestamp:this.now()},this.local.setNodes(this.flush(i)).then(function(){return r(o)?t("delete",e,this.remote["delete"](e,{ifMatch:o.common.revision})):t("get",e,this.remote.get(e))}.bind(this))):r(o)?t("get",e,this.remote.get(e,{ifNoneMatch:o.common.revision})):t("get",e,this.remote.get(e))}.bind(this))},autoMergeFolder:function(e){if(e.remote.itemsMap&&(e.common=e.remote,delete e.remote,e.common.itemsMap)){for(var t in e.common.itemsMap)e.local.itemsMap[t]||(e.local.itemsMap[t]=!1);d(e.local.itemsMap,e.common.itemsMap)&&delete e.local}return e},autoMergeDocument:function(e){return hasNoRemoteChanges=function(e){return e.remote&&e.remote.revision&&e.remote.revision!==e.common.revision?!1:void 0===e.common.body&&e.remote.body===!1||e.remote.body===e.common.body&&e.remote.contentType===e.common.contentType},mergeMutualDeletion=function(e){return e.remote&&e.remote.body===!1&&e.local&&e.local.body===!1&&delete e.local,e},hasNoRemoteChanges(e)?(e=mergeMutualDeletion(e),delete e.remote):void 0!==e.remote.body&&(RemoteStorage.log("[Sync] Emitting keep/revert"),this.local._emitChange({origin:"conflict",path:e.path,oldValue:e.local.body,newValue:e.remote.body,lastCommonValue:e.common.body,oldContentType:e.local.contentType,newContentType:e.remote.contentType,lastCommonContentType:e.common.contentType}),e.remote.body?e.common=e.remote:e.common={},delete e.remote,delete e.local),e},autoMerge:function(e){if(!e.remote)return void(e.common.body&&this.local._emitChange({origin:"remote",path:e.path,oldValue:e.common.body,newValue:void 0,oldContentType:e.common.contentType,newContentType:void 0}));if(e.local)return l(e.path)?this.autoMergeFolder(e):this.autoMergeDocument(e);if(l(e.path))void 0!==e.remote.itemsMap&&(e.common=e.remote,delete e.remote);else if(void 0!==e.remote.body){var t={origin:"remote",path:e.path,oldValue:e.common.body===!1?void 0:e.common.body,newValue:e.remote.body===!1?void 0:e.remote.body,oldContentType:e.common.contentType,newContentType:e.remote.contentType};if((t.oldValue||t.newValue)&&this.local._emitChange(t),!e.remote.body)return;e.common=e.remote,delete e.remote}return e},updateCommonTimestamp:function(e,t){return this.local.getNodes([e]).then(function(n){return n[e]&&n[e].common&&n[e].common.revision===t&&(n[e].common.timestamp=this.now()),this.local.setNodes(this.flush(n))}.bind(this))},markChildren:function(e,t,n,r){var i=[],o={},a={};for(var s in t)i.push(e+s),o[e+s]=t[s];for(var c in r)i.push(e+c);return this.local.getNodes(i).then(function(t){var i,s;nodeChanged=function(e,t){return e.common.revision!==t&&(!e.remote||e.remote.revision!==t)};for(var c in t)if(s=t[c],o[c])s&&s.common?nodeChanged(s,o[c].ETag)&&(n[c]=p(s),n[c].remote={revision:o[c].ETag,timestamp:this.now()},n[c]=this.autoMerge(n[c])):(i=this.caching.checkPath(c),"ALL"===i&&(n[c]={path:c,common:{timestamp:this.now()},remote:{revision:o[c].ETag,timestamp:this.now()}})),n[c]&&o[c]["Content-Type"]&&(n[c].remote.contentType=o[c]["Content-Type"]),n[c]&&o[c]["Content-Length"]&&(n[c].remote.contentLength=o[c]["Content-Length"]);else if(r[c.substring(e.length)]&&s&&s.common){if(s.common.itemsMap)for(var u in s.common.itemsMap)a[c+u]=!0;if(s.local&&s.local.itemsMap)for(var f in s.local.itemsMap)a[c+f]=!0;if(s.remote||l(c))n[c]=void 0;else if(n[c]=this.autoMerge(s),"undefined"==typeof n[c]){var h=this.getParentPath(c),g=n[h],m=c.substring(e.length);g&&g.local&&(delete g.local.itemsMap[m],d(g.local.itemsMap,g.common.itemsMap)&&delete g.local)}}return this.deleteRemoteTrees(Object.keys(a),n).then(function(e){return this.local.setNodes(this.flush(e))}.bind(this))}.bind(this))},deleteRemoteTrees:function(e,t){return 0===e.length?Promise.resolve(t):this.local.getNodes(e).then(function(e){var n={};collectSubPaths=function(e,t){if(e&&e.itemsMap)for(var r in e.itemsMap)n[t+r]=!0};for(var r in e){var i=e[r];i&&(l(r)?(collectSubPaths(i.common,r),collectSubPaths(i.local,r)):i.common&&void 0!==typeof i.common.body&&(t[r]=p(i),t[r].remote={body:!1,timestamp:this.now()},t[r]=this.autoMerge(t[r])))}return this.deleteRemoteTrees(Object.keys(n),t).then(function(e){return this.local.setNodes(this.flush(e))}.bind(this))}.bind(this))},completeFetch:function(e,t,n,r){var i,o,a=h(e);return l(e)?i=[e]:(o=a[1],i=[e,o]),this.local.getNodes(i).then(function(i){var a,s,c={},u=i[e];if(collectMissingChildren=function(e){if(e&&e.itemsMap)for(var n in e.itemsMap)t[n]||(c[n]=!0)},("object"!=typeof u||u.path!==e||"object"!=typeof u.common)&&(u={path:e,common:{}},i[e]=u),u.remote={revision:r,timestamp:this.now()},l(e)){collectMissingChildren(u.common),collectMissingChildren(u.remote),u.remote.itemsMap={};for(a in t)u.remote.itemsMap[a]=!0}else u.remote.body=t,u.remote.contentType=n,s=i[o],s&&s.local&&s.local.itemsMap&&(a=e.substring(o.length),s.local.itemsMap[a]=!0,d(s.local.itemsMap,s.common.itemsMap)&&delete s.local);return i[e]=this.autoMerge(u),{toBeSaved:i,missingChildren:c}}.bind(this))},completePush:function(e,t,n,r){return this.local.getNodes([e]).then(function(i){var o=i[e];if(!o.push)throw this.stopped=!0,new Error("completePush called but no push version!");return n?(RemoteStorage.log("[Sync] We have a conflict"),o.remote&&o.remote.revision===r||(o.remote={revision:r||"conflict",timestamp:this.now()},delete o.push),i[e]=this.autoMerge(o)):(o.common={revision:r,timestamp:this.now()},"put"===t?(o.common.body=o.push.body,o.common.contentType=o.push.contentType,d(o.local.body,o.push.body)&&o.local.contentType===o.push.contentType&&delete o.local,delete o.push):"delete"===t&&(o.local.body===!1?i[e]=void 0:delete o.push)),this.local.setNodes(this.flush(i))}.bind(this))},dealWithFailure:function(e,t,n){return this.local.getNodes([e]).then(function(t){return t[e]?(delete t[e].push,this.local.setNodes(this.flush(t))):void 0}.bind(this))},interpretStatus:function(e){if("offline"===e||"timeout"===e)return{successful:!1,networkProblems:!0,statusCode:e};var t=Math.floor(e/100);return{successful:2===t||304===e||412===e||404===e,conflict:412===e,unAuth:401===e&&this.remote.token!==RemoteStorage.Authorize.IMPLIED_FAKE_TOKEN||402===e||403===e,notFound:404===e,changed:304!==e,statusCode:e}},handleGetResponse:function(e,t,n,r,i){return t.notFound&&(n=l(e)?{}:!1),t.changed?this.completeFetch(e,n,r,i).then(function(t){return l(e)?this.corruptServerItemsMap(n)?(RemoteStorage.log("[Sync] WARNING: Discarding corrupt folder description from server for "+e),!1):this.markChildren(e,n,t.toBeSaved,t.missingChildren).then(function(){return!0}):this.local.setNodes(this.flush(t.toBeSaved)).then(function(){return!0})}.bind(this)):this.updateCommonTimestamp(e,i).then(function(){return!0})},handleResponse:function(e,t,n){var r=this.interpretStatus(n.statusCode);if(r.successful){if("get"===t)return this.handleGetResponse(e,r,n.body,n.contentType,n.revision);if("put"===t||"delete"===t)return this.completePush(e,t,r.conflict,n.revision).then(function(){return!0});throw new Error("cannot handle response for unknown action",t)}var i;return r.unAuth?i=new RemoteStorage.Unauthorized:r.networkProblems?(i=new RemoteStorage.SyncError("Network request failed."),this.remote.online=!1):i=new Error("HTTP response code "+r.statusCode+" received."),this.dealWithFailure(e,t,r).then(function(){throw remoteStorage._emit("error",i),i})},numThreads:10,finishTask:function(e){if(void 0===e.action)return void delete this._running[e.path];var t=this;return e.promise.then(function(n){return t.handleResponse(e.path,e.action,n)},function(n){return RemoteStorage.log("[Sync] wireclient rejects its promise!",e.path,e.action,n),t.handleResponse(e.path,e.action,{statusCode:"offline"})}).then(function(n){if(delete t._timeStarted[e.path],delete t._running[e.path],t.remote.online=!0,n&&t._tasks[e.path]){for(i=0;i<t._tasks[e.path].length;i++)t._tasks[e.path][i]();delete t._tasks[e.path]}t._emit("req-done"),t.collectTasks(!1).then(function(){!t.hasTasks()||t.stopped?(RemoteStorage.log("[Sync] Sync is done! Reschedule?",Object.getOwnPropertyNames(t._tasks).length,t.stopped),t.done||(t.done=!0,t._emit("done"))):setTimeout(function(){t.doTasks()},10)})},function(n){console.error("[Sync] Error",n),delete t._timeStarted[e.path],delete t._running[e.path],t._emit("req-done"),t.done||(t.done=!0,t._emit("done"))})},doTasks:function(){var e,t,n,r=0;if(e=this.remote.connected?this.remote.online?this.numThreads:1:0,t=e-Object.getOwnPropertyNames(this._running).length,0>=t)return!0;for(n in this._tasks)if(!this._running[n]&&(this._timeStarted=this.now(),this._running[n]=this.doTask(n),this._running[n].then(this.finishTask.bind(this)),r++,r>=t))return!0;return r>=t},collectTasks:function(e){return this.hasTasks()||this.stopped?Promise.resolve():this.collectDiffTasks().then(function(t){return t||e===!1?Promise.resolve():this.collectRefreshTasks()}.bind(this),function(e){throw e})},addTask:function(e,t){this._tasks[e]||(this._tasks[e]=[]),"function"==typeof t&&this._tasks[e].push(t)},sync:function(){return this.done=!1,this.doTasks()?Promise.resolve():this.collectTasks().then(function(){try{this.doTasks()}catch(e){console.error("[Sync] doTasks error",e)}}.bind(this),function(e){throw console.error("[Sync] Sync error",e),new Error("Local cache unavailable")})}},RemoteStorage.prototype.getSyncInterval=function(){return s},RemoteStorage.prototype.setSyncInterval=function(e){if(!a(e))throw e+" is not a valid sync interval";var t=s;s=parseInt(e,10),this._emit("sync-interval-change",{oldValue:t,newValue:e})},RemoteStorage.prototype.getBackgroundSyncInterval=function(){return c},RemoteStorage.prototype.setBackgroundSyncInterval=function(e){if(!a(e))throw e+" is not a valid sync interval";var t=c;c=parseInt(e,10),this._emit("sync-interval-change",{oldValue:t,newValue:e})},RemoteStorage.prototype.getCurrentSyncInterval=function(){return u?c:s};var g=function(e){var t="Sync failed: ";t+="object"==typeof e&&"message"in e?e.message:e,this.originalError=e,this.message=t};g.prototype=new Error,g.prototype.constructor=g,RemoteStorage.SyncError=g,RemoteStorage.prototype.syncCycle=function(){this.sync.stopped||(this.sync.on("done",function(){RemoteStorage.log("[Sync] Sync done. Setting timer to",this.getCurrentSyncInterval()),this.sync.stopped||(this._syncTimer&&clearTimeout(this._syncTimer),this._syncTimer=setTimeout(this.sync.sync.bind(this.sync),this.getCurrentSyncInterval()))}.bind(this)),this.sync.sync())},RemoteStorage.prototype.stopSync=function(){this.sync?(RemoteStorage.log("[Sync] Stopping sync"),this.sync.stopped=!0):(RemoteStorage.log("[Sync] Will instantiate sync stopped"),this.syncStopped=!0)},RemoteStorage.prototype.startSync=function(){this.sync.stopped=!1,this.syncStopped=!1,this.sync.sync()};var m;RemoteStorage.Sync._rs_init=function(e){m=function(){RemoteStorage.log("[Sync] syncCycleCb calling syncCycle"),RemoteStorage.Env.isBrowser()&&o.bind(e)(),e.sync||(e.sync=new RemoteStorage.Sync(e.local,e.remote,e.access,e.caching),e.syncStopped&&(RemoteStorage.log("[Sync] Instantiating sync stopped"),e.sync.stopped=!0,delete e.syncStopped)),RemoteStorage.log("[Sync] syncCycleCb calling syncCycle"),e.syncCycle()},e.on("ready",m)},RemoteStorage.Sync._rs_cleanup=function(e){e.stopSync(),e.removeEventListener("ready",m)}}("undefined"!=typeof window?window:global),function(){function e(e){if("object"==typeof e&&"string"==typeof e.path)if(i(e.path)){if(e.local&&e.local.itemsMap)return e.local;if(e.common&&e.common.itemsMap)return e.common}else{if(e.local&&e.local.body&&e.local.contentType)return e.local;if(e.common&&e.common.body&&e.common.contentType)return e.common;if(e.body&&e.contentType)return{body:e.body,contentType:e.contentType}}}function t(t,n){var r;for(r in t){if(t[r]&&t[r].remote)return!0;if(nodeVersion=e(t[r]),nodeVersion&&nodeVersion.timestamp&&(new Date).getTime()-nodeVersion.timestamp<=n)return!1;if(!nodeVersion)return!0}return!0}function n(e){var t={path:e,common:{}};return i(e)&&(t.common.itemsMap={}),t}function r(e,t){return e.common||(e.common={itemsMap:{}}),e.common.itemsMap||(e.common.itemsMap={}),e.local||(e.local=a(e.common)),e.local.itemsMap||(e.local.itemsMap=e.common.itemsMap),e.local.itemsMap[t]=!0,e}var i=RemoteStorage.util.isFolder,o=RemoteStorage.util.isDocument,a=RemoteStorage.util.deepClone,s=RemoteStorage.util.equal,c=RemoteStorage.util.pathsFromRoot,u={get:function(n,r,o){var a=this;return"number"==typeof r?a.getNodes(c(n)).then(function(i){var a=e(i[n]);return t(i,r)?o(n):a?{statusCode:200,body:a.body||a.itemsMap,contentType:a.contentType}:{statusCode:404}}):a.getNodes([n]).then(function(t){var r=e(t[n]);if(r){if(i(n))for(var o in r.itemsMap)r.itemsMap.hasOwnProperty(o)&&r.itemsMap[o]===!1&&delete r.itemsMap[o];return{statusCode:200,body:r.body||r.itemsMap,contentType:r.contentType}}return{statusCode:404}})},put:function(t,i,o){function a(t,a){try{for(var s=0,c=t.length;c>s;s++){var u,l=t[s],f=a[l];if(f||(a[l]=f=n(l)),0===s)u=e(f),f.local={body:i,contentType:o,previousBody:u?u.body:void 0,previousContentType:u?u.contentType:void 0};else{var d=t[s-1].substring(l.length);f=r(f,d)}}return a}catch(p){throw RemoteStorage.log("[Cachinglayer] Error during PUT",a,s,p),p}}var s=c(t);return this._updateNodes(s,a)},"delete":function(t){var n=c(t);return this._updateNodes(n,function(t,n){for(var r=0,i=t.length;i>r;r++){var o=t[r],s=n[o];if(!s)throw new Error("Cannot delete non-existing node "+o);if(0===r)previous=e(s),s.local={body:!1,previousBody:previous?previous.body:void 0,previousContentType:previous?previous.contentType:void 0};else{s.local||(s.local=a(s.common));var c=t[r-1].substring(o.length);if(delete s.local.itemsMap[c],Object.getOwnPropertyNames(s.local.itemsMap).length>0)break}}return n})},flush:function(e){var t=this;return t._getAllDescendentPaths(e).then(function(e){return t.getNodes(e)}).then(function(e){for(var n in e){var r=e[n];r&&r.common&&r.local&&t._emitChange({path:r.path,origin:"local",oldValue:r.local.body===!1?void 0:r.local.body,newValue:r.common.body===!1?void 0:r.common.body}),e[n]=void 0}return t.setNodes(e)})},_emitChange:function(e){RemoteStorage.config.changeEvents[e.origin]&&this._emit("change",e)},fireInitial:function(){if(RemoteStorage.config.changeEvents.local){var t=this;t.forAllNodes(function(n){var r;o(n.path)&&(r=e(n),r&&t._emitChange({path:n.path,origin:"local",oldValue:void 0,oldContentType:void 0,newValue:r.body,newContentType:r.contentType}))}).then(function(){t._emit("local-events-done")})}},onDiff:function(e){this.diffHandler=e},migrate:function(e){return"object"!=typeof e||e.common||(e.common={},"string"==typeof e.path?"/"===e.path.substr(-1)&&"object"==typeof e.body&&(e.common.itemsMap=e.body):(e.local||(e.local={}),e.local.body=e.body,e.local.contentType=e.contentType)),e},_updateNodesRunning:!1,_updateNodesQueued:[],_updateNodes:function(e,t){var n=Promise.defer();return this._doUpdateNodes(e,t,n),n.promise},_doUpdateNodes:function(e,t,n){var r=this;return r._updateNodesRunning?void r._updateNodesQueued.push({paths:e,cb:t,promise:n}):(r._updateNodesRunning=!0,void r.getNodes(e).then(function(i){var c,u=a(i),l=[];i=t(e,i);for(var f in i)c=i[f],s(c,u[f])?delete i[f]:o(f)&&(l.push({path:f,origin:"window",oldValue:c.local.previousBody,newValue:c.local.body===!1?void 0:c.local.body,oldContentType:c.local.previousContentType,newContentType:c.local.contentType}),delete c.local.previousBody,delete c.local.previousContentType);r.setNodes(i).then(function(){r._emitChangeEvents(l),n.resolve({statusCode:200})})}).then(function(){return Promise.resolve()},function(e){n.reject(e)}).then(function(){r._updateNodesRunning=!1;var e=r._updateNodesQueued.shift();e&&r._doUpdateNodes(e.paths,e.cb,e.promise)}))},_emitChangeEvents:function(e){for(var t=0,n=e.length;n>t;t++)this._emitChange(e[t]),this.diffHandler&&this.diffHandler(e[t].path)},_getAllDescendentPaths:function(t){var n=this;return i(t)?n.getNodes([t]).then(function(r){var i=[t],o=e(r[t]),a=Object.keys(o.itemsMap),s=a.map(function(e){return n._getAllDescendentPaths(t+e).then(function(e){for(var t=0,n=e.length;n>t;t++)i.push(e[t]);
})});return Promise.all(s).then(function(){return i})}):Promise.resolve([t])},_getInternals:function(){return{getLatest:e,makeNode:n,isOutdated:t}}};RemoteStorage.cachingLayer=function(e){for(var t in u)e[t]=u[t]}}(),function(e){var t,n=RemoteStorage,r=2,i="remotestorage";n.IndexedDB=function(e){return this.db=e||t,this.db?(n.cachingLayer(this),n.eventHandling(this,"change","local-events-done"),this.getsRunning=0,this.putsRunning=0,this.changesQueued={},void(this.changesRunning={})):void RemoteStorage.log("[IndexedDB] Failed to open DB")},n.IndexedDB.prototype={getNodes:function(e){for(var t=[],n={},r=0,i=e.length;i>r;r++)void 0!==this.changesQueued[e[r]]?n[e[r]]=RemoteStorage.util.deepClone(this.changesQueued[e[r]]||void 0):void 0!==this.changesRunning[e[r]]?n[e[r]]=RemoteStorage.util.deepClone(this.changesRunning[e[r]]||void 0):t.push(e[r]);return t.length>0?this.getNodesFromDb(t).then(function(e){for(var t in n)e[t]=n[t];return e}):Promise.resolve(n)},setNodes:function(e){for(var t in e)this.changesQueued[t]=e[t]||!1;return this.maybeFlush(),Promise.resolve()},maybeFlush:function(){0===this.putsRunning?this.flushChangesQueued():this.commitSlownessWarning||(this.commitSlownessWarning=setInterval(function(){console.log("WARNING: waited more than 10 seconds for previous commit to finish")},1e4))},flushChangesQueued:function(){this.commitSlownessWarning&&(clearInterval(this.commitSlownessWarning),this.commitSlownessWarning=null),Object.keys(this.changesQueued).length>0&&(this.changesRunning=this.changesQueued,this.changesQueued={},this.setNodesInDb(this.changesRunning).then(this.flushChangesQueued.bind(this)))},getNodesFromDb:function(e){var t=Promise.defer(),n=this.db.transaction(["nodes"],"readonly"),r=n.objectStore("nodes"),i={};(new Date).getTime();return this.getsRunning++,e.map(function(e,t){r.get(e).onsuccess=function(t){i[e]=t.target.result}}),n.oncomplete=function(){t.resolve(i),this.getsRunning--}.bind(this),n.onerror=n.onabort=function(){t.reject("get transaction error/abort"),this.getsRunning--}.bind(this),t.promise},setNodesInDb:function(e){var t=Promise.defer(),n=this.db.transaction(["nodes"],"readwrite"),r=n.objectStore("nodes"),i=(new Date).getTime();this.putsRunning++,RemoteStorage.log("[IndexedDB] Starting put",e,this.putsRunning);for(var o in e){var a=e[o];if("object"==typeof a)try{r.put(a)}catch(s){throw RemoteStorage.log("[IndexedDB] Error while putting",a,s),s}else try{r["delete"](o)}catch(s){throw RemoteStorage.log("[IndexedDB] Error while removing",r,a,s),s}}return n.oncomplete=function(){this.putsRunning--,RemoteStorage.log("[IndexedDB] Finished put",e,this.putsRunning,(new Date).getTime()-i+"ms"),t.resolve()}.bind(this),n.onerror=function(){this.putsRunning--,t.reject("transaction error")}.bind(this),n.onabort=function(){t.reject("transaction abort"),this.putsRunning--}.bind(this),t.promise},reset:function(e){var t=this.db.name,r=this;this.db.close(),n.IndexedDB.clean(this.db.name,function(){n.IndexedDB.open(t,function(t,n){t?RemoteStorage.log("[IndexedDB] Error while resetting local storage",t):r.db=n,"function"==typeof e&&e(r)})})},forAllNodes:function(e){var t=Promise.defer(),n=this.db.transaction(["nodes"],"readonly"),r=n.objectStore("nodes").openCursor();return r.onsuccess=function(n){var r=n.target.result;r?(e(this.migrate(r.value)),r["continue"]()):t.resolve()}.bind(this),t.promise},closeDB:function(){this.db.close()}},n.IndexedDB.open=function(e,t){var n=setTimeout(function(){t("timeout trying to open db")},1e4),i=indexedDB.open(e,r);i.onerror=function(){RemoteStorage.log("[IndexedDB] Opening DB failed",i),clearTimeout(n),t(i.error)},i.onupgradeneeded=function(e){var t=i.result;RemoteStorage.log("[IndexedDB] Upgrade: from ",e.oldVersion," to ",e.newVersion),1!==e.oldVersion&&(RemoteStorage.log("[IndexedDB] Creating object store: nodes"),t.createObjectStore("nodes",{keyPath:"path"})),RemoteStorage.log("[IndexedDB] Creating object store: changes"),t.createObjectStore("changes",{keyPath:"path"})},i.onsuccess=function(){clearTimeout(n),t(null,i.result)}},n.IndexedDB.clean=function(e,t){var n=indexedDB.deleteDatabase(e);n.onsuccess=function(){RemoteStorage.log("[IndexedDB] Done removing DB"),t()},n.onerror=n.onabort=function(t){console.error('Failed to remove database "'+e+'"',t)}},n.IndexedDB._rs_init=function(e){var r=Promise.defer();return n.IndexedDB.open(i,function(n,i){n?r.reject(n):(t=i,i.onerror=function(){e._emit("error",n)},r.resolve())}),r.promise},n.IndexedDB._rs_supported=function(){var t=Promise.defer();e.indexedDB=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.oIndexedDB||e.msIndexedDB;var n=!1;if("undefined"!=typeof e.navigator&&e.navigator.userAgent.match(/Android (2|3|4\.[0-3])/)&&(navigator.userAgent.match(/Chrome|Firefox/)||(n=!0)),"indexedDB"in e&&!n)try{var r=indexedDB.open("rs-check");r.onerror=function(e){t.reject()},r.onsuccess=function(e){indexedDB.deleteDatabase("rs-check"),t.resolve()}}catch(i){t.reject()}else t.reject();return t.promise},n.IndexedDB._rs_cleanup=function(e){var t=Promise.defer();return e.local&&e.local.closeDB(),n.IndexedDB.clean(i,function(){t.resolve()}),t.promise}}("undefined"!=typeof window?window:global),function(e){function t(e){return e.substr(0,r.length)===r||e.substr(0,i.length)===i}function n(e){return e.substr(0,r.length)===r}var r="remotestorage:cache:nodes:",i="remotestorage:cache:changes:";RemoteStorage.LocalStorage=function(){RemoteStorage.cachingLayer(this),RemoteStorage.log("[LocalStorage] Registering events"),RemoteStorage.eventHandling(this,"change","local-events-done")},RemoteStorage.LocalStorage.prototype={getNodes:function(e){for(var t={},n=0,i=e.length;i>n;n++)try{t[e[n]]=JSON.parse(localStorage[r+e[n]])}catch(o){t[e[n]]=void 0}return Promise.resolve(t)},setNodes:function(e){for(var t in e)localStorage[r+t]=JSON.stringify(e[t]);return Promise.resolve()},forAllNodes:function(e){for(var t,r=0,i=localStorage.length;i>r;r++)if(n(localStorage.key(r))){try{t=this.migrate(JSON.parse(localStorage[localStorage.key(r)]))}catch(o){t=void 0}t&&e(t)}return Promise.resolve()}},RemoteStorage.LocalStorage._rs_init=function(){},RemoteStorage.LocalStorage._rs_supported=function(){return"localStorage"in e},RemoteStorage.LocalStorage._rs_cleanup=function(){for(var e=[],n=0,r=localStorage.length;r>n;n++){var i=localStorage.key(n);t(i)&&e.push(i)}e.forEach(function(e){RemoteStorage.log("[LocalStorage] Removing",e),delete localStorage[e]})}}("undefined"!=typeof window?window:global),function(e){RemoteStorage.InMemoryStorage=function(){RemoteStorage.cachingLayer(this),RemoteStorage.log("[InMemoryStorage] Registering events"),RemoteStorage.eventHandling(this,"change","local-events-done"),this._storage={}},RemoteStorage.InMemoryStorage.prototype={getNodes:function(e){for(var t={},n=0,r=e.length;r>n;n++)t[e[n]]=this._storage[e[n]];return Promise.resolve(t)},setNodes:function(e){for(var t in e)void 0===e[t]?delete this._storage[t]:this._storage[t]=e[t];return Promise.resolve()},forAllNodes:function(e){for(var t in this._storage)e(this.migrate(this._storage[t]));return Promise.resolve()}},RemoteStorage.InMemoryStorage._rs_init=function(){},RemoteStorage.InMemoryStorage._rs_supported=function(){return!0},RemoteStorage.InMemoryStorage._rs_cleanup=function(){}}("undefined"!=typeof window?window:global),function(){RemoteStorage.MODULES={},RemoteStorage.defineModule=function(e,t){if(RemoteStorage.MODULES[e]=t,Object.defineProperty(RemoteStorage.prototype,e,{configurable:!0,get:function(){var t=this._loadModule(e);return Object.defineProperty(this,e,{value:t}),t}}),-1!==e.indexOf("-")){var n=e.replace(/\-[a-z]/g,function(e){return e[1].toUpperCase()});Object.defineProperty(RemoteStorage.prototype,n,{get:function(){return this[e]}})}},RemoteStorage.prototype._loadModule=function(e){var t=RemoteStorage.MODULES[e];if(t){var n=t(new RemoteStorage.BaseClient(this,"/"+e+"/"),new RemoteStorage.BaseClient(this,"/public/"+e+"/"));return n.exports}throw"Unknown module: "+e},RemoteStorage.prototype.defineModule=function(e){console.log("remoteStorage.defineModule is deprecated, use RemoteStorage.defineModule instead!"),RemoteStorage.defineModule.apply(RemoteStorage,arguments)}}(),function(){function e(e,t,n){function r(e,t,n,r){[t,n,r].forEach(function(t){var n=document.createElement("td");n.textContent=t||"",e.appendChild(n)})}function i(e){function n(t,n,o,a){if(200===t){var c=document.createElement("tr");if(s.appendChild(c),r(c,e,o,a),"/"===e[e.length-1])for(var u in n)i(e+u)}}t.connected!==!1&&t.get(e).then(n)}e.setAttribute("border","1"),e.style.margin="8px",e.style.color="white",e.innerHTML="";var o=document.createElement("thead");e.appendChild(o);var a=document.createElement("tr");o.appendChild(a),["Path","Content-Type","Revision"].forEach(function(e){var t=document.createElement("th");t.textContent=e,o.appendChild(t)});var s=document.createElement("tbody");e.appendChild(s),n.forEach(i)}function t(t,n,r,i){var o=document.createElement("div"),a=document.createElement("h2");a.textContent=t,o.appendChild(a);var s=document.createElement("button");if(s.textContent="Refresh",s.onclick=function(){e(n,r,i)},o.appendChild(s),r.reset){var c=document.createElement("button");c.textContent="Reset",c.onclick=function(){r.reset(function(t){r=t,e(n,r,i)})},o.appendChild(c)}return o.appendChild(n),e(n,r,i),o}function n(e){function t(){o.innerHTML="",e.forAllNodes(function(e){if(e.local&&e.local.body){var t=document.createElement("li");t.textContent=JSON.stringify(e.local),o.appendChild(t)}})}var n=document.createElement("div"),r=document.createElement("h2");r.textContent="Outgoing changes",n.appendChild(r);var i=document.createElement("button");i.textContent="Refresh",n.appendChild(i);var o=document.createElement("ul");return o.style.fontFamily="courier",n.appendChild(o),i.onclick=t,t(),n}RemoteStorage.prototype.inspect=function(){var r=document.createElement("div");r.id="remotestorage-inspect",r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.background="black",r.style.color="white",r.style.border="groove 5px #ccc";var i=document.createElement("div");i.style.position="absolute",i.style.top=0,i.style.left=0;var o=document.createElement("strong");o.textContent=" remotestorage.js inspector ",i.appendChild(o);var a;this.local&&(a=document.createElement("button"),a.textContent="Synchronize",i.appendChild(a));var s=document.createElement("button");s.textContent="Close",s.onclick=function(){document.body.removeChild(r)},i.appendChild(s),r.appendChild(i);var c=[];for(var u in this.caching._rootPaths)this.caching._rootPaths.hasOwnProperty(u)&&c.push(u);var l=document.createElement("table"),f=document.createElement("table");r.appendChild(t("Remote",l,this.remote,c)),this.local&&(r.appendChild(t("Local",f,this.local,["/"])),r.appendChild(n(this.local)),a.onclick=function(){this.log("sync clicked"),this.sync.sync().then(function(){this.log("SYNC FINISHED"),e(f,this.local,["/"])}.bind(this),function(e){console.error("SYNC FAILED",e,e.stack)})}.bind(this)),document.body.appendChild(r)}}(),function(e){function t(e){return"/"===e.substr(-1)&&(e=e.substr(0,e.length-1)),decodeURIComponent(e)}function n(e){return e.replace(/[^\/]+\/?$/,"")}function r(e){var t=e.split("/");return"/"===e.substr(-1)?t[t.length-2]+"/":t[t.length-1]}var i=RemoteStorage,o="https://www.googleapis.com",a="https://accounts.google.com/o/oauth2/auth",s="https://www.googleapis.com/auth/drive",c="application/vnd.google-apps.folder",u="application/json; charset=UTF-8",l=function(e){this.maxAge=e,this._items={}};l.prototype={get:function(e){var t=this._items[e],n=(new Date).getTime();return t&&t.t>=n-this.maxAge?t.v:void 0},set:function(e,t){this._items[e]={v:t,t:(new Date).getTime()}}},i.GoogleDrive=function(e,t){i.eventHandling(this,"change","connected","wire-busy","wire-done","not-connected"),this.rs=e,this.clientId=t,this._fileIdCache=new l(300)},i.GoogleDrive.prototype={connected:!1,online:!0,configure:function(e){e.token?(localStorage["remotestorage:googledrive:token"]=e.token,this.token=e.token,this.connected=!0,this._emit("connected")):(this.connected=!1,delete this.token,delete localStorage["remotestorage:googledrive:token"])},connect:function(){this.rs.setBackend("googledrive"),i.Authorize(a,s,String(i.Authorize.getLocation()),this.clientId)},stopWaitingForToken:function(){this.connected||this._emit("not-connected")},get:function(e,t){return"/"===e.substr(-1)?this._getFolder(e,t):this._getFile(e,t)},put:function(e,t,n,r){function i(e){if(e.status>=200&&e.status<300){var t=JSON.parse(e.responseText),n=t.etag.substring(1,t.etag.length-1);return Promise.resolve({statusCode:200,contentType:t.mimeType,revision:n})}return 412===e.status?Promise.resolve({statusCode:412,revision:"conflict"}):Promise.reject("PUT failed with status "+e.status+" ("+e.responseText+")")}var o=this;return o._getFileId(e).then(function(a){return a?r&&"*"===r.ifNoneMatch?i({status:412}):o._updateFile(a,e,t,n,r).then(i):o._createFile(e,t,n,r).then(i)})},"delete":function(e,t){var n=this;return n._getFileId(e).then(function(e){return e?n._getMeta(e).then(function(r){var i;return"object"==typeof r&&"string"==typeof r.etag&&(i=r.etag.substring(1,r.etag.length-1)),t&&t.ifMatch&&t.ifMatch!==i?{statusCode:412,revision:i}:n._request("DELETE",o+"/drive/v2/files/"+e,{}).then(function(e){return 200===e.status||204===e.status?{statusCode:200}:Promise.reject("Delete failed: "+e.status+" ("+e.responseText+")")})}):Promise.resolve({statusCode:200})})},_updateFile:function(e,t,n,r,i){var a=this,s={mimeType:r},c={"Content-Type":"application/json; charset=UTF-8"};return i&&i.ifMatch&&(c["If-Match"]='"'+i.ifMatch+'"'),a._request("PUT",o+"/upload/drive/v2/files/"+e+"?uploadType=resumable",{body:JSON.stringify(s),headers:c}).then(function(e){return 412===e.status?e:a._request("PUT",e.getResponseHeader("Location"),{body:r.match(/^application\/json/)?JSON.stringify(n):n})})},_createFile:function(e,n,i,a){var s=this;return s._getParentId(e).then(function(a){var c=r(e),u={title:t(c),mimeType:i,parents:[{kind:"drive#fileLink",id:a}]};return s._request("POST",o+"/upload/drive/v2/files?uploadType=resumable",{body:JSON.stringify(u),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(function(e){return s._request("POST",e.getResponseHeader("Location"),{body:i.match(/^application\/json/)?JSON.stringify(n):n})})})},_getFile:function(e,t){var n=this;return n._getFileId(e).then(function(e){return n._getMeta(e).then(function(e){var r;if("object"==typeof e&&"string"==typeof e.etag&&(r=e.etag.substring(1,e.etag.length-1)),t&&t.ifNoneMatch&&r===t.ifNoneMatch)return Promise.resolve({statusCode:304});var i={};if(!e.downloadUrl){if(!e.exportLinks||!e.exportLinks["text/html"])return Promise.resolve({statusCode:200,body:"",contentType:e.mimeType,revision:r});e.mimeType+=";export=text/html",e.downloadUrl=e.exportLinks["text/html"]}return e.mimeType.match(/charset=binary/)&&(i.responseType="blob"),n._request("GET",e.downloadUrl,i).then(function(t){var n=t.response;if(e.mimeType.match(/^application\/json/))try{n=JSON.parse(n)}catch(i){}return Promise.resolve({statusCode:200,body:n,contentType:e.mimeType,revision:r})})})})},_getFolder:function(e,t){var n=this;return n._getFileId(e).then(function(t){var r,i,a,s,l;return t?(r="'"+t+"' in parents",i="items(downloadUrl,etag,fileSize,id,mimeType,title)",n._request("GET",o+"/drive/v2/files?q="+encodeURIComponent(r)+"&fields="+encodeURIComponent(i)+"&maxResults=1000",{}).then(function(t){if(200!==t.status)return Promise.reject("request failed or something: "+t.status);try{a=JSON.parse(t.responseText)}catch(r){return Promise.reject("non-JSON response from GoogleDrive")}l={};for(var i=0,o=a.items.length;o>i;i++)s=a.items[i].etag.substring(1,a.items[i].etag.length-1),a.items[i].mimeType===c?(n._fileIdCache.set(e+a.items[i].title+"/",a.items[i].id),l[a.items[i].title+"/"]={ETag:s}):(n._fileIdCache.set(e+a.items[i].title,a.items[i].id),l[a.items[i].title]={ETag:s,"Content-Type":a.items[i].mimeType,"Content-Length":a.items[i].fileSize});return Promise.resolve({statusCode:200,body:l,contentType:u,revision:void 0})})):Promise.resolve({statusCode:404})})},_getParentId:function(e){var t=n(e),r=this;return r._getFileId(t).then(function(e){return e?Promise.resolve(e):r._createFolder(t)})},_createFolder:function(e){var n=this;return n._getParentId(e).then(function(i){return n._request("POST",o+"/drive/v2/files",{body:JSON.stringify({title:t(r(e)),mimeType:c,parents:[{id:i}]}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(function(e){var t=JSON.parse(e.responseText);return Promise.resolve(t.id)})})},_getFileId:function(e){var t,r=this;return"/"===e?Promise.resolve("root"):(t=this._fileIdCache.get(e))?Promise.resolve(t):r._getFolder(n(e)).then(function(){return t=r._fileIdCache.get(e),t?Promise.resolve(t):"/"===e.substr(-1)?r._createFolder(e).then(function(){return r._getFileId(e)}):Promise.resolve()})},_getMeta:function(e){return this._request("GET",o+"/drive/v2/files/"+e,{}).then(function(t){return 200===t.status?Promise.resolve(JSON.parse(t.responseText)):Promise.reject("request (getting metadata for "+e+") failed with status: "+t.status)})},_request:function(e,t,n){var r=this;return n.headers||(n.headers={}),n.headers.Authorization="Bearer "+r.token,i.WireClient.request(e,t,n).then(function(e){return e&&401===e.status?void r.connect():e})}},i.GoogleDrive._rs_init=function(e){var t=e.apiKeys.googledrive;t&&(e.googledrive=new i.GoogleDrive(e,t.client_id),"googledrive"===e.backend&&(e._origRemote=e.remote,e.remote=e.googledrive))},i.GoogleDrive._rs_supported=function(e){return!0},i.GoogleDrive._rs_cleanup=function(e){e.setBackend(void 0),e._origRemote&&(e.remote=e._origRemote,delete e._origRemote)}}(this),function(e){function t(e){this.defaultValue=e,this._storage={},this.set=this.justSet,this["delete"]=this.justDelete}function n(e){e._dropboxOrigSync||(e._dropboxOrigSync=e.sync.bind(e),e.sync=function(){return this.dropbox.fetchDelta.apply(this.dropbox,arguments).then(e._dropboxOrigSync,function(t){e._emit("error",new e.SyncError(t))})})}function r(e){e._dropboxOrigSync&&(e.sync=e._dropboxOrigSync,delete e._dropboxOrigSync)}function i(e){e._origBaseClientGetItemURL||(e._origBaseClientGetItemURL=f.BaseClient.prototype.getItemURL,f.BaseClient.prototype.getItemURL=function(t){var n=e.dropbox._itemRefs[t];return n?n:""})}function o(e){e._origBaseClieNtGetItemURL&&(f.BaseClient.prototype.getItemURL=e._origBaseClietGetItemURL,delete e._origBaseClietGetItemURL)}function a(e){e._origRemote||(e._origRemote=e.remote,e.remote=e.dropbox)}function s(e){e._origRemote&&(e.remote=e._origRemote,delete e._origRemote)}function c(e){a(e),e.sync&&n(e),i(e)}function u(e){s(e),r(e),o(e)}var l,f=RemoteStorage,d="https://www.dropbox.com/1/oauth2/authorize",p="remotestorage:dropbox",h=f.WireClient.cleanPath;t.prototype={get:function(e){e=e.toLowerCase();var t=this._storage[e];return"undefined"==typeof t&&(t=this.defaultValue,this._storage[e]=t),t},propagateSet:function(e,t){return e=e.toLowerCase(),this._storage[e]===t?t:(this._propagate(e,t),this._storage[e]=t,t)},propagateDelete:function(e){return e=e.toLowerCase(),this._propagate(e,this._storage[e]),delete this._storage[e]},_activatePropagation:function(){return this.set=this.propagateSet,this["delete"]=this.propagateDelete,!0},justSet:function(e,t){return e=e.toLowerCase(),this._storage[e]=t,t},justDelete:function(e,t){return e=e.toLowerCase(),delete this._storage[e]},_propagate:function(e,t){for(var n=e.split("/").slice(0,-1),r="",i=0,o=n.length;o>i;i++)r+=n[i]+"/",t||(t=this._storage[r]+1),this._storage[r]=t}};var g;f.Dropbox=function(e){this.rs=e,this.connected=!1,this.rs=e;var n=this;if(g=function(e){e instanceof RemoteStorage.Unauthorized&&n.configure({userAddress:null,href:null,storageApi:null,token:null,options:null})},f.eventHandling(this,"change","connected","wire-busy","wire-done","not-connected"),e.on("error",g),this.clientId=e.apiKeys.dropbox.api_key,this._revCache=new t("rev"),this._itemRefs={},this._metadataCache={},l){var r;try{r=JSON.parse(localStorage[p])}catch(i){}r&&this.configure(r);try{this._itemRefs=JSON.parse(localStorage[p+":shares"])}catch(i){}}this.connected&&setTimeout(this._emit.bind(this),0,"connected")},f.Dropbox.prototype={online:!0,connect:function(){this.rs.setBackend("dropbox"),this.token?c(this.rs):f.Authorize(d,"",String(f.Authorize.getLocation()),this.clientId)},configure:function(e){"undefined"!=typeof e.userAddress&&(this.userAddress=e.userAddress),"undefined"!=typeof e.token&&(this.token=e.token),this.token?(this.connected=!0,this.userAddress||this.info().then(function(e){this.userAddress=e.display_name,this.rs.widget.view.setUserAddress(this.userAddress),this._emit("connected")}.bind(this))):this.connected=!1,l&&(localStorage[p]=JSON.stringify({userAddress:this.userAddress,token:this.token}))},stopWaitingForToken:function(){this.connected||this._emit("not-connected")},_getFolder:function(e,t){var n="https://api.dropbox.com/1/metadata/auto"+h(e),r=this._revCache,i=this;return this._request("GET",n,{}).then(function(t){var n=t.status;if(304===n)return Promise.resolve({statusCode:n});var o,a,s,c;try{a=JSON.parse(t.responseText)}catch(u){return Promise.reject(u)}return c=i._revCache.get(e),s="application/json; charset=UTF-8",a.contents&&(o=a.contents.reduce(function(t,n){var i=n.path.split("/").slice(-1)[0]+(n.is_dir?"/":"");return n.is_dir?t[i]={ETag:r.get(e+i)}:t[i]={ETag:n.rev},t},{})),Promise.resolve({statusCode:n,body:o,contentType:s,revision:c})})},get:function(e,t){if(!this.connected)return Promise.reject("not connected (path: "+e+")");var n="https://api-content.dropbox.com/1/files/auto"+h(e),r=this,i=this._revCache.get(e);return null===i?Promise.resolve({statusCode:404}):t&&t.ifNoneMatch&&i&&i===t.ifNoneMatch?Promise.resolve({statusCode:304}):"/"===e.substr(-1)?this._getFolder(e,t):this._request("GET",n,{}).then(function(t){var n,i,o,a,s=t.status;if(200!==s)return Promise.resolve({statusCode:s});i=t.responseText;try{n=JSON.parse(t.getResponseHeader("x-dropbox-metadata"))}catch(c){return Promise.reject(c)}if(o=n.mime_type,a=n.rev,r._revCache.set(e,a),r._shareIfNeeded(e),!t.getResponseHeader("Content-Type")||t.getResponseHeader("Content-Type").match(/charset=binary/)){var u=Promise.defer();return f.WireClient.readBinaryData(t.response,o,function(e){u.resolve({statusCode:s,body:e,contentType:o,revision:a})}),u.promise}if(o&&o.search("application/json")>=0,!0)try{i=JSON.parse(i),o="application/json; charset=UTF-8"}catch(c){}return Promise.resolve({statusCode:s,body:i,contentType:o,revision:a})})},put:function(e,t,n,r){var i=this;if(!this.connected)throw new Error("not connected (path: "+e+")");var o=this._revCache.get(e);if(r&&r.ifMatch&&o&&o!==r.ifMatch)return Promise.resolve({statusCode:412,revision:o});if(r&&"*"===r.ifNoneMatch&&o&&"rev"!==o)return Promise.resolve({statusCode:412,revision:o});if(!n.match(/charset=/)&&(t instanceof ArrayBuffer||f.WireClient.isArrayBufferView(t))&&(n+="; charset=binary"),t.length>157286400)return Promise.reject(new Error("Cannot upload file larger than 150MB"));var a,s=r&&(r.ifMatch||"*"===r.ifNoneMatch),c={body:t,contentType:n,path:e};return a=s?this._getMetadata(e).then(function(e){return r&&"*"===r.ifNoneMatch&&e?Promise.resolve({statusCode:412,revision:e.rev}):r&&r.ifMatch&&e&&e.rev!==r.ifMatch?Promise.resolve({statusCode:412,revision:e.rev}):i._uploadSimple(c)}):i._uploadSimple(c),a.then(function(t){return i._shareIfNeeded(e),t})},"delete":function(e,t){var n=this;if(!this.connected)throw new Error("not connected (path: "+e+")");var r=this._revCache.get(e);return t&&t.ifMatch&&r&&t.ifMatch!==r?Promise.resolve({statusCode:412,revision:r}):t&&t.ifMatch?this._getMetadata(e).then(function(r){return t&&t.ifMatch&&r&&r.rev!==t.ifMatch?Promise.resolve({statusCode:412,revision:r.rev}):n._deleteSimple(e)}):n._deleteSimple(e)},_shareIfNeeded:function(e){e.match(/^\/public\/.*[^\/]$/)&&void 0===this._itemRefs[e]&&this.share(e)},share:function(e){var t=this,n="https://api.dropbox.com/1/media/auto/"+h(e);return this._request("POST",n,{}).then(function(r){if(200!==r.status)return Promise.reject(new Error('Invalid DropBox API response status when sharing "'+e+'":'+r.status));try{r=JSON.parse(r.responseText)}catch(i){return Promise.reject(new Error('Invalid DropBox API response when sharing "'+e+'": '+r.responseText))}return t._itemRefs[e]=r.url,l&&(localStorage[p+":shares"]=JSON.stringify(t._itemRefs)),Promise.resolve(n)},function(t){return err.message='Sharing DropBox file or folder ("'+e+'") failed.'+err.message,Promise.reject(t)})},info:function(){var e="https://api.dropbox.com/1/account/info";return this._request("GET",e,{}).then(function(e){try{var t=JSON.parse(e.responseText);return Promise.resolve(t)}catch(n){return Promise.reject(n)}})},_request:function(t,n,r){var i=this;return r.headers||(r.headers={}),r.headers.Authorization="Bearer "+this.token,f.WireClient.request.call(this,t,n,r).then(function(o){return o&&503===o.status?e.setTimeout(i._request(t,n,r),3210):Promise.resolve(o)})},fetchDelta:function(){var e=Array.prototype.slice.call(arguments),n=this;return n._request("POST","https://api.dropbox.com/1/delta",{body:n._deltaCursor?"cursor="+encodeURIComponent(n._deltaCursor):"",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(r){if(200!==r.status)return 400===r.status?(n.rs._emit("error",new RemoteStorage.Unauthorized),Promise.resolve(e)):Promise.reject("dropbox.fetchDelta returned "+r.status+r.responseText);var i;try{i=JSON.parse(r.responseText)}catch(o){return f.log("fetchDeltas can not parse response",o),Promise.reject("can not parse response of fetchDelta : "+o.message)}return i.entries?(i.reset&&(n._revCache=new t("rev")),i.cursor&&(n._deltaCursor=i.cursor),RemoteStorage.log("Delta : ",i.entries),i.entries.forEach(function(e){var t,r=e[0];if(e[1]){if(e[1].is_dir)return;t=e[1].rev}else t=null;n._revCache.set(r,t)}),Promise.resolve(e)):Promise.reject("dropbox.fetchDeltas failed, no entries found")},function(e){this.rs.log("fetchDeltas",e),this.rs._emit("error",new RemoteStorage.SyncError("fetchDeltas failed."+e)),promise.reject(e)}).then(function(){if(n._revCache){var e=Array.prototype.slice.call(arguments);return n._revCache._activatePropagation(),Promise.resolve(e)}})},_getMetadata:function(e,t){var n=this,r=this._metadataCache[e],i="https://api.dropbox.com/1/metadata/auto"+h(e);return i+="?list="+(t&&t.list?"true":"false"),r&&r.hash&&(i+="&hash="+encodeURIComponent(r.hash)),this._request("GET",i,{}).then(function(t){if(304===t.status)return Promise.resolve(r);if(200===t.status){var i=JSON.parse(t.responseText);return n._metadataCache[e]=i,Promise.resolve(i)}return Promise.resolve()})},_uploadSimple:function(e){var t=this,n="https://api-content.dropbox.com/1/files_put/auto"+h(e.path)+"?";return e&&e.ifMatch&&(n+="parent_rev="+encodeURIComponent(e.ifMatch)),t._request("PUT",n,{body:e.body,headers:{"Content-Type":e.contentType}}).then(function(n){if(200!==n.status)return Promise.resolve({statusCode:n.status});var r;try{r=JSON.parse(n.responseText)}catch(i){return Promise.reject(i)}if(r.path!==e.path){var o="https://api.dropbox.com/1/fileops/delete?root=auto&path="+encodeURIComponent(r.path);return t._request("POST",o,{}),t._getMetadata(e.path).then(function(e){return Promise.resolve({statusCode:412,revision:e.rev})})}return t._revCache.propagateSet(e.path,r.rev),Promise.resolve({statusCode:n.status})})},_deleteSimple:function(e){var t=this,n="https://api.dropbox.com/1/fileops/delete?root=auto&path="+encodeURIComponent(e);return t._request("POST",n,{}).then(function(n){return 406===n.status?Promise.reject(new Error("Cannot delete '"+e+"': too many files involved")):(200===n.status&&(t._revCache["delete"](e),delete t._itemRefs[e]),Promise.resolve({statusCode:n.status}))})}},f.Dropbox._rs_init=function(e){l=e.localStorageAvailable(),e.apiKeys.dropbox&&(e.dropbox=new f.Dropbox(e)),"dropbox"===e.backend&&c(e)},f.Dropbox._rs_supported=function(){return!0},f.Dropbox._rs_cleanup=function(e){u(e),l&&delete localStorage[p],e.removeEventListener("error",g),e.setBackend(void 0)}}(this),remoteStorage=new RemoteStorage,this.CHARS=e}(),r()}),System.registerDynamic("libraries/telehash/telehash-library.js",[],!1,function(__require,__exports,__module){var _retrieveGlobal=System.get("@@global-helpers").prepareGlobal(__module.id,"telehash",null);return function(){"format global";"exports telehash";!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"undefined"!=typeof window&&(window.telehash=e("telehash"))},{telehash:2}],2:[function(e,t,n){var r=e("telehash-js");n.debug=r.debug,n.info=r.info,n.init=function(t,n){function i(){return e("telehash-seeds").install(o,t),o.online(function(e){n(e,o)}),o}t||(t={});var o=new r["switch"];if(e("telehash-cs1a").install(o,t),t.cs2a&&e("telehash-cs2a").install(o,t),e("telehash-http").install(o,t),e("telehash-webrtc").install(o,t),e("telehash-stream").install(o,t),e("telehash-telesocket").install(o,t),e("telehash-thtp").install(o,t),e("telehash-token").install(o,t),t.id&&("string"==typeof t.id&&localStorage&&localStorage.getItem(t.id)&&(t.id=JSON.parse(localStorage.getItem(t.id))),"object"==typeof t.id)){var a;return(a=o.load(t.id))?n("error loading id, "+a+": "+JSON.stringify(t.id)):i()}return o.make(function(e,r){return e?n("error creating id, "+e):("string"==typeof t.id&&localStorage&&localStorage.setItem(t.id,JSON.stringify(r)),t.id=r,o.load(r),i())}),o}},{"telehash-cs1a":3,"telehash-cs2a":10,"telehash-http":18,"telehash-js":20,"telehash-seeds":21,"telehash-stream":23,"telehash-telesocket":24,"telehash-thtp":25,"telehash-token":26,"telehash-webrtc":27}],3:[function(e,t,n){(function(t){var r=(e("crypto"),e("./cs1a.js")),i=e("ecc-jsbn");e("./forge.min.js"),r.crypt(i,function(e,n,r,i){var o=e?forge.aes.createEncryptionCipher(n.toString("binary"),"CTR"):forge.aes.createDecryptionCipher(n.toString("binary"),"CTR");return o.start(r.toString("binary")),o.update(forge.util.createBuffer(i.toString("binary"))),o.finish(),new t(o.output.getBytes(),"binary")}),Object.keys(r).forEach(function(e){n[e]=r[e]})}).call(this,e("buffer").Buffer)},{"./cs1a.js":4,"./forge.min.js":5,buffer:29,crypto:35,"ecc-jsbn":6}],4:[function(e,t,n){(function(t){function r(e,t){if(!e||t.length%2)return t;var n=t.slice(0,t.length/2);for(i=0;i<n.length;i++)n[i]=n[i]^t[i+n.length];return r(e-1,n)}var o,a=e("crypto");n.install=function(e){o=e,e.CSets["1a"]=n},n.crypt=function(e,t){a.ecc=e,a.aes=t},n.genkey=function(e,t,n){var r=new a.ecc.ECKey(a.ecc.ECCurves.secp160r1);e["1a"]=r.PublicKey.slice(1).toString("base64"),e["1a_secret"]=r.PrivateKey.toString("base64"),t()},n.loadkey=function(e,n,r){if("string"==typeof n&&(n=new t(n,"base64")),!t.isBuffer(n)||40!=n.length)return"invalid public key";if(e.key=n,e["public"]=new a.ecc.ECKey(a.ecc.ECCurves.secp160r1,t.concat([new t("04","hex"),e.key]),!0),!e["public"])return"public key load failed";if(r){if("string"==typeof r&&(r=new t(r,"base64")),!t.isBuffer(r)||20!=r.length)return"invalid private key";if(e["private"]=new a.ecc.ECKey(a.ecc.ECCurves.secp160r1,r),!e["private"])return"private key load failed"}return!1},n.openize=function(e,n,i){n.ecc||(n.ecc=new a.ecc.ECKey(a.ecc.ECCurves.secp160r1));var s=n.ecc.PublicKey.slice(1),c=n.ecc.deriveSharedSecret(n["public"]),u=r(1,a.createHash("sha256").update(c).digest()),l=new t("00000000000000000000000000000001","hex"),f=t.isBuffer(i)?i:o.pencode(i,e.cs["1a"].key),d=a.aes(!0,u,l,f),c=e.cs["1a"]["private"].deriveSharedSecret(n["public"]),p=t.concat([s,d]),h=r(3,a.createHmac("sha256",c).update(p).digest()),f=t.concat([h,p]);
return o.pencode(26,f)},n.deopenize=function(e,n){var i={verify:!1};if(!n.body)return i;var s=n.body.slice(0,4).toString("hex"),c=n.body.slice(4,44),u=n.body.slice(44);try{i.linepub=new a.ecc.ECKey(a.ecc.ECCurves.secp160r1,t.concat([new t("04","hex"),c]),!0)}catch(l){console.log("ecc err",l)}if(!i.linepub)return i;var f=e.cs["1a"]["private"].deriveSharedSecret(i.linepub),d=r(1,a.createHash("sha256").update(f).digest()),p=new t("00000000000000000000000000000001","hex"),h=a.aes(!1,d,p,u),g=o.pdecode(h);if(!g)return i;i.inner=g;var m;if(n.from)m=n.from["public"];else{if(m=new a.ecc.ECKey(a.ecc.ECCurves.secp160r1,t.concat([new t("04","hex"),g.body]),!0),!m)return i;i.key=g.body}var f=e.cs["1a"]["private"].deriveSharedSecret(m),v=r(3,a.createHmac("sha256",f).update(n.body.slice(4)).digest()).toString("hex");return v!=s?i:(i.verify=!0,i.js=g.js,i)},n.openline=function(e,n){e.lineIV=a.randomBytes(4).readUInt32LE(0),e.lineInB=new t(e.lineIn,"hex");var i=e.ecc.deriveSharedSecret(n.linepub);return e.encKey=r(1,a.createHash("sha256").update(i).update(new t(e.lineOut,"hex")).update(e.lineInB).digest()),e.decKey=r(1,a.createHash("sha256").update(i).update(e.lineInB).update(new t(e.lineOut,"hex")).digest()),!0},n.lineize=function(e,n){var i=new t(16);i.fill(0),i.writeUInt32LE(e.lineIV++,12);var s=a.aes(!0,e.encKey,i,o.pencode(n.js,n.body)),c=r(3,a.createHmac("sha256",e.encKey).update(t.concat([i.slice(12),s])).digest()),u=t.concat([e.lineInB,c,i.slice(12),s]);return o.pencode(null,u)},n.delineize=function(e,n){if(!n.body)return"no body";n.body=n.body.slice(16);var i=n.body.slice(0,4).toString("hex"),s=r(3,a.createHmac("sha256",e.decKey).update(n.body.slice(4)).digest()).toString("hex");if(i!=s)return"invalid hmac";var c=n.body.slice(4,8),u=new t(12);u.fill(0);var l=n.body.slice(8),f=o.pdecode(a.aes(!1,e.decKey,t.concat([u,c]),l));return f?(n.js=f.js,n.body=f.body,!1):"invalid decrypted packet"}}).call(this,e("buffer").Buffer)},{buffer:29,crypto:35}],5:[function(e,t,n){(function(e){!function(){var n,r,i;!function(e){function t(e,t){return w.call(e,t)}function o(e,n){var r,i,o,a,s,c,u,l,f,d,p,h=n&&n.split("/"),g=y.map,m=/\.js$/,v=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(n){for(h=h.slice(0,h.length-1),e=e.split("/"),s=e.length-1,y.pkgs&&t(y.pkgs,h[0])&&m.test(e[s])&&(e[s]=e[s].replace(m,"")),e=h.concat(e),f=0;f<e.length;f+=1)if(p=e[f],"."===p)e.splice(f,1),f-=1;else if(".."===p){if(1===f&&(".."===e[2]||".."===e[0]))break;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||v)&&g){for(r=e.split("/"),f=r.length;f>0;f-=1){if(i=r.slice(0,f).join("/"),h)for(d=h.length;d>0;d-=1)if(o=g[h.slice(0,d).join("/")],o&&(o=o[i])){a=o,c=f;break}if(a)break;!u&&v&&v[i]&&(u=v[i],l=f)}!a&&u&&(a=u,c=l),a&&(r.splice(0,c,a),e=r.join("/"))}return e}function a(t,n){return function(){return p.apply(e,S.call(arguments,0).concat([t,n]))}}function s(e){return function(t){return o(t,e)}}function c(e){return function(t){m[e]=t}}function u(n){if(t(v,n)){var r=v[n];delete v[n],b[n]=!0,d.apply(e,r)}if(!t(m,n)&&!t(b,n))throw new Error("No "+n);return m[n]}function l(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function f(e){return function(){return y&&y.config&&y.config[e]||{}}}var d,p,h,g,m={},v={},y={},b={},w=Object.prototype.hasOwnProperty,S=[].slice;h=function(e,t){var n,r=l(e),i=r[0];return e=r[1],i&&(i=o(i,t),n=u(i)),i?e=n&&n.normalize?n.normalize(e,s(t)):o(e,t):(e=o(e,t),r=l(e),i=r[0],e=r[1],i&&(n=u(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},g={require:function(e){return a(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:f(e)}}},d=function(n,r,i,o){var s,l,f,d,p,y,w=[],S=typeof i;if(o=o||n,"undefined"===S||"function"===S){for(r=!r.length&&i.length?["require","exports","module"]:r,p=0;p<r.length;p+=1)if(d=h(r[p],o),l=d.f,"require"===l)w[p]=g.require(n);else if("exports"===l)w[p]=g.exports(n),y=!0;else if("module"===l)s=w[p]=g.module(n);else if(t(m,l)||t(v,l)||t(b,l))w[p]=u(l);else{if(!d.p)throw new Error(n+" missing "+l);d.p.load(d.n,a(o,!0),c(l),{}),w[p]=m[l]}f=i?i.apply(m[n],w):void 0,n&&(s&&s.exports!==e&&s.exports!==m[n]?m[n]=s.exports:f===e&&y||(m[n]=f))}else n&&(m[n]=i)},n=r=p=function(t,n,r,i,o){var a,s;if("string"==typeof t)return g[t]?g[t](n):u(h(t,n).f);if(!t.splice){if(y=t,y.deps&&p(y.deps,y.callback),s=y.packages,y.packages)for(y.pkgs={},a=0;a<s.length;a++)y.pkgs[s[a].name||s[a]]=!0;if(!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?d(e,t,n,r):setTimeout(function(){d(e,t,n,r)},4),p},p.config=function(e){return p(e)},n._defined=m,i=function(e,n,r){n.splice||(r=n,n=[]),!t(m,e)&&!t(v,e)&&(v[e]=[e,n,r])},i.amd={jQuery:!0}}(),i("node_modules/almond/almond",function(){}),function(){function n(t){var n=t.util=t.util||{};"undefined"!=typeof e&&e.nextTick?(n.nextTick=e.nextTick,"function"==typeof setImmediate?n.setImmediate=setImmediate:n.setImmediate=n.nextTick):"function"==typeof setImmediate?(n.setImmediate=setImmediate,n.nextTick=function(e){return setImmediate(e)}):(n.setImmediate=function(e){setTimeout(e,0)},n.nextTick=n.setImmediate),n.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer};var r=[];"undefined"!=typeof Int8Array&&r.push(Int8Array),"undefined"!=typeof Uint8Array&&r.push(Uint8Array),"undefined"!=typeof Uint8ClampedArray&&r.push(Uint8ClampedArray),"undefined"!=typeof Int16Array&&r.push(Int16Array),"undefined"!=typeof Uint16Array&&r.push(Uint16Array),"undefined"!=typeof Int32Array&&r.push(Int32Array),"undefined"!=typeof Uint32Array&&r.push(Uint32Array),"undefined"!=typeof Float32Array&&r.push(Float32Array),"undefined"!=typeof Float64Array&&r.push(Float64Array),n.isArrayBufferView=function(e){for(var t=0;t<r.length;++t)if(e instanceof r[t])return!0;return!1},n.ByteBuffer=function(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(n.isArrayBuffer(e)||n.isArrayBufferView(e)){var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(r){for(var i=0;i<t.length;++i)this.putByte(t[i])}}},n.ByteBuffer.prototype.length=function(){return this.data.length-this.read},n.ByteBuffer.prototype.isEmpty=function(){return this.length()<=0},n.ByteBuffer.prototype.putByte=function(e){return this.data+=String.fromCharCode(e),this},n.ByteBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)1&t&&(n+=e),t>>>=1,t>0&&(e+=e);return this.data=n,this},n.ByteBuffer.prototype.putBytes=function(e){return this.data+=e,this},n.ByteBuffer.prototype.putString=function(e){return this.data+=n.encodeUtf8(e),this},n.ByteBuffer.prototype.putInt16=function(e){return this.data+=String.fromCharCode(e>>8&255)+String.fromCharCode(255&e),this},n.ByteBuffer.prototype.putInt24=function(e){return this.data+=String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e),this},n.ByteBuffer.prototype.putInt32=function(e){return this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e),this},n.ByteBuffer.prototype.putInt16Le=function(e){return this.data+=String.fromCharCode(255&e)+String.fromCharCode(e>>8&255),this},n.ByteBuffer.prototype.putInt24Le=function(e){return this.data+=String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255),this},n.ByteBuffer.prototype.putInt32Le=function(e){return this.data+=String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255),this},n.ByteBuffer.prototype.putInt=function(e,t){do t-=8,this.data+=String.fromCharCode(e>>t&255);while(t>0);return this},n.ByteBuffer.prototype.putSignedInt=function(e,t){return 0>e&&(e+=2<<t-1),this.putInt(e,t)},n.ByteBuffer.prototype.putBuffer=function(e){return this.data+=e.getBytes(),this},n.ByteBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},n.ByteBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},n.ByteBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},n.ByteBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},n.ByteBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},n.ByteBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},n.ByteBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},n.ByteBuffer.prototype.getInt=function(e){var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t},n.ByteBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},n.ByteBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},n.ByteBuffer.prototype.bytes=function(e){return"undefined"==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},n.ByteBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},n.ByteBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},n.ByteBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},n.ByteBuffer.prototype.copy=function(){var e=n.createBuffer(this.data);return e.read=this.read,e},n.ByteBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},n.ByteBuffer.prototype.clear=function(){return this.data="",this.read=0,this},n.ByteBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},n.ByteBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);16>n&&(e+="0"),e+=n.toString(16)}return e},n.ByteBuffer.prototype.toString=function(){return n.decodeUtf8(this.bytes())},n.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=n.encodeUtf8(e)),new n.ByteBuffer(e)},n.fillString=function(e,t){for(var n="";t>0;)1&t&&(n+=e),t>>>=1,t>0&&(e+=e);return n},n.xorBytes=function(e,t,n){for(var r="",i="",o="",a=0,s=0;n>0;--n,++a)i=e.charCodeAt(a)^t.charCodeAt(a),s>=10&&(r+=o,o="",s=0),o+=String.fromCharCode(i),++s;return r+=o},n.hexToBytes=function(e){var t="",n=0;for(e.length&!0&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},n.bytesToHex=function(e){return n.createBuffer(e).toHex()},n.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];n.encode64=function(e,t){for(var n,r,o,a="",s="",c=0;c<e.length;)n=e.charCodeAt(c++),r=e.charCodeAt(c++),o=e.charCodeAt(c++),a+=i.charAt(n>>2),a+=i.charAt((3&n)<<4|r>>4),isNaN(r)?a+="==":(a+=i.charAt((15&r)<<2|o>>6),a+=isNaN(o)?"=":i.charAt(63&o)),t&&a.length>t&&(s+=a.substr(0,t)+"\r\n",a=a.substr(t));return s+=a},n.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,n,r,i,a="",s=0;s<e.length;)t=o[e.charCodeAt(s++)-43],n=o[e.charCodeAt(s++)-43],r=o[e.charCodeAt(s++)-43],i=o[e.charCodeAt(s++)-43],a+=String.fromCharCode(t<<2|n>>4),64!==r&&(a+=String.fromCharCode((15&n)<<4|r>>2),64!==i&&(a+=String.fromCharCode((3&r)<<6|i)));return a},n.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},n.decodeUtf8=function(e){return decodeURIComponent(escape(e))},n.deflate=function(e,t,r){if(t=n.decode64(e.deflate(n.encode64(t)).rval),r){var i=2,o=t.charCodeAt(1);32&o&&(i=6),t=t.substring(i,t.length-4)}return t},n.inflate=function(e,t,r){var i=e.inflate(n.encode64(t)).rval;return null===i?null:n.decode64(i)};var a=function(e,t,r){if(!e)throw{message:"WebStorage not available."};var i;if(null===r?i=e.removeItem(t):(r=n.encode64(JSON.stringify(r)),i=e.setItem(t,r)),"undefined"!=typeof i&&i.rval!==!0)throw i.error},s=function(e,t){if(!e)throw{message:"WebStorage not available."};var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error)throw r.error;r=null}else r=r.rval;return null!==r&&(r=JSON.parse(n.decode64(r))),r},c=function(e,t,n,r){var i=s(e,t);null===i&&(i={}),i[n]=r,a(e,t,i)},u=function(e,t,n){var r=s(e,t);return null!==r&&(r=n in r?r[n]:null),r},l=function(e,t,n){var r=s(e,t);if(null!==r&&n in r){delete r[n];var i=!0;for(var o in r){i=!1;break}i&&(r=null),a(e,t,r)}},f=function(e,t){a(e,t,null)},d=function(e,t,n){var r=null;"undefined"==typeof n&&(n=["web","flash"]);var i,o=!1,a=null;for(var s in n){i=n[s];try{if("flash"===i||"both"===i){if(null===t[0])throw{message:"Flash local storage not available."};r=e.apply(this,t),o="flash"===i}("web"===i||"both"===i)&&(t[0]=localStorage,r=e.apply(this,t),o=!0)}catch(c){a=c}if(o)break}if(!o)throw a;return r};n.setItem=function(e,t,n,r,i){d(c,arguments,i)},n.getItem=function(e,t,n,r){return d(u,arguments,r)},n.removeItem=function(e,t,n,r){d(l,arguments,r)},n.clearItems=function(e,t,n){d(f,arguments,n)},n.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var n=t.exec(e),r=null===n?null:{full:e,scheme:n[1],host:n[2],port:n[3],path:n[4]};return r&&(r.fullHost=r.host,r.port?80!==r.port&&"http"===r.scheme?r.fullHost+=":"+r.port:443!==r.port&&"https"===r.scheme&&(r.fullHost+=":"+r.port):"http"===r.scheme?r.port=80:"https"===r.scheme&&(r.port=443),r.full=r.scheme+"://"+r.fullHost),r};var p=null;n.getQueryVariables=function(e){var t,n=function(e){for(var t={},n=e.split("&"),r=0;r<n.length;r++){var i,o,a=n[r].indexOf("=");a>0?(i=n[r].substring(0,a),o=n[r].substring(a+1)):(i=n[r],o=null),i in t||(t[i]=[]),!(i in Object.prototype)&&null!==o&&t[i].push(unescape(o))}return t};return"undefined"==typeof e?(null===p&&(p="undefined"==typeof window?{}:n(window.location.search.substring(1))),t=p):t=n(e),t},n.parseFragment=function(e){var t=e,r="",i=e.indexOf("?");i>0&&(t=e.substring(0,i),r=e.substring(i+1));var o=t.split("/");o.length>0&&""===o[0]&&o.shift();var a=""===r?{}:n.getQueryVariables(r);return{pathString:t,queryString:r,path:o,query:a}},n.makeRequest=function(e){var t=n.parseFragment(e),r={path:t.pathString,query:t.queryString,getPath:function(e){return"undefined"==typeof e?t.path:t.path[e]},getQuery:function(e,n){var r;return"undefined"==typeof e?r=t.query:(r=t.query[e],r&&"undefined"!=typeof n&&(r=r[n])),r},getQueryLast:function(e,t){var n,i=r.getQuery(e);return n=i?i[i.length-1]:t}};return r},n.makeLink=function(e,t,n){e=jQuery.isArray(e)?e.join("/"):e;var r=jQuery.param(t||{});return n=n||"",e+(r.length>0?"?"+r:"")+(n.length>0?"#"+n:"")},n.setPath=function(e,t,n){if("object"==typeof e&&null!==e)for(var r=0,i=t.length;i>r;){var o=t[r++];if(r==i)e[o]=n;else{var a=o in e;(!a||a&&"object"!=typeof e[o]||a&&null===e[o])&&(e[o]={}),e=e[o]}}},n.getPath=function(e,t,n){for(var r=0,i=t.length,o=!0;o&&i>r&&"object"==typeof e&&null!==e;){var a=t[r++];o=a in e,o&&(e=e[a])}return o?e:n},n.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var n=0,r=t.length;r>n;){var i=t[n++];if(n==r)delete e[i];else{if(!(i in e&&"object"==typeof e[i]&&null!==e[i]))break;e=e[i]}}},n.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},n.format=function(e){for(var t,n,r=/%./g,i=0,o=[],a=0;t=r.exec(e);){n=e.substring(a,r.lastIndex-2),n.length>0&&o.push(n),a=r.lastIndex;var s=t[0][1];switch(s){case"s":case"o":i<arguments.length?o.push(arguments[i++ +1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+s+"?>")}}return o.push(e.substring(a)),o.join("")},n.formatNumber=function(e,t,n,r){var i=e,o=isNaN(t=Math.abs(t))?2:t,a=void 0===n?",":n,s=void 0===r?".":r,c=0>i?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+s:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")},n.formatSize=function(e){return e=e>=1073741824?n.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?n.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?n.formatNumber(e/1024,0)+" KiB":n.formatNumber(e,0)+" bytes"},n.bytesFromIP=function(e){return-1!==e.indexOf(".")?n.bytesFromIPv4(e):-1!==e.indexOf(":")?n.bytesFromIPv6(e):null},n.bytesFromIPv4=function(e){if(e=e.split("."),4!==e.length)return null;for(var t=n.createBuffer(),r=0;r<e.length;++r){var i=parseInt(e[r],10);if(isNaN(i))return null;t.putByte(i)}return t.getBytes()},n.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(e){return 0===e.length&&++t,!0});for(var r=2*(8-e.length+t),i=n.createBuffer(),o=0;8>o;++o)if(e[o]&&0!==e[o].length){var a=n.hexToBytes(e[o]);a.length<2&&i.putByte(0),i.putBytes(a)}else i.fillWithByte(0,r),r=0;return i.getBytes()},n.bytesToIP=function(e){return 4===e.length?n.bytesToIPv4(e):16===e.length?n.bytesToIPv6(e):null},n.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")},n.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],i=0,o=0;o<e.length;o+=2){for(var a=n.bytesToHex(e[o]+e[o+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var s=r[r.length-1],c=t.length;s&&c===s.end+1?(s.end=c,s.end-s.start>r[i].end-r[i].start&&(i=r.length-1)):r.push({start:c,end:c})}t.push(a)}if(r.length>0){var u=r[i];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),0===u.start&&t.unshift(""),7===u.end&&t.push(""))}return t.join(":")}}var o="util";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),n(forge);var a=!0;i=function(e,n){n(r,t)}}var s,c=function(e,t){t.exports=function(t){var r=s.map(function(t){return e(t)}).concat(n);if(t=t||{},t.defined=t.defined||{},t.defined[o])return t[o];t.defined[o]=!0;for(var i=0;i<r.length;++i)r[i](t);return t[o]}},u=i;(i=function(e,t){return s="string"==typeof e?t.slice(2):e.slice(2),a?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/util",["require","module"],function(){c.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t,n,r,i,o,a=!1,s=4,c=function(){a=!0,r=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),s=0;128>s;++s)e[s]=s<<1,e[s+128]=s+128<<1^283;t=new Array(256),n=new Array(256),i=new Array(4),o=new Array(4);for(var s=0;4>s;++s)i[s]=new Array(256),o[s]=new Array(256);for(var c,u,l,f,d,p,h,g=0,m=0,s=0;256>s;++s){f=m^m<<1^m<<2^m<<3^m<<4,f=f>>8^255&f^99,t[g]=f,n[f]=g,d=e[f],c=e[g],u=e[c],l=e[u],p=d<<24^f<<16^f<<8^(f^d),h=(c^u^l)<<24^(g^l)<<16^(g^u^l)<<8^(g^c^l);for(var v=0;4>v;++v)i[v][g]=p,o[v][f]=h,p=p<<24|p>>>8,h=h<<24|h>>>8;0===g?g=m=1:(g=c^e[e[e[c^l]]],m^=e[e[m]])}},u=function(e,n){for(var i,a=e.slice(0),c=1,u=a.length,l=u+6+1,f=s*l,d=u;f>d;++d)i=a[d-1],d%u===0?(i=t[i>>>16&255]<<24^t[i>>>8&255]<<16^t[255&i]<<8^t[i>>>24]^r[c]<<24,c++):u>6&&d%u===4&&(i=t[i>>>24]<<24^t[i>>>16&255]<<16^t[i>>>8&255]<<8^t[255&i]),a[d]=a[d-u]^i;if(n){for(var p,h=o[0],g=o[1],m=o[2],v=o[3],y=a.slice(0),f=a.length,d=0,b=f-s;f>d;d+=s,b-=s)if(0===d||d===f-s)y[d]=a[b],y[d+1]=a[b+3],y[d+2]=a[b+2],y[d+3]=a[b+1];else for(var w=0;s>w;++w)p=a[b+w],y[d+(3&-w)]=h[t[p>>>24]]^g[t[p>>>16&255]]^m[t[p>>>8&255]]^v[t[255&p]];a=y}return a},l=function(e,r,a,s){var c,u,l,f,d,p=e.length/4-1;s?(c=o[0],u=o[1],l=o[2],f=o[3],d=n):(c=i[0],u=i[1],l=i[2],f=i[3],d=t);var h,g,m,v,y,b,w;h=r[0]^e[0],g=r[s?3:1]^e[1],m=r[2]^e[2],v=r[s?1:3]^e[3];for(var S=3,C=1;p>C;++C)y=c[h>>>24]^u[g>>>16&255]^l[m>>>8&255]^f[255&v]^e[++S],b=c[g>>>24]^u[m>>>16&255]^l[v>>>8&255]^f[255&h]^e[++S],w=c[m>>>24]^u[v>>>16&255]^l[h>>>8&255]^f[255&g]^e[++S],v=c[v>>>24]^u[h>>>16&255]^l[g>>>8&255]^f[255&m]^e[++S],h=y,g=b,m=w;a[0]=d[h>>>24]<<24^d[g>>>16&255]<<16^d[m>>>8&255]<<8^d[255&v]^e[++S],a[s?3:1]=d[g>>>24]<<24^d[m>>>16&255]<<16^d[v>>>8&255]<<8^d[255&h]^e[++S],a[2]=d[m>>>24]<<24^d[v>>>16&255]<<16^d[h>>>8&255]<<8^d[255&g]^e[++S],a[s?1:3]=d[v>>>24]<<24^d[h>>>16&255]<<16^d[g>>>8&255]<<8^d[255&m]^e[++S]},f=function(t,n,r,i,o){function f(){if(i)for(var e=0;s>e;++e)S[e]=b.getInt32();else for(var e=0;s>e;++e)S[e]=_[e]^b.getInt32();if(l(k,S,C,i),i){for(var e=0;s>e;++e)w.putInt32(_[e]^C[e]);_=S.slice(0)}else{for(var e=0;s>e;++e)w.putInt32(C[e]);_=C}}function d(){l(k,S,C,!1);for(var e=0;s>e;++e)S[e]=b.getInt32();for(var e=0;s>e;++e){var t=S[e]^C[e];i||(S[e]=t),w.putInt32(t)}}function p(){l(k,S,C,!1);for(var e=0;s>e;++e)S[e]=b.getInt32();for(var e=0;s>e;++e)w.putInt32(S[e]^C[e]),S[e]=C[e]}function h(){l(k,S,C,!1);for(var e=s-1;e>=0;--e){if(4294967295!==S[e]){++S[e];break}S[e]=0}for(var e=0;s>e;++e)w.putInt32(b.getInt32()^C[e])}var g=null;if(a||c(),o=(o||"CBC").toUpperCase(),"string"!=typeof t||16!==t.length&&24!==t.length&&32!==t.length){if(e.util.isArray(t)&&(16===t.length||24===t.length||32===t.length))for(var m=t,t=e.util.createBuffer(),v=0;v<m.length;++v)t.putByte(m[v])}else t=e.util.createBuffer(t);if(!e.util.isArray(t)){var m=t;t=[];var y=m.length();if(16===y||24===y||32===y){y>>>=2;for(var v=0;y>v;++v)t.push(m.getInt32())}}if(!e.util.isArray(t)||4!==t.length&&6!==t.length&&8!==t.length)return g;var b,w,S,C,_,E,T,A=-1!==["CFB","OFB","CTR"].indexOf(o),I="CBC"===o,k=u(t,i&&!A),x=s<<2;if(g={output:null},"CBC"===o)T=f;else if("CFB"===o)T=d;else if("OFB"===o)T=p;else{if("CTR"!==o)throw{message:'Unsupported block cipher mode of operation: "'+o+'"'};T=h}return g.update=function(e){for(E||b.putBuffer(e);b.length()>=x||b.length()>0&&E;)T()},g.finish=function(e){var t=!0,n=b.length()%x;if(!i)if(e)t=e(x,b,i);else if(I){var r=b.length()===x?x:x-b.length();b.fillWithByte(r,r)}if(t&&(E=!0,g.update()),i&&(I&&(t=0===n),t))if(e)t=e(x,w,i);else if(I){var o=w.length(),a=w.at(o-1);a>s<<2?t=!1:w.truncate(a)}return!I&&!e&&n>0&&w.truncate(x-n),t},g.start=function(t,n){if(null===t&&(t=_.slice(0)),"string"==typeof t&&16===t.length)t=e.util.createBuffer(t);else if(e.util.isArray(t)&&16===t.length)for(var r=t,t=e.util.createBuffer(),i=0;16>i;++i)t.putByte(r[i]);if(!e.util.isArray(t)){var r=t;t=new Array(4),t[0]=r.getInt32(),t[1]=r.getInt32(),t[2]=r.getInt32(),t[3]=r.getInt32()}if(b=e.util.createBuffer(),w=n||e.util.createBuffer(),_=t.slice(0),S=new Array(s),C=new Array(s),E=!1,g.output=w,-1!==["CFB","OFB","CTR"].indexOf(o)){for(var i=0;s>i;++i)S[i]=_[i];_=null}},null!==n&&g.start(n,r),g};e.aes=e.aes||{},e.aes.startEncrypting=function(e,t,n,r){return f(e,t,n,!1,r)},e.aes.createEncryptionCipher=function(e,t){return f(e,null,null,!1,t)},e.aes.startDecrypting=function(e,t,n,r){return f(e,t,n,!0,r)},e.aes.createDecryptionCipher=function(e,t){return f(e,null,null,!0,t)},e.aes._expandKey=function(e,t){return a||c(),u(e,t)},e.aes._updateBlock=l}var n="aes";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/aes",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.pki=e.pki||{};var t=e.pki.oids=e.oids=e.oids||{};t["1.2.840.113549.1.1.1"]="rsaEncryption",t.rsaEncryption="1.2.840.113549.1.1.1",t["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",t.md5WithRSAEncryption="1.2.840.113549.1.1.4",t["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",t.sha1WithRSAEncryption="1.2.840.113549.1.1.5",t["1.2.840.113549.1.1.7"]="RSAES-OAEP",t["RSAES-OAEP"]="1.2.840.113549.1.1.7",t["1.2.840.113549.1.1.8"]="mgf1",t.mgf1="1.2.840.113549.1.1.8",t["1.2.840.113549.1.1.9"]="pSpecified",t.pSpecified="1.2.840.113549.1.1.9",t["1.2.840.113549.1.1.10"]="RSASSA-PSS",t["RSASSA-PSS"]="1.2.840.113549.1.1.10",t["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",t.sha256WithRSAEncryption="1.2.840.113549.1.1.11",t["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",t.sha384WithRSAEncryption="1.2.840.113549.1.1.12",t["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",t.sha512WithRSAEncryption="1.2.840.113549.1.1.13",t["1.3.14.3.2.7"]="desCBC",t.desCBC="1.3.14.3.2.7",t["1.3.14.3.2.26"]="sha1",t.sha1="1.3.14.3.2.26",t["2.16.840.1.101.3.4.2.1"]="sha256",t.sha256="2.16.840.1.101.3.4.2.1",t["2.16.840.1.101.3.4.2.2"]="sha384",t.sha384="2.16.840.1.101.3.4.2.2",t["2.16.840.1.101.3.4.2.3"]="sha512",t.sha512="2.16.840.1.101.3.4.2.3",t["1.2.840.113549.2.5"]="md5",t.md5="1.2.840.113549.2.5",t["1.2.840.113549.1.7.1"]="data",t.data="1.2.840.113549.1.7.1",t["1.2.840.113549.1.7.2"]="signedData",t.signedData="1.2.840.113549.1.7.2",t["1.2.840.113549.1.7.3"]="envelopedData",t.envelopedData="1.2.840.113549.1.7.3",t["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",t.signedAndEnvelopedData="1.2.840.113549.1.7.4",t["1.2.840.113549.1.7.5"]="digestedData",t.digestedData="1.2.840.113549.1.7.5",t["1.2.840.113549.1.7.6"]="encryptedData",t.encryptedData="1.2.840.113549.1.7.6",t["1.2.840.113549.1.9.1"]="emailAddress",t.emailAddress="1.2.840.113549.1.9.1",t["1.2.840.113549.1.9.2"]="unstructuredName",t.unstructuredName="1.2.840.113549.1.9.2",t["1.2.840.113549.1.9.3"]="contentType",t.contentType="1.2.840.113549.1.9.3",t["1.2.840.113549.1.9.4"]="messageDigest",t.messageDigest="1.2.840.113549.1.9.4",t["1.2.840.113549.1.9.5"]="signingTime",t.signingTime="1.2.840.113549.1.9.5",t["1.2.840.113549.1.9.6"]="counterSignature",t.counterSignature="1.2.840.113549.1.9.6",t["1.2.840.113549.1.9.7"]="challengePassword",t.challengePassword="1.2.840.113549.1.9.7",t["1.2.840.113549.1.9.8"]="unstructuredAddress",t.unstructuredAddress="1.2.840.113549.1.9.8",t["1.2.840.113549.1.9.20"]="friendlyName",t.friendlyName="1.2.840.113549.1.9.20",t["1.2.840.113549.1.9.21"]="localKeyId",t.localKeyId="1.2.840.113549.1.9.21",t["1.2.840.113549.1.9.22.1"]="x509Certificate",t.x509Certificate="1.2.840.113549.1.9.22.1",t["1.2.840.113549.1.12.10.1.1"]="keyBag",t.keyBag="1.2.840.113549.1.12.10.1.1",t["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",t.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",t["1.2.840.113549.1.12.10.1.3"]="certBag",t.certBag="1.2.840.113549.1.12.10.1.3",t["1.2.840.113549.1.12.10.1.4"]="crlBag",t.crlBag="1.2.840.113549.1.12.10.1.4",t["1.2.840.113549.1.12.10.1.5"]="secretBag",t.secretBag="1.2.840.113549.1.12.10.1.5",t["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",t.safeContentsBag="1.2.840.113549.1.12.10.1.6",t["1.2.840.113549.1.5.13"]="pkcs5PBES2",t.pkcs5PBES2="1.2.840.113549.1.5.13",t["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",t.pkcs5PBKDF2="1.2.840.113549.1.5.12",t["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",t.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",t["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",t.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",t["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",t["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",t["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",t["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",t["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",t["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",t["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",t["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",t["1.2.840.113549.3.7"]="des-EDE3-CBC",t["des-EDE3-CBC"]="1.2.840.113549.3.7",t["2.16.840.1.101.3.4.1.2"]="aes128-CBC",t["aes128-CBC"]="2.16.840.1.101.3.4.1.2",t["2.16.840.1.101.3.4.1.22"]="aes192-CBC",t["aes192-CBC"]="2.16.840.1.101.3.4.1.22",t["2.16.840.1.101.3.4.1.42"]="aes256-CBC",t["aes256-CBC"]="2.16.840.1.101.3.4.1.42",t["2.5.4.3"]="commonName",t.commonName="2.5.4.3",t["2.5.4.5"]="serialName",t.serialName="2.5.4.5",t["2.5.4.6"]="countryName",t.countryName="2.5.4.6",t["2.5.4.7"]="localityName",t.localityName="2.5.4.7",t["2.5.4.8"]="stateOrProvinceName",t.stateOrProvinceName="2.5.4.8",t["2.5.4.10"]="organizationName",t.organizationName="2.5.4.10",t["2.5.4.11"]="organizationalUnitName",t.organizationalUnitName="2.5.4.11",t["2.16.840.1.113730.1.1"]="nsCertType",t.nsCertType="2.16.840.1.113730.1.1",t["2.5.29.1"]="authorityKeyIdentifier",t["2.5.29.2"]="keyAttributes",t["2.5.29.3"]="certificatePolicies",t["2.5.29.4"]="keyUsageRestriction",t["2.5.29.5"]="policyMapping",t["2.5.29.6"]="subtreesConstraint",t["2.5.29.7"]="subjectAltName",t["2.5.29.8"]="issuerAltName",t["2.5.29.9"]="subjectDirectoryAttributes",t["2.5.29.10"]="basicConstraints",t["2.5.29.11"]="nameConstraints",t["2.5.29.12"]="policyConstraints",t["2.5.29.13"]="basicConstraints",t["2.5.29.14"]="subjectKeyIdentifier",t.subjectKeyIdentifier="2.5.29.14",t["2.5.29.15"]="keyUsage",t.keyUsage="2.5.29.15",t["2.5.29.16"]="privateKeyUsagePeriod",t["2.5.29.17"]="subjectAltName",t.subjectAltName="2.5.29.17",t["2.5.29.18"]="issuerAltName",t.issuerAltName="2.5.29.18",t["2.5.29.19"]="basicConstraints",t.basicConstraints="2.5.29.19",t["2.5.29.20"]="cRLNumber",t["2.5.29.21"]="cRLReason",t["2.5.29.22"]="expirationDate",t["2.5.29.23"]="instructionCode",t["2.5.29.24"]="invalidityDate",t["2.5.29.25"]="cRLDistributionPoints",t["2.5.29.26"]="issuingDistributionPoint",t["2.5.29.27"]="deltaCRLIndicator",t["2.5.29.28"]="issuingDistributionPoint",t["2.5.29.29"]="certificateIssuer",t["2.5.29.30"]="nameConstraints",t["2.5.29.31"]="cRLDistributionPoints",t["2.5.29.32"]="certificatePolicies",t["2.5.29.33"]="policyMappings",t["2.5.29.34"]="policyConstraints",t["2.5.29.35"]="authorityKeyIdentifier",t["2.5.29.36"]="policyConstraints",t["2.5.29.37"]="extKeyUsage",t.extKeyUsage="2.5.29.37",t["2.5.29.46"]="freshestCRL",t["2.5.29.54"]="inhibitAnyPolicy",t["1.3.6.1.5.5.7.3.1"]="serverAuth",t.serverAuth="1.3.6.1.5.5.7.3.1",t["1.3.6.1.5.5.7.3.2"]="clientAuth",t.clientAuth="1.3.6.1.5.5.7.3.2",t["1.3.6.1.5.5.7.3.3"]="codeSigning",t.codeSigning="1.3.6.1.5.5.7.3.3",t["1.3.6.1.5.5.7.3.4"]="emailProtection",t.emailProtection="1.3.6.1.5.5.7.3.4",t["1.3.6.1.5.5.7.3.8"]="timeStamping",t.timeStamping="1.3.6.1.5.5.7.3.8"}var n="oids";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/oids",["require","module"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1=e.asn1||{};t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={
NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(t,n,r,i){if(e.util.isArray(i)){for(var o=[],a=0;a<i.length;++a)void 0!==i[a]&&o.push(i[a]);i=o}return{tagClass:t,type:n,constructed:r,composed:r||e.util.isArray(i),value:i}};var n=function(e){var t=e.getByte();if(128===t)return void 0;var n,r=128&t;return n=r?e.getInt((127&t)<<3):t};t.fromDer=function(r,i){if(void 0===i&&(i=!0),"string"==typeof r&&(r=e.util.createBuffer(r)),r.length()<2)throw{message:"Too few bytes to parse DER.",bytes:r.length()};var o=r.getByte(),a=192&o,s=31&o,c=n(r);if(r.length()<c){if(i)throw{message:"Too few bytes to read ASN.1 value.",detail:r.length()+" < "+c};c=r.length()}var u,l=32===(32&o),f=l;if(!f&&a===t.Class.UNIVERSAL&&s===t.Type.BITSTRING&&c>1){var d=r.read,p=r.getByte();if(0===p){o=r.getByte();var h=192&o;if(h===t.Class.UNIVERSAL||h===t.Class.CONTEXT_SPECIFIC)try{var g=n(r);f=g===c-(r.read-d),f&&(++d,--c)}catch(m){}}r.read=d}if(f)if(u=[],void 0===c)for(;;){if(r.bytes(2)===String.fromCharCode(0,0)){r.getBytes(2);break}u.push(t.fromDer(r,i))}else for(var v=r.length();c>0;)u.push(t.fromDer(r,i)),c-=v-r.length(),v=r.length();else{if(void 0===c){if(i)throw{message:"Non-constructed ASN.1 object of indefinite length."};c=r.length()}if(s===t.Type.BMPSTRING){u="";for(var y=0;c>y;y+=2)u+=String.fromCharCode(r.getInt16())}else u=r.getBytes(c)}return t.create(a,s,l,u)},t.toDer=function(n){var r=e.util.createBuffer(),i=n.tagClass|n.type,o=e.util.createBuffer();if(n.composed){n.constructed?i|=32:o.putByte(0);for(var a=0;a<n.value.length;++a)void 0!==n.value[a]&&o.putBuffer(t.toDer(n.value[a]))}else if(n.type===t.Type.BMPSTRING)for(var a=0;a<n.value.length;++a)o.putInt16(n.value.charCodeAt(a));else o.putBytes(n.value);if(r.putByte(i),o.length()<=127)r.putByte(127&o.length());else{var s=o.length(),c="";do c+=String.fromCharCode(255&s),s>>>=8;while(s>0);r.putByte(128|c.length);for(var a=c.length-1;a>=0;--a)r.putByte(c.charCodeAt(a))}return r.putBuffer(o),r},t.oidToDer=function(t){var n=t.split("."),r=e.util.createBuffer();r.putByte(40*parseInt(n[0],10)+parseInt(n[1],10));for(var i,o,a,s,c=2;c<n.length;++c){i=!0,o=[],a=parseInt(n[c],10);do s=127&a,a>>>=7,i||(s|=128),o.push(s),i=!1;while(a>0);for(var u=o.length-1;u>=0;--u)r.putByte(o[u])}return r},t.derToOid=function(t){var n;"string"==typeof t&&(t=e.util.createBuffer(t));var r=t.getByte();n=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)r=t.getByte(),i<<=7,128&r?i+=127&r:(n+="."+(i+r),i=0);return n},t.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),o=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var c=e.charAt(10),u=10;"+"!==c&&"-"!==c&&(s=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(n,r,i),t.setUTCHours(o,a,s,0),u&&(c=e.charAt(u),"+"===c||"-"===c)){var l=parseInt(e.substr(u+1,2),10),f=parseInt(e.substr(u+4,2),10),d=60*l+f;d*=6e4,"+"===c?t.setTime(+t-d):t.setTime(+t+d)}return t},t.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),c=0,u=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var f=e.length-5,d=e.charAt(f);if("+"===d||"-"===d){var p=parseInt(e.substr(f+1,2),10),h=parseInt(e.substr(f+4,2),10);u=60*p+h,u*=6e4,"+"===d&&(u*=-1),l=!0}return"."===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(n,r,i),t.setUTCHours(o,a,s,c),t.setTime(+t+u)):(t.setFullYear(n,r,i),t.setHours(o,a,s,c)),t},t.dateToUtcTime=function(e){var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z"},t.integerToDer=function(t){var n=e.util.createBuffer();if(t>=-128&&128>t)return n.putSignedInt(t,8);if(t>=-32768&&32768>t)return n.putSignedInt(t,16);if(t>=-8388608&&8388608>t)return n.putSignedInt(t,24);if(t>=-2147483648&&2147483648>t)return n.putSignedInt(t,32);throw{message:"Integer too large; max is 32-bits.",integer:t}},t.derToInteger=function(t){"string"==typeof t&&(t=e.util.createBuffer(t));var n=8*t.length();if(n>32)throw{message:"Integer too large; max is 32-bits."};return t.getSignedInt(n)},t.validate=function(n,r,i,o){var a=!1;if(n.tagClass!==r.tagClass&&"undefined"!=typeof r.tagClass||n.type!==r.type&&"undefined"!=typeof r.type)o&&(n.tagClass!==r.tagClass&&o.push("["+r.name+'] Expected tag class "'+r.tagClass+'", got "'+n.tagClass+'"'),n.type!==r.type&&o.push("["+r.name+'] Expected type "'+r.type+'", got "'+n.type+'"'));else if(n.constructed===r.constructed||"undefined"==typeof r.constructed){if(a=!0,r.value&&e.util.isArray(r.value))for(var s=0,c=0;a&&c<r.value.length;++c)a=r.value[c].optional||!1,n.value[s]&&(a=t.validate(n.value[s],r.value[c],i,o),a?++s:r.value[c].optional&&(a=!0)),!a&&o&&o.push("["+r.name+'] Tag class "'+r.tagClass+'", type "'+r.type+'" expected value length "'+r.value.length+'", got "'+n.value.length+'"');a&&i&&(r.capture&&(i[r.capture]=n.value),r.captureAsn1&&(i[r.captureAsn1]=n))}else o&&o.push("["+r.name+'] Expected constructed "'+r.constructed+'", got "'+n.constructed+'"');return a};var r=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(n,i,o){var a="";i=i||0,o=o||2,i>0&&(a+="\n");for(var s="",c=0;i*o>c;++c)s+=" ";switch(a+=s+"Tag: ",n.tagClass){case t.Class.UNIVERSAL:a+="Universal:";break;case t.Class.APPLICATION:a+="Application:";break;case t.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case t.Class.PRIVATE:a+="Private:"}if(n.tagClass===t.Class.UNIVERSAL)switch(a+=n.type,n.type){case t.Type.NONE:a+=" (None)";break;case t.Type.BOOLEAN:a+=" (Boolean)";break;case t.Type.BITSTRING:a+=" (Bit string)";break;case t.Type.INTEGER:a+=" (Integer)";break;case t.Type.OCTETSTRING:a+=" (Octet string)";break;case t.Type.NULL:a+=" (Null)";break;case t.Type.OID:a+=" (Object Identifier)";break;case t.Type.ODESC:a+=" (Object Descriptor)";break;case t.Type.EXTERNAL:a+=" (External or Instance of)";break;case t.Type.REAL:a+=" (Real)";break;case t.Type.ENUMERATED:a+=" (Enumerated)";break;case t.Type.EMBEDDED:a+=" (Embedded PDV)";break;case t.Type.UTF8:a+=" (UTF8)";break;case t.Type.ROID:a+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:a+=" (Sequence)";break;case t.Type.SET:a+=" (Set)";break;case t.Type.PRINTABLESTRING:a+=" (Printable String)";break;case t.Type.IA5String:a+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:a+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case t.Type.BMPSTRING:a+=" (BMP String)"}else a+=n.type;if(a+="\n",a+=s+"Constructed: "+n.constructed+"\n",n.composed){for(var u=0,l="",c=0;c<n.value.length;++c)void 0!==n.value[c]&&(u+=1,l+=t.prettyPrint(n.value[c],i+1,o),c+1<n.value.length&&(l+=","));a+=s+"Sub values: "+u+l}else{if(a+=s+"Value: ",n.type===t.Type.OID){var f=t.derToOid(n.value);a+=f,e.pki&&e.pki.oids&&f in e.pki.oids&&(a+=" ("+e.pki.oids[f]+")")}if(n.type===t.Type.INTEGER)try{a+=t.derToInteger(n.value)}catch(d){a+="0x"+e.util.bytesToHex(n.value)}else a+=r.test(n.value)?"0x"+e.util.createBuffer(n.value,"utf8").toHex():0===n.value.length?"[null]":n.value}return a}}var n="asn1";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/asn1",["require","module","./util","./oids"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.md5=e.md5||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.md5=e.md.algorithms.md5=t;var n=null,r=null,i=null,o=null,a=!1,s=function(){n=String.fromCharCode(128),n+=e.util.fillString(String.fromCharCode(0),64),r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],i=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],o=new Array(64);for(var t=0;64>t;++t)o[t]=Math.floor(4294967296*Math.abs(Math.sin(t+1)));a=!0},c=function(e,t,n){for(var a,s,c,u,l,f,d,p,h=n.length();h>=64;){for(s=e.h0,c=e.h1,u=e.h2,l=e.h3,p=0;16>p;++p)t[p]=n.getInt32Le(),f=l^c&(u^l),a=s+f+o[p]+t[p],d=i[p],s=l,l=u,u=c,c+=a<<d|a>>>32-d;for(;32>p;++p)f=u^l&(c^u),a=s+f+o[p]+t[r[p]],d=i[p],s=l,l=u,u=c,c+=a<<d|a>>>32-d;for(;48>p;++p)f=c^u^l,a=s+f+o[p]+t[r[p]],d=i[p],s=l,l=u,u=c,c+=a<<d|a>>>32-d;for(;64>p;++p)f=u^(c|~l),a=s+f+o[p]+t[r[p]],d=i[p],s=l,l=u,u=c,c+=a<<d|a>>>32-d;e.h0=e.h0+s&4294967295,e.h1=e.h1+c&4294967295,e.h2=e.h2+u&4294967295,e.h3=e.h3+l&4294967295,h-=64}};t.create=function(){a||s();var t=null,r=e.util.createBuffer(),i=new Array(16),o={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0};return o.start=function(){return o.messageLength=0,r=e.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},o},o.start(),o.update=function(n,a){return"utf8"===a&&(n=e.util.encodeUtf8(n)),o.messageLength+=n.length,r.putBytes(n),c(t,i,r),(r.read>2048||0===r.length())&&r.compact(),o},o.digest=function(){var a=o.messageLength,s=e.util.createBuffer();s.putBytes(r.bytes()),s.putBytes(n.substr(0,64-(a+8)%64)),s.putInt32Le(a<<3&4294967295),s.putInt32Le(a>>>29&255);var u={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};c(u,i,s);var l=e.util.createBuffer();return l.putInt32Le(u.h0),l.putInt32Le(u.h1),l.putInt32Le(u.h2),l.putInt32Le(u.h3),l},o}}var n="md5";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/md5",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.sha1=e.sha1||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha1=e.md.algorithms.sha1=t;var n=null,r=!1,i=function(){n=String.fromCharCode(128),n+=e.util.fillString(String.fromCharCode(0),64),r=!0},o=function(e,t,n){for(var r,i,o,a,s,c,u,l,f=n.length();f>=64;){for(i=e.h0,o=e.h1,a=e.h2,s=e.h3,c=e.h4,l=0;16>l;++l)r=n.getInt32(),t[l]=r,u=s^o&(a^s),r=(i<<5|i>>>27)+u+c+1518500249+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;for(;20>l;++l)r=t[l-3]^t[l-8]^t[l-14]^t[l-16],r=r<<1|r>>>31,t[l]=r,u=s^o&(a^s),r=(i<<5|i>>>27)+u+c+1518500249+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;for(;32>l;++l)r=t[l-3]^t[l-8]^t[l-14]^t[l-16],r=r<<1|r>>>31,t[l]=r,u=o^a^s,r=(i<<5|i>>>27)+u+c+1859775393+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;for(;40>l;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,u=o^a^s,r=(i<<5|i>>>27)+u+c+1859775393+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;for(;60>l;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,u=o&a|s&(o^a),r=(i<<5|i>>>27)+u+c+2400959708+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;for(;80>l;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,u=o^a^s,r=(i<<5|i>>>27)+u+c+3395469782+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;e.h0+=i,e.h1+=o,e.h2+=a,e.h3+=s,e.h4+=c,f-=64}};t.create=function(){r||i();var t=null,a=e.util.createBuffer(),s=new Array(80),c={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0};return c.start=function(){return c.messageLength=0,a=e.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},c},c.start(),c.update=function(n,r){return"utf8"===r&&(n=e.util.encodeUtf8(n)),c.messageLength+=n.length,a.putBytes(n),o(t,s,a),(a.read>2048||0===a.length())&&a.compact(),c},c.digest=function(){var r=c.messageLength,i=e.util.createBuffer();i.putBytes(a.bytes()),i.putBytes(n.substr(0,64-(r+8)%64)),i.putInt32(r>>>29&255),i.putInt32(r<<3&4294967295);var u={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};o(u,s,i);var l=e.util.createBuffer();return l.putInt32(u.h0),l.putInt32(u.h1),l.putInt32(u.h2),l.putInt32(u.h3),l.putInt32(u.h4),l},c}}var n="sha1";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/sha1",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.sha256=e.sha256||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha256=e.md.algorithms.sha256=t;var n=null,r=!1,i=null,o=function(){n=String.fromCharCode(128),n+=e.util.fillString(String.fromCharCode(0),64),i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=!0},a=function(e,t,n){for(var r,o,a,s,c,u,l,f,d,p,h,g,m,v,y,b=n.length();b>=64;){for(l=0;16>l;++l)t[l]=n.getInt32();for(;64>l;++l)r=t[l-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,o=t[l-15],o=(o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,t[l]=r+t[l-7]+o+t[l-16]&4294967295;for(f=e.h0,d=e.h1,p=e.h2,h=e.h3,g=e.h4,m=e.h5,v=e.h6,y=e.h7,l=0;64>l;++l)s=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),c=v^g&(m^v),a=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&d|p&(f^d),r=y+s+c+i[l]+t[l],o=a+u,y=v,v=m,m=g,g=h+r&4294967295,h=p,p=d,d=f,f=r+o&4294967295;e.h0=e.h0+f&4294967295,e.h1=e.h1+d&4294967295,e.h2=e.h2+p&4294967295,e.h3=e.h3+h&4294967295,e.h4=e.h4+g&4294967295,e.h5=e.h5+m&4294967295,e.h6=e.h6+v&4294967295,e.h7=e.h7+y&4294967295,b-=64}};t.create=function(){r||o();var t=null,i=e.util.createBuffer(),s=new Array(64),c={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0};return c.start=function(){return c.messageLength=0,i=e.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},c},c.start(),c.update=function(n,r){return"utf8"===r&&(n=e.util.encodeUtf8(n)),c.messageLength+=n.length,i.putBytes(n),a(t,s,i),(i.read>2048||0===i.length())&&i.compact(),c},c.digest=function(){var r=c.messageLength,o=e.util.createBuffer();o.putBytes(i.bytes()),o.putBytes(n.substr(0,64-(r+8)%64)),o.putInt32(r>>>29&255),o.putInt32(r<<3&4294967295);var u={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};a(u,s,o);var l=e.util.createBuffer();return l.putInt32(u.h0),l.putInt32(u.h1),l.putInt32(u.h2),l.putInt32(u.h3),l.putInt32(u.h4),l.putInt32(u.h5),l.putInt32(u.h6),l.putInt32(u.h7),l},c}}var n="sha256";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/sha256",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.md=e.md||{},e.md.algorithms={md5:e.md5,sha1:e.sha1,sha256:e.sha256},e.md.md5=e.md5,e.md.sha1=e.sha1,e.md.sha256=e.sha256}var n="md";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/md",["require","module","./md5","./sha1","./sha256"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.hmac=e.hmac||{};t.create=function(){var t=null,n=null,r=null,i=null,o={};return o.start=function(o,a){if(null!==o)if("string"==typeof o){if(o=o.toLowerCase(),!(o in e.md.algorithms))throw'Unknown hash algorithm "'+o+'"';n=e.md.algorithms[o].create()}else n=o;if(null===a)a=t;else{if("string"==typeof a)a=e.util.createBuffer(a);else if(e.util.isArray(a)){var s=a;a=e.util.createBuffer();for(var c=0;c<s.length;++c)a.putByte(s[c])}var u=a.length();u>n.blockLength&&(n.start(),n.update(a.bytes()),a=n.digest()),r=e.util.createBuffer(),i=e.util.createBuffer(),u=a.length();for(var c=0;u>c;++c){var s=a.at(c);r.putByte(54^s),i.putByte(92^s)}if(u<n.blockLength)for(var s=n.blockLength-u,c=0;s>c;++c)r.putByte(54),i.putByte(92);t=a,r=r.bytes(),i=i.bytes()}n.start(),n.update(r)},o.update=function(e){n.update(e)},o.getMac=function(){var e=n.digest().bytes();return n.start(),n.update(i),n.update(e),n.digest()},o.digest=o.getMac,o}}var n="hmac";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/hmac",["require","module","./md","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e){for(var t=e.name+": ",n=[],r=0;r<e.values.length;++r)n.push(e.values[r].replace(/^(\S+\r\n)/,function(e,t){return" "+t}));t+=n.join(",")+"\r\n";for(var i=0,o=-1,r=0;r<t.length;++r,++i)if(i>65&&-1!==o){var a=t[o];","===a?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+a+t.substr(o+1),i=r-o-1,o=-1,++r}else(" "===t[r]||"	"===t[r]||","===t[r])&&(o=r);return t}function n(e){return e.replace(/^\s+/,"")}var r=e.pem=e.pem||{};r.encode=function(n,r){r=r||{};var i,o="-----BEGIN "+n.type+"-----\r\n";if(n.procType&&(i={name:"Proc-Type",values:[String(n.procType.version),n.procType.type]},o+=t(i)),n.contentDomain&&(i={name:"Content-Domain",values:[n.contentDomain]},o+=t(i)),n.dekInfo&&(i={name:"DEK-Info",values:[n.dekInfo.algorithm]},n.dekInfo.parameters&&i.values.push(n.dekInfo.parameters),o+=t(i)),n.headers)for(var a=0;a<n.headers.length;++a)o+=t(n.headers[a]);return n.procType&&(o+="\r\n"),o+=e.util.encode64(n.body,r.maxline||64)+"\r\n",o+="-----END "+n.type+"-----\r\n"},r.decode=function(t){for(var r,i=[],o=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;r=o.exec(t),r;){var c={type:r[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:e.util.decode64(r[3])};if(i.push(c),r[2]){for(var u=r[2].split(s),l=0;r&&l<u.length;){for(var f=u[l].replace(/\s+$/,""),d=l+1;d<u.length;++d){var p=u[d];if(!/\s/.test(p[0]))break;f+=p,l=d}if(r=f.match(a)){for(var h={name:r[1],values:[]},g=r[2].split(","),m=0;m<g.length;++m)h.values.push(n(g[m]));if(c.procType)if(c.contentDomain||"Content-Domain"!==h.name)if(c.dekInfo||"DEK-Info"!==h.name)c.headers.push(h);else{if(0===h.values.length)throw{message:'Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.'};c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.contentDomain=g[0]||"";else{if("Proc-Type"!==h.name)throw{message:'Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".'};if(2!==h.values.length)throw{message:'Invalid PEM formatted message. The "Proc-Type" header must have two subfields.'};c.procType={version:g[0],type:g[1]}}}++l}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw{message:'Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".'}}}if(0===i.length)throw{message:"Invalid PEM formatted message."};return i}}var n="pem";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pem",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e){for(var t,n=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,v=[],y=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w=0;m>w;w++){var S=e.getInt32(),C=e.getInt32();t=252645135&(S>>>4^C),C^=t,S^=t<<4,t=65535&(C>>>-16^S),S^=t,C^=t<<-16,t=858993459&(S>>>2^C),C^=t,S^=t<<2,t=65535&(C>>>-16^S),S^=t,C^=t<<-16,t=1431655765&(S>>>1^C),C^=t,S^=t<<1,t=16711935&(C>>>8^S),S^=t,C^=t<<8,t=1431655765&(S>>>1^C),C^=t,S^=t<<1,t=S<<8|C>>>20&240,S=C<<24|C<<8&16711680|C>>>8&65280|C>>>24&240,C=t;for(var _=0;_<y.length;_++){y[_]?(S=S<<2|S>>>26,C=C<<2|C>>>26):(S=S<<1|S>>>27,C=C<<1|C>>>27),S&=-15,C&=-15;var E=n[S>>>28]|r[S>>>24&15]|i[S>>>20&15]|o[S>>>16&15]|a[S>>>12&15]|s[S>>>8&15]|c[S>>>4&15],T=u[C>>>28]|l[C>>>24&15]|f[C>>>20&15]|d[C>>>16&15]|p[C>>>12&15]|h[C>>>8&15]|g[C>>>4&15];t=65535&(T>>>16^E),v[b++]=E^t,v[b++]=T^t<<16}}return v}var n=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],r=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],i=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],o=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],a=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],s=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],c=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],u=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696],l=function(l,f){"string"==typeof l&&(8===l.length||24===l.length)&&(l=e.util.createBuffer(l));var d,p=t(l),h=1,g=0,m=0,v=0,y=0,b=!1,w=null,S=null,C=32===p.length?3:9;d=3===C?f?[0,32,2]:[30,-2,-2]:f?[0,32,2,62,30,-2,64,96,2]:[94,62,-2,32,64,2,30,-2,-2];var _=null;return _={start:function(t,n){t?("string"==typeof t&&8===t.length&&(t=e.util.createBuffer(t)),h=1,g=t.getInt32(),v=t.getInt32()):h=0,b=!1,w=e.util.createBuffer(),S=n||e.util.createBuffer(),_.output=S},update:function(e){for(b||w.putBuffer(e);w.length()>=8;){var t,l=w.getInt32(),_=w.getInt32();1===h&&(f?(l^=g,_^=v):(m=g,y=v,g=l,v=_)),t=252645135&(l>>>4^_),_^=t,l^=t<<4,t=65535&(l>>>16^_),_^=t,l^=t<<16,t=858993459&(_>>>2^l),l^=t,_^=t<<2,t=16711935&(_>>>8^l),l^=t,_^=t<<8,t=1431655765&(l>>>1^_),_^=t,l^=t<<1,l=l<<1|l>>>31,_=_<<1|_>>>31;for(var E=0;C>E;E+=3){for(var T=d[E+1],A=d[E+2],I=d[E];I!=T;I+=A){var k=_^p[I],x=(_>>>4|_<<28)^p[I+1];t=l,l=_,_=t^(r[k>>>24&63]|o[k>>>16&63]|s[k>>>8&63]|u[63&k]|n[x>>>24&63]|i[x>>>16&63]|a[x>>>8&63]|c[63&x])}t=l,l=_,_=t}l=l>>>1|l<<31,_=_>>>1|_<<31,t=1431655765&(l>>>1^_),_^=t,l^=t<<1,t=16711935&(_>>>8^l),l^=t,_^=t<<8,t=858993459&(_>>>2^l),l^=t,_^=t<<2,t=65535&(l>>>16^_),_^=t,l^=t<<16,t=252645135&(l>>>4^_),_^=t,l^=t<<4,1===h&&(f?(g=l,v=_):(l^=m,_^=y)),S.putInt32(l),S.putInt32(_)}},finish:function(e){var t=!0;if(f)if(e)t=e(8,w,!f);else{var n=8===w.length()?8:8-w.length();w.fillWithByte(n,n)}if(t&&(b=!0,_.update()),!f&&(t=0===w.length()))if(e)t=e(8,S,!f);else{var r=S.length(),i=S.at(r-1);i>r?t=!1:S.truncate(i)}return t}}};e.des=e.des||{},e.des.startEncrypting=function(e,t,n){var r=l(e,!0);return r.start(t,n),r},e.des.createEncryptionCipher=function(e){return l(e,!0)},e.des.startDecrypting=function(e,t,n){var r=l(e,!1);return r.start(t,n),r},e.des.createDecryptionCipher=function(e){return l(e,!1)}}var n="des";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/des",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.pkcs5=e.pkcs5||{};e.pbkdf2=t.pbkdf2=function(t,n,r,i,o){("undefined"==typeof o||null===o)&&(o=e.md.sha1.create());var a=o.digestLength;if(i>4294967295*a)throw{message:"Derived key is too long."};var s=Math.ceil(i/a),c=i-(s-1)*a,u=e.hmac.create();u.start(o,t);for(var l,f,d,p="",h=1;s>=h;++h){u.start(null,null),u.update(n),u.update(e.util.int32ToBytes(h)),l=d=u.digest().getBytes();for(var g=2;r>=g;++g)u.start(null,null),u.update(d),f=u.digest().getBytes(),l=e.util.xorBytes(l,f,a),d=f;p+=s>h?l:l.substr(0,c)}return p}}var n="pbkdf2";if("function"!=typeof i){
if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pbkdf2",["require","module","./hmac","./md","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function n(t){var n="undefined"!=typeof e&&e.versions&&e.versions.node,i=null;!t.disableNativeCode&&n&&(i=r("crypto"));var o=t.prng=t.prng||{};o.create=function(e){function n(e){if(s.pools[0].messageLength>=32)return o(),e();var t=32-s.pools[0].messageLength<<5;s.seedFile(t,function(t,n){return t?e(t):(s.collect(n),o(),e(),void 0)})}function r(){if(s.pools[0].messageLength>=32)return o();var e=32-s.pools[0].messageLength<<5;s.collect(s.seedFileSync(e)),o()}function o(){var e=t.md.sha1.create();e.update(s.pools[0].digest().getBytes()),s.pools[0].start();for(var n=1,r=1;32>r;++r)n=31===n?2147483648:n<<2,n%s.reseeds===0&&(e.update(s.pools[r].digest().getBytes()),s.pools[r].start());var i=e.digest().getBytes();e.start(),e.update(i);var o=e.digest().getBytes();s.key=s.plugin.formatKey(i),s.seed=s.plugin.formatSeed(o),++s.reseeds,s.generated=0,s.time=+new Date}function a(e){var n=null;if("undefined"!=typeof window){var r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(n=function(e){return r.getRandomValues(e)})}var i=t.util.createBuffer();if(n)for(;i.length()<e;){var o=Math.max(1,Math.min(e-i.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{n(a);for(var s=0;s<a.length;++s)i.putInt32(a[s])}catch(c){if(!("undefined"!=typeof QuotaExceededError&&c instanceof QuotaExceededError))throw c}}if(i.length()<e)for(var u,l,f,d=Math.floor(65536*Math.random());i.length()<e;){l=16807*(65535&d),u=16807*(d>>16),l+=(32767&u)<<16,l+=u>>15,l=(2147483647&l)+(l>>31),d=4294967295&l;for(var s=0;3>s;++s)f=d>>>(s<<3),f^=Math.floor(256*Math.random()),i.putByte(String.fromCharCode(255&f))}return i.getBytes(e)}for(var s={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0},c=e.md,u=new Array(32),l=0;32>l;++l)u[l]=c.create();return s.pools=u,s.pool=0,s.generate=function(e,r){function i(f){if(f)return r(f);if(l.length()>=e)return r(null,l.getBytes(e));if(s.generated>=1048576){var d=+new Date;(null===s.time||d-s.time>100)&&(s.key=null)}if(null===s.key)return n(i);var p=o(s.key,s.seed);s.generated+=p.length,l.putBytes(p),s.key=c(o(s.key,a(s.seed))),s.seed=u(o(s.key,s.seed)),t.util.setImmediate(i)}if(!r)return s.generateSync(e);var o=s.plugin.cipher,a=s.plugin.increment,c=s.plugin.formatKey,u=s.plugin.formatSeed,l=t.util.createBuffer();i()},s.generateSync=function(e){for(var n=s.plugin.cipher,i=s.plugin.increment,o=s.plugin.formatKey,a=s.plugin.formatSeed,c=t.util.createBuffer();c.length()<e;){if(s.generated>=1048576){var u=+new Date;(null===s.time||u-s.time>100)&&(s.key=null)}null===s.key&&r();var l=n(s.key,s.seed);s.generated+=l.length,c.putBytes(l),s.key=o(n(s.key,i(s.seed))),s.seed=a(n(s.key,s.seed))}return c.getBytes(e)},i?(s.seedFile=function(e,t){i.randomBytes(e,function(e,n){return e?t(e):void t(null,n.toString())})},s.seedFileSync=function(e){return i.randomBytes(e).toString()}):(s.seedFile=function(e,t){try{t(null,a(e))}catch(n){t(n)}},s.seedFileSync=a),s.collect=function(e){for(var t=e.length,n=0;t>n;++n)s.pools[s.pool].update(e.substr(n,1)),s.pool=31===s.pool?0:s.pool+1},s.collectInt=function(e,t){for(var n="",r=0;t>r;r+=8)n+=String.fromCharCode(e>>r&255);s.collect(n)},s.registerWorker=function(e){function t(t){var n=t.data;n.forge&&n.forge.prng&&s.seedFile(n.forge.prng.needed,function(t,n){e.postMessage({forge:{prng:{err:t,bytes:n}}})})}e===self?s.seedFile=function(e,t){function n(e){var r=e.data;r.forge&&r.forge.prng&&(self.removeEventListener("message",n),t(r.forge.prng.err,r.forge.prng.bytes))}self.addEventListener("message",n),self.postMessage({forge:{prng:{needed:e}}})}:e.addEventListener("message",t)},s}}var o="prng";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),n(forge);var a=!0;i=function(e,n){n(r,t)}}var s,c=function(e,t){t.exports=function(t){var r=s.map(function(t){return e(t)}).concat(n);if(t=t||{},t.defined=t.defined||{},t.defined[o])return t[o];t.defined[o]=!0;for(var i=0;i<r.length;++i)r[i](t);return t[o]}},u=i;(i=function(e,t){return s="string"==typeof e?t.slice(2):e.slice(2),a?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/prng",["require","module","./md","./util"],function(){c.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function n(t){t.random&&t.random.getBytes||!function(n){var r={},i=new Array(4),o=t.util.createBuffer();r.formatKey=function(e){var n=t.util.createBuffer(e);return e=new Array(4),e[0]=n.getInt32(),e[1]=n.getInt32(),e[2]=n.getInt32(),e[3]=n.getInt32(),t.aes._expandKey(e,!1)},r.formatSeed=function(e){var n=t.util.createBuffer(e);return e=new Array(4),e[0]=n.getInt32(),e[1]=n.getInt32(),e[2]=n.getInt32(),e[3]=n.getInt32(),e},r.cipher=function(e,n){return t.aes._updateBlock(e,n,i,!1),o.putInt32(i[0]),o.putInt32(i[1]),o.putInt32(i[2]),o.putInt32(i[3]),o.getBytes()},r.increment=function(e){return++e[3],e},r.md=t.md.sha1;var a=t.prng.create(r),s="undefined"!=typeof e&&e.versions&&e.versions.node,c=null;if("undefined"!=typeof window){var u=window.crypto||window.msCrypto;u&&u.getRandomValues&&(c=function(e){return u.getRandomValues(e)})}if(t.disableNativeCode||!s&&!c){if("undefined"==typeof window||void 0===window.document,a.collectInt(+new Date,32),"undefined"!=typeof navigator){var l="";for(var f in navigator)try{"string"==typeof navigator[f]&&(l+=navigator[f])}catch(d){}a.collect(l),l=null}n&&(n().mousemove(function(e){a.collectInt(e.clientX,16),a.collectInt(e.clientY,16)}),n().keypress(function(e){a.collectInt(e.charCode,8)}))}if(t.random)for(var f in a)t.random[f]=a[f];else t.random=a;t.random.getBytes=function(e,n){return t.random.generate(e,n)},t.random.getBytesSync=function(e){return t.random.generate(e)}}("undefined"!=typeof jQuery?jQuery:null)}var o="random";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),n(forge);var a=!0;i=function(e,n){n(r,t)}}var s,c=function(e,t){t.exports=function(t){var r=s.map(function(t){return e(t)}).concat(n);if(t=t||{},t.defined=t.defined||{},t.defined[o])return t[o];t.defined[o]=!0;for(var i=0;i<r.length;++i)r[i](t);return t[o]}},u=i;(i=function(e,t){return s="string"==typeof e?t.slice(2):e.slice(2),a?(delete i,u.apply(null,Array.prototype.slice.call(arguments,0))):(i=u,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/random",["require","module","./aes","./md","./prng","./util"],function(){c.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],n=[1,2,3,5],r=function(e,t){return e<<t&65535|(65535&e)>>16-t},i=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.rc2=e.rc2||{},e.rc2.expandKey=function(n,r){"string"==typeof n&&(n=e.util.createBuffer(n)),r=r||128;var i,o=n,a=n.length(),s=r,c=Math.ceil(s/8),u=255>>(7&s);for(i=a;128>i;i++)o.putByte(t[o.at(i-1)+o.at(i-a)&255]);for(o.setAt(128-c,t[o.at(128-c)&u]),i=127-c;i>=0;i--)o.setAt(i,t[o.at(i+1)^o.at(i+c)]);return o};var o=function(t,o,a){var s,c,u,l,f=!1,d=null,p=null,h=null,g=[];for(t=e.rc2.expandKey(t,o),u=0;64>u;u++)g.push(t.getInt16Le());a?(s=function(e){for(u=0;4>u;u++)e[u]+=g[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),e[u]=r(e[u],n[u]),l++},c=function(e){for(u=0;4>u;u++)e[u]+=g[63&e[(u+3)%4]]}):(s=function(e){for(u=3;u>=0;u--)e[u]=i(e[u],n[u]),e[u]-=g[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),l--},c=function(e){for(u=3;u>=0;u--)e[u]-=g[63&e[(u+3)%4]]});var m=function(e){var t=[];for(u=0;4>u;u++){var n=d.getInt16Le();null!==h&&(a?n^=h.getInt16Le():h.putInt16Le(n)),t.push(65535&n)}l=a?0:63;for(var r=0;r<e.length;r++)for(var i=0;i<e[r][0];i++)e[r][1](t);for(u=0;4>u;u++)null!==h&&(a?h.putInt16Le(t[u]):t[u]^=h.getInt16Le()),p.putInt16Le(t[u])},v=null;return v={start:function(t,n){t&&"string"==typeof t&&(t=e.util.createBuffer(t)),f=!1,d=e.util.createBuffer(),p=n||new e.util.createBuffer,h=t,v.output=p},update:function(e){for(f||d.putBuffer(e);d.length()>=8;)m([[5,s],[1,c],[6,s],[1,c],[5,s]])},finish:function(e){var t=!0;if(a)if(e)t=e(8,d,!a);else{var n=8===d.length()?8:8-d.length();d.fillWithByte(n,n)}if(t&&(f=!0,v.update()),!a&&(t=0===d.length()))if(e)t=e(8,p,!a);else{var r=p.length(),i=p.at(r-1);i>r?t=!1:p.truncate(i)}return t}}};e.rc2.startEncrypting=function(t,n,r){var i=e.rc2.createEncryptionCipher(t,128);return i.start(n,r),i},e.rc2.createEncryptionCipher=function(e,t){return o(e,t,!0)},e.rc2.startDecrypting=function(t,n,r){var i=e.rc2.createDecryptionCipher(t,128);return i.start(n,r),i},e.rc2.createDecryptionCipher=function(e,t){return o(e,t,!1)}}var n="rc2";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/rc2",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,n){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function n(){return new t(null)}function r(e,t,n,r,i,o){for(;--o>=0;){var a=t*this.data[e++]+n.data[r]+i;i=Math.floor(a/67108864),n.data[r++]=67108863&a}return i}function i(e,t,n,r,i,o){for(var a=32767&t,s=t>>15;--o>=0;){var c=32767&this.data[e],u=this.data[e++]>>15,l=s*c+u*a;c=a*c+((32767&l)<<15)+n.data[r]+(1073741823&i),i=(c>>>30)+(l>>>15)+s*u+(i>>>30),n.data[r++]=1073741823&c}return i}function o(e,t,n,r,i,o){for(var a=16383&t,s=t>>14;--o>=0;){var c=16383&this.data[e],u=this.data[e++]>>14,l=s*c+u*a;c=a*c+((16383&l)<<14)+n.data[r]+i,i=(c>>28)+(l>>14)+s*u,n.data[r++]=268435455&c}return i}function a(e){return ot.charAt(e)}function s(e,t){var n=at[e.charCodeAt(t)];return null==n?-1:n}function c(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function u(e){this.t=1,this.s=0>e?-1:0,e>0?this.data[0]=e:-1>e?this.data[0]=e+this.DV:this.t=0}function l(e){var t=n();return t.fromInt(e),t}function f(e,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(e,n);r=2}this.t=0,this.s=0;for(var i=e.length,o=!1,a=0;--i>=0;){var c=8==r?255&e[i]:s(e,i);0>c?"-"==e.charAt(i)&&(o=!0):(o=!1,0==a?this.data[this.t++]=c:a+r>this.DB?(this.data[this.t-1]|=(c&(1<<this.DB-a)-1)<<a,this.data[this.t++]=c>>this.DB-a):this.data[this.t-1]|=c<<a,a+=r,a>=this.DB&&(a-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&t.ZERO.subTo(this,this)}function d(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function p(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,c=this.DB-s*this.DB%t;if(s-->0)for(c<this.DB&&(n=this.data[s]>>c)>0&&(i=!0,o=a(n));s>=0;)t>c?(n=(this.data[s]&(1<<c)-1)<<t-c,n|=this.data[--s]>>(c+=this.DB-t)):(n=this.data[s]>>(c-=t)&r,0>=c&&(c+=this.DB,--s)),n>0&&(i=!0),i&&(o+=a(n));return i?o:"0"}function h(){var e=n();return t.ZERO.subTo(this,e),e}function g(){return this.s<0?this.negate():this}function m(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this.data[n]-e.data[n]))return t;return 0}function v(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function y(){return this.t<=0?0:this.DB*(this.t-1)+v(this.data[this.t-1]^this.s&this.DM)}function b(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s}function w(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s}function S(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t.data[n+a+1]=this.data[n]>>i|s,s=(this.data[n]&o)<<r;for(n=a-1;n>=0;--n)t.data[n]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function C(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var a=n+1;a<this.t;++a)t.data[a-n-1]|=(this.data[a]&o)<<i,t.data[a-n]=this.data[a]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}function _(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);i>n;)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=0>r?-1:0,-1>r?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()}function E(e,n){var r=this.abs(),i=e.abs(),o=r.t;for(n.t=o+i.t;--o>=0;)n.data[o]=0;for(o=0;o<i.t;++o)n.data[o+r.t]=r.am(0,i.data[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)}function T(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()}function A(e,r,i){var o=e.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=r&&r.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var s=n(),c=this.s,u=e.s,l=this.DB-v(o.data[o.t-1]);l>0?(o.lShiftTo(l,s),a.lShiftTo(l,i)):(o.copyTo(s),a.copyTo(i));var f=s.t,d=s.data[f-1];if(0!=d){var p=d*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),h=this.FV/p,g=(1<<this.F1)/p,m=1<<this.F2,y=i.t,b=y-f,w=null==r?n():r;for(s.dlShiftTo(b,w),i.compareTo(w)>=0&&(i.data[i.t++]=1,i.subTo(w,i)),t.ONE.dlShiftTo(f,w),w.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--b>=0;){var S=i.data[--y]==d?this.DM:Math.floor(i.data[y]*h+(i.data[y-1]+m)*g);if((i.data[y]+=s.am(0,S,i,b,0,f))<S)for(s.dlShiftTo(b,w),i.subTo(w,i);i.data[y]<--S;)i.subTo(w,i)}null!=r&&(i.drShiftTo(f,r),c!=u&&t.ZERO.subTo(r,r)),i.t=f,i.clamp(),l>0&&i.rShiftTo(l,i),0>c&&t.ZERO.subTo(i,i)}}}function I(e){var r=n();return this.abs().divRemTo(e,null,r),this.s<0&&r.compareTo(t.ZERO)>0&&e.subTo(r,r),r}function k(e){this.m=e}function x(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function B(e){return e}function N(e){e.divRemTo(this.m,null,e)}function D(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function R(e,t){e.squareTo(t),this.reduce(t)}function j(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function $(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function L(e){var r=n();return e.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),e.s<0&&r.compareTo(t.ZERO)>0&&this.m.subTo(r,r),r}function M(e){var t=n();return e.copyTo(t),this.reduce(t),t}function O(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e.data[t],r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function P(e,t){e.squareTo(t),this.reduce(t)}function U(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function F(){return 0==(this.t>0?1&this.data[0]:this.s)}function V(e,r){if(e>4294967295||1>e)return t.ONE;var i=n(),o=n(),a=r.convert(this),s=v(e)-1;for(a.copyTo(i);--s>=0;)if(r.sqrTo(i,o),(e&1<<s)>0)r.mulTo(o,a,i);else{var c=i;i=o,o=c}return r.revert(i)}function z(e,t){var n;return n=256>e||t.isEven()?new k(t):new $(t),this.exp(e,n)}function q(){var e=n();return this.copyTo(e),e}function H(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function G(){return 0==this.t?this.s:this.data[0]<<24>>24}function K(){return 0==this.t?this.s:this.data[0]<<16>>16}function W(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Y(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function X(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=l(r),o=n(),a=n(),s="";for(this.divRemTo(i,o,a);o.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,o.divRemTo(i,o,a);return a.intValue().toString(e)+s}function Z(e,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),i=Math.pow(n,r),o=!1,a=0,c=0,u=0;u<e.length;++u){var l=s(e,u);0>l?"-"==e.charAt(u)&&0==this.signum()&&(o=!0):(c=n*c+l,++a>=r&&(this.dMultiply(i),this.dAddOffset(c,0),a=0,c=0))}a>0&&(this.dMultiply(Math.pow(n,a)),this.dAddOffset(c,0)),o&&t.ZERO.subTo(this,this)}function Q(e,n,r){if("number"==typeof n)if(2>e)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),ae,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var i=new Array,o=7&e;i.length=(e>>3)+1,n.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function J(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-->0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)8>r?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,0>=r&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function ee(e){return 0==this.compareTo(e)}function te(e){return this.compareTo(e)<0?this:e}function ne(e){return this.compareTo(e)>0?this:e}function re(e,t,n){var r,i,o=Math.min(e.t,this.t);for(r=0;o>r;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){for(i=e.s&this.DM,r=o;r<this.t;++r)n.data[r]=t(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<e.t;++r)n.data[r]=t(i,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function ie(e,t){return e&t}function oe(e){var t=n();return this.bitwiseTo(e,ie,t),t}function ae(e,t){return e|t}function se(e){var t=n();return this.bitwiseTo(e,ae,t),t}function ce(e,t){return e^t}function ue(e){var t=n();return this.bitwiseTo(e,ce,t),t}function le(e,t){return e&~t}function fe(e){var t=n();return this.bitwiseTo(e,le,t),t}function de(){for(var e=n(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function pe(e){var t=n();return 0>e?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function he(e){var t=n();return 0>e?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function ge(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function me(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+ge(this.data[e]);return this.s<0?this.t*this.DB:-1}function ve(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function ye(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=ve(this.data[n]^t);return e}function be(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)}function we(e,n){var r=t.ONE.shiftLeft(e);return this.bitwiseTo(r,n,r),r}function Se(e){return this.changeBit(e,ae)}function Ce(e){return this.changeBit(e,le)}function _e(e){return this.changeBit(e,ce)}function Ee(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);i>n;)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=0>r?-1:0,r>0?t.data[n++]=r:-1>r&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()}function Te(e){var t=n();return this.addTo(e,t),t}function Ae(e){var t=n();return this.subTo(e,t),t}function Ie(e){var t=n();return this.multiplyTo(e,t),t}function ke(e){var t=n();return this.divRemTo(e,t,null),t}function xe(e){var t=n();return this.divRemTo(e,null,t),t}function Be(e){var t=n(),r=n();return this.divRemTo(e,t,r),new Array(t,r)}function Ne(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function De(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Re(){}function je(e){return e}function $e(e,t,n){e.multiplyTo(t,n)}function Le(e,t){e.squareTo(t)}function Me(e){return this.exp(e,new Re)}function Oe(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;i>r;++r)n.data[r+this.t]=this.am(0,e.data[r],n,r,0,this.t);for(i=Math.min(e.t,t);i>r;++r)this.am(0,e.data[r],n,r,0,t-r);n.clamp()}function Pe(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function Ue(e){this.r2=n(),this.q3=n(),t.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Fe(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t}function Ve(e){return e}function ze(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function qe(e,t){e.squareTo(t),this.reduce(t)}function He(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function Ge(e,t){var r,i,o=e.bitLength(),a=l(1);if(0>=o)return a;r=18>o?1:48>o?3:144>o?4:768>o?5:6,i=8>o?new k(t):t.isEven()?new Ue(t):new $(t);var s=new Array,c=3,u=r-1,f=(1<<r)-1;if(s[1]=i.convert(this),r>1){var d=n();for(i.sqrTo(s[1],d);f>=c;)s[c]=n(),i.mulTo(d,s[c-2],s[c]),c+=2}var p,h,g=e.t-1,m=!0,y=n();for(o=v(e.data[g])-1;g>=0;){for(o>=u?p=e.data[g]>>o-u&f:(p=(e.data[g]&(1<<o+1)-1)<<u-o,g>0&&(p|=e.data[g-1]>>this.DB+o-u)),c=r;0==(1&p);)p>>=1,--c;if((o-=c)<0&&(o+=this.DB,--g),m)s[p].copyTo(a),m=!1;else{for(;c>1;)i.sqrTo(a,y),i.sqrTo(y,a),c-=2;c>0?i.sqrTo(a,y):(h=a,a=y,y=h),i.mulTo(y,s[p],a)}for(;g>=0&&0==(e.data[g]&1<<o);)i.sqrTo(a,y),h=a,a=y,y=h,--o<0&&(o=this.DB-1,--g)}return i.revert(a)}function Ke(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),o=n.getLowestSetBit();if(0>o)return t;for(o>i&&(o=i),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function We(e){if(0>=e)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n}function Ye(e){var n=e.isEven();if(this.isEven()&&n||0==e.signum())return t.ZERO;for(var r=e.clone(),i=this.clone(),o=l(1),a=l(0),s=l(0),c=l(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),n?(s.isEven()&&c.isEven()||(s.addTo(this,s),c.subTo(e,c)),s.rShiftTo(1,s)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(i)>=0?(r.subTo(i,r),n&&o.subTo(s,o),a.subTo(c,a)):(i.subTo(r,i),n&&s.subTo(o,s),c.subTo(a,c))}return 0!=i.compareTo(t.ONE)?t.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c}function Xe(e){var t,n=this.abs();if(1==n.t&&n.data[0]<=st[st.length-1]){for(t=0;t<st.length;++t)if(n.data[0]==st[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<st.length;){for(var r=st[t],i=t+1;i<st.length&&ct>r;)r*=st[i++];for(r=n.modInt(r);i>t;)if(r%st[t++]==0)return!1}return n.millerRabin(e)}function Ze(e){var n=this.subtract(t.ONE),r=n.getLowestSetBit();if(0>=r)return!1;for(var i,o=n.shiftRight(r),a=Qe(),s=0;e>s;++s){do i=new t(this.bitLength(),a);while(i.compareTo(t.ONE)<=0||i.compareTo(n)>=0);var c=i.modPow(o,this);if(0!=c.compareTo(t.ONE)&&0!=c.compareTo(n)){for(var u=1;u++<r&&0!=c.compareTo(n);)if(c=c.modPowInt(2,this),0==c.compareTo(t.ONE))return!1;if(0!=c.compareTo(n))return!1}}return!0}function Qe(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(255*Math.random())}}}var Je,et=0xdeadbeefcafe,tt=15715070==(16777215&et);"undefined"==typeof navigator?(t.prototype.am=o,Je=28):tt&&"Microsoft Internet Explorer"==navigator.appName?(t.prototype.am=i,Je=30):tt&&"Netscape"!=navigator.appName?(t.prototype.am=r,Je=26):(t.prototype.am=o,Je=28),t.prototype.DB=Je,t.prototype.DM=(1<<Je)-1,t.prototype.DV=1<<Je;var nt=52;t.prototype.FV=Math.pow(2,nt),t.prototype.F1=nt-Je,t.prototype.F2=2*Je-nt;var rt,it,ot="0123456789abcdefghijklmnopqrstuvwxyz",at=new Array;for(rt="0".charCodeAt(0),it=0;9>=it;++it)at[rt++]=it;for(rt="a".charCodeAt(0),it=10;36>it;++it)at[rt++]=it;for(rt="A".charCodeAt(0),it=10;36>it;++it)at[rt++]=it;k.prototype.convert=x,k.prototype.revert=B,k.prototype.reduce=N,k.prototype.mulTo=D,k.prototype.sqrTo=R,$.prototype.convert=L,$.prototype.revert=M,$.prototype.reduce=O,$.prototype.mulTo=U,$.prototype.sqrTo=P,t.prototype.copyTo=c,t.prototype.fromInt=u,t.prototype.fromString=f,t.prototype.clamp=d,t.prototype.dlShiftTo=b,t.prototype.drShiftTo=w,t.prototype.lShiftTo=S,t.prototype.rShiftTo=C,t.prototype.subTo=_,t.prototype.multiplyTo=E,t.prototype.squareTo=T,t.prototype.divRemTo=A,t.prototype.invDigit=j,t.prototype.isEven=F,t.prototype.exp=V,t.prototype.toString=p,t.prototype.negate=h,t.prototype.abs=g,t.prototype.compareTo=m,t.prototype.bitLength=y,t.prototype.mod=I,t.prototype.modPowInt=z,t.ZERO=l(0),t.ONE=l(1),Re.prototype.convert=je,Re.prototype.revert=je,Re.prototype.mulTo=$e,Re.prototype.sqrTo=Le,Ue.prototype.convert=Fe,Ue.prototype.revert=Ve,Ue.prototype.reduce=ze,Ue.prototype.mulTo=He,Ue.prototype.sqrTo=qe;var st=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ct=(1<<26)/st[st.length-1];t.prototype.chunkSize=W,t.prototype.toRadix=X,t.prototype.fromRadix=Z,t.prototype.fromNumber=Q,t.prototype.bitwiseTo=re,t.prototype.changeBit=we,t.prototype.addTo=Ee,t.prototype.dMultiply=Ne,t.prototype.dAddOffset=De,t.prototype.multiplyLowerTo=Oe,t.prototype.multiplyUpperTo=Pe,t.prototype.modInt=We,t.prototype.millerRabin=Ze,t.prototype.clone=q,t.prototype.intValue=H,t.prototype.byteValue=G,t.prototype.shortValue=K,t.prototype.signum=Y,t.prototype.toByteArray=J,t.prototype.equals=ee,t.prototype.min=te,t.prototype.max=ne,t.prototype.and=oe,t.prototype.or=se,t.prototype.xor=ue,t.prototype.andNot=fe,t.prototype.not=de,t.prototype.shiftLeft=pe,t.prototype.shiftRight=he,t.prototype.getLowestSetBit=me,t.prototype.bitCount=ye,t.prototype.testBit=be,t.prototype.setBit=Se,t.prototype.clearBit=Ce,t.prototype.flipBit=_e,t.prototype.add=Te,t.prototype.subtract=Ae,t.prototype.multiply=Ie,t.prototype.divide=ke,t.prototype.remainder=xe,t.prototype.divideAndRemainder=Be,t.prototype.modPow=Ge,t.prototype.modInverse=Ye,t.prototype.pow=Me,t.prototype.gcd=Ke,t.prototype.isProbablePrime=Xe,e.jsbn=e.jsbn||{},e.jsbn.BigInteger=t}var n="jsbn";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/jsbn",["require","module"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,n){for(var r="",i=Math.ceil(t/n.digestLength),o=0;i>o;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);n.start(),n.update(e+a),r+=n.digest().getBytes()}return r.substring(0,t)}var n=e.pkcs1=e.pkcs1||{};n.encode_rsa_oaep=function(n,r,i){var o=void 0,a=void 0,s=void 0;"string"==typeof i?(o=i,a=arguments[3]||void 0,s=arguments[4]||void 0):i&&(o=i.label||void 0,a=i.seed||void 0,s=i.md||void 0),s?s.start():s=e.md.sha1.create();var c=Math.ceil(n.n.bitLength()/8),u=c-2*s.digestLength-2;if(r.length>u)throw{message:"RSAES-OAEP input message length is too long.",length:r.length,maxLength:u};o||(o=""),s.update(o,"raw");for(var l=s.digest(),f="",d=u-r.length,p=0;d>p;p++)f+="\x00";var h=l.getBytes()+f+""+r;if(a){if(a.length!==s.digestLength)throw{message:"Invalid RSAES-OAEP seed. The seed length must match the digest length.",seedLength:a.length,digestLength:s.digestLength}}else a=e.random.getBytes(s.digestLength);var g=t(a,c-s.digestLength-1,s),m=e.util.xorBytes(h,g,h.length),v=t(m,s.digestLength,s),y=e.util.xorBytes(a,v,a.length);return"\x00"+y+m},n.decode_rsa_oaep=function(n,r,i){var o=void 0,a=void 0;"string"==typeof i?(o=i,a=arguments[3]||void 0):i&&(o=i.label||void 0,a=i.md||void 0);var s=Math.ceil(n.n.bitLength()/8);if(r.length!==s)throw{message:"RSAES-OAEP encoded message length is invalid.",length:r.length,expectedLength:s};if(void 0===a?a=e.md.sha1.create():a.start(),s<2*a.digestLength+2)throw{message:"RSAES-OAEP key is too short for the hash function."};o||(o=""),a.update(o,"raw");for(var c=a.digest().getBytes(),u=r.charAt(0),l=r.substring(1,a.digestLength+1),f=r.substring(1+a.digestLength),d=t(f,a.digestLength,a),p=e.util.xorBytes(l,d,l.length),h=t(p,s-a.digestLength-1,a),g=e.util.xorBytes(f,h,f.length),m=g.substring(0,a.digestLength),v="\x00"!==u,y=0;y<a.digestLength;++y)v|=c.charAt(y)!==m.charAt(y);
for(var b=1,w=a.digestLength,S=a.digestLength;S<g.length;S++){var C=g.charCodeAt(S),_=1&C^1,E=b?65534:0;v|=C&E,b&=_,w+=b}if(v||1!==g.charCodeAt(w))throw{message:"Invalid RSAES-OAEP padding."};return g.substring(w+1)}}var n="pkcs1";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs1",["require","module","./util","./random","./sha1"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,n,r){var i=e.util.createBuffer(),o=Math.ceil(n.n.bitLength()/8);if(t.length>o-11)throw{message:"Message is too long for PKCS#1 v1.5 padding.",length:t.length,max:o-11};i.putByte(0),i.putByte(r);var a,s=o-3-t.length;if(0===r||1===r){a=0===r?0:255;for(var c=0;s>c;++c)i.putByte(a)}else for(;s>0;){for(var u=0,l=e.random.getBytes(s),c=0;s>c;++c)a=l.charCodeAt(c),0===a?++u:i.putByte(a);s=u}return i.putByte(0),i.putBytes(t),i}function n(t,n,r,i){var o=Math.ceil(n.n.bitLength()/8),a=e.util.createBuffer(t),s=a.getByte(),c=a.getByte();if(0!==s||r&&0!==c&&1!==c||!r&&2!=c||r&&0===c&&"undefined"==typeof i)throw{message:"Encryption block is invalid."};var u=0;if(0===c){u=o-3-i;for(var l=0;u>l;++l)if(0!==a.getByte())throw{message:"Encryption block is invalid."}}else if(1===c)for(u=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++u}else if(2===c)for(u=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++u}var f=a.getByte();if(0!==f||u!==o-3-a.length())throw{message:"Encryption block is invalid."};return a.getBytes()}function r(t,n,r){function i(){o(t.pBits,function(e,n){return e?r(e):(t.p=n,void o(t.qBits,s))})}function o(e,n){function r(){var n=e-1,r=new a(e,t.rng);return r.testBit(n)||r.bitwiseTo(a.ONE.shiftLeft(n),h,r),r.dAddOffset(31-r.mod(p).byteValue(),0),r}function i(i){if(!g){--c;var s=i.data;if(s.found){for(var l=0;l<o.length;++l)o[l].terminate();return g=!0,n(null,new a(s.prime,16))}u.bitLength()>e&&(u=r());var p=u.toString(16);i.target.postMessage({e:t.eInt,hex:p,workLoad:f}),u.dAddOffset(d,0)}}for(var o=[],s=0;l>s;++s)o[s]=new Worker("./forge/prime.worker.js");for(var c=l,u=r(),s=0;l>s;++s)o[s].addEventListener("message",i);var g=!1}function s(e,n){if(t.q=n,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p1=t.p.subtract(a.ONE),t.q1=t.q.subtract(a.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(a.ONE))return t.p=t.q=null,void i();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void o(t.qBits,s);var l=t.e.modInverse(t.phi);t.keys={privateKey:c.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:c.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}function u(){return c.rsa.stepKeyPairGenerationState(t,10)?r(null,t.keys):void e.util.setImmediate(u)}if("function"==typeof n&&(r=n,n={}),"undefined"==typeof Worker)return u();var l=n.workers||2,f=n.workLoad||100,d=30*f/8,p=(n.workerScript||"forge/prime.worker.js",new a(null));p.fromInt(30);var h=function(e,t){return e|t};i()}function i(t){var n=t.toString(16);return n[0]>="8"&&(n="00"+n),e.util.hexToBytes(n)}function o(e){return 100>=e?27:150>=e?18:200>=e?15:250>=e?12:300>=e?9:350>=e?8:400>=e?7:500>=e?6:600>=e?5:800>=e?4:1250>=e?3:2}if("undefined"==typeof a)var a=e.jsbn.BigInteger;var s=e.asn1;e.pki=e.pki||{},e.pki.rsa=e.rsa=e.rsa||{};var c=e.pki,u=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},f={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},d={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},p=e.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},h=function(e){var t;if(e.algorithm in c.oids){t=c.oids[e.algorithm];var n=s.oidToDer(t).getBytes(),r=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);i.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,n)),i.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var o=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e.digest().getBytes());return r.value.push(i),r.value.push(o),s.toDer(r).getBytes()}throw{message:"Unknown message digest algorithm.",algorithm:e.algorithm}},g=function(e,t,n){var r;if(n)r=e.modPow(t.e,t.n);else if(t.p&&t.q){t.dP||(t.dP=t.d.mod(t.p.subtract(a.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(a.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));for(var i=e.mod(t.p).modPow(t.dP,t.p),o=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(o)<0;)i=i.add(t.p);r=i.subtract(o).multiply(t.qInv).mod(t.p).multiply(t.q).add(o)}else r=e.modPow(t.d,t.n);return r};c.rsa.encrypt=function(n,r,i){var o,s=i,c=Math.ceil(r.n.bitLength()/8);i!==!1&&i!==!0?(s=2===i,o=t(n,r,i)):(o=e.util.createBuffer(),o.putBytes(n));for(var u=new a(o.toHex(),16),l=g(u,r,s),f=l.toString(16),d=e.util.createBuffer(),p=c-Math.ceil(f.length/2);p>0;)d.putByte(0),--p;return d.putBytes(e.util.hexToBytes(f)),d.getBytes()},c.rsa.decrypt=function(t,r,i,o){var s=Math.ceil(r.n.bitLength()/8);if(t.length!==s)throw{message:"Encrypted message length is invalid.",length:t.length,expected:s};var c=new a(e.util.createBuffer(t).toHex(),16);if(c.compareTo(r.n)>=0)throw{message:"Encrypted message is invalid."};for(var u=g(c,r,i),l=u.toString(16),f=e.util.createBuffer(),d=s-Math.ceil(l.length/2);d>0;)f.putByte(0),--d;return f.putBytes(e.util.hexToBytes(l)),o!==!1?n(f.getBytes(),r,i):f.getBytes()},c.rsa.createKeyPairGenerationState=function(t,n){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048;var r={nextBytes:function(t){for(var n=e.random.getBytes(t.length),r=0;r<t.length;++r)t[r]=n.charCodeAt(r)}},i={state:0,bits:t,rng:r,eInt:n||65537,e:new a(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null};return i.e.fromInt(i.eInt),i},c.rsa.stepKeyPairGenerationState=function(e,t){var n=new a(null);n.fromInt(30);for(var r,i=0,s=function(e,t){return e|t},l=+new Date,f=0;null===e.keys&&(0>=t||t>f);){if(0===e.state){var d=null===e.p?e.pBits:e.qBits,p=d-1;0===e.pqState?(e.num=new a(d,e.rng),e.num.testBit(p)||e.num.bitwiseTo(a.ONE.shiftLeft(p),s,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),i=0,++e.pqState):1===e.pqState?e.num.bitLength()>d?e.pqState=0:e.num.isProbablePrime(o(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(u[i++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(a.ONE).gcd(e.e).compareTo(a.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(a.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var h=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,h,e.p,e.q,h.mod(e.p1),h.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)}}r=+new Date,f+=r-l,l=r}return null!==e.keys},c.rsa.generateKeyPair=function(e,t,n,i){1===arguments.length?"object"==typeof e?(n=e,e=void 0):"function"==typeof e&&(i=e,e=void 0):2===arguments.length?("number"==typeof e?"function"==typeof t?i=t:n=t:(n=e,i=t,e=void 0),t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof n&&(i=n,n=void 0):(i=n,n=t,t=void 0)),n=n||{},void 0===e&&(e=n.bits||2048),void 0===t&&(t=n.e||65537);var o=c.rsa.createKeyPairGenerationState(e,t);return i?void r(o,n,i):(c.rsa.stepKeyPairGenerationState(o,0),o.keys)},c.setRsaPublicKey=c.rsa.setPublicKey=function(r,i){var o={n:r,e:i};return o.encrypt=function(n,r,i){if("string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===r)r={encode:function(e,n,r){return t(e,n,2).getBytes()}};else if("RSA-OAEP"===r||"RSAES-OAEP"===r)r={encode:function(t,n){return e.pkcs1.encode_rsa_oaep(n,t,i)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(r))throw{message:'Unsupported encryption scheme: "'+r+'".'};r={encode:function(e){return e}}}var a=r.encode(n,o,!0);return c.rsa.encrypt(a,o,!0)},o.verify=function(e,t,r){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===r?r={verify:function(e,t){t=n(t,o,!0);var r=s.fromDer(t);return e===r.value[1].value}}:("NONE"===r||"NULL"===r||null===r)&&(r={verify:function(e,t){return t=n(t,o,!0),e===t}});var i=c.rsa.decrypt(t,o,!0,!1);return r.verify(e,i,o.n.bitLength())},o},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(t,r,i,o,a,s,u,l){var f={n:t,e:r,d:i,p:o,q:a,dP:s,dQ:u,qInv:l};return f.decrypt=function(t,r,i){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSAES-PKCS1-V1_5");var o=c.rsa.decrypt(t,f,!1,!1);if("RSAES-PKCS1-V1_5"===r)r={decode:n};else if("RSA-OAEP"===r||"RSAES-OAEP"===r)r={decode:function(t,n){return e.pkcs1.decode_rsa_oaep(n,t,i)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(r))throw{message:'Unsupported encryption scheme: "'+r+'".'};r={decode:function(e){return e}}}return r.decode(o,f,!1)},f.sign=function(e,t){var n=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:h},n=1):("NONE"===t||"NULL"===t||null===t)&&(t={encode:function(){return e}},n=1);var r=t.encode(e,f.n.bitLength());return c.rsa.encrypt(r,f,n)},f},c.wrapRsaPrivateKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(e).getBytes())])},c.wrapRsaPrivateKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(e).getBytes())])},c.privateKeyFromAsn1=function(t){var n={},r=[];if(s.validate(t,l,n,r)&&(t=s.fromDer(e.util.createBuffer(n.privateKey))),n={},r=[],!s.validate(t,f,n,r))throw{message:"Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.",errors:r};var i,o,u,d,p,h,g,m;return i=e.util.createBuffer(n.privateKeyModulus).toHex(),o=e.util.createBuffer(n.privateKeyPublicExponent).toHex(),u=e.util.createBuffer(n.privateKeyPrivateExponent).toHex(),d=e.util.createBuffer(n.privateKeyPrime1).toHex(),p=e.util.createBuffer(n.privateKeyPrime2).toHex(),h=e.util.createBuffer(n.privateKeyExponent1).toHex(),g=e.util.createBuffer(n.privateKeyExponent2).toHex(),m=e.util.createBuffer(n.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new a(i,16),new a(o,16),new a(u,16),new a(d,16),new a(p,16),new a(h,16),new a(g,16),new a(m,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.qInv))])},c.publicKeyFromAsn1=function(t){var n={},r=[];if(s.validate(t,p,n,r)){var i=s.derToOid(n.publicKeyOid);if(i!==c.oids.rsaEncryption)throw{message:"Cannot read public key. Unknown OID.",oid:i};t=n.rsaPublicKey}if(r=[],!s.validate(t,d,n,r))throw{message:"Cannot read public key. ASN.1 object does not contain an RSAPublicKey.",errors:r};var o=e.util.createBuffer(n.publicKeyModulus).toHex(),u=e.util.createBuffer(n.publicKeyExponent).toHex();return c.setRsaPublicKey(new a(o,16),new a(u,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(e)])])},c.publicKeyToRSAPublicKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.e))])}}var n="rsa";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/rsa",["require","module","./asn1","./oids","./random","./util","./jsbn","./pkcs1"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,r){for(var i=[n(e+t)],o=16,a=1;r>o;++a,o+=16)i.push(n(i[a-1]+e+t));return i.join("").substr(0,r)}function n(t){return e.md.md5.create().update(t).digest().getBytes()}if("undefined"==typeof r)var r=e.jsbn.BigInteger;var i=e.asn1,o=e.pki=e.pki||{};o.pbe=e.pbe=e.pbe||{};var a=o.oids,s={name:"EncryptedPrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,onstructed:!0,capture:"kdfIterationCount"}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},u={name:"pkcs-12PbeParams",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"iterations"}]};o.encryptPrivateKeyInfo=function(t,n,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128";var s,c,u,l=e.random.getBytes(r.saltSize),f=r.count,d=i.integerToDer(f);if(0===r.algorithm.indexOf("aes")){var p;if("aes128"===r.algorithm)s=16,p=a["aes128-CBC"];else if("aes192"===r.algorithm)s=24,p=a["aes192-CBC"];else{if("aes256"!==r.algorithm)throw{message:"Cannot encrypt private key. Unknown encryption algorithm.",algorithm:r.algorithm};s=32,p=a["aes256-CBC"]}var h=e.pkcs5.pbkdf2(n,l,f,s),g=e.random.getBytes(16),m=e.aes.createEncryptionCipher(h);m.start(g),m.update(i.toDer(t)),m.finish(),u=m.output.getBytes(),c=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(a.pkcs5PBES2).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(a.pkcs5PBKDF2).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,l),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,d.getBytes())])]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(p).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,g)])])])}else{if("3des"!==r.algorithm)throw{message:"Cannot encrypt private key. Unknown encryption algorithm.",algorithm:r.algorithm};s=24;var v=new e.util.ByteBuffer(l),h=o.pbe.generatePkcs12Key(n,v,1,f,s),g=o.pbe.generatePkcs12Key(n,v,2,f,s),m=e.des.createEncryptionCipher(h);m.start(g),m.update(i.toDer(t)),m.finish(),u=m.output.getBytes(),c=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,l),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,d.getBytes())])])}var y=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[c,i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,u)]);return y},o.decryptPrivateKeyInfo=function(t,n){var r=null,a={},c=[];if(!i.validate(t,s,a,c))throw{message:"Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.",errors:c};var u=i.derToOid(a.encryptionOid),l=o.pbe.getCipher(u,a.encryptionParams,n),f=e.util.createBuffer(a.encryptedData);return l.update(f),l.finish()&&(r=i.fromDer(l.output)),r},o.encryptedPrivateKeyToPem=function(t,n){var r={type:"ENCRYPTED PRIVATE KEY",body:i.toDer(t).getBytes()};return e.pem.encode(r,{maxline:n})},o.encryptedPrivateKeyFromPem=function(t){var n=e.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==n.type)throw{message:'Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".',headerType:n.type};if(n.procType&&"ENCRYPTED"===n.procType.type)throw{message:"Could not convert encrypted private key from PEM; PEM is encrypted."};return i.fromDer(n.body)},o.encryptRsaPrivateKey=function(n,r,a){if(a=a||{},!a.legacy){var s=o.wrapRsaPrivateKey(o.privateKeyToAsn1(n));return s=o.encryptPrivateKeyInfo(s,r,a),o.encryptedPrivateKeyToPem(s)}var c,u,l,f;switch(a.algorithm){case"aes128":c="AES-128-CBC",l=16,u=e.random.getBytes(16),f=e.aes.createEncryptionCipher;break;case"aes192":c="AES-192-CBC",l=24,u=e.random.getBytes(16),f=e.aes.createEncryptionCipher;break;case"aes256":c="AES-256-CBC",l=32,u=e.random.getBytes(16),f=e.aes.createEncryptionCipher;break;case"3des":c="DES-EDE3-CBC",l=24,u=e.random.getBytes(8),f=e.des.createEncryptionCipher;break;default:throw{message:'Could not encrypt RSA private key; unsupported encryption algorithm "'+a.algorithm+'".',algorithm:a.algorithm}}var d=t(r,u.substr(0,8),l),p=f(d);p.start(u),p.update(i.toDer(o.privateKeyToAsn1(n))),p.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:c,parameters:e.util.bytesToHex(u).toUpperCase()},body:p.output.getBytes()};return e.pem.encode(h)},o.decryptRsaPrivateKey=function(n,r){var a=null,s=e.pem.decode(n)[0];if("ENCRYPTED PRIVATE KEY"!==s.type&&"PRIVATE KEY"!==s.type&&"RSA PRIVATE KEY"!==s.type)throw{message:'Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".',headerType:s.type};if(s.procType&&"ENCRYPTED"===s.procType.type){var c,u;switch(s.dekInfo.algorithm){case"DES-EDE3-CBC":c=24,u=e.des.createDecryptionCipher;break;case"AES-128-CBC":c=16,u=e.aes.createDecryptionCipher;break;case"AES-192-CBC":c=24,u=e.aes.createDecryptionCipher;break;case"AES-256-CBC":c=32,u=e.aes.createDecryptionCipher;break;case"RC2-40-CBC":c=5,u=function(t){return e.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":c=8,u=function(t){return e.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":c=16,u=function(t){return e.rc2.createDecryptionCipher(t,128)};break;default:throw{message:'Could not decrypt private key; unsupported encryption algorithm "'+s.dekInfo.algorithm+'".',algorithm:s.dekInfo.algorithm}}var l=e.util.hexToBytes(s.dekInfo.parameters),f=t(r,l.substr(0,8),c),d=u(f);if(d.start(l),d.update(e.util.createBuffer(s.body)),!d.finish())return a;a=d.output.getBytes()}else a=s.body;return a="ENCRYPTED PRIVATE KEY"===s.type?o.decryptPrivateKeyInfo(i.fromDer(a),r):i.fromDer(a),null!==a&&(a=o.privateKeyFromAsn1(a)),a},o.pbe.generatePkcs12Key=function(t,n,r,i,o,a){var s,c;("undefined"==typeof a||null===a)&&(a=e.md.sha1.create());var u=a.digestLength,l=a.blockLength,f=new e.util.ByteBuffer,d=new e.util.ByteBuffer;for(c=0;c<t.length;c++)d.putInt16(t.charCodeAt(c));d.putInt16(0);var p=d.length(),h=n.length(),g=new e.util.ByteBuffer;g.fillWithByte(r,l);var m=l*Math.ceil(h/l),v=new e.util.ByteBuffer;for(c=0;m>c;c++)v.putByte(n.at(c%h));var y=l*Math.ceil(p/l),b=new e.util.ByteBuffer;for(c=0;y>c;c++)b.putByte(d.at(c%p));var w=v;w.putBuffer(b);for(var S=Math.ceil(o/u),C=1;S>=C;C++){var _=new e.util.ByteBuffer;_.putBytes(g.bytes()),_.putBytes(w.bytes());for(var E=0;i>E;E++)a.start(),a.update(_.getBytes()),_=a.digest();var T=new e.util.ByteBuffer;for(c=0;l>c;c++)T.putByte(_.at(c%u));var A=Math.ceil(h/l)+Math.ceil(p/l),I=new e.util.ByteBuffer;for(s=0;A>s;s++){var k=new e.util.ByteBuffer(w.getBytes(l)),x=511;for(c=T.length()-1;c>=0;c--)x>>=8,x+=T.at(c)+k.at(c),k.setAt(c,255&x);I.putBuffer(k)}w=I,f.putBuffer(_)}return f.truncate(f.length()-o),f},o.pbe.getCipher=function(e,t,n){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,n);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,n);default:throw{message:"Cannot read encrypted PBE data block. Unsupported OID.",oid:e,supportedOids:["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"]}}},o.pbe.getCipherForPBES2=function(t,n,r){var a={},s=[];if(!i.validate(n,c,a,s))throw{message:"Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.",errors:s};if(t=i.derToOid(a.kdfOid),t!==o.oids.pkcs5PBKDF2)throw{message:"Cannot read encrypted private key. Unsupported key derivation function OID.",oid:t,supportedOids:["pkcs5PBKDF2"]};if(t=i.derToOid(a.encOid),t!==o.oids["aes128-CBC"]&&t!==o.oids["aes192-CBC"]&&t!==o.oids["aes256-CBC"])throw{message:"Cannot read encrypted private key. Unsupported encryption scheme OID.",oid:t,supportedOids:["aes128-CBC","aes192-CBC","aes256-CBC"]};var u=a.kdfSalt,l=e.util.createBuffer(a.kdfIterationCount);l=l.getInt(l.length()<<3);var f;t===o.oids["aes128-CBC"]?f=16:t===o.oids["aes192-CBC"]?f=24:t===o.oids["aes256-CBC"]&&(f=32);var d=e.pkcs5.pbkdf2(r,u,l,f),p=a.encIv,h=e.aes.createDecryptionCipher(d);return h.start(p),h},o.pbe.getCipherForPKCS12PBE=function(t,n,r){var a={},s=[];if(!i.validate(n,u,a,s))throw{message:"Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.",errors:s};var c=e.util.createBuffer(a.salt),l=e.util.createBuffer(a.iterations);l=l.getInt(l.length()<<3);var f,d,p;switch(t){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:f=24,d=8,p=e.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:f=5,d=8,p=function(t,n){var r=e.rc2.createDecryptionCipher(t,40);return r.start(n,null),r};break;default:throw{message:"Cannot read PKCS #12 PBE data block. Unsupported OID.",oid:t}}var h=o.pbe.generatePkcs12Key(r,c,1,l,f),g=o.pbe.generatePkcs12Key(r,c,2,l,d);return p(h,g)}}var n="pbe";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pbe",["require","module","./aes","./asn1","./des","./md","./oids","./pem","./pbkdf2","./random","./rc2","./rsa","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1,n=e.pkcs7asn1=e.pkcs7asn1||{};e.pkcs7=e.pkcs7||{},e.pkcs7.asn1=n;var r={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};n.contentInfoValidator=r;var i={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent"}]};n.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(i)},n.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(i)};var o={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.IssuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0},{name:"SignerInfo.DigestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0},{name:"SignerInfo.AuthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.DigestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0},{name:"SignerInfo.EncryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.UnauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0}]};n.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},r,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[o]}]},n.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",
tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}var n="pkcs7asn1";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs7asn1",["require","module","./asn1","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.mgf=e.mgf||{};var t=e.mgf.mgf1=e.mgf1=e.mgf1||{};t.create=function(t){var n={generate:function(n,r){for(var i=new e.util.ByteBuffer,o=Math.ceil(r/t.digestLength),a=0;o>a;a++){var s=new e.util.ByteBuffer;s.putInt32(a),t.start(),t.update(n+s.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()}};return n}}var n="mgf1";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/mgf1",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.mgf=e.mgf||{},e.mgf.mgf1=e.mgf1}var n="mgf";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/mgf",["require","module","./mgf1"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.pss=e.pss||{};t.create=function(t,n,r){var i=t.digestLength,o={};return o.verify=function(o,a,s){var c,u=s-1,l=Math.ceil(u/8);if(a=a.substr(-l),i+r+2>l)throw{message:"Inconsistent parameters to PSS signature verification."};if(188!==a.charCodeAt(l-1))throw{message:"Encoded message does not end in 0xBC."};var f=l-i-1,d=a.substr(0,f),p=a.substr(f,i),h=65280>>8*l-u&255;if(0!==(d.charCodeAt(0)&h))throw{message:"Bits beyond keysize not zero as expected."};var g=n.generate(p,f),m="";for(c=0;f>c;c++)m+=String.fromCharCode(d.charCodeAt(c)^g.charCodeAt(c));m=String.fromCharCode(m.charCodeAt(0)&~h)+m.substr(1);var v=l-i-r-2;for(c=0;v>c;c++)if(0!==m.charCodeAt(c))throw{message:"Leftmost octets not zero as expected"};if(1!==m.charCodeAt(v))throw{message:"Inconsistent PSS signature, 0x01 marker not found"};var y=m.substr(-r),b=new e.util.ByteBuffer;b.fillWithByte(0,8),b.putBytes(o),b.putBytes(y),t.start(),t.update(b.getBytes());var w=t.digest().getBytes();return p===w},o.encode=function(o,a){var s,c=a-1,u=Math.ceil(c/8),l=o.digest().getBytes();if(i+r+2>u)throw{message:"Message is too long to encrypt"};var f=e.random.getBytes(r),d=new e.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(l),d.putBytes(f),t.start(),t.update(d.getBytes());var p=t.digest().getBytes(),h=new e.util.ByteBuffer;h.fillWithByte(0,u-r-i-2),h.putByte(1),h.putBytes(f);var g=h.getBytes(),m=u-i-1,v=n.generate(p,m),y="";for(s=0;m>s;s++)y+=String.fromCharCode(g.charCodeAt(s)^v.charCodeAt(s));var b=65280>>8*u-c&255;return y=String.fromCharCode(y.charCodeAt(0)&~b)+y.substr(1),y+p+String.fromCharCode(188)},o}}var n="pss";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pss",["require","module","./random","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t){"string"==typeof t&&(t={shortName:t});for(var n,r=null,i=0;null===r&&i<e.attributes.length;++i)n=e.attributes[i],t.type&&t.type===n.type?r=n:t.name&&t.name===n.name?r=n:t.shortName&&t.shortName===n.shortName&&(r=n);return r}function n(t){for(var n,r,i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),o=t.attributes,a=0;a<o.length;++a){n=o[a];var c=n.value,u=s.Type.PRINTABLESTRING;"valueTagClass"in n&&(u=n.valueTagClass,u===s.Type.UTF8&&(c=e.util.encodeUtf8(c))),r=s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(n.type).getBytes()),s.create(s.Class.UNIVERSAL,u,!1,c)])]),i.value.push(r)}return i}function r(e){var t=s.create(s.Class.CONTEXT_SPECIFIC,3,!0,[]),n=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);t.value.push(n);for(var r,i,o=0;o<e.length;++o){r=e[o],i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),n.value.push(i),i.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(r.id).getBytes())),r.critical&&i.value.push(s.create(s.Class.UNIVERSAL,s.Type.BOOLEAN,!1,String.fromCharCode(255)));var a=r.value;"string"!=typeof r.value&&(a=s.toDer(a).getBytes()),i.value.push(s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,a))}return t}function i(e){for(var t,n=0;n<e.length;++n){if(t=e[n],"undefined"==typeof t.name&&(t.type&&t.type in c.oids?t.name=c.oids[t.type]:t.shortName&&t.shortName in l&&(t.name=c.oids[l[t.shortName]])),"undefined"==typeof t.type){if(!(t.name&&t.name in c.oids))throw{message:"Attribute type not specified.",attribute:t};t.type=c.oids[t.name]}if("undefined"==typeof t.shortName&&t.name&&t.name in l&&(t.shortName=l[t.name]),"undefined"==typeof t.value)throw{message:"Attribute value not specified.",attribute:t}}}function o(e,t){switch(e){case u["RSASSA-PSS"]:var n=[];return void 0!==t.hash.algorithmOid&&n.push(s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.hash.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&n.push(s.create(s.Class.CONTEXT_SPECIFIC,1,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.mgf.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.mgf.hash.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&n.push(s.create(s.Class.CONTEXT_SPECIFIC,2,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(t.saltLength).getBytes())])),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,n);default:return s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")}}function a(t){var n=s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return n;for(var r=t.attributes,i=0;i<r.length;++i){var o=r[i],a=o.value,c=s.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===s.Type.UTF8&&(a=e.util.encodeUtf8(a));var u=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.type).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,c,!1,a)])]);n.value.push(u)}return n}var s=e.asn1,c=e.pki=e.pki||{},u=c.oids,l={};l.CN=u.commonName,l.commonName="CN",l.C=u.countryName,l.countryName="C",l.L=u.localityName,l.localityName="L",l.ST=u.stateOrProvinceName,l.stateOrProvinceName="ST",l.O=u.organizationName,l.organizationName="O",l.OU=u.organizationalUnitName,l.organizationalUnitName="OU",l.E=u.emailAddress,l.emailAddress="E";var f=e.pki.rsa.publicKeyValidator,d={name:"Certificate",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:s.Class.UNIVERSAL,type:s.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:s.Class.UNIVERSAL,type:s.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:s.Class.UNIVERSAL,type:s.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:s.Class.UNIVERSAL,type:s.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},f,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:s.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:s.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:s.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},p={name:"rsapss",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:s.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:s.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:s.Class.UNIVERSAL,type:s.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:s.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:s.Class.UNIVERSAL,type:s.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequestInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},f,{name:"CertificationRequestInfo.attributes",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:s.Class.UNIVERSAL,type:s.Type.SET,constructed:!0}]}]}]},g={name:"CertificationRequest",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[h,{name:"CertificationRequest.signatureAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"csrSignature"}]};c.RDNAttributesAsArray=function(e,t){for(var n,r,i,o=[],a=0;a<e.value.length;++a){n=e.value[a];for(var c=0;c<n.value.length;++c)i={},r=n.value[c],i.type=s.derToOid(r.value[0].value),i.value=r.value[1].value,i.valueTagClass=r.value[1].type,i.type in u&&(i.name=u[i.type],i.name in l&&(i.shortName=l[i.name])),t&&(t.update(i.type),t.update(i.value)),o.push(i)}return o},c.CRIAttributesAsArray=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=s.derToOid(r.value[0].value),o=r.value[1].value,a=0;a<o.length;++a){var c={};c.type=i,c.value=o[a].value,c.valueTagClass=o[a].type,c.type in u&&(c.name=u[c.type],c.name in l&&(c.shortName=l[c.name])),t.push(c)}return t};var m=function(t){for(var n,r,i,o=[],a=0;a<t.value.length;++a){i=t.value[a];for(var c=0;c<i.value.length;++c){if(r=i.value[c],n={},n.id=s.derToOid(r.value[0].value),n.critical=!1,r.value[1].type===s.Type.BOOLEAN?(n.critical=0!==r.value[1].value.charCodeAt(0),n.value=r.value[2].value):n.value=r.value[1].value,n.id in u)if(n.name=u[n.id],"keyUsage"===n.name){var l=s.fromDer(n.value),f=0,d=0;l.value.length>1&&(f=l.value.charCodeAt(1),d=l.value.length>2?l.value.charCodeAt(2):0),n.digitalSignature=128===(128&f),n.nonRepudiation=64===(64&f),n.keyEncipherment=32===(32&f),n.dataEncipherment=16===(16&f),n.keyAgreement=8===(8&f),n.keyCertSign=4===(4&f),n.cRLSign=2===(2&f),n.encipherOnly=1===(1&f),n.decipherOnly=128===(128&d)}else if("basicConstraints"===n.name){var l=s.fromDer(n.value);l.value.length>0&&l.value[0].type===s.Type.BOOLEAN?n.cA=0!==l.value[0].value.charCodeAt(0):n.cA=!1;var p=null;l.value.length>0&&l.value[0].type===s.Type.INTEGER?p=l.value[0].value:l.value.length>1&&(p=l.value[1].value),null!==p&&(n.pathLenConstraint=s.derToInteger(p))}else if("extKeyUsage"===n.name)for(var l=s.fromDer(n.value),h=0;h<l.value.length;++h){var g=s.derToOid(l.value[h].value);g in u?n[u[g]]=!0:n[g]=!0}else if("nsCertType"===n.name){var l=s.fromDer(n.value),f=0;l.value.length>1&&(f=l.value.charCodeAt(1)),n.client=128===(128&f),n.server=64===(64&f),n.email=32===(32&f),n.objsign=16===(16&f),n.reserved=8===(8&f),n.sslCA=4===(4&f),n.emailCA=2===(2&f),n.objCA=1===(1&f)}else if("subjectAltName"===n.name||"issuerAltName"===n.name){n.altNames=[];for(var m,l=s.fromDer(n.value),v=0;v<l.value.length;++v){m=l.value[v];var y={type:m.type,value:m.value};switch(n.altNames.push(y),m.type){case 1:case 2:case 6:break;case 7:y.ip=e.util.bytesToIP(m.value);break;case 8:y.oid=s.derToOid(m.value)}}}else if("subjectKeyIdentifier"===n.name){var l=s.fromDer(n.value);n.subjectKeyIdentifier=e.util.bytesToHex(l.value)}o.push(n)}}return o},v=function(e,t,n){var r={};if(e!==u["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:u.sha1},mgf:{algorithmOid:u.mgf1,hash:{algorithmOid:u.sha1}},saltLength:20});var i={},o=[];if(!s.validate(t,p,i,o))throw{message:"Cannot read RSASSA-PSS parameter block.",errors:o};return void 0!==i.hashOid&&(r.hash=r.hash||{},r.hash.algorithmOid=s.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=s.derToOid(i.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=s.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(r.saltLength=i.saltLength.charCodeAt(0)),r};c.certificateFromPem=function(t,n,r){var i=e.pem.decode(t)[0];if("CERTIFICATE"!==i.type&&"X509 CERTIFICATE"!==i.type&&"TRUSTED CERTIFICATE"!==i.type)throw{message:'Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".',headerType:i.type};if(i.procType&&"ENCRYPTED"===i.procType.type)throw{message:"Could not convert certificate from PEM; PEM is encrypted."};var o=s.fromDer(i.body,r);return c.certificateFromAsn1(o,n)},c.certificateToPem=function(t,n){var r={type:"CERTIFICATE",body:s.toDer(c.certificateToAsn1(t)).getBytes()};return e.pem.encode(r,{maxline:n})},c.publicKeyFromPem=function(t){var n=e.pem.decode(t)[0];if("PUBLIC KEY"!==n.type&&"RSA PUBLIC KEY"!==n.type)throw{message:'Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".',headerType:n.type};if(n.procType&&"ENCRYPTED"===n.procType.type)throw{message:"Could not convert public key from PEM; PEM is encrypted."};var r=s.fromDer(n.body);return c.publicKeyFromAsn1(r)},c.publicKeyToPem=function(t,n){var r={type:"PUBLIC KEY",body:s.toDer(c.publicKeyToAsn1(t)).getBytes()};return e.pem.encode(r,{maxline:n})},c.publicKeyToRSAPublicKeyPem=function(t,n){var r={type:"RSA PUBLIC KEY",body:s.toDer(c.publicKeyToRSAPublicKey(t)).getBytes()};return e.pem.encode(r,{maxline:n})},c.certificationRequestFromPem=function(t,n,r){var i=e.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==i.type)throw{message:'Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".',headerType:i.type};if(i.procType&&"ENCRYPTED"===i.procType.type)throw{message:"Could not convert certification request from PEM; PEM is encrypted."};var o=s.fromDer(i.body,r);return c.certificationRequestFromAsn1(o,n)},c.certificationRequestToPem=function(t,n){var r={type:"CERTIFICATE REQUEST",body:s.toDer(c.certificationRequestToAsn1(t)).getBytes()};return e.pem.encode(r,{maxline:n})},c.createCertificate=function(){var n={};return n.version=2,n.serialNumber="00",n.signatureOid=null,n.signature=null,n.siginfo={},n.siginfo.algorithmOid=null,n.validity={},n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.issuer={},n.issuer.getField=function(e){return t(n.issuer,e)},n.issuer.addField=function(e){i([e]),n.issuer.attributes.push(e)},n.issuer.attributes=[],n.issuer.hash=null,n.subject={},n.subject.getField=function(e){return t(n.subject,e)},n.subject.addField=function(e){i([e]),n.subject.attributes.push(e)},n.subject.attributes=[],n.subject.hash=null,n.extensions=[],n.publicKey=null,n.md=null,n.setSubject=function(e,t){i(e),n.subject.attributes=e,delete n.subject.uniqueId,t&&(n.subject.uniqueId=t),n.subject.hash=null},n.setIssuer=function(e,t){i(e),n.issuer.attributes=e,delete n.issuer.uniqueId,t&&(n.issuer.uniqueId=t),n.issuer.hash=null},n.setExtensions=function(t){for(var r,i=0;i<t.length;++i){if(r=t[i],"undefined"==typeof r.name&&r.id&&r.id in c.oids&&(r.name=c.oids[r.id]),"undefined"==typeof r.id){if(!(r.name&&r.name in c.oids))throw{message:"Extension ID not specified.",extension:r};r.id=c.oids[r.name]}if("undefined"==typeof r.value){if("keyUsage"===r.name){var o=0,a=0,l=0;r.digitalSignature&&(a|=128,o=7),r.nonRepudiation&&(a|=64,o=6),r.keyEncipherment&&(a|=32,o=5),r.dataEncipherment&&(a|=16,o=4),r.keyAgreement&&(a|=8,o=3),r.keyCertSign&&(a|=4,o=2),r.cRLSign&&(a|=2,o=1),r.encipherOnly&&(a|=1,o=0),r.decipherOnly&&(l|=128,o=7);var f=String.fromCharCode(o);0!==l?f+=String.fromCharCode(a)+String.fromCharCode(l):0!==a&&(f+=String.fromCharCode(a)),r.value=s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,f)}else if("basicConstraints"===r.name)r.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),r.cA&&r.value.value.push(s.create(s.Class.UNIVERSAL,s.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in r&&r.value.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(r.pathLenConstraint).getBytes()));else if("extKeyUsage"===r.name){r.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);var d=r.value.value;for(var p in r)r[p]===!0&&(p in u?d.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u[p]).getBytes())):-1!==p.indexOf(".")&&d.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(p).getBytes())))}else if("nsCertType"===r.name){var o=0,a=0;r.client&&(a|=128,o=7),r.server&&(a|=64,o=6),r.email&&(a|=32,o=5),r.objsign&&(a|=16,o=4),r.reserved&&(a|=8,o=3),r.sslCA&&(a|=4,o=2),r.emailCA&&(a|=2,o=1),r.objCA&&(a|=1,o=0);var f=String.fromCharCode(o);0!==a&&(f+=String.fromCharCode(a)),r.value=s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,f)}else if("subjectAltName"===r.name||"issuerAltName"===r.name){r.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);for(var h,g=0;g<r.altNames.length;++g){h=r.altNames[g];var f=h.value;if(7===h.type&&h.ip){if(f=e.util.bytesFromIP(h.ip),null===f)throw{message:'Extension "ip" value is not a valid IPv4 or IPv6 address.',extension:r}}else 8===h.type&&(f=h.oid?s.oidToDer(s.oidToDer(h.oid)):s.oidToDer(f));r.value.value.push(s.create(s.Class.CONTEXT_SPECIFIC,h.type,!1,f))}}else if("subjectKeyIdentifier"===r.name){var m=n.generateSubjectKeyIdentifier();r.subjectKeyIdentifier=m.toHex(),r.value=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,m.getBytes())}if("undefined"==typeof r.value)throw{message:"Extension value not specified.",extension:r}}}n.extensions=t},n.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var t,r=null,i=0;null===r&&i<n.extensions.length;++i)t=n.extensions[i],e.id&&t.id===e.id?r=t:e.name&&t.name===e.name&&(r=t);return r},n.sign=function(t,r){n.md=r||e.md.sha1.create();var i=u[n.md.algorithm+"WithRSAEncryption"];if(!i)throw{message:"Could not compute certificate digest. Unknown message digest algorithm OID.",algorithm:n.md.algorithm};n.signatureOid=n.siginfo.algorithmOid=i,n.tbsCertificate=c.getTBSCertificate(n);var o=s.toDer(n.tbsCertificate);n.md.update(o.getBytes()),n.signature=t.sign(n.md)},n.verify=function(t){var r=!1;if(!n.issued(t)){var i=t.issuer,o=n.subject;throw{message:"The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.",expectedIssuer:i.attributes,actualIssuer:o.attributes}}var a=t.md;if(null===a){if(t.signatureOid in u){var l=u[t.signatureOid];switch(l){case"sha1WithRSAEncryption":a=e.md.sha1.create();break;case"md5WithRSAEncryption":a=e.md.md5.create();break;case"sha256WithRSAEncryption":a=e.md.sha256.create();break;case"RSASSA-PSS":a=e.md.sha256.create()}}if(null===a)throw{message:"Could not compute certificate digest. Unknown signature OID.",signatureOid:t.signatureOid};var f=t.tbsCertificate||c.getTBSCertificate(t),d=s.toDer(f);a.update(d.getBytes())}if(null!==a){var p=void 0;switch(t.signatureOid){case u.sha1WithRSAEncryption:p=void 0;break;case u["RSASSA-PSS"]:var h,g;if(h=u[t.signatureParameters.mgf.hash.algorithmOid],void 0===h||void 0===e.md[h])throw{message:"Unsupported MGF hash function.",oid:t.signatureParameters.mgf.hash.algorithmOid,name:h};if(g=u[t.signatureParameters.mgf.algorithmOid],void 0===g||void 0===e.mgf[g])throw{message:"Unsupported MGF function.",oid:t.signatureParameters.mgf.algorithmOid,name:g};if(g=e.mgf[g].create(e.md[h].create()),h=u[t.signatureParameters.hash.algorithmOid],void 0===h||void 0===e.md[h])throw{message:"Unsupported RSASSA-PSS hash function.",oid:t.signatureParameters.hash.algorithmOid,name:h};p=e.pss.create(e.md[h].create(),g,t.signatureParameters.saltLength)}r=n.publicKey.verify(a.digest().getBytes(),t.signature,p)}return r},n.isIssuer=function(e){var t=!1,r=n.issuer,i=e.subject;if(r.hash&&i.hash)t=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){t=!0;for(var o,a,s=0;t&&s<r.attributes.length;++s)o=r.attributes[s],a=i.attributes[s],(o.type!==a.type||o.value!==a.value)&&(t=!1)}return t},n.issued=function(e){return e.isIssuer(n)},n.generateSubjectKeyIdentifier=function(){var t=s.toDer(c.publicKeyToRSAPublicKey(n.publicKey)),r=e.md.sha1.create();return r.update(t.getBytes()),r.digest()},n.verifySubjectKeyIdentifier=function(){for(var t=u.subjectKeyIdentifier,r=0;r<n.extensions.length;++r){var i=n.extensions[r];if(i.id===t){var o=n.generateSubjectKeyIdentifier().getBytes();return e.util.hexToBytes(i.subjectKeyIdentifier)===o}}return!1},n},c.certificateFromAsn1=function(n,r){var o={},a=[];if(!s.validate(n,d,o,a))throw{message:"Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.",errors:a};if("string"!=typeof o.certSignature){for(var l="\x00",f=0;f<o.certSignature.length;++f)l+=s.toDer(o.certSignature[f]).getBytes();o.certSignature=l}var p=s.derToOid(o.publicKeyOid);if(p!==c.oids.rsaEncryption)throw{message:"Cannot read public key. OID is not RSA."};var h=c.createCertificate();h.version=o.certVersion?o.certVersion.charCodeAt(0):0;var g=e.util.createBuffer(o.certSerialNumber);h.serialNumber=g.toHex(),h.signatureOid=e.asn1.derToOid(o.certSignatureOid),h.signatureParameters=v(h.signatureOid,o.certSignatureParams,!0),h.siginfo.algorithmOid=e.asn1.derToOid(o.certinfoSignatureOid),h.siginfo.parameters=v(h.siginfo.algorithmOid,o.certinfoSignatureParams,!1);var y=e.util.createBuffer(o.certSignature);++y.read,h.signature=y.getBytes();var b=[];if(void 0!==o.certValidity1UTCTime&&b.push(s.utcTimeToDate(o.certValidity1UTCTime)),void 0!==o.certValidity2GeneralizedTime&&b.push(s.generalizedTimeToDate(o.certValidity2GeneralizedTime)),void 0!==o.certValidity3UTCTime&&b.push(s.utcTimeToDate(o.certValidity3UTCTime)),void 0!==o.certValidity4GeneralizedTime&&b.push(s.generalizedTimeToDate(o.certValidity4GeneralizedTime)),b.length>2)throw{message:"Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate."};if(b.length<2)throw{message:"Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime."};if(h.validity.notBefore=b[0],h.validity.notAfter=b[1],h.tbsCertificate=o.tbsCertificate,r){if(h.md=null,h.signatureOid in u){var p=u[h.signatureOid];switch(p){case"sha1WithRSAEncryption":h.md=e.md.sha1.create();break;case"md5WithRSAEncryption":h.md=e.md.md5.create();break;case"sha256WithRSAEncryption":h.md=e.md.sha256.create();break;case"RSASSA-PSS":h.md=e.md.sha256.create()}}if(null===h.md)throw{message:"Could not compute certificate digest. Unknown signature OID.",signatureOid:h.signatureOid};var w=s.toDer(h.tbsCertificate);h.md.update(w.getBytes())}var S=e.md.sha1.create();h.issuer.getField=function(e){return t(h.issuer,e)},h.issuer.addField=function(e){i([e]),h.issuer.attributes.push(e)},h.issuer.attributes=c.RDNAttributesAsArray(o.certIssuer,S),o.certIssuerUniqueId&&(h.issuer.uniqueId=o.certIssuerUniqueId),h.issuer.hash=S.digest().toHex();var C=e.md.sha1.create();return h.subject.getField=function(e){return t(h.subject,e)},h.subject.addField=function(e){i([e]),h.subject.attributes.push(e)},h.subject.attributes=c.RDNAttributesAsArray(o.certSubject,C),o.certSubjectUniqueId&&(h.subject.uniqueId=o.certSubjectUniqueId),h.subject.hash=C.digest().toHex(),o.certExtensions?h.extensions=m(o.certExtensions):h.extensions=[],h.publicKey=c.publicKeyFromAsn1(o.subjectPublicKeyInfo),h},c.certificationRequestFromAsn1=function(n,r){var o={},a=[];if(!s.validate(n,g,o,a))throw{message:"Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.",errors:a};if("string"!=typeof o.csrSignature){for(var l="\x00",f=0;f<o.csrSignature.length;++f)l+=s.toDer(o.csrSignature[f]).getBytes();o.csrSignature=l}var d=s.derToOid(o.publicKeyOid);if(d!==c.oids.rsaEncryption)throw{message:"Cannot read public key. OID is not RSA."};var p=c.createCertificationRequest();p.version=o.csrVersion?o.csrVersion.charCodeAt(0):0,p.signatureOid=e.asn1.derToOid(o.csrSignatureOid),p.signatureParameters=v(p.signatureOid,o.csrSignatureParams,!0),p.siginfo.algorithmOid=e.asn1.derToOid(o.csrSignatureOid),p.siginfo.parameters=v(p.siginfo.algorithmOid,o.csrSignatureParams,!1);var h=e.util.createBuffer(o.csrSignature);if(++h.read,p.signature=h.getBytes(),p.certificationRequestInfo=o.certificationRequestInfo,r){if(p.md=null,p.signatureOid in u){var d=u[p.signatureOid];switch(d){case"sha1WithRSAEncryption":p.md=e.md.sha1.create();break;case"md5WithRSAEncryption":p.md=e.md.md5.create();break;case"sha256WithRSAEncryption":p.md=e.md.sha256.create();break;case"RSASSA-PSS":p.md=e.md.sha256.create()}}if(null===p.md)throw{message:"Could not compute certification request digest. Unknown signature OID.",signatureOid:p.signatureOid};var m=s.toDer(p.certificationRequestInfo);p.md.update(m.getBytes())}var y=e.md.sha1.create();return p.subject.getField=function(e){return t(p.subject,e)},p.subject.addField=function(e){i([e]),p.subject.attributes.push(e)},p.subject.attributes=c.RDNAttributesAsArray(o.certificationRequestInfoSubject,y),p.subject.hash=y.digest().toHex(),p.publicKey=c.publicKeyFromAsn1(o.subjectPublicKeyInfo),p.getAttribute=function(e){return t(p.attributes,e)},p.addAttribute=function(e){i([e]),p.attributes.push(e)},p.attributes=c.CRIAttributesAsArray(o.certificationRequestInfoAttributes),p},c.createCertificationRequest=function(){var n={};return n.version=0,n.signatureOid=null,n.signature=null,n.siginfo={},n.siginfo.algorithmOid=null,n.subject={},n.subject.getField=function(e){return t(n.subject,e)},n.subject.addField=function(e){i([e]),n.subject.attributes.push(e)},n.subject.attributes=[],n.subject.hash=null,n.publicKey=null,n.attributes=[],n.getAttribute=function(e){return t(n.attributes,e)},n.addAttribute=function(e){i([e]),n.attributes.push(e)},n.md=null,n.setSubject=function(e){i(e),n.subject.attributes=e,
n.subject.hash=null},n.setAttributes=function(e){i(e),n.attributes=e},n.sign=function(t,r){n.md=r||e.md.sha1.create();var i=u[n.md.algorithm+"WithRSAEncryption"];if(!i)throw{message:"Could not compute certification request digest. Unknown message digest algorithm OID.",algorithm:n.md.algorithm};n.signatureOid=n.siginfo.algorithmOid=i,n.certificationRequestInfo=c.getCertificationRequestInfo(n);var o=s.toDer(n.certificationRequestInfo);n.md.update(o.getBytes()),n.signature=t.sign(n.md)},n.verify=function(){var t=!1,r=n.md;if(null===r){if(n.signatureOid in u){var i=u[n.signatureOid];switch(i){case"sha1WithRSAEncryption":r=e.md.sha1.create();break;case"md5WithRSAEncryption":r=e.md.md5.create();break;case"sha256WithRSAEncryption":r=e.md.sha256.create();break;case"RSASSA-PSS":r=e.md.sha256.create()}}if(null===r)throw{message:"Could not compute certification request digest. Unknown signature OID.",signatureOid:n.signatureOid};var o=n.certificationRequestInfo||c.getCertificationRequestInfo(n),a=s.toDer(o);r.update(a.getBytes())}if(null!==r){var l;switch(n.signatureOid){case u.sha1WithRSAEncryption:break;case u["RSASSA-PSS"]:var f,d;if(f=u[n.signatureParameters.mgf.hash.algorithmOid],void 0===f||void 0===e.md[f])throw{message:"Unsupported MGF hash function.",oid:n.signatureParameters.mgf.hash.algorithmOid,name:f};if(d=u[n.signatureParameters.mgf.algorithmOid],void 0===d||void 0===e.mgf[d])throw{message:"Unsupported MGF function.",oid:n.signatureParameters.mgf.algorithmOid,name:d};if(d=e.mgf[d].create(e.md[f].create()),f=u[n.signatureParameters.hash.algorithmOid],void 0===f||void 0===e.md[f])throw{message:"Unsupported RSASSA-PSS hash function.",oid:n.signatureParameters.hash.algorithmOid,name:f};l=e.pss.create(e.md[f].create(),d,n.signatureParameters.saltLength)}t=n.publicKey.verify(r.digest().getBytes(),n.signature,l)}return t},n},c.getTBSCertificate=function(t){var i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(t.version).getBytes())]),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber)),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.siginfo.algorithmOid).getBytes()),o(t.siginfo.algorithmOid,t.siginfo.parameters)]),n(t.issuer),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.UTCTIME,!1,s.dateToUtcTime(t.validity.notBefore)),s.create(s.Class.UNIVERSAL,s.Type.UTCTIME,!1,s.dateToUtcTime(t.validity.notAfter))]),n(t.subject),c.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&i.value.push(s.create(s.Class.CONTEXT_SPECIFIC,1,!0,[s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&i.value.push(s.create(s.Class.CONTEXT_SPECIFIC,2,!0,[s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&i.value.push(r(t.extensions)),i},c.getCertificationRequestInfo=function(e){var t=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(e.version).getBytes()),n(e.subject),c.publicKeyToAsn1(e.publicKey),a(e)]);return t},c.distinguishedNameToAsn1=function(e){return n(e)},c.certificateToAsn1=function(e){var t=e.tbsCertificate||c.getTBSCertificate(e);return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[t,s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e.signatureOid).getBytes()),o(e.signatureOid,e.signatureParameters)]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},c.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||c.getCertificationRequestInfo(e);return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[t,s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e.signatureOid).getBytes()),o(e.signatureOid,e.signatureParameters)]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},c.createCaStore=function(t){var r={certs:{}};if(r.getIssuer=function(t){var i=null;if(!t.issuer.hash){var o=e.md.sha1.create();t.issuer.attributes=c.RDNAttributesAsArray(n(t.issuer),o),t.issuer.hash=o.digest().toHex()}if(t.issuer.hash in r.certs&&(i=r.certs[t.issuer.hash],e.util.isArray(i)))throw{message:"Resolving multiple issuer matches not implemented yet."};return i},r.addCertificate=function(t){if("string"==typeof t&&(t=e.pki.certificateFromPem(t)),!t.subject.hash){var i=e.md.sha1.create();t.subject.attributes=c.RDNAttributesAsArray(n(t.subject),i),t.subject.hash=i.digest().toHex()}if(t.subject.hash in r.certs){var o=r.certs[t.subject.hash];e.util.isArray(o)||(o=[o]),o.push(t)}else r.certs[t.subject.hash]=t},t)for(var i=0;i<t.length;++i){var o=t[i];r.addCertificate(o)}return r},c.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},c.verifyCertificateChain=function(t,n,r){n=n.slice(0);var i=n.slice(0),o=new Date,a=!0,s=null,u=0,l=null;do{var f=n.shift();if(o<f.validity.notBefore||o>f.validity.notAfter)s={message:"Certificate is not valid yet or has expired.",error:c.certificateError.certificate_expired,notBefore:f.validity.notBefore,notAfter:f.validity.notAfter,now:o};else{var d=!1;if(n.length>0){l=n[0];try{d=l.verify(f)}catch(p){}}else{var h=t.getIssuer(f);if(null===h)s={message:"Certificate is not trusted.",error:c.certificateError.unknown_ca};else for(e.util.isArray(h)||(h=[h]);!d&&h.length>0;){l=h.shift();try{d=l.verify(f)}catch(p){}}}null===s&&!d&&(s={message:"Certificate signature is invalid.",error:c.certificateError.bad_certificate})}if(null===s&&!f.isIssuer(l)&&(s={message:"Certificate issuer is invalid.",error:c.certificateError.bad_certificate}),null===s)for(var g={keyUsage:!0,basicConstraints:!0},m=0;null===s&&m<f.extensions.length;++m){var v=f.extensions[m];v.critical&&!(v.name in g)&&(s={message:"Certificate has an unsupported critical extension.",error:c.certificateError.unsupported_certificate})}if(!a||0===n.length&&!l){var y=f.getExtension("basicConstraints"),b=f.getExtension("keyUsage");if(null!==b&&(!b.keyCertSign||null===y)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:c.certificateError.bad_certificate}),null===s&&null!==y&&!y.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:c.certificateError.bad_certificate}),null===s&&null!==b&&"pathLenConstraint"in y){for(var w=0,m=1;m<n.length-1;++m)n[m].isIssuer(n[m])&&++w;var S=y.pathLenConstraint+1;n.length-w>S&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:c.certificateError.bad_certificate})}}var C=null===s?!0:s.error,_=r?r(C,u,i):C;if(_!==!0)throw C===!0&&(s={message:"The application rejected the certificate.",error:c.certificateError.bad_certificate}),(_||0===_)&&("object"!=typeof _||e.util.isArray(_)?"string"==typeof _&&(s.error=_):(_.message&&(s.message=_.message),_.error&&(s.error=_.error))),s;s=null,a=!1,++u}while(n.length>0);return!0}}var n="x509";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r.pki}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/x509",["require","module","./aes","./asn1","./des","./md","./mgf","./oids","./pem","./pss","./rsa","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,n,r){for(var i=[],o=0;o<e.length;o++)for(var a=0;a<e[o].safeBags.length;a++){var s=e[o].safeBags[a];(void 0===r||s.type===r)&&void 0!==s.attributes[t]&&s.attributes[t].indexOf(n)>=0&&i.push(s)}return i}function n(e,t,n,o){if(t=a.fromDer(t,n),t.tagClass!==a.Class.UNIVERSAL||t.type!==a.Type.SEQUENCE||t.constructed!==!0)throw{message:"PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo"};for(var c=0;c<t.value.length;c++){var l=t.value[c],f={},d=[];if(!a.validate(l,u,f,d))throw{message:"Cannot read ContentInfo.",errors:d};var p={encrypted:!1},h=null,g=f.content.value[0];switch(a.derToOid(f.contentType)){case s.oids.data:if(g.tagClass!==a.Class.UNIVERSAL||g.type!==a.Type.OCTETSTRING)throw{message:"PKCS#12 SafeContents Data is not an OCTET STRING."};h=g.value;break;case s.oids.encryptedData:if(void 0===o)throw{message:"Found PKCS#12 Encrypted SafeContents Data but no password available."};h=r(g,o),p.encrypted=!0;break;default:throw{message:"Unsupported PKCS#12 contentType.",contentType:a.derToOid(f.contentType)}}p.safeBags=i(h,n,o),e.safeContents.push(p)}}function r(t,n){var r={},i=[];if(!a.validate(t,e.pkcs7.asn1.encryptedDataValidator,r,i))throw{message:"Cannot read EncryptedContentInfo. ",errors:i};var o=a.derToOid(r.contentType);if(o!==s.oids.data)throw{message:"PKCS#12 EncryptedContentInfo ContentType is not Data.",oid:o};o=a.derToOid(r.encAlgorithm);var c=s.pbe.getCipher(o,r.encParameter,n),u=e.util.createBuffer(r.encryptedContent);if(c.update(u),!c.finish())throw{message:"Failed to decrypt PKCS#12 SafeContents."};return c.output.getBytes()}function i(e,t,n){if(e=a.fromDer(e,t),e.tagClass!==a.Class.UNIVERSAL||e.type!==a.Type.SEQUENCE||e.constructed!==!0)throw{message:"PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag"};for(var r=[],i=0;i<e.value.length;i++){var c=e.value[i],u={},l=[];if(!a.validate(c,f,u,l))throw{message:"Cannot read SafeBag.",errors:l};var d={type:a.derToOid(u.bagId),attributes:o(u.bagAttributes)};r.push(d);var h,g,m=u.bagValue.value[0];switch(d.type){case s.oids.pkcs8ShroudedKeyBag:if(void 0===n)throw{message:"Found PKCS#8 ShroudedKeyBag but no password available."};if(m=s.decryptPrivateKeyInfo(m,n),null===m)throw{message:"Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?"};case s.oids.keyBag:d.key=s.privateKeyFromAsn1(m);continue;case s.oids.certBag:h=p,g=function(){if(a.derToOid(u.certId)!==s.oids.x509Certificate)throw{message:"Unsupported certificate type, only X.509 supported.",oid:a.derToOid(u.certId)};d.cert=s.certificateFromAsn1(a.fromDer(u.cert,t),!0)};break;default:throw{message:"Unsupported PKCS#12 SafeBag type.",oid:d.type}}if(void 0!==h&&!a.validate(m,h,u,l))throw{message:"Cannot read PKCS#12 "+h.name,errors:l};g()}return r}function o(e){var t={};if(void 0!==e)for(var n=0;n<e.length;++n){var r={},i=[];if(!a.validate(e[n],d,r,i))throw{message:"Cannot read PKCS#12 BagAttribute.",errors:i};var o=a.derToOid(r.oid);if(void 0!==s.oids[o]){t[s.oids[o]]=[];for(var c=0;c<r.values.length;++c)t[s.oids[o]].push(r.values[c].value)}}return t}var a=e.asn1,s=e.pki,c=e.pkcs12=e.pkcs12||{},u={name:"ContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:a.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},l={name:"PFX",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},u,{name:"PFX.macData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},f={name:"SafeBag",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:a.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},d={name:"Attribute",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,capture:"values"}]},p={name:"CertBag",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:a.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:a.Class.UNIVERSAL,type:a.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};c.pkcs12FromAsn1=function(r,i,o){"string"==typeof i?(o=i,i=!0):void 0===i&&(i=!0);var u={},f=[];if(!a.validate(r,l,u,f))throw{message:"Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.",errors:f};var d={version:u.version.charCodeAt(0),safeContents:[],getBags:function(n){var r,i={};return"localKeyId"in n?r=n.localKeyId:"localKeyIdHex"in n&&(r=e.util.hexToBytes(n.localKeyIdHex)),void 0!==r&&(i.localKeyId=t(d.safeContents,"localKeyId",r,n.bagType)),"friendlyName"in n&&(i.friendlyName=t(d.safeContents,"friendlyName",n.friendlyName,n.bagType)),i},getBagsByFriendlyName:function(e,n){return t(d.safeContents,"friendlyName",e,n)},getBagsByLocalKeyId:function(e,n){return t(d.safeContents,"localKeyId",e,n)}};if(3!==u.version.charCodeAt(0))throw{message:"PKCS#12 PFX of version other than 3 not supported.",version:u.version.charCodeAt(0)};if(a.derToOid(u.contentType)!==s.oids.data)throw{message:"Only PKCS#12 PFX in password integrity mode supported.",oid:a.derToOid(u.contentType)};var p=u.content.value[0];if(p.tagClass!==a.Class.UNIVERSAL||p.type!==a.Type.OCTETSTRING)throw{message:"PKCS#12 authSafe content data is not an OCTET STRING."};if(u.mac){var h=null,g=0,m=a.derToOid(u.macAlgorithm);switch(m){case s.oids.sha1:h=e.md.sha1.create(),g=20;break;case s.oids.sha256:h=e.md.sha256.create(),g=32;break;case s.oids.sha384:h=e.md.sha384.create(),g=48;break;case s.oids.sha512:h=e.md.sha512.create(),g=64;break;case s.oids.md5:h=e.md.md5.create(),g=16}if(null===h)throw{message:"PKCS#12 uses unsupported MAC algorithm: "+m};var v=new e.util.ByteBuffer(u.macSalt),y="macIterations"in u?parseInt(e.util.bytesToHex(u.macIterations),16):1,b=c.generateKey(o||"",v,3,y,g,h),w=e.hmac.create();w.start(h,b),w.update(p.value);var S=w.getMac();if(S.getBytes()!==u.macDigest)throw{message:"PKCS#12 MAC could not be verified. Invalid password?"}}return n(d,p.value,i,o),d},c.toPkcs12Asn1=function(t,n,r,i){i=i||{},i.saltSize=i.saltSize||8,i.count=i.count||2048,i.algorithm=i.algorithm||i.encAlgorithm||"aes128","useMac"in i||(i.useMac=!0),"localKeyId"in i||(i.localKeyId=null),"generateLocalKeyId"in i||(i.generateLocalKeyId=!0);var o,u=i.localKeyId;if(null!==u)u=e.util.hexToBytes(u);else if(i.generateLocalKeyId)if(n){var l=e.util.isArray(n)?n[0]:n;"string"==typeof l&&(l=s.certificateFromPem(l));var f=e.md.sha1.create();f.update(a.toDer(s.certificateToAsn1(l)).getBytes()),u=f.digest().getBytes()}else u=e.random.getBytes(20);var d=[];null!==u&&d.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.localKeyId).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,u)])])),"friendlyName"in i&&d.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.friendlyName).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,a.Type.BMPSTRING,!1,i.friendlyName)])])),d.length>0&&(o=a.create(a.Class.UNIVERSAL,a.Type.SET,!0,d));var p=[],h=[];null!==n&&(h=e.util.isArray(n)?n:[n]);for(var g=[],m=0;m<h.length;++m){n=h[m],"string"==typeof n&&(n=s.certificateFromPem(n));var v=0===m?o:void 0,y=s.certificateToAsn1(n),b=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.certBag).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.x509Certificate).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(y).getBytes())])])]),v]);g.push(b)}if(g.length>0){var w=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,g),S=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.data).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(w).getBytes())])]);p.push(S)}var C=null;if(null!==t){var _=s.wrapRsaPrivateKey(s.privateKeyToAsn1(t));C=null===r?a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.keyBag).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.pkcs8ShroudedKeyBag).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[s.encryptPrivateKeyInfo(_,r,i)]),o]);var E=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[C]),T=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.data).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(E).getBytes())])]);p.push(T)}var A,I=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,p);if(i.useMac){var f=e.md.sha1.create(),k=new e.util.ByteBuffer(e.random.getBytes(i.saltSize)),x=i.count,t=c.generateKey(r||"",k,3,x,20),B=e.hmac.create();B.start(f,t),B.update(a.toDer(I).getBytes());var N=B.getMac();A=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.sha1).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,N.getBytes())]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,k.getBytes()),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(x).getBytes())])}return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(3).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.data).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(I).getBytes())])]),A])},c.generateKey=e.pbe.generatePkcs12Key}var n="pkcs12";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs12",["require","module","./asn1","./hmac","./oids","./pkcs7asn1","./pbe","./random","./rsa","./sha1","./util","./x509"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1,n=e.pki=e.pki||{};n.pemToDer=function(t){var n=e.pem.decode(t)[0];if(n.procType&&"ENCRYPTED"===n.procType.type)throw{message:"Could not convert PEM to DER; PEM is encrypted."};return e.util.createBuffer(n.body)},n.privateKeyFromPem=function(r){var i=e.pem.decode(r)[0];if("PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type)throw{message:'Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".',headerType:i.type};if(i.procType&&"ENCRYPTED"===i.procType.type)throw{message:"Could not convert private key from PEM; PEM is encrypted."};var o=t.fromDer(i.body);return n.privateKeyFromAsn1(o)},n.privateKeyToPem=function(r,i){var o={type:"RSA PRIVATE KEY",body:t.toDer(n.privateKeyToAsn1(r)).getBytes()};return e.pem.encode(o,{maxline:i})}}var n="pki";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pki",["require","module","./asn1","./oids","./pbe","./pem","./pbkdf2","./pkcs12","./pss","./rsa","./util","./x509"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=function(t,n,r,i){var o=e.util.createBuffer(),a=t.length>>1,s=a+(1&t.length),c=t.substr(0,s),u=t.substr(a,s),l=e.util.createBuffer(),f=e.hmac.create();r=n+r;var d=Math.ceil(i/16),p=Math.ceil(i/20);f.start("MD5",c);var h=e.util.createBuffer();l.putBytes(r);for(var g=0;d>g;++g)f.start(null,null),f.update(l.getBytes()),l.putBuffer(f.digest()),f.start(null,null),f.update(l.bytes()+r),h.putBuffer(f.digest());f.start("SHA1",u);var m=e.util.createBuffer();l.clear(),l.putBytes(r);for(var g=0;p>g;++g)f.start(null,null),f.update(l.getBytes()),l.putBuffer(f.digest()),f.start(null,null),f.update(l.bytes()+r),m.putBuffer(f.digest());return o.putBytes(e.util.xorBytes(h.getBytes(),m.getBytes(),i)),o},n=function(t,n,r){var i=e.hmac.create();i.start("SHA1",t);var o=e.util.createBuffer();return o.putInt32(n[0]),o.putInt32(n[1]),o.putByte(r.type),o.putByte(r.version.major),o.putByte(r.version.minor),o.putInt16(r.length),o.putBytes(r.fragment.bytes()),i.update(o.getBytes()),i.digest().getBytes()},r=function(t,n,r){var i=!1;try{var o=t.deflate(n.fragment.getBytes());n.fragment=e.util.createBuffer(o),n.length=o.length,i=!0}catch(a){}return i},i=function(t,n,r){var i=!1;try{var o=t.inflate(n.fragment.getBytes());n.fragment=e.util.createBuffer(o),n.length=o.length,i=!0}catch(a){}return i},o=function(t,n){var r=0;switch(n){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32()}return e.util.createBuffer(t.getBytes(r))},a=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},s={};s.Version={major:3,minor:1},s.MaxFragment=15360,s.ConnectionEnd={server:0,client:1},s.PRFAlgorithm={tls_prf_sha256:0},s.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},s.CipherType={stream:0,block:1,aead:2},s.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},s.CompressionMethod={none:0,deflate:1},s.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23},s.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},s.Alert={},s.Alert.Level={warning:1,fatal:2},s.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},s.CipherSuites={},s.getCipherSuite=function(e){var t=null;for(var n in s.CipherSuites){var r=s.CipherSuites[n];if(r.id[0]===e.charCodeAt(0)&&r.id[1]===e.charCodeAt(1)){t=r;break}}return t},s.handleUnexpected=function(e,t){var n=!e.open&&e.entity===s.ConnectionEnd.client;n||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unexpected_message}})},s.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(s.queue(e,s.createAlert({level:s.Alert.Level.warning,description:s.Alert.Description.no_renegotiation})),s.flush(e)),e.process()},s.parseHelloMessage=function(t,n,r){var i=null,a=t.entity===s.ConnectionEnd.client;if(38>r)t.error(t,{message:a?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});else{var c=n.fragment,u=c.length();if(i={version:{major:c.getByte(),minor:c.getByte()},random:e.util.createBuffer(c.getBytes(32)),session_id:o(c,1),extensions:[]},a?(i.cipher_suite=c.getBytes(2),i.compression_method=c.getByte()):(i.cipher_suites=o(c,2),i.compression_methods=o(c,1)),u=r-(u-c.length()),u>0){for(var l=o(c,2);l.length()>0;)i.extensions.push({type:[l.getByte(),l.getByte()],data:o(l,2)});if(!a)for(var f=0;f<i.extensions.length;++f){var d=i.extensions[f];if(0===d.type[0]&&0===d.type[1])for(var p=o(d.data,2);p.length()>0;){var h=p.getByte();if(0!==h)break;t.session.serverNameList.push(o(p,2).getBytes())}}}if((i.version.major!==s.Version.major||i.version.minor!==s.Version.minor)&&t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.protocol_version}}),a)t.session.cipherSuite=s.getCipherSuite(i.cipher_suite);else for(var g=e.util.createBuffer(i.cipher_suites.bytes());g.length()>0&&(t.session.cipherSuite=s.getCipherSuite(g.getBytes(2)),null===t.session.cipherSuite););if(null===t.session.cipherSuite)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.handshake_failure},cipherSuite:e.util.bytesToHex(i.cipher_suite)});a?t.session.compressionMethod=i.compression_method:t.session.compressionMethod=s.CompressionMethod.none}return i},s.createSecurityParameters=function(e,t){var n=e.entity===s.ConnectionEnd.client,r=t.random.bytes(),i=n?e.session.sp.client_random:r,o=n?r:s.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:s.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}},s.handleServerHello=function(e,t,n){var r=s.parseHelloMessage(e,t,n);if(!e.fail){var i=r.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=p,e.session.resuming=!0,e.session.sp.server_random=r.random.bytes()):(e.expect=u,e.session.resuming=!1,s.createSecurityParameters(e,r)),e.session.id=i,e.process()}},s.handleClientHello=function(t,n,r){var i=s.parseHelloMessage(t,n,r);if(!t.fail){var o=i.session_id.bytes(),a=null;t.sessionCache&&(a=t.sessionCache.getSession(o),null===a&&(o="")),0===o.length&&(o=e.random.getBytes(32)),t.session.id=o,t.session.clientHelloVersion=i.version,t.session.sp=a?a.sp:{},null!==a?(t.expect=S,t.session.resuming=!0,t.session.sp.client_random=i.random.bytes()):(t.expect=t.verifyClient!==!1?y:b,t.session.resuming=!1,s.createSecurityParameters(t,i)),t.open=!0,s.queue(t,s.createRecord({type:s.ContentType.handshake,data:s.createServerHello(t)})),t.session.resuming?(s.queue(t,s.createRecord({type:s.ContentType.change_cipher_spec,data:s.createChangeCipherSpec()})),t.state.pending=s.createConnectionState(t),t.state.current.write=t.state.pending.write,s.queue(t,s.createRecord({type:s.ContentType.handshake,data:s.createFinished(t)}))):(s.queue(t,s.createRecord({type:s.ContentType.handshake,data:s.createCertificate(t)})),t.fail||(s.queue(t,s.createRecord({type:s.ContentType.handshake,data:s.createServerKeyExchange(t)})),t.verifyClient!==!1&&s.queue(t,s.createRecord({type:s.ContentType.handshake,data:s.createCertificateRequest(t)})),s.queue(t,s.createRecord({type:s.ContentType.handshake,data:s.createServerHelloDone(t)})))),s.flush(t),t.process()}},s.handleCertificate=function(t,n,r){if(3>r)t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});else{var i,a,c=n.fragment,u={certificate_list:o(c,3)},f=[];try{for(;u.certificate_list.length()>0;)i=o(u.certificate_list,3),a=e.asn1.fromDer(i),i=e.pki.certificateFromAsn1(a,!0),f.push(i)}catch(d){t.error(t,{message:"Could not parse certificate list.",cause:d,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.bad_certificate}})}if(!t.fail){var p=t.entity===s.ConnectionEnd.client;!p&&t.verifyClient!==!0||0!==f.length?0===f.length?t.expect=p?l:b:(p?t.session.serverCertificate=f[0]:t.session.clientCertificate=f[0],s.verifyCertificateChain(t,f)&&(t.expect=p?l:b)):t.error(t,{message:p?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}}),t.process()}}},s.handleServerKeyExchange=function(e,t,n){n>0?e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unsupported_certificate}}):(e.expect=f,e.process())},s.handleClientKeyExchange=function(t,n,r){if(48>r)t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unsupported_certificate}});else{var i=n.fragment,a={enc_pre_master_secret:o(i,2).getBytes()},c=null;if(t.getPrivateKey)try{c=t.getPrivateKey(t,t.session.serverCertificate),c=e.pki.privateKeyFromPem(c)}catch(u){t.error(t,{message:"Could not get private key.",cause:u,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}})}if(null===c)t.error(t,{message:"No private key set.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}});else try{var l=t.session.sp;l.pre_master_secret=c.decrypt(a.enc_pre_master_secret);var f=t.session.clientHelloVersion;if(f.major!==l.pre_master_secret.charCodeAt(0)||f.minor!==l.pre_master_secret.charCodeAt(1))throw{message:"TLS version rollback attack detected."}}catch(u){l.pre_master_secret=e.random.getBytes(48)}}t.fail||(t.expect=S,null!==t.session.clientCertificate&&(t.expect=w),t.process())},s.handleCertificateRequest=function(e,t,n){if(3>n)e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});else{var r=t.fragment,i={certificate_types:o(r,1),certificate_authorities:o(r,2)};e.session.certificateRequest=i,
e.expect=d,e.process()}},s.handleCertificateVerify=function(t,n,r){if(2>r)t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});else{var i=n.fragment;i.read-=4;var a=i.bytes();i.read+=4;var c={signature:o(i,2).getBytes()},u=e.util.createBuffer();u.putBuffer(t.session.md5.digest()),u.putBuffer(t.session.sha1.digest()),u=u.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(u,c.signature,"NONE"))throw{message:"CertificateVerify signature does not match."};t.session.md5.update(a),t.session.sha1.update(a)}catch(f){t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.handshake_failure}})}t.fail||(t.expect=S,t.process())}},s.handleServerHelloDone=function(t,n,r){if(r>0)t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.record_overflow}});else if(null===t.serverCertificate){var i={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.insufficient_security}},o=t.verify(t,i.alert.description,depth,[]);o===!0?i=null:((o||0===o)&&("object"!=typeof o||e.util.isArray(o)?"number"==typeof o&&(i.alert.description=o):(o.message&&(i.message=o.message),o.alert&&(i.alert.description=o.alert))),t.error(t,i))}if(!t.fail&&null!==t.session.certificateRequest&&(n=s.createRecord({type:s.ContentType.handshake,data:s.createCertificate(t)}),s.queue(t,n)),!t.fail){n=s.createRecord({type:s.ContentType.handshake,data:s.createClientKeyExchange(t)}),s.queue(t,n),t.expect=m;var a=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&s.queue(e,s.createRecord({type:s.ContentType.handshake,data:s.createCertificateVerify(e,t)})),s.queue(e,s.createRecord({type:s.ContentType.change_cipher_spec,data:s.createChangeCipherSpec()})),e.state.pending=s.createConnectionState(e),e.state.current.write=e.state.pending.write,s.queue(e,s.createRecord({type:s.ContentType.handshake,data:s.createFinished(e)})),e.expect=p,s.flush(e),e.process()};null===t.session.certificateRequest||null===t.session.clientCertificate?a(t,null):s.getClientSignature(t,a)}},s.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});else{var n=e.entity===s.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=s.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?h:C,e.process()}},s.handleFinished=function(n,r,i){var o=r.fragment;o.read-=4;var a=o.bytes();o.read+=4;var c=r.fragment.getBytes();o=e.util.createBuffer(),o.putBuffer(n.session.md5.digest()),o.putBuffer(n.session.sha1.digest());var u=n.entity===s.ConnectionEnd.client,l=u?"server finished":"client finished",f=n.session.sp,d=12,p=t;o=p(f.master_secret,l,o.getBytes(),d),o.getBytes()!==c?n.error(n,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.decrypt_error}}):(n.session.md5.update(a),n.session.sha1.update(a),(n.session.resuming&&u||!n.session.resuming&&!u)&&(s.queue(n,s.createRecord({type:s.ContentType.change_cipher_spec,data:s.createChangeCipherSpec()})),n.state.current.write=n.state.pending.write,n.state.pending=null,s.queue(n,s.createRecord({type:s.ContentType.handshake,data:s.createFinished(n)}))),n.expect=u?g:_,n.handshaking=!1,++n.handshakes,n.peerCertificate=u?n.session.serverCertificate:n.session.clientCertificate,n.sessionCache?(n.session={id:n.session.id,sp:n.session.sp},n.session.sp.keys=null):n.session=null,s.flush(n),n.isConnected=!0,n.connected(n),n.process())},s.handleAlert=function(e,t){var n,r=t.fragment,i={level:r.getByte(),description:r.getByte()};switch(i.description){case s.Alert.Description.close_notify:n="Connection closed.";break;case s.Alert.Description.unexpected_message:n="Unexpected message.";break;case s.Alert.Description.bad_record_mac:n="Bad record MAC.";break;case s.Alert.Description.decryption_failed:n="Decryption failed.";break;case s.Alert.Description.record_overflow:n="Record overflow.";break;case s.Alert.Description.decompression_failure:n="Decompression failed.";break;case s.Alert.Description.handshake_failure:n="Handshake failure.";break;case s.Alert.Description.bad_certificate:n="Bad certificate.";break;case s.Alert.Description.unsupported_certificate:n="Unsupported certificate.";break;case s.Alert.Description.certificate_revoked:n="Certificate revoked.";break;case s.Alert.Description.certificate_expired:n="Certificate expired.";break;case s.Alert.Description.certificate_unknown:n="Certificate unknown.";break;case s.Alert.Description.illegal_parameter:n="Illegal parameter.";break;case s.Alert.Description.unknown_ca:n="Unknown certificate authority.";break;case s.Alert.Description.access_denied:n="Access denied.";break;case s.Alert.Description.decode_error:n="Decode error.";break;case s.Alert.Description.decrypt_error:n="Decrypt error.";break;case s.Alert.Description.export_restriction:n="Export restriction.";break;case s.Alert.Description.protocol_version:n="Unsupported protocol version.";break;case s.Alert.Description.insufficient_security:n="Insufficient security.";break;case s.Alert.Description.internal_error:n="Internal error.";break;case s.Alert.Description.user_canceled:n="User canceled.";break;case s.Alert.Description.no_renegotiation:n="Renegotiation not supported.";break;default:n="Unknown error."}i.description===s.Alert.Description.close_notify?e.close():(e.error(e,{message:n,send:!1,origin:e.entity===s.ConnectionEnd.client?"server":"client",alert:i}),e.process())},s.handleHandshake=function(t,n){var r=n.fragment,i=r.getByte(),o=r.getInt24();if(o>r.length())t.fragmented=n,n.fragment=e.util.createBuffer(),r.read-=4,t.process();else{t.fragmented=null,r.read-=4;var a=r.bytes(o+4);r.read+=4,i in M[t.entity][t.expect]?(t.entity===s.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={serverNameList:[],cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:e.md.md5.create(),sha1:e.md.sha1.create()}),i!==s.HandshakeType.hello_request&&i!==s.HandshakeType.certificate_verify&&i!==s.HandshakeType.finished&&(t.session.md5.update(a),t.session.sha1.update(a)),M[t.entity][t.expect][i](t,n,o)):s.handleUnexpected(t,n)}},s.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};var c=0,u=1,l=2,f=3,d=4,p=5,h=6,g=7,m=8,v=0,y=1,b=2,w=3,S=4,C=5,_=6,E=s.handleUnexpected,T=s.handleChangeCipherSpec,A=s.handleAlert,I=s.handleHandshake,k=s.handleApplicationData,x=[];x[s.ConnectionEnd.client]=[[E,A,I,E],[E,A,I,E],[E,A,I,E],[E,A,I,E],[E,A,I,E],[T,A,E,E],[E,A,I,E],[E,A,I,k],[E,A,I,E]],x[s.ConnectionEnd.server]=[[E,A,I,E],[E,A,I,E],[E,A,I,E],[E,A,I,E],[T,A,E,E],[E,A,I,E],[E,A,I,k],[E,A,I,E]];var B=s.handleHelloRequest,N=s.handleServerHello,D=s.handleCertificate,R=s.handleServerKeyExchange,j=s.handleCertificateRequest,$=s.handleServerHelloDone,L=s.handleFinished,M=[];M[s.ConnectionEnd.client]=[[E,E,N,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[B,E,E,E,E,E,E,E,E,E,E,D,R,j,$,E,E,E,E,E,E],[B,E,E,E,E,E,E,E,E,E,E,E,R,j,$,E,E,E,E,E,E],[B,E,E,E,E,E,E,E,E,E,E,E,E,j,$,E,E,E,E,E,E],[B,E,E,E,E,E,E,E,E,E,E,E,E,E,$,E,E,E,E,E,E],[B,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[B,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,L],[B,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[B,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]];var O=s.handleClientHello,P=s.handleClientKeyExchange,U=s.handleCertificateVerify;M[s.ConnectionEnd.server]=[[E,O,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,D,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,P,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,U,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,L],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]],s.generateKeys=function(e,n){var r=t,i=n.client_random+n.server_random;e.session.resuming||(n.master_secret=r(n.pre_master_secret,"master secret",i,48).bytes(),n.pre_master_secret=null),i=n.server_random+n.client_random;var o=2*n.mac_key_length+2*n.enc_key_length+2*n.fixed_iv_length,a=r(n.master_secret,"key expansion",i,o);return{client_write_MAC_key:a.getBytes(n.mac_key_length),server_write_MAC_key:a.getBytes(n.mac_key_length),client_write_key:a.getBytes(n.enc_key_length),server_write_key:a.getBytes(n.enc_key_length),client_write_IV:a.getBytes(n.fixed_iv_length),server_write_IV:a.getBytes(n.fixed_iv_length)}},s.createConnectionState=function(e){var t=e.entity===s.ConnectionEnd.client,n=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},o={read:n(),write:n()};if(o.read.update=function(e,t){return o.read.cipherFunction(t,o.read)?o.read.compressFunction(e,t,o.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.bad_record_mac}}),!e.fail},o.write.update=function(e,t){return o.write.compressFunction(e,t,o.write)?o.write.cipherFunction(t,o.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}}),!e.fail},e.session){var a=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(a),a.keys=s.generateKeys(e,a),o.read.macKey=t?a.keys.server_write_MAC_key:a.keys.client_write_MAC_key,o.write.macKey=t?a.keys.client_write_MAC_key:a.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(o,e,a),a.compression_algorithm){case s.CompressionMethod.none:break;case s.CompressionMethod.deflate:o.read.compressFunction=i,o.write.compressFunction=r;break;default:throw{message:"Unsupported compression algorithm."}}}return o},s.createRandom=function(){var t=new Date,n=+t+6e4*t.getTimezoneOffset(),r=e.util.createBuffer();return r.putInt32(n),r.putBytes(e.random.getBytes(28)),r},s.createRecord=function(e){if(!e.data)return null;var t={type:e.type,version:{major:s.Version.major,minor:s.Version.minor},length:e.data.length(),fragment:e.data};return t},s.createAlert=function(t){var n=e.util.createBuffer();return n.putByte(t.level),n.putByte(t.description),s.createRecord({type:s.ContentType.alert,data:n})},s.createClientHello=function(t){for(var n=e.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var i=t.cipherSuites[r];n.putByte(i.id[0]),n.putByte(i.id[1])}var o=n.length(),c=e.util.createBuffer();c.putByte(s.CompressionMethod.none);var u=c.length(),l=e.util.createBuffer();if(t.virtualHost){var f=e.util.createBuffer();f.putByte(0),f.putByte(0);var d=e.util.createBuffer();d.putByte(0),a(d,2,e.util.createBuffer(t.virtualHost));var p=e.util.createBuffer();a(p,2,d),a(f,2,p),l.putBuffer(f)}var h=l.length();h>0&&(h+=2);var g=t.session.id,m=g.length+1+2+4+28+2+o+1+u+h,v=e.util.createBuffer();return v.putByte(s.HandshakeType.client_hello),v.putInt24(m),v.putByte(s.Version.major),v.putByte(s.Version.minor),v.putBytes(t.session.sp.client_random),a(v,1,e.util.createBuffer(g)),a(v,2,n),a(v,1,c),h>0&&a(v,2,l),v},s.createServerHello=function(t){var n=t.session.id,r=n.length+1+2+4+28+2+1,i=e.util.createBuffer();return i.putByte(s.HandshakeType.server_hello),i.putInt24(r),i.putByte(s.Version.major),i.putByte(s.Version.minor),i.putBytes(t.session.sp.server_random),a(i,1,e.util.createBuffer(n)),i.putByte(t.session.cipherSuite.id[0]),i.putByte(t.session.cipherSuite.id[1]),i.putByte(t.session.compressionMethod),i},s.createCertificate=function(t){var n=t.entity===s.ConnectionEnd.client,r=null;t.getCertificate&&(r=t.getCertificate(t,n?t.session.certificateRequest:t.session.serverNameList));var i=e.util.createBuffer();if(null!==r)try{e.util.isArray(r)||(r=[r]);for(var o=null,c=0;c<r.length;++c){var u=e.pem.decode(r[c])[0];if("CERTIFICATE"!==u.type&&"X509 CERTIFICATE"!==u.type&&"TRUSTED CERTIFICATE"!==u.type)throw{message:'Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".',headerType:u.type};if(u.procType&&"ENCRYPTED"===u.procType.type)throw{message:"Could not convert certificate from PEM; PEM is encrypted."};var l=e.util.createBuffer(u.body);null===o&&(o=e.asn1.fromDer(l.bytes(),!1));var f=e.util.createBuffer();a(f,3,l),i.putBuffer(f)}r=e.pki.certificateFromAsn1(o),n?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(d){return t.error(t,{message:"Could not send certificate list.",cause:d,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.bad_certificate}})}var p=3+i.length(),h=e.util.createBuffer();return h.putByte(s.HandshakeType.certificate),h.putInt24(p),a(h,3,i),h},s.createClientKeyExchange=function(t){var n=e.util.createBuffer();n.putByte(s.Version.major),n.putByte(s.Version.minor),n.putBytes(e.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=n.getBytes();var i=t.session.serverCertificate.publicKey;n=i.encrypt(r.pre_master_secret);var o=n.length+2,a=e.util.createBuffer();return a.putByte(s.HandshakeType.client_key_exchange),a.putInt24(o),a.putInt16(n.length),a.putBytes(n),a},s.createServerKeyExchange=function(t){var n=0,r=e.util.createBuffer();return n>0&&(r.putByte(s.HandshakeType.server_key_exchange),r.putInt24(n)),r},s.getClientSignature=function(t,n){var r=e.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(t,n,r){var i=null;if(t.getPrivateKey)try{i=t.getPrivateKey(t,t.session.clientCertificate),i=e.pki.privateKeyFromPem(i)}catch(o){t.error(t,{message:"Could not get private key.",cause:o,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}})}null===i?t.error(t,{message:"No private key set.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}}):n=i.sign(n,null),r(t,n)},t.getSignature(t,r,n)},s.createCertificateVerify=function(t,n){var r=n.length+2,i=e.util.createBuffer();return i.putByte(s.HandshakeType.certificate_verify),i.putInt24(r),i.putInt16(n.length),i.putBytes(n),i},s.createCertificateRequest=function(t){var n=e.util.createBuffer();n.putByte(1);var r=e.util.createBuffer();for(var i in t.caStore.certs){var o=t.caStore.certs[i],c=e.pki.distinguishedNameToAsn1(o.subject);r.putBuffer(e.asn1.toDer(c))}var u=1+n.length()+2+r.length(),l=e.util.createBuffer();return l.putByte(s.HandshakeType.certificate_request),l.putInt24(u),a(l,1,n),a(l,2,r),l},s.createServerHelloDone=function(t){var n=e.util.createBuffer();return n.putByte(s.HandshakeType.server_hello_done),n.putInt24(0),n},s.createChangeCipherSpec=function(){var t=e.util.createBuffer();return t.putByte(1),t},s.createFinished=function(n){var r=e.util.createBuffer();r.putBuffer(n.session.md5.digest()),r.putBuffer(n.session.sha1.digest());var i=n.entity===s.ConnectionEnd.client,o=n.session.sp,a=12,c=t,u=i?"client finished":"server finished";r=c(o.master_secret,u,r.getBytes(),a);var l=e.util.createBuffer();return l.putByte(s.HandshakeType.finished),l.putInt24(r.length()),l.putBuffer(r),l},s.queue=function(t,n){if(n){if(n.type===s.ContentType.handshake){var r=n.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var i;if(n.fragment.length()<=s.MaxFragment)i=[n];else{i=[];for(var o=n.fragment.bytes();o.length>s.MaxFragment;)i.push(s.createRecord({type:n.type,data:e.util.createBuffer(o.slice(0,s.MaxFragment))})),o=o.slice(s.MaxFragment);o.length>0&&i.push(s.createRecord({type:n.type,data:e.util.createBuffer(o)}))}for(var a=0;a<i.length&&!t.fail;++a){var c=i[a],u=t.state.current.write;u.update(t,c)&&t.records.push(c)}}},s.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var F=function(t){switch(t){case!0:return!0;case e.pki.certificateError.bad_certificate:return s.Alert.Description.bad_certificate;case e.pki.certificateError.unsupported_certificate:return s.Alert.Description.unsupported_certificate;case e.pki.certificateError.certificate_revoked:return s.Alert.Description.certificate_revoked;case e.pki.certificateError.certificate_expired:return s.Alert.Description.certificate_expired;case e.pki.certificateError.certificate_unknown:return s.Alert.Description.certificate_unknown;case e.pki.certificateError.unknown_ca:return s.Alert.Description.unknown_ca;default:return s.Alert.Description.bad_certificate}},V=function(t){switch(t){case!0:return!0;case s.Alert.Description.bad_certificate:return e.pki.certificateError.bad_certificate;case s.Alert.Description.unsupported_certificate:return e.pki.certificateError.unsupported_certificate;case s.Alert.Description.certificate_revoked:return e.pki.certificateError.certificate_revoked;case s.Alert.Description.certificate_expired:return e.pki.certificateError.certificate_expired;case s.Alert.Description.certificate_unknown:return e.pki.certificateError.certificate_unknown;case s.Alert.Description.unknown_ca:return e.pki.certificateError.unknown_ca;default:return e.pki.certificateError.bad_certificate}};s.verifyCertificateChain=function(t,n){try{e.pki.verifyCertificateChain(t.caStore,n,function(n,r,i){var o=(F(n),t.verify(t,n,r,i));if(o!==!0){if("object"==typeof o&&!e.util.isArray(o)){var a={message:"The application rejected the certificate.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.bad_certificate}};throw o.message&&(a.message=o.message),o.alert&&(a.alert.description=o.alert),a}o!==n&&(o=V(o))}return o})}catch(r){("object"!=typeof r||e.util.isArray(r))&&(r={send:!0,alert:{level:s.Alert.Level.fatal,description:F(r)}}),"send"in r||(r.send=!0),"alert"in r||(r.alert={level:s.Alert.Level.fatal,description:F(r.error)}),t.error(t,r)}return!t.fail},s.createSessionCache=function(t,n){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(n||100,1),r.order=[];for(var i in t)r.order.length<=n?r.order.push(i):delete t[i];r.getSession=function(t){var n=null,i=null;if(t?i=e.util.bytesToHex(t):r.order.length>0&&(i=r.order[0]),null!==i&&i in r.cache){n=r.cache[i],delete r.cache[i];for(var o in r.order)if(r.order[o]===i){r.order.splice(o,1);break}}return n},r.setSession=function(t,n){if(r.order.length===r.capacity){var i=r.order.shift();delete r.cache[i]}var i=e.util.bytesToHex(t);r.order.push(i),r.cache[i]=n}}return r},s.createConnection=function(t){var n=null;n=t.caStore?e.util.isArray(t.caStore)?e.pki.createCaStore(t.caStore):t.caStore:e.pki.createCaStore();var r=t.cipherSuites||null;if(null===r){r=[];for(var i in s.CipherSuites)r.push(s.CipherSuites[i])}var o=t.server?s.ConnectionEnd.server:s.ConnectionEnd.client,a=t.sessionCache?s.createSessionCache(t.sessionCache):null,u={entity:o,sessionId:t.sessionId,caStore:n,sessionCache:a,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(e,t,n,r){return t},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:e.util.createBuffer(),tlsData:e.util.createBuffer(),data:e.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,closed:t.closed,error:function(e,n){n.origin=n.origin||(e.entity===s.ConnectionEnd.client?"client":"server"),n.send&&(s.queue(e,s.createAlert(n.alert)),s.flush(e));var r=n.fatal!==!1;r&&(e.fail=!0),t.error(e,n),r&&e.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};u.reset=function(e){u.record=null,u.session=null,u.peerCertificate=null,u.state={pending:null,current:null},u.expect=u.entity===s.ConnectionEnd.client?c:v,u.fragmented=null,u.records=[],u.open=!1,u.handshakes=0,u.handshaking=!1,u.isConnected=!1,u.fail=!e&&"undefined"!=typeof e,u.input.clear(),u.tlsData.clear(),u.data.clear(),u.state.current=s.createConnectionState(u)},u.reset();var l=function(e,t){var n=t.type-s.ContentType.change_cipher_spec,r=x[e.entity][e.expect];n in r?r[n](e,t):s.handleUnexpected(e,t)},f=function(t){var n=0,r=t.input,i=r.length();return 5>i?n=5-i:(t.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:e.util.createBuffer(),ready:!1},(t.record.version.major!==s.Version.major||t.record.version.minor!==s.Version.minor)&&t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.protocol_version}})),n},d=function(e){var t=0,n=e.input,r=n.length();if(r<e.record.length)t=e.record.length-r;else{e.record.fragment.putBytes(n.getBytes(e.record.length)),n.compact();var i=e.state.current.read;i.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:"Invalid fragmented record.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unexpected_message}})),e.record.ready=!0)}return t};return u.handshake=function(t){if(u.entity!==s.ConnectionEnd.client)u.error(u,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(u.handshaking)u.error(u,{message:"Handshake already in progress.",fatal:!1});else{u.fail&&!u.open&&0===u.handshakes&&(u.fail=!1),u.handshaking=!0,t=t||"";var n=null;t.length>0&&(u.sessionCache&&(n=u.sessionCache.getSession(t)),null===n&&(t="")),0===t.length&&u.sessionCache&&(n=u.sessionCache.getSession(),null!==n&&(t=n.id)),u.session={id:t,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:n?n.sp:{},md5:e.md.md5.create(),sha1:e.md.sha1.create()},u.session.sp.client_random=s.createRandom().getBytes(),u.open=!0,s.queue(u,s.createRecord({type:s.ContentType.handshake,data:s.createClientHello(u)})),s.flush(u)}},u.process=function(e){var t=0;return e&&u.input.putBytes(e),u.fail||(null!==u.record&&u.record.ready&&u.record.fragment.isEmpty()&&(u.record=null),null===u.record&&(t=f(u)),!u.fail&&null!==u.record&&!u.record.ready&&(t=d(u)),!u.fail&&null!==u.record&&u.record.ready&&l(u,u.record)),t},u.prepare=function(t){return s.queue(u,s.createRecord({type:s.ContentType.application_data,data:e.util.createBuffer(t)})),s.flush(u)},u.close=function(e){!u.fail&&u.sessionCache&&u.session&&u.sessionCache.setSession(u.session.id,u.session),u.open&&(u.open=!1,u.input.clear(),(u.isConnected||u.handshaking)&&(u.isConnected=u.handshaking=!1,s.queue(u,s.createAlert({level:s.Alert.Level.warning,description:s.Alert.Description.close_notify})),s.flush(u)),u.closed(u)),u.reset(e)},u},e.tls=e.tls||{};for(var z in s)"function"!=typeof s[z]&&(e.tls[z]=s[z]);e.tls.prf_tls1=t,e.tls.hmac_sha1=n,e.tls.createSessionCache=s.createSessionCache,e.tls.createConnection=s.createConnection}var n="tls";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/tls",["require","module","./asn1","./hmac","./md","./pem","./pki","./random","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,r,i){var s=r.entity===e.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:e.aes.createDecryptionCipher(s?i.keys.server_write_key:i.keys.client_write_key),iv:s?i.keys.server_write_IV:i.keys.client_write_IV},t.write.cipherState={init:!1,cipher:e.aes.createEncryptionCipher(s?i.keys.client_write_key:i.keys.server_write_key),iv:s?i.keys.client_write_IV:i.keys.server_write_IV},t.read.cipherFunction=o,t.write.cipherFunction=n,t.read.macLength=t.write.macLength=i.mac_length,t.read.macFunction=t.write.macFunction=a.hmac_sha1}function n(t,n){var i=!1,o=n.macFunction(n.macKey,n.sequenceNumber,t);t.fragment.putBytes(o),n.updateSequenceNumber();var a;a=t.version.minor>1?e.random.getBytes(16):n.cipherState.init?null:n.cipherState.iv,n.cipherState.init=!0;var s=n.cipherState.cipher;return s.start(a),t.version.minor>1&&s.output.putBytes(a),s.update(t.fragment),s.finish(r)&&(t.fragment=s.output,t.length=t.fragment.length(),i=!0),i}function r(e,t,n){if(!n){var r=e-t.length()%e;t.fillWithByte(r-1,r)}return!0}function i(e,t,n){var r=!0;if(n){for(var i=t.length(),o=t.last(),a=i-1-o;i-1>a;++a)r=r&&t.at(a)==o;r&&t.truncate(o+1)}return r}function o(t,n){var r=!1,o=n.cipherState.init?null:n.cipherState.iv;n.cipherState.init=!0;var a=n.cipherState.cipher;a.start(o),a.update(t.fragment),r=a.finish(i);for(var s=n.macLength,c="",u=0;s>u;++u)c+=String.fromCharCode(0);var l=a.output.length();l>=s?(t.fragment=a.output.getBytes(l-s),c=a.output.getBytes(s)):t.fragment=a.output.getBytes(),t.fragment=e.util.createBuffer(t.fragment),t.length=t.fragment.length();var f=n.macFunction(n.macKey,n.sequenceNumber,t);return n.updateSequenceNumber(),r=f===c&&r}var a=e.tls;a.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=a.BulkCipherAlgorithm.aes,e.cipher_type=a.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=a.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:t},a.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=a.BulkCipherAlgorithm.aes,e.cipher_type=a.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=a.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:t}}var n="aesCipherSuites";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/aesCipherSuites",["require","module","./aes","./tls"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.debug=e.debug||{},e.debug.storage={},e.debug.get=function(t,n){var r;return"undefined"==typeof t?r=e.debug.storage:t in e.debug.storage&&(r="undefined"==typeof n?e.debug.storage[t]:e.debug.storage[t][n]),r},e.debug.set=function(t,n,r){t in e.debug.storage||(e.debug.storage[t]={}),e.debug.storage[t][n]=r},e.debug.clear=function(t,n){"undefined"==typeof t?e.debug.storage={}:t in e.debug.storage&&("undefined"==typeof n?delete e.debug.storage[t]:delete e.debug.storage[t][n])}}var n="debug";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/debug",["require","module"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.log=e.log||{},e.log.levels=["none","error","warning","info","debug","verbose","max"];var t={},n=[],r=null;e.log.LEVEL_LOCKED=2,e.log.NO_LEVEL_CHECK=4,e.log.INTERPOLATE=8;for(var i=0;i<e.log.levels.length;++i){var o=e.log.levels[i];t[o]={index:i,name:o.toUpperCase()}}e.log.logMessage=function(r){for(var i=t[r.level].index,o=0;o<n.length;++o){var a=n[o];if(a.flags&e.log.NO_LEVEL_CHECK)a.f(r);else{var s=t[a.level].index;s>=i&&a.f(a,r)}}},e.log.prepareStandard=function(e){"standard"in e||(e.standard=t[e.level].name+" ["+e.category+"] "+e.message)},e.log.prepareFull=function(t){if(!("full"in t)){var n=[t.message];n=n.concat([]||t.arguments),t.full=e.util.format.apply(this,n)}},e.log.prepareStandardFull=function(t){"standardFull"in t||(e.log.prepareStandard(t),t.standardFull=t.standard)};for(var a=["error","warning","info","debug","verbose"],i=0;i<a.length;++i)(function(t){e.log[t]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:t,category:n,message:r,arguments:i};e.log.logMessage(o)}})(a[i]);if(e.log.makeLogger=function(t){var n={flags:0,f:t};return e.log.setLevel(n,"none"),n},e.log.setLevel=function(t,n){var r=!1;if(t&&!(t.flags&e.log.LEVEL_LOCKED))for(var i=0;i<e.log.levels.length;++i){var o=e.log.levels[i];if(n==o){t.level=n,r=!0;break}}return r},e.log.lock=function(t,n){"undefined"==typeof n||n?t.flags|=e.log.LEVEL_LOCKED:t.flags&=~e.log.LEVEL_LOCKED},e.log.addLogger=function(e){n.push(e)},"undefined"!=typeof console&&"log"in console){var s;if(console.error&&console.warn&&console.info&&console.debug){var c={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},u=function(t,n){e.log.prepareStandard(n);var r=c[n.level],i=[n.standard];i=i.concat(n.arguments.slice()),r.apply(console,i)};s=e.log.makeLogger(u)}else{var u=function(t,n){e.log.prepareStandardFull(n),console.log(n.standardFull)};s=e.log.makeLogger(u)}e.log.setLevel(s,"debug"),e.log.addLogger(s),r=s}else console={log:function(){}};if(null!==r){var l=e.util.getQueryVariables();if("console.level"in l&&e.log.setLevel(r,l["console.level"].slice(-1)[0]),"console.lock"in l){var f=l["console.lock"].slice(-1)[0];"true"==f&&e.log.lock(r)}}e.log.consoleLogger=r}var n="log";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/log",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1,n=e.pkcs7=e.pkcs7||{};n.messageFromPem=function(r){var i=e.pem.decode(r)[0];if("PKCS7"!==i.type)throw{message:'Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".',headerType:i.type
};if(i.procType&&"ENCRYPTED"===i.procType.type)throw{message:"Could not convert PKCS#7 message from PEM; PEM is encrypted."};var o=t.fromDer(i.body);return n.messageFromAsn1(o)},n.messageToPem=function(n,r){var i={type:"PKCS7",body:t.toDer(n.toAsn1()).getBytes()};return e.pem.encode(i,{maxline:r})},n.messageFromAsn1=function(r){var i={},o=[];if(!t.validate(r,n.asn1.contentInfoValidator,i,o))throw{message:"Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.",errors:o};var a,s=t.derToOid(i.contentType);switch(s){case e.pki.oids.envelopedData:a=n.createEnvelopedData();break;case e.pki.oids.encryptedData:a=n.createEncryptedData();break;case e.pki.oids.signedData:a=n.createSignedData();break;default:throw{message:"Cannot read PKCS#7 message. ContentType with OID "+s+" is not (yet) supported."}}return a.fromAsn1(i.content.value[0]),a};var r=function(r){var i={},o=[];if(!t.validate(r,n.asn1.recipientInfoValidator,i,o))throw{message:"Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 EnvelopedData.",errors:o};return{version:i.version.charCodeAt(0),issuer:e.pki.RDNAttributesAsArray(i.issuer),serialNumber:e.util.createBuffer(i.serial).toHex(),encryptedContent:{algorithm:t.derToOid(i.encAlgorithm),parameter:i.encParameter.value,content:i.encKey}}},i=function(n){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(n.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:n.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,e.util.hexToBytes(n.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.encryptedContent.content)])},o=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r(e[n]));return t},a=function(e){for(var t=[],n=0;n<e.length;n++)t.push(i(e[n]));return t},s=function(n){return[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.parameter.getBytes())]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.content.getBytes())])]},c=function(n,r,i){var o={},a=[];if(!t.validate(r,i,o,a))throw{message:"Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.",errors:a};var s=t.derToOid(o.contentType);if(s!==e.pki.oids.data)throw{message:"Unsupported PKCS#7 message. Only wrapped ContentType Data supported."};if(o.encryptedContent){var c="";if(e.util.isArray(o.encryptedContent))for(var u=0;u<o.encryptedContent.length;++u){if(o.encryptedContent[u].type!==t.Type.OCTETSTRING)throw{message:"Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects."};c+=o.encryptedContent[u].value}else c=o.encryptedContent;n.encryptedContent={algorithm:t.derToOid(o.encAlgorithm),parameter:e.util.createBuffer(o.encParameter.value),content:e.util.createBuffer(c)}}if(o.content){var c="";if(e.util.isArray(o.content))for(var u=0;u<o.content.length;++u){if(o.content[u].type!==t.Type.OCTETSTRING)throw{message:"Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects."};c+=o.content[u].value}else c=o.content;n.content=e.util.createBuffer(c)}return n.version=o.version.charCodeAt(0),n.rawCapture=o,o},u=function(t){if(void 0===t.encryptedContent.key)throw{message:"Symmetric key not available."};if(void 0===t.content){var n;switch(t.encryptedContent.algorithm){case e.pki.oids["aes128-CBC"]:case e.pki.oids["aes192-CBC"]:case e.pki.oids["aes256-CBC"]:n=e.aes.createDecryptionCipher(t.encryptedContent.key);break;case e.pki.oids.desCBC:case e.pki.oids["des-EDE3-CBC"]:n=e.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw{message:"Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm}}if(n.start(t.encryptedContent.parameter),n.update(t.encryptedContent.content),!n.finish())throw{message:"Symmetric decryption failed."};t.content=n.output}};n.createSignedData=function(){var r=null;return r={type:e.pki.oids.signedData,version:1,certificates:[],crls:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){c(r,t,n.asn1.signedDataValidator),r.certificates=[],r.crls=[],r.digestAlgorithmIdentifiers=[],r.contentInfo=null,r.signerInfos=[];for(var i=r.rawCapture.certificates.value,o=0;o<i.length;++o)r.certificates.push(e.pki.certificateFromAsn1(i[o]))},toAsn1:function(){if("content"in r)throw"Signing PKCS#7 content not yet implemented.";r.contentInfo||r.sign();for(var n=[],i=0;i<r.certificates.length;++i)n.push(e.pki.certificateToAsn1(r.certificates[0]));var o=[];return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(r.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,r.digestAlgorithmIdentifiers),r.contentInfo,t.create(t.Class.CONTEXT_SPECIFIC,0,!0,n),t.create(t.Class.CONTEXT_SPECIFIC,1,!0,o),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,r.signerInfos)])])])},sign:function(n){if("content"in r)throw"PKCS#7 signing not yet implemented.";"object"!=typeof r.content&&(r.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.pki.oids.data).getBytes())]),"content"in r&&r.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r.content)])))},verify:function(){throw"PKCS#7 signature verification not yet implemented."},addCertificate:function(t){"string"==typeof t&&(t=e.pki.certificateFromPem(t)),r.certificates.push(t)},addCertificateRevokationList:function(e){throw"PKCS#7 CRL support not yet implemented."}}},n.createEncryptedData=function(){var t=null;return t={type:e.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(e){c(t,e,n.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),u(t)}}},n.createEnvelopedData=function(){var r=null;return r={type:e.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(e){var t=c(r,e,n.asn1.envelopedDataValidator);r.recipients=o(t.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(r.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,a(r.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,s(r.encryptedContent))])])])},findRecipient:function(e){for(var t=e.issuer.attributes,n=0;n<r.recipients.length;++n){var i=r.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===t.length){for(var a=!0,s=0;s<t.length;++s)if(o[s].type!==t[s].type||o[s].value!==t[s].value){a=!1;break}if(a)return i}}return null},decrypt:function(t,n){if(void 0===r.encryptedContent.key&&void 0!==t&&void 0!==n)switch(t.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:case e.pki.oids.desCBC:var i=n.decrypt(t.encryptedContent.content);r.encryptedContent.key=e.util.createBuffer(i);break;default:throw{message:"Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm}}u(r)},addRecipient:function(t){r.recipients.push({version:0,issuer:t.subject.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:e.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(void 0===r.encryptedContent.content){n=n||r.encryptedContent.algorithm,t=t||r.encryptedContent.key;var i,o,a;switch(n){case e.pki.oids["aes128-CBC"]:i=16,o=16,a=e.aes.createEncryptionCipher;break;case e.pki.oids["aes192-CBC"]:i=24,o=16,a=e.aes.createEncryptionCipher;break;case e.pki.oids["aes256-CBC"]:i=32,o=16,a=e.aes.createEncryptionCipher;break;case e.pki.oids["des-EDE3-CBC"]:i=24,o=8,a=e.des.createEncryptionCipher;break;default:throw{message:"Unsupported symmetric cipher, OID "+n}}if(void 0===t)t=e.util.createBuffer(e.random.getBytes(i));else if(t.length()!=i)throw{message:"Symmetric key has wrong length, got "+t.length()+" bytes, expected "+i};r.encryptedContent.algorithm=n,r.encryptedContent.key=t,r.encryptedContent.parameter=e.util.createBuffer(e.random.getBytes(o));var s=a(t);if(s.start(r.encryptedContent.parameter.copy()),s.update(r.content),!s.finish())throw{message:"Symmetric encryption failed."};r.encryptedContent.content=s.output}for(var c=0;c<r.recipients.length;c++){var u=r.recipients[c];if(void 0===u.encryptedContent.content)switch(u.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(r.encryptedContent.key.data);break;default:throw{message:"Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm}}}}}}}var n="pkcs7";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs7",["require","module","./aes","./asn1","./des","./oids","./pem","./pkcs7asn1","./random","./util","./x509"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t="forge.task",n=0,r={},i=0;e.debug.set(t,"tasks",r);var o={};e.debug.set(t,"queues",o);var a="?",s=30,c=20,u="ready",l="running",f="blocked",d="sleeping",p="done",h="error",g="stop",m="start",v="block",y="unblock",b="sleep",w="wakeup",S="cancel",C="fail",_={};_[u]={},_[u][g]=u,_[u][m]=l,_[u][S]=p,_[u][C]=h,_[l]={},_[l][g]=u,_[l][m]=l,_[l][v]=f,_[l][y]=l,_[l][b]=d,_[l][w]=l,_[l][S]=p,_[l][C]=h,_[f]={},_[f][g]=f,_[f][m]=f,_[f][v]=f,_[f][y]=f,_[f][b]=f,_[f][w]=f,_[f][S]=p,_[f][C]=h,_[d]={},_[d][g]=d,_[d][m]=d,_[d][v]=d,_[d][y]=d,_[d][b]=d,_[d][w]=d,_[d][S]=p,_[d][C]=h,_[p]={},_[p][g]=p,_[p][m]=p,_[p][v]=p,_[p][y]=p,_[p][b]=p,_[p][w]=p,_[p][S]=p,_[p][C]=h,_[h]={},_[h][g]=h,_[h][m]=h,_[h][v]=h,_[h][y]=h,_[h][b]=h,_[h][w]=h,_[h][S]=h,_[h][C]=h;var E=function(o){this.id=-1,this.name=o.name||a,this.parent=o.parent||null,this.run=o.run,this.subtasks=[],this.error=!1,this.state=u,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=i++,r[this.id]=this,n>=1&&e.log.verbose(t,"[%s][%s] init",this.id,this.name,this)};E.prototype.debug=function(n){n=n||"",e.log.debug(t,n,"[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",o)},E.prototype.next=function(e,t){"function"==typeof e&&(t=e,e=this.name);var n=new E({run:t,name:e,parent:this});return n.state=l,n.type=this.type,n.successCallback=this.successCallback||null,n.failureCallback=this.failureCallback||null,this.subtasks.push(n),this},E.prototype.parallel=function(t,n){return e.util.isArray(t)&&(n=t,t=this.name),this.next(t,function(r){var i=r;i.block(n.length);for(var o=function(t,r){e.task.start({type:t,run:function(e){n[r](e)},success:function(e){i.unblock()},failure:function(e){i.unblock()}})},a=0;a<n.length;a++){var s=t+"__parallel-"+r.id+"-"+a,c=a;o(s,c)}})},E.prototype.stop=function(){this.state=_[this.state][g]},E.prototype.start=function(){this.error=!1,this.state=_[this.state][m],this.state===l&&(this.start=new Date,this.run(this),A(this,0))},E.prototype.block=function(e){e="undefined"==typeof e?1:e,this.blocks+=e,this.blocks>0&&(this.state=_[this.state][v])},E.prototype.unblock=function(e){return e="undefined"==typeof e?1:e,this.blocks-=e,0===this.blocks&&this.state!==p&&(this.state=l,A(this,0)),this.blocks},E.prototype.sleep=function(e){e="undefined"==typeof e?0:e,this.state=_[this.state][b];var t=this;this.timeoutId=setTimeout(function(){t.timeoutId=null,t.state=l,A(t,0)},e)},E.prototype.wait=function(e){e.wait(this)},E.prototype.wakeup=function(){this.state===d&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=l,A(this,0))},E.prototype.cancel=function(){this.state=_[this.state][S],this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},E.prototype.fail=function(e){if(this.error=!0,I(this,!0),e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,A(e,0);else{if(null!==this.parent){for(var t=this.parent;null!==t.parent;)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,t=t.parent;I(t,!0)}this.failureCallback&&this.failureCallback(this)}};var T=function(e){e.error=!1,e.state=_[e.state][m],setTimeout(function(){e.state===l&&(e.swapTime=+new Date,e.run(e),A(e,0))},0)},A=function(e,t){var n=t>s||+new Date-e.swapTime>c,r=function(t){if(t++,e.state===l)if(n&&(e.swapTime=+new Date),e.subtasks.length>0){var r=e.subtasks.shift();r.error=e.error,r.swapTime=e.swapTime,r.userData=e.userData,r.run(r),r.error||A(r,t)}else I(e),e.error||null!==e.parent&&(e.parent.error=e.error,e.parent.swapTime=e.swapTime,e.parent.userData=e.userData,A(e.parent,t))};n?setTimeout(r,0):r(t)},I=function(i,a){i.state=p,delete r[i.id],n>=1&&e.log.verbose(t,"[%s][%s] finish",i.id,i.name,i),null===i.parent&&(i.type in o?0===o[i.type].length?e.log.error(t,"[%s][%s] task queue empty [%s]",i.id,i.name,i.type):o[i.type][0]!==i?e.log.error(t,"[%s][%s] task not first in queue [%s]",i.id,i.name,i.type):(o[i.type].shift(),0===o[i.type].length?(n>=1&&e.log.verbose(t,"[%s][%s] delete queue [%s]",i.id,i.name,i.type),delete o[i.type]):(n>=1&&e.log.verbose(t,"[%s][%s] queue start next [%s] remain:%s",i.id,i.name,i.type,o[i.type].length),o[i.type][0].start())):e.log.error(t,"[%s][%s] task queue missing [%s]",i.id,i.name,i.type),a||(i.error&&i.failureCallback?i.failureCallback(i):!i.error&&i.successCallback&&i.successCallback(i)))};e.task=e.task||{},e.task.start=function(r){var i=new E({run:r.run,name:r.name||a});i.type=r.type,i.successCallback=r.success||null,i.failureCallback=r.failure||null,i.type in o?o[r.type].push(i):(n>=1&&e.log.verbose(t,"[%s][%s] create queue [%s]",i.id,i.name,i.type),o[i.type]=[i],T(i))},e.task.cancel=function(e){e in o&&(o[e]=[o[e][0]])},e.task.createCondition=function(){var e={tasks:{}};return e.wait=function(t){t.id in e.tasks||(t.block(),e.tasks[t.id]=t)},e.notify=function(){var t=e.tasks;e.tasks={};for(var n in t)t[n].unblock()},e}}var n="task";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var o=!0;i=function(e,n){n(r,t)}}var a,s=function(t,r){r.exports=function(r){var i=a.map(function(e){return t(e)}).concat(e);if(r=r||{},r.defined=r.defined||{},r.defined[n])return r[n];r.defined[n]=!0;for(var o=0;o<i.length;++o)i[o](r);return r[n]}},c=i;(i=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),o?(delete i,c.apply(null,Array.prototype.slice.call(arguments,0))):(i=c,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/task",["require","module","./debug","./log","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){var e="forge";if("function"!=typeof i){if("object"!=typeof t||!t.exports)return void("undefined"==typeof forge&&(forge={disableNativeCode:!1}));var n=!0;i=function(e,n){n(r,t)}}var o,a=function(t,n){n.exports=function(n){var r=o.map(function(e){return t(e)});if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var i=0;i<r.length;++i)r[i](n);return n},n.exports.disableNativeCode=!1,n.exports(n.exports)},s=i;(i=function(e,t){return o="string"==typeof e?t.slice(2):e.slice(2),n?(delete i,s.apply(null,Array.prototype.slice.call(arguments,0))):(i=s,i.apply(null,Array.prototype.slice.call(arguments,0)))})("js/forge",["require","module","./aes","./aesCipherSuites","./asn1","./debug","./des","./hmac","./log","./pbkdf2","./pem","./pkcs7","./pkcs1","./pkcs12","./pki","./prng","./pss","./random","./rc2","./task","./tls","./util","./md","./mgf1"],function(){a.apply(null,Array.prototype.slice.call(arguments,0))})}(),window.forge=r("js/forge")}()}).call(this,e("sycGbZ"))},{sycGbZ:51}],6:[function(e,t,n){(function(t){function r(e,t){return e.length>=t?e:r("0"+e,t)}var i=e("crypto"),o=e("jsbn"),a=e("./lib/ec.js").ECPointFp;n.ECCurves=e("./lib/sec.js"),n.ECKey=function(e,n,s){var c,u=e(),l=u.getN(),f=Math.floor(l.bitLength()/8);if(n)if(s){if(n.length!=2*f+1)return!1;var e=u.getCurve(),d=n.slice(1,f+1),p=n.slice(f+1);this.P=new a(e,e.fromBigInteger(new o(d.toString("hex"),16)),e.fromBigInteger(new o(p.toString("hex"),16)))}else{if(n.length!=f)return!1;c=new o(n.toString("hex"),16)}else{var h=l.subtract(o.ONE),g=new o(i.randomBytes(l.bitLength()));c=g.mod(h).add(o.ONE),this.P=u.getG().multiply(c)}if(this.P){var m=r(this.P.getX().toBigInteger().toString(16),2*f)+r(this.P.getY().toBigInteger().toString(16),2*f);this.PublicKey=new t("04"+m,"hex")}c&&(this.PrivateKey=new t(r(c.toString(16),2*f),"hex"),this.deriveSharedSecret=function(e){if(!e||!e.P)return!1;var n=e.P.multiply(c);return new t(r(n.getX().toBigInteger().toString(16),2*f),"hex")})}}).call(this,e("buffer").Buffer)},{"./lib/ec.js":7,"./lib/sec.js":8,buffer:29,crypto:35,jsbn:9}],7:[function(e,t,n){function r(e,t){this.x=t,this.q=e}function i(e){return e==this?!0:this.q.equals(e.q)&&this.x.equals(e.x)}function o(){return this.x}function a(){return new r(this.q,this.x.negate().mod(this.q))}function s(e){return new r(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function c(e){return new r(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function u(e){return new r(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function l(){return new r(this.q,this.x.square().mod(this.q))}function f(e){return new r(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}function d(e,t,n,r){this.curve=e,this.x=t,this.y=n,null==r?this.z=D.ONE:this.z=r,this.zinv=null}function p(){null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q));var e=this.x.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)}function h(){null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q));var e=this.y.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)}function g(e){if(e==this)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return this.isInfinity();var t,n;return t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),t.equals(D.ZERO)?(n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q),n.equals(D.ZERO)):!1}function m(){return null==this.x&&null==this.y?!0:this.z.equals(D.ZERO)&&!this.y.toBigInteger().equals(D.ZERO)}function v(){return new d(this.curve,this.x,this.y.negate(),this.z)}function y(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(D.ZERO.equals(n))return D.ZERO.equals(t)?this.twice():this.curve.getInfinity();var r=new D("3"),i=this.x.toBigInteger(),o=this.y.toBigInteger(),a=(e.x.toBigInteger(),e.y.toBigInteger(),n.square()),s=a.multiply(n),c=i.multiply(a),u=t.square().multiply(this.z),l=u.subtract(c.shiftLeft(1)).multiply(e.z).subtract(s).multiply(n).mod(this.curve.q),f=c.multiply(r).multiply(t).subtract(o.multiply(s)).subtract(u.multiply(t)).multiply(e.z).add(t.multiply(s)).mod(this.curve.q),p=s.multiply(this.z).multiply(e.z).mod(this.curve.q);return new d(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(f),p)}function b(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new D("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),o=this.curve.a.toBigInteger(),a=t.square().multiply(e);D.ZERO.equals(o)||(a=a.add(this.z.square().multiply(o))),a=a.mod(this.curve.q);var s=a.square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),c=a.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(a.square().multiply(a)).mod(this.curve.q),u=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new d(this.curve,this.curve.fromBigInteger(s),this.curve.fromBigInteger(c),u)}function w(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new D("3")),i=this.negate(),o=this;for(t=r.bitLength()-2;t>0;--t){o=o.twice();var a=r.testBit(t),s=n.testBit(t);a!=s&&(o=o.add(a?this:i))}return o}function S(e,t,n){var r;r=e.bitLength()>n.bitLength()?e.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),o=this.add(t);r>=0;)i=i.twice(),e.testBit(r)?i=n.testBit(r)?i.add(o):i.add(this):n.testBit(r)&&(i=i.add(t)),--r;return i}function C(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new d(this,null,null),this.reducer=new R(this.q)}function _(){return this.q}function E(){return this.a}function T(){return this.b}function A(e){return e==this?!0:this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function I(){return this.infinity}function k(e){return new r(this.q,e)}function x(e){this.reducer.reduce(e)}function B(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,n=e.substr(2,t),r=e.substr(t+2,t);return new d(this,this.fromBigInteger(new D(n,16)),this.fromBigInteger(new D(r,16)));default:return null}}function N(e){if(e.isInfinity())return"00";var t=e.getX().toBigInteger().toString(16),n=e.getY().toBigInteger().toString(16),r=this.getQ().toString(16).length;for(r%2!=0&&r++;t.length<r;)t="0"+t;for(;n.length<r;)n="0"+n;return"04"+t+n}var D=e("jsbn"),R=D.prototype.Barrett;r.prototype.equals=i,r.prototype.toBigInteger=o,r.prototype.negate=a,r.prototype.add=s,r.prototype.subtract=c,r.prototype.multiply=u,r.prototype.square=l,r.prototype.divide=f,d.prototype.getX=p,d.prototype.getY=h,d.prototype.equals=g,d.prototype.isInfinity=m,d.prototype.negate=v,d.prototype.add=y,d.prototype.twice=b,d.prototype.multiply=w,d.prototype.multiplyTwo=S,C.prototype.getQ=_,C.prototype.getA=E,C.prototype.getB=T,C.prototype.equals=A,C.prototype.getInfinity=I,C.prototype.fromBigInteger=k,C.prototype.reduce=x,C.prototype.decodePointHex=B,C.prototype.encodePointHex=N;var n={ECCurveFp:C,ECPointFp:d,ECFieldElementFp:r};t.exports=n},{jsbn:9}],8:[function(e,t,n){function r(e,t,n,r){this.curve=e,this.g=t,this.n=n,this.h=r}function i(){return this.curve}function o(){return this.g}function a(){return this.n}function s(){return this.h}function c(e){return new m(e,16)}function u(){var e=c("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF"),t=c("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC"),n=c("E87579C11079F43DD824993C2CEE5ED3"),i=c("FFFFFFFE0000000075A30D1B9038A115"),o=m.ONE,a=new v(e,t,n),s=a.decodePointHex("04161FF7528B899B2D0C28607CA52C5B86CF5AC8395BAFEB13C02DA292DDED7A83");return new r(a,s,i,o)}function l(){var e=c("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73"),t=m.ZERO,n=c("7"),i=c("0100000000000000000001B8FA16DFAB9ACA16B6B3"),o=m.ONE,a=new v(e,t,n),s=a.decodePointHex("043B4C382CE37AA192A4019E763036F4F5DD4D7EBB938CF935318FDCED6BC28286531733C3F03C4FEE");return new r(a,s,i,o)}function f(){var e=c("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF"),t=c("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC"),n=c("1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45"),i=c("0100000000000000000001F4C8F927AED3CA752257"),o=m.ONE,a=new v(e,t,n),s=a.decodePointHex("044A96B5688EF573284664698968C38BB913CBFC8223A628553168947D59DCC912042351377AC5FB32");return new r(a,s,i,o)}function d(){var e=c("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37"),t=m.ZERO,n=c("3"),i=c("FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D"),o=m.ONE,a=new v(e,t,n),s=a.decodePointHex("04DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D");return new r(a,s,i,o)}function p(){var e=c("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF"),t=c("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC"),n=c("64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1"),i=c("FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831"),o=m.ONE,a=new v(e,t,n),s=a.decodePointHex("04188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF101207192B95FFC8DA78631011ED6B24CDD573F977A11E794811");return new r(a,s,i,o)}function h(){var e=c("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001"),t=c("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE"),n=c("B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4"),i=c("FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D"),o=m.ONE,a=new v(e,t,n),s=a.decodePointHex("04B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34");return new r(a,s,i,o)}function g(){var e=c("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),t=c("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),n=c("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),i=c("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),o=m.ONE,a=new v(e,t,n),s=a.decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5");return new r(a,s,i,o)}var m=e("jsbn"),v=e("./ec.js").ECCurveFp;r.prototype.getCurve=i,r.prototype.getG=o,r.prototype.getN=a,r.prototype.getH=s,t.exports={secp128r1:u,secp160k1:l,secp160r1:f,secp192k1:d,secp192r1:p,secp224r1:h,secp256r1:g}},{"./ec.js":7,jsbn:9}],9:[function(e,t,n){(function(){function e(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function r(){return new e(null)}function i(e,t,n,r,i,o){for(;--o>=0;){var a=t*this[e++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=67108863&a}return i}function o(e,t,n,r,i,o){for(var a=32767&t,s=t>>15;--o>=0;){var c=32767&this[e],u=this[e++]>>15,l=s*c+u*a;c=a*c+((32767&l)<<15)+n[r]+(1073741823&i),i=(c>>>30)+(l>>>15)+s*u+(i>>>30),n[r++]=1073741823&c}return i}function a(e,t,n,r,i,o){for(var a=16383&t,s=t>>14;--o>=0;){var c=16383&this[e],u=this[e++]>>14,l=s*c+u*a;c=a*c+((16383&l)<<14)+n[r]+i,i=(c>>28)+(l>>14)+s*u,n[r++]=268435455&c}return i}function s(e){return st.charAt(e)}function c(e,t){var n=ct[e.charCodeAt(t)];return null==n?-1:n}function u(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function l(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+DV:this.t=0}function f(e){var t=r();return t.fromInt(e),t}function d(t,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(t,n);r=2}this.t=0,this.s=0;for(var i=t.length,o=!1,a=0;--i>=0;){var s=8==r?255&t[i]:c(t,i);0>s?"-"==t.charAt(i)&&(o=!0):(o=!1,0==a?this[this.t++]=s:a+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&e.ZERO.subTo(this,this)}function p(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function h(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,o="",a=this.t,c=this.DB-a*this.DB%t;if(a-->0)for(c<this.DB&&(n=this[a]>>c)>0&&(i=!0,o=s(n));a>=0;)t>c?(n=(this[a]&(1<<c)-1)<<t-c,n|=this[--a]>>(c+=this.DB-t)):(n=this[a]>>(c-=t)&r,0>=c&&(c+=this.DB,--a)),n>0&&(i=!0),i&&(o+=s(n));return i?o:"0"}function g(){var t=r();return e.ZERO.subTo(this,t),t}function m(){return this.s<0?this.negate():this}function v(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function y(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function b(){return this.t<=0?0:this.DB*(this.t-1)+y(this[this.t-1]^this.s&this.DM)}function w(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function S(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function C(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>i|s,s=(this[n]&o)<<r;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function _(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<i,t[a-n]=this[a]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}function E(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);i>n;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=0>r?-1:0,-1>r?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function T(t,n){var r=this.abs(),i=t.abs(),o=r.t;for(n.t=o+i.t;--o>=0;)n[o]=0;for(o=0;o<i.t;++o)n[o+r.t]=r.am(0,i[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)}function A(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function I(t,n,i){var o=t.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=n&&n.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=r());var s=r(),c=this.s,u=t.s,l=this.DB-y(o[o.t-1]);l>0?(o.lShiftTo(l,s),a.lShiftTo(l,i)):(o.copyTo(s),a.copyTo(i));var f=s.t,d=s[f-1];if(0!=d){var p=d*(1<<this.F1)+(f>1?s[f-2]>>this.F2:0),h=this.FV/p,g=(1<<this.F1)/p,m=1<<this.F2,v=i.t,b=v-f,w=null==n?r():n;for(s.dlShiftTo(b,w),i.compareTo(w)>=0&&(i[i.t++]=1,i.subTo(w,i)),e.ONE.dlShiftTo(f,w),w.subTo(s,s);s.t<f;)s[s.t++]=0;for(;--b>=0;){var S=i[--v]==d?this.DM:Math.floor(i[v]*h+(i[v-1]+m)*g);if((i[v]+=s.am(0,S,i,b,0,f))<S)for(s.dlShiftTo(b,w),i.subTo(w,i);i[v]<--S;)i.subTo(w,i)}null!=n&&(i.drShiftTo(f,n),c!=u&&e.ZERO.subTo(n,n)),i.t=f,i.clamp(),l>0&&i.rShiftTo(l,i),0>c&&e.ZERO.subTo(i,i)}}}function k(t){var n=r();return this.abs().divRemTo(t,null,n),this.s<0&&n.compareTo(e.ZERO)>0&&t.subTo(n,n),n}function x(e){this.m=e}function B(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function N(e){return e}function D(e){e.divRemTo(this.m,null,e)}function R(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function j(e,t){e.squareTo(t),this.reduce(t)}function $(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function L(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function M(t){var n=r();return t.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),t.s<0&&n.compareTo(e.ZERO)>0&&this.m.subTo(n,n),n}function O(e){var t=r();return e.copyTo(t),this.reduce(t),t}function P(e){for(;e.t<=this.mt2;)e[e.t++]=0;
for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function U(e,t){e.squareTo(t),this.reduce(t)}function F(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function V(){return 0==(this.t>0?1&this[0]:this.s)}function z(t,n){if(t>4294967295||1>t)return e.ONE;var i=r(),o=r(),a=n.convert(this),s=y(t)-1;for(a.copyTo(i);--s>=0;)if(n.sqrTo(i,o),(t&1<<s)>0)n.mulTo(o,a,i);else{var c=i;i=o,o=c}return n.revert(i)}function q(e,t){var n;return n=256>e||t.isEven()?new x(t):new L(t),this.exp(e,n)}function H(){var e=r();return this.copyTo(e),e}function G(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function K(){return 0==this.t?this.s:this[0]<<24>>24}function W(){return 0==this.t?this.s:this[0]<<16>>16}function Y(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function X(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Z(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),i=f(n),o=r(),a=r(),s="";for(this.divRemTo(i,o,a);o.signum()>0;)s=(n+a.intValue()).toString(e).substr(1)+s,o.divRemTo(i,o,a);return a.intValue().toString(e)+s}function Q(t,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),i=Math.pow(n,r),o=!1,a=0,s=0,u=0;u<t.length;++u){var l=c(t,u);0>l?"-"==t.charAt(u)&&0==this.signum()&&(o=!0):(s=n*s+l,++a>=r&&(this.dMultiply(i),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(n,a)),this.dAddOffset(s,0)),o&&e.ZERO.subTo(this,this)}function J(t,n,r){if("number"==typeof n)if(2>t)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),se,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var i=new Array,o=7&t;i.length=(t>>3)+1,n.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function ee(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-->0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)8>r?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,0>=r&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function te(e){return 0==this.compareTo(e)}function ne(e){return this.compareTo(e)<0?this:e}function re(e){return this.compareTo(e)>0?this:e}function ie(e,t,n){var r,i,o=Math.min(e.t,this.t);for(r=0;o>r;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=o;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function oe(e,t){return e&t}function ae(e){var t=r();return this.bitwiseTo(e,oe,t),t}function se(e,t){return e|t}function ce(e){var t=r();return this.bitwiseTo(e,se,t),t}function ue(e,t){return e^t}function le(e){var t=r();return this.bitwiseTo(e,ue,t),t}function fe(e,t){return e&~t}function de(e){var t=r();return this.bitwiseTo(e,fe,t),t}function pe(){for(var e=r(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function he(e){var t=r();return 0>e?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function ge(e){var t=r();return 0>e?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function me(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function ve(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+me(this[e]);return this.s<0?this.t*this.DB:-1}function ye(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function be(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=ye(this[n]^t);return e}function we(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function Se(t,n){var r=e.ONE.shiftLeft(t);return this.bitwiseTo(r,n,r),r}function Ce(e){return this.changeBit(e,se)}function _e(e){return this.changeBit(e,fe)}function Ee(e){return this.changeBit(e,ue)}function Te(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);i>n;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=0>r?-1:0,r>0?t[n++]=r:-1>r&&(t[n++]=this.DV+r),t.t=n,t.clamp()}function Ae(e){var t=r();return this.addTo(e,t),t}function Ie(e){var t=r();return this.subTo(e,t),t}function ke(e){var t=r();return this.multiplyTo(e,t),t}function xe(){var e=r();return this.squareTo(e),e}function Be(e){var t=r();return this.divRemTo(e,t,null),t}function Ne(e){var t=r();return this.divRemTo(e,null,t),t}function De(e){var t=r(),n=r();return this.divRemTo(e,t,n),new Array(t,n)}function Re(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function je(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function $e(){}function Le(e){return e}function Me(e,t,n){e.multiplyTo(t,n)}function Oe(e,t){e.squareTo(t)}function Pe(e){return this.exp(e,new $e)}function Ue(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n[--r]=0;var i;for(i=n.t-this.t;i>r;++r)n[r+this.t]=this.am(0,e[r],n,r,0,this.t);for(i=Math.min(e.t,t);i>r;++r)this.am(0,e[r],n,r,0,t-r);n.clamp()}function Fe(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function Ve(t){this.r2=r(),this.q3=r(),e.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function ze(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=r();return e.copyTo(t),this.reduce(t),t}function qe(e){return e}function He(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ge(e,t){e.squareTo(t),this.reduce(t)}function Ke(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function We(e,t){var n,i,o=e.bitLength(),a=f(1);if(0>=o)return a;n=18>o?1:48>o?3:144>o?4:768>o?5:6,i=8>o?new x(t):t.isEven()?new Ve(t):new L(t);var s=new Array,c=3,u=n-1,l=(1<<n)-1;if(s[1]=i.convert(this),n>1){var d=r();for(i.sqrTo(s[1],d);l>=c;)s[c]=r(),i.mulTo(d,s[c-2],s[c]),c+=2}var p,h,g=e.t-1,m=!0,v=r();for(o=y(e[g])-1;g>=0;){for(o>=u?p=e[g]>>o-u&l:(p=(e[g]&(1<<o+1)-1)<<u-o,g>0&&(p|=e[g-1]>>this.DB+o-u)),c=n;0==(1&p);)p>>=1,--c;if((o-=c)<0&&(o+=this.DB,--g),m)s[p].copyTo(a),m=!1;else{for(;c>1;)i.sqrTo(a,v),i.sqrTo(v,a),c-=2;c>0?i.sqrTo(a,v):(h=a,a=v,v=h),i.mulTo(v,s[p],a)}for(;g>=0&&0==(e[g]&1<<o);)i.sqrTo(a,v),h=a,a=v,v=h,--o<0&&(o=this.DB-1,--g)}return i.revert(a)}function Ye(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),o=n.getLowestSetBit();if(0>o)return t;for(o>i&&(o=i),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function Xe(e){if(0>=e)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n}function Ze(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return e.ZERO;for(var r=t.clone(),i=this.clone(),o=f(1),a=f(0),s=f(0),c=f(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),n?(s.isEven()&&c.isEven()||(s.addTo(this,s),c.subTo(t,c)),s.rShiftTo(1,s)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(i)>=0?(r.subTo(i,r),n&&o.subTo(s,o),a.subTo(c,a)):(i.subTo(r,i),n&&s.subTo(o,s),c.subTo(a,c))}return 0!=i.compareTo(e.ONE)?e.ZERO:c.compareTo(t)>=0?c.subtract(t):c.signum()<0?(c.addTo(t,c),c.signum()<0?c.add(t):c):c}function Qe(e){var t,n=this.abs();if(1==n.t&&n[0]<=ut[ut.length-1]){for(t=0;t<ut.length;++t)if(n[0]==ut[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<ut.length;){for(var r=ut[t],i=t+1;i<ut.length&&lt>r;)r*=ut[i++];for(r=n.modInt(r);i>t;)if(r%ut[t++]==0)return!1}return n.millerRabin(e)}function Je(t){var n=this.subtract(e.ONE),i=n.getLowestSetBit();if(0>=i)return!1;var o=n.shiftRight(i);t=t+1>>1,t>ut.length&&(t=ut.length);for(var a=r(),s=0;t>s;++s){a.fromInt(ut[Math.floor(Math.random()*ut.length)]);var c=a.modPow(o,this);if(0!=c.compareTo(e.ONE)&&0!=c.compareTo(n)){for(var u=1;u++<i&&0!=c.compareTo(n);)if(c=c.modPowInt(2,this),0==c.compareTo(e.ONE))return!1;if(0!=c.compareTo(n))return!1}}return!0}var et,tt=0xdeadbeefcafe,nt=15715070==(16777215&tt),rt="undefined"!=typeof navigator;rt&&nt&&"Microsoft Internet Explorer"==navigator.appName?(e.prototype.am=o,et=30):rt&&nt&&"Netscape"!=navigator.appName?(e.prototype.am=i,et=26):(e.prototype.am=a,et=28),e.prototype.DB=et,e.prototype.DM=(1<<et)-1,e.prototype.DV=1<<et;var it=52;e.prototype.FV=Math.pow(2,it),e.prototype.F1=it-et,e.prototype.F2=2*et-it;var ot,at,st="0123456789abcdefghijklmnopqrstuvwxyz",ct=new Array;for(ot="0".charCodeAt(0),at=0;9>=at;++at)ct[ot++]=at;for(ot="a".charCodeAt(0),at=10;36>at;++at)ct[ot++]=at;for(ot="A".charCodeAt(0),at=10;36>at;++at)ct[ot++]=at;x.prototype.convert=B,x.prototype.revert=N,x.prototype.reduce=D,x.prototype.mulTo=R,x.prototype.sqrTo=j,L.prototype.convert=M,L.prototype.revert=O,L.prototype.reduce=P,L.prototype.mulTo=F,L.prototype.sqrTo=U,e.prototype.copyTo=u,e.prototype.fromInt=l,e.prototype.fromString=d,e.prototype.clamp=p,e.prototype.dlShiftTo=w,e.prototype.drShiftTo=S,e.prototype.lShiftTo=C,e.prototype.rShiftTo=_,e.prototype.subTo=E,e.prototype.multiplyTo=T,e.prototype.squareTo=A,e.prototype.divRemTo=I,e.prototype.invDigit=$,e.prototype.isEven=V,e.prototype.exp=z,e.prototype.toString=h,e.prototype.negate=g,e.prototype.abs=m,e.prototype.compareTo=v,e.prototype.bitLength=b,e.prototype.mod=k,e.prototype.modPowInt=q,e.ZERO=f(0),e.ONE=f(1),$e.prototype.convert=Le,$e.prototype.revert=Le,$e.prototype.mulTo=Me,$e.prototype.sqrTo=Oe,Ve.prototype.convert=ze,Ve.prototype.revert=qe,Ve.prototype.reduce=He,Ve.prototype.mulTo=Ke,Ve.prototype.sqrTo=Ge;var ut=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lt=(1<<26)/ut[ut.length-1];e.prototype.chunkSize=Y,e.prototype.toRadix=Z,e.prototype.fromRadix=Q,e.prototype.fromNumber=J,e.prototype.bitwiseTo=ie,e.prototype.changeBit=Se,e.prototype.addTo=Te,e.prototype.dMultiply=Re,e.prototype.dAddOffset=je,e.prototype.multiplyLowerTo=Ue,e.prototype.multiplyUpperTo=Fe,e.prototype.modInt=Xe,e.prototype.millerRabin=Je,e.prototype.clone=H,e.prototype.intValue=G,e.prototype.byteValue=K,e.prototype.shortValue=W,e.prototype.signum=X,e.prototype.toByteArray=ee,e.prototype.equals=te,e.prototype.min=ne,e.prototype.max=re,e.prototype.and=ae,e.prototype.or=ce,e.prototype.xor=le,e.prototype.andNot=de,e.prototype.not=pe,e.prototype.shiftLeft=he,e.prototype.shiftRight=ge,e.prototype.getLowestSetBit=ve,e.prototype.bitCount=be,e.prototype.testBit=we,e.prototype.setBit=Ce,e.prototype.clearBit=_e,e.prototype.flipBit=Ee,e.prototype.add=Ae,e.prototype.subtract=Ie,e.prototype.multiply=ke,e.prototype.divide=Be,e.prototype.remainder=Ne,e.prototype.divideAndRemainder=De,e.prototype.modPow=We,e.prototype.modInverse=Ze,e.prototype.pow=Pe,e.prototype.gcd=Ye,e.prototype.isProbablePrime=Qe,e.prototype.square=xe,e.prototype.Barrett=Ve,"undefined"!=typeof n?n=t.exports=e:this.BigInteger=e}).call(this)},{}],10:[function(e,t,n){var r=e("./cs2a.js"),i=e("ecc-jsbn");e("./forge.min.js"),r.crypt(i,forge),Object.keys(r).forEach(function(e){n[e]=r[e]})},{"./cs2a.js":11,"./forge.min.js":12,"ecc-jsbn":13}],11:[function(e,t,n){(function(t){var r,i=e("crypto"),o=e("sjcl");n.install=function(e){r=e,e.CSets["2a"]=n};var a;n.crypt=function(e,t){i.ecc=e,a=t},n.genkey=function(e,t,n){var r=a.rsa.createKeyPairGenerationState(2048,65537),i=function(){if(a.rsa.stepKeyPairGenerationState(r,100)){var o=a.asn1.toDer(a.pki.publicKeyToAsn1(r.keys.publicKey)).bytes();e["2a"]=a.util.encode64(o),e["2a_secret"]=a.util.encode64(a.asn1.toDer(a.pki.privateKeyToAsn1(r.keys.privateKey)).bytes()),t()}else n&&n(),setTimeout(i,10)};setTimeout(i)},n.loadkey=function(e,n,r){n.length>300&&(n="-"==n.substr(0,1)?a.asn1.toDer(a.pki.publicKeyToAsn1(a.pki.publicKeyFromPem(key))).bytes():a.util.decode64(n)),e.key=n;var i=a.pki.publicKeyFromAsn1(a.asn1.fromDer(n));if(e.encrypt=function(e){return new t(i.encrypt(e.toString("binary"),"RSA-OAEP"),"binary")},e.verify=function(e,t){return i.verify(e.toString("binary"),t.toString("binary"))},r){var o="-"==r.substr(0,1)?a.pki.privateKeyFromPem(r):a.pki.privateKeyFromAsn1(a.asn1.fromDer(a.util.decode64(r)));e.sign=function(e){var n=a.md.sha256.create();return n.update(e.toString("binary")),new t(o.sign(n),"binary")},e.decrypt=function(e){return new t(o.decrypt(e.toString("binary"),"RSA-OAEP"),"binary")}}return!1},n.openize=function(e,n,a){n.ecc||(n.ecc=new i.ecc.ECKey(i.ecc.ECCurves.secp256r1));var s=n.ecc.PublicKey.slice(1),c=t.isBuffer(a)?a:r.pencode(a,e.cs["2a"].key),u=i.createHash("sha256").update(s).digest("hex"),l=new o.cipher.aes(o.codec.hex.toBits(u)),f=o.codec.hex.toBits("00000000000000000000000000000001"),d=o.mode.gcm.encrypt(l,o.codec.hex.toBits(c.toString("hex")),f,[],128),p=new t(o.codec.hex.fromBits(d),"hex"),h=e.cs["2a"].sign(p);n.lineOut||(n.lineOut="");var u=i.createHash("sha256").update(t.concat([s,new t(n.lineOut,"hex")])).digest("hex"),l=new o.cipher.aes(o.codec.hex.toBits(u)),d=o.mode.gcm.encrypt(l,o.codec.hex.toBits(h.toString("hex")),f,[],32),g=new t(o.codec.hex.fromBits(d),"hex"),m=n.encrypt(s),v=t.concat([m,g,p]),y=r.pencode(42,v);return y},n.deopenize=function(e,a){var s={verify:!1},c=a.body.slice(0,256),u=a.body.slice(256,516),l=a.body.slice(516),f=e.cs["2a"].decrypt(c);if(!f)return s;try{s.linepub=new i.ecc.ECKey(i.ecc.ECCurves.secp256r1,t.concat([new t("04","hex"),f]),!0)}catch(d){}if(!s.linepub)return s;var p=i.createHash("sha256").update(f).digest("hex"),h=new o.cipher.aes(o.codec.hex.toBits(p)),g=o.codec.hex.toBits("00000000000000000000000000000001"),m=o.mode.gcm.decrypt(h,o.codec.hex.toBits(l.toString("hex")),g,[],128),v=new t(o.codec.hex.fromBits(m),"hex"),y=r.pdecode(v);if(!y||!y.body)return s;s.js=y.js,s.inner=y;var b,w={};if(a.from)w=a.from,b="";else{if(s.key=y.body,n.loadkey(w,y.body))return s;b=y.js.line}var p=i.createHash("sha256").update(t.concat([f,new t(b,"hex")])).digest("hex"),h=new o.cipher.aes(o.codec.hex.toBits(p)),m=o.mode.gcm.decrypt(h,o.codec.hex.toBits(u.toString("hex")),g,[],32),S=new t(o.codec.hex.fromBits(m),"hex");return s.verify=w.verify(l,S),s},n.openline=function(e,n){var r=e.ecc.deriveSharedSecret(n.linepub);e.lineInB=new t(e.lineIn,"hex");var a=i.createHash("sha256").update(r).update(new t(e.lineOut,"hex")).update(new t(e.lineIn,"hex")).digest("hex");e.encKey=new o.cipher.aes(o.codec.hex.toBits(a));var a=i.createHash("sha256").update(r).update(new t(e.lineIn,"hex")).update(new t(e.lineOut,"hex")).digest("hex");return e.decKey=new o.cipher.aes(o.codec.hex.toBits(a)),!0},n.lineize=function(e,n){var a=i.randomBytes(16),s=r.pencode(n.js,n.body),c=o.mode.gcm.encrypt(e.encKey,o.codec.hex.toBits(s.toString("hex")),o.codec.hex.toBits(a.toString("hex")),[],128),u=new t(o.codec.hex.fromBits(c),"hex"),l=t.concat([e.lineInB,a,u]);return r.pencode(null,l)},n.delineize=function(e,n){if(!n.body)return"missing body";n.body=n.body.slice(16);var i=o.codec.hex.toBits(n.body.slice(0,16).toString("hex"));try{var a=o.mode.gcm.decrypt(e.decKey,o.codec.hex.toBits(n.body.slice(16).toString("hex")),i,[],128)}catch(s){return s}if(!a)return"no cipher output";var c=r.pdecode(new t(o.codec.hex.fromBits(a),"hex"));return c?(n.js=c.js,n.body=c.body,!1):"invalid decrypted packet"}}).call(this,e("buffer").Buffer)},{buffer:29,crypto:35,sjcl:17}],12:[function(e,t,n){t.exports=e(5)},{sycGbZ:51}],13:[function(e,t,n){t.exports=e(6)},{"./lib/ec.js":14,"./lib/sec.js":15,buffer:29,crypto:35,jsbn:16}],14:[function(e,t,n){t.exports=e(7)},{jsbn:16}],15:[function(e,t,n){t.exports=e(8)},{"./ec.js":14,jsbn:16}],16:[function(e,t,n){t.exports=e(9)},{}],17:[function(e,t,n){"use strict";function r(e){throw e}function i(e,t,n){4!==t.length&&r(new p.exception.invalid("invalid aes block size"));var i=e.b[n],o=t[0]^i[0],a=t[n?3:1]^i[1],s=t[2]^i[2];t=t[n?1:3]^i[3];var c,u,l,f,d=i.length/4-2,h=4,g=[0,0,0,0];c=e.k[n],e=c[0];var m=c[1],v=c[2],y=c[3],b=c[4];for(f=0;d>f;f++)c=e[o>>>24]^m[a>>16&255]^v[s>>8&255]^y[255&t]^i[h],u=e[a>>>24]^m[s>>16&255]^v[t>>8&255]^y[255&o]^i[h+1],l=e[s>>>24]^m[t>>16&255]^v[o>>8&255]^y[255&a]^i[h+2],t=e[t>>>24]^m[o>>16&255]^v[a>>8&255]^y[255&s]^i[h+3],h+=4,o=c,a=u,s=l;for(f=0;4>f;f++)g[n?3&-f:f]=b[o>>>24]<<24^b[a>>16&255]<<16^b[s>>8&255]<<8^b[255&t]^i[h++],c=o,o=a,a=s,s=t,t=c;return g}function o(e,t){var n,r,i,o=t.slice(0),a=e.r,s=e.b,c=a[0],u=a[1],l=a[2],f=a[3],d=a[4],p=a[5],h=a[6],g=a[7];for(n=0;64>n;n++)16>n?r=o[n]:(r=o[n+1&15],i=o[n+14&15],r=o[15&n]=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+o[15&n]+o[n+9&15]|0),r=r+g+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(h^d&(p^h))+s[n],g=h,h=p,p=d,d=f+r|0,f=l,l=u,u=c,c=r+(u&l^f&(u^l))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;a[0]=a[0]+c|0,a[1]=a[1]+u|0,a[2]=a[2]+l|0,a[3]=a[3]+f|0,a[4]=a[4]+d|0,a[5]=a[5]+p|0,a[6]=a[6]+h|0,a[7]=a[7]+g|0}function a(e,t){var n,r=p.random.w[e],i=[];for(n in r)r.hasOwnProperty(n)&&i.push(r[n]);for(n=0;n<i.length;n++)i[n](t)}function s(e){window&&window.performance&&"function"==typeof window.performance.now?p.random.addEntropy(window.performance.now(),e,"loadtime"):p.random.addEntropy((new Date).valueOf(),e,"loadtime")}function c(e){e.b=u(e).concat(u(e)),e.A=new p.cipher.aes(e.b)}function u(e){for(var t=0;4>t&&(e.f[t]=e.f[t]+1|0,!e.f[t]);t++);return e.A.encrypt(e.f)}function l(e,t){return function(){t.apply(e,arguments)}}var f=void 0,d=!1,p={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};"undefined"!=typeof t&&t.exports&&(t.exports=p),p.cipher.aes=function(e){this.k[0][0][0]||this.D();var t,n,i,o,a=this.k[0][4],s=this.k[1];t=e.length;var c=1;for(4!==t&&6!==t&&8!==t&&r(new p.exception.invalid("invalid aes key size")),this.b=[i=e.slice(0),o=[]],e=t;4*t+28>e;e++)n=i[e-1],(0===e%t||8===t&&4===e%t)&&(n=a[n>>>24]<<24^a[n>>16&255]<<16^a[n>>8&255]<<8^a[255&n],0===e%t&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),i[e]=i[e-t]^n;for(t=0;e;t++,e--)n=i[3&t?e:e-4],o[t]=4>=e||4>t?n:s[0][a[n>>>24]]^s[1][a[n>>16&255]]^s[2][a[n>>8&255]]^s[3][a[255&n]]},p.cipher.aes.prototype={encrypt:function(e){return i(this,e,0)},decrypt:function(e){return i(this,e,1)},k:[[[],[],[],[],[]],[[],[],[],[],[]]],D:function(){var e,t,n,r,i,o,a,s=this.k[0],c=this.k[1],u=s[4],l=c[4],f=[],d=[];for(e=0;256>e;e++)d[(f[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!u[t];t^=r||1,n=d[n]||1)for(o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^255&o^99,u[t]=o,l[o]=t,i=f[e=f[r=f[t]]],a=16843009*i^65537*e^257*r^16843008*t,i=257*f[o]^16843008*o,e=0;4>e;e++)s[e][t]=i=i<<24^i>>>8,c[e][o]=a=a<<24^a>>>8;for(e=0;5>e;e++)s[e]=s[e].slice(0),c[e]=c[e].slice(0)}},p.bitArray={bitSlice:function(e,t,n){return e=p.bitArray.P(e.slice(t/32),32-(31&t)).slice(1),n===f?e:p.bitArray.clamp(e,n-t)},extract:function(e,t,n){var r=Math.floor(-t-n&31);return(-32&(t+n-1^t)?e[t/32|0]<<32-r^e[t/32+1|0]>>>r:e[t/32|0]>>>r)&(1<<n)-1},concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var n=e[e.length-1],r=p.bitArray.getPartial(n);return 32===r?e.concat(t):p.bitArray.P(t,r,0|n,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length;return 0===t?0:32*(t-1)+p.bitArray.getPartial(e[t-1])},clamp:function(e,t){if(32*e.length<t)return e;e=e.slice(0,Math.ceil(t/32));var n=e.length;return t&=31,n>0&&t&&(e[n-1]=p.bitArray.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:function(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(p.bitArray.bitLength(e)!==p.bitArray.bitLength(t))return d;var n,r=0;for(n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},P:function(e,t,n,r){var i;for(i=0,r===f&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(i=0;i<e.length;i++)r.push(n|e[i]>>>t),n=e[i]<<32-t;return i=e.length?e[e.length-1]:0,e=p.bitArray.getPartial(i),r.push(p.bitArray.partial(t+e&31,t+e>32?n:r.pop(),1)),r},l:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]}},p.codec.utf8String={fromBits:function(e){var t,n,r="",i=p.bitArray.bitLength(e);for(t=0;i/8>t;t++)0===(3&t)&&(n=e[t/4]),r+=String.fromCharCode(n>>>24),n<<=8;return decodeURIComponent(escape(r))},toBits:function(e){e=unescape(encodeURIComponent(e));var t,n=[],r=0;for(t=0;t<e.length;t++)r=r<<8|e.charCodeAt(t),3===(3&t)&&(n.push(r),r=0);return 3&t&&n.push(p.bitArray.partial(8*(3&t),r)),n}},p.codec.hex={fromBits:function(e){var t,n="";for(t=0;t<e.length;t++)n+=((0|e[t])+0xf00000000000).toString(16).substr(4);return n.substr(0,p.bitArray.bitLength(e)/4)},toBits:function(e){var t,n,r=[];for(e=e.replace(/\s|0x/g,""),n=e.length,e+="00000000",t=0;t<e.length;t+=8)r.push(0^parseInt(e.substr(t,8),16));return p.bitArray.clamp(r,4*n)}},p.codec.base64={J:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,n){var r="",i=0,o=p.codec.base64.J,a=0,s=p.bitArray.bitLength(e);for(n&&(o=o.substr(0,62)+"-_"),n=0;6*r.length<s;)r+=o.charAt((a^e[n]>>>i)>>>26),6>i?(a=e[n]<<6-i,i+=26,n++):(a<<=6,i-=6);for(;3&r.length&&!t;)r+="=";return r},toBits:function(e,t){e=e.replace(/\s|=/g,"");var n,i,o=[],a=0,s=p.codec.base64.J,c=0;for(t&&(s=s.substr(0,62)+"-_"),n=0;n<e.length;n++)i=s.indexOf(e.charAt(n)),0>i&&r(new p.exception.invalid("this isn't base64!")),a>26?(a-=26,o.push(c^i>>>a),c=i<<32-a):(a+=6,c^=i<<32-a);return 56&a&&o.push(p.bitArray.partial(56&a,c,1)),o}},p.codec.base64url={fromBits:function(e){return p.codec.base64.fromBits(e,1,1)},toBits:function(e){return p.codec.base64.toBits(e,1)}},p.hash.sha256=function(e){this.b[0]||this.D(),e?(this.r=e.r.slice(0),this.o=e.o.slice(0),this.h=e.h):this.reset()},p.hash.sha256.hash=function(e){return(new p.hash.sha256).update(e).finalize()},p.hash.sha256.prototype={blockSize:512,reset:function(){return this.r=this.N.slice(0),this.o=[],this.h=0,this},update:function(e){"string"==typeof e&&(e=p.codec.utf8String.toBits(e));var t,n=this.o=p.bitArray.concat(this.o,e);for(t=this.h,e=this.h=t+p.bitArray.bitLength(e),t=512+t&-512;e>=t;t+=512)o(this,n.splice(0,16));return this},finalize:function(){var e,t=this.o,n=this.r,t=p.bitArray.concat(t,[p.bitArray.partial(1,1)]);for(e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this.h/4294967296)),t.push(0|this.h);t.length;)o(this,t.splice(0,16));return this.reset(),n},N:[],b:[],D:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}var t,n=0,r=2;e:for(;64>n;r++){for(t=2;r>=t*t;t++)if(0===r%t)continue e;8>n&&(this.N[n]=e(Math.pow(r,.5))),this.b[n]=e(Math.pow(r,1/3)),n++}}},p.mode.ccm={name:"ccm",encrypt:function(e,t,n,i,o){var a,s=t.slice(0),c=p.bitArray,u=c.bitLength(n)/8,l=c.bitLength(s)/8;for(o=o||64,i=i||[],7>u&&r(new p.exception.invalid("ccm: iv must be at least 7 bytes")),a=2;4>a&&l>>>8*a;a++);return 15-u>a&&(a=15-u),n=c.clamp(n,8*(15-a)),t=p.mode.ccm.L(e,t,n,i,o,a),s=p.mode.ccm.p(e,s,n,t,o,a),c.concat(s.data,s.tag)},decrypt:function(e,t,n,i,o){o=o||64,i=i||[];var a=p.bitArray,s=a.bitLength(n)/8,c=a.bitLength(t),u=a.clamp(t,c-o),l=a.bitSlice(t,c-o),c=(c-o)/8;for(7>s&&r(new p.exception.invalid("ccm: iv must be at least 7 bytes")),t=2;4>t&&c>>>8*t;t++);return 15-s>t&&(t=15-s),n=a.clamp(n,8*(15-t)),u=p.mode.ccm.p(e,u,n,l,o,t),e=p.mode.ccm.L(e,u.data,n,i,o,t),a.equal(u.tag,e)||r(new p.exception.corrupt("ccm: tag doesn't match")),u.data},L:function(e,t,n,i,o,a){var s=[],c=p.bitArray,u=c.l;if(o/=8,(o%2||4>o||o>16)&&r(new p.exception.invalid("ccm: invalid tag length")),(4294967295<i.length||4294967295<t.length)&&r(new p.exception.bug("ccm: can't deal with 4GiB or more data")),a=[c.partial(8,(i.length?64:0)|o-2<<2|a-1)],a=c.concat(a,n),a[3]|=c.bitLength(t)/8,a=e.encrypt(a),i.length)for(n=c.bitLength(i)/8,65279>=n?s=[c.partial(16,n)]:4294967295>=n&&(s=c.concat([c.partial(16,65534)],[n])),s=c.concat(s,i),i=0;i<s.length;i+=4)a=e.encrypt(u(a,s.slice(i,i+4).concat([0,0,0])));for(i=0;i<t.length;i+=4)a=e.encrypt(u(a,t.slice(i,i+4).concat([0,0,0])));return c.clamp(a,8*o)},p:function(e,t,n,r,i,o){var a,s=p.bitArray;a=s.l;var c=t.length,u=s.bitLength(t);if(n=s.concat([s.partial(8,o-1)],n).concat([0,0,0]).slice(0,4),r=s.bitSlice(a(r,e.encrypt(n)),0,i),!c)return{tag:r,data:[]};for(a=0;c>a;a+=4)n[3]++,i=e.encrypt(n),t[a]^=i[0],t[a+1]^=i[1],t[a+2]^=i[2],t[a+3]^=i[3];return{tag:r,data:s.clamp(t,u)}}},p.mode.ocb2={name:"ocb2",encrypt:function(e,t,n,i,o,a){128!==p.bitArray.bitLength(n)&&r(new p.exception.invalid("ocb iv must be 128 bits"));var s,c=p.mode.ocb2.H,u=p.bitArray,l=u.l,f=[0,0,0,0];n=c(e.encrypt(n));var d,h=[];for(i=i||[],o=o||64,s=0;s+4<t.length;s+=4)d=t.slice(s,s+4),f=l(f,d),h=h.concat(l(n,e.encrypt(l(n,d)))),n=c(n);return d=t.slice(s),t=u.bitLength(d),s=e.encrypt(l(n,[0,0,0,t])),d=u.clamp(l(d.concat([0,0,0]),s),t),f=l(f,l(d.concat([0,0,0]),s)),f=e.encrypt(l(f,l(n,c(n)))),i.length&&(f=l(f,a?i:p.mode.ocb2.pmac(e,i))),h.concat(u.concat(d,u.clamp(f,o)))},decrypt:function(e,t,n,i,o,a){128!==p.bitArray.bitLength(n)&&r(new p.exception.invalid("ocb iv must be 128 bits")),o=o||64;var s,c,u=p.mode.ocb2.H,l=p.bitArray,f=l.l,d=[0,0,0,0],h=u(e.encrypt(n)),g=p.bitArray.bitLength(t)-o,m=[];for(i=i||[],n=0;g/32>n+4;n+=4)s=f(h,e.decrypt(f(h,t.slice(n,n+4)))),d=f(d,s),m=m.concat(s),h=u(h);return c=g-32*n,s=e.encrypt(f(h,[0,0,0,c])),s=f(s,l.clamp(t.slice(n),c).concat([0,0,0])),d=f(d,s),d=e.encrypt(f(d,f(h,u(h)))),i.length&&(d=f(d,a?i:p.mode.ocb2.pmac(e,i))),l.equal(l.clamp(d,o),l.bitSlice(t,g))||r(new p.exception.corrupt("ocb: tag doesn't match")),m.concat(l.clamp(s,c))},pmac:function(e,t){var n,r=p.mode.ocb2.H,i=p.bitArray,o=i.l,a=[0,0,0,0],s=e.encrypt([0,0,0,0]),s=o(s,r(r(s)));for(n=0;n+4<t.length;n+=4)s=r(s),a=o(a,e.encrypt(o(s,t.slice(n,n+4))));return n=t.slice(n),128>i.bitLength(n)&&(s=o(s,r(s)),n=i.concat(n,[-2147483648,0,0,0])),a=o(a,n),e.encrypt(o(r(o(s,r(s))),a))},H:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},p.mode.gcm={name:"gcm",encrypt:function(e,t,n,r,i){var o=t.slice(0);return t=p.bitArray,r=r||[],e=p.mode.gcm.p(!0,e,o,r,n,i||128),t.concat(e.data,e.tag)},decrypt:function(e,t,n,i,o){var a=t.slice(0),s=p.bitArray,c=s.bitLength(a);return o=o||128,i=i||[],c>=o?(t=s.bitSlice(a,c-o),a=s.bitSlice(a,0,c-o)):(t=a,a=[]),e=p.mode.gcm.p(d,e,a,i,n,o),s.equal(e.tag,t)||r(new p.exception.corrupt("gcm: tag doesn't match")),e.data},Z:function(e,t){var n,r,i,o,a,s=p.bitArray.l;for(i=[0,0,0,0],o=t.slice(0),n=0;128>n;n++){for((r=0!==(e[Math.floor(n/32)]&1<<31-n%32))&&(i=s(i,o)),a=0!==(1&o[3]),r=3;r>0;r--)o[r]=o[r]>>>1|(1&o[r-1])<<31;o[0]>>>=1,a&&(o[0]^=-520093696)}return i},g:function(e,t,n){var r,i=n.length;for(t=t.slice(0),r=0;i>r;r+=4)t[0]^=4294967295&n[r],t[1]^=4294967295&n[r+1],t[2]^=4294967295&n[r+2],t[3]^=4294967295&n[r+3],t=p.mode.gcm.Z(t,e);return t},p:function(e,t,n,r,i,o){var a,s,c,u,l,f,d,h,g=p.bitArray;for(f=n.length,d=g.bitLength(n),h=g.bitLength(r),s=g.bitLength(i),a=t.encrypt([0,0,0,0]),96===s?(i=i.slice(0),i=g.concat(i,[1])):(i=p.mode.gcm.g(a,[0,0,0,0],i),i=p.mode.gcm.g(a,i,[0,0,Math.floor(s/4294967296),4294967295&s])),s=p.mode.gcm.g(a,[0,0,0,0],r),l=i.slice(0),r=s.slice(0),e||(r=p.mode.gcm.g(a,s,n)),u=0;f>u;u+=4)l[3]++,c=t.encrypt(l),n[u]^=c[0],n[u+1]^=c[1],n[u+2]^=c[2],n[u+3]^=c[3];return n=g.clamp(n,d),e&&(r=p.mode.gcm.g(a,s,n)),e=[Math.floor(h/4294967296),4294967295&h,Math.floor(d/4294967296),4294967295&d],r=p.mode.gcm.g(a,r,e),c=t.encrypt(i),r[0]^=c[0],r[1]^=c[1],r[2]^=c[2],r[3]^=c[3],{tag:g.bitSlice(r,0,o),data:n}}},p.misc.hmac=function(e,t){this.M=t=t||p.hash.sha256;var n,r=[[],[]],i=t.prototype.blockSize/32;for(this.n=[new t,new t],e.length>i&&(e=t.hash(e)),n=0;i>n;n++)r[0][n]=909522486^e[n],r[1][n]=1549556828^e[n];this.n[0].update(r[0]),this.n[1].update(r[1]),this.G=new t(this.n[0])},p.misc.hmac.prototype.encrypt=p.misc.hmac.prototype.mac=function(e){return this.Q&&r(new p.exception.invalid("encrypt on already updated hmac called!")),this.update(e),this.digest(e)},p.misc.hmac.prototype.reset=function(){this.G=new this.M(this.n[0]),this.Q=d},p.misc.hmac.prototype.update=function(e){this.Q=!0,this.G.update(e)},p.misc.hmac.prototype.digest=function(){var e=this.G.finalize(),e=new this.M(this.n[1]).update(e).finalize();return this.reset(),e},p.misc.pbkdf2=function(e,t,n,i,o){n=n||1e3,(0>i||0>n)&&r(p.exception.invalid("invalid params to pbkdf2")),"string"==typeof e&&(e=p.codec.utf8String.toBits(e)),"string"==typeof t&&(t=p.codec.utf8String.toBits(t)),o=o||p.misc.hmac,e=new o(e);var a,s,c,u,l=[],f=p.bitArray;for(u=1;32*l.length<(i||1);u++){for(o=a=e.encrypt(f.concat(t,[u])),s=1;n>s;s++)for(a=e.encrypt(a),c=0;c<a.length;c++)o[c]^=a[c];l=l.concat(o)}return i&&(l=f.clamp(l,i)),l},p.prng=function(e){this.c=[new p.hash.sha256],this.i=[0],this.F=0,this.s={},this.C=0,this.K={},this.O=this.d=this.j=this.W=0,this.b=[0,0,0,0,0,0,0,0],this.f=[0,0,0,0],this.A=f,this.B=e,this.q=d,this.w={progress:{},seeded:{}},this.m=this.V=0,this.t=1,this.u=2,this.S=65536,this.I=[0,48,64,96,128,192,256,384,512,768,1024],this.T=3e4,this.R=80},p.prng.prototype={randomWords:function(e,t){var n,i=[];n=this.isReady(t);var o;if(n===this.m&&r(new p.exception.notReady("generator isn't seeded")),n&this.u){n=!(n&this.t),o=[];var a,s=0;for(this.O=o[0]=(new Date).valueOf()+this.T,a=0;16>a;a++)o.push(4294967296*Math.random()|0);for(a=0;a<this.c.length&&(o=o.concat(this.c[a].finalize()),s+=this.i[a],this.i[a]=0,!(!n&&this.F&1<<a));a++);for(this.F>=1<<this.c.length&&(this.c.push(new p.hash.sha256),this.i.push(0)),this.d-=s,s>this.j&&(this.j=s),this.F++,this.b=p.hash.sha256.hash(this.b.concat(o)),this.A=new p.cipher.aes(this.b),n=0;4>n&&(this.f[n]=this.f[n]+1|0,!this.f[n]);n++);}for(n=0;e>n;n+=4)0===(n+1)%this.S&&c(this),o=u(this),i.push(o[0],o[1],o[2],o[3]);return c(this),i.slice(0,e)},setDefaultParanoia:function(e,t){0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==t&&r("Setting paranoia=0 will ruin your security; use it only for testing"),this.B=e},addEntropy:function(e,t,n){n=n||"user";var i,o,s=(new Date).valueOf(),c=this.s[n],u=this.isReady(),l=0;switch(i=this.K[n],i===f&&(i=this.K[n]=this.W++),c===f&&(c=this.s[n]=0),this.s[n]=(this.s[n]+1)%this.c.length,typeof e){case"number":t===f&&(t=1),this.c[c].update([i,this.C++,1,t,s,1,0|e]);break;case"object":
if(n=Object.prototype.toString.call(e),"[object Uint32Array]"===n){for(o=[],n=0;n<e.length;n++)o.push(e[n]);e=o}else for("[object Array]"!==n&&(l=1),n=0;n<e.length&&!l;n++)"number"!=typeof e[n]&&(l=1);if(!l){if(t===f)for(n=t=0;n<e.length;n++)for(o=e[n];o>0;)t++,o>>>=1;this.c[c].update([i,this.C++,2,t,s,e.length].concat(e))}break;case"string":t===f&&(t=e.length),this.c[c].update([i,this.C++,3,t,s,e.length]),this.c[c].update(e);break;default:l=1}l&&r(new p.exception.bug("random: addEntropy only supports number, array of numbers or string")),this.i[c]+=t,this.d+=t,u===this.m&&(this.isReady()!==this.m&&a("seeded",Math.max(this.j,this.d)),a("progress",this.getProgress()))},isReady:function(e){return e=this.I[e!==f?e:this.B],this.j&&this.j>=e?this.i[0]>this.R&&(new Date).valueOf()>this.O?this.u|this.t:this.t:this.d>=e?this.u|this.m:this.m},getProgress:function(e){return e=this.I[e?e:this.B],this.j>=e?1:this.d>e?1:this.d/e},startCollectors:function(){this.q||(this.a={loadTimeCollector:l(this,this.aa),mouseCollector:l(this,this.ba),keyboardCollector:l(this,this.$),accelerometerCollector:l(this,this.U)},window.addEventListener?(window.addEventListener("load",this.a.loadTimeCollector,d),window.addEventListener("mousemove",this.a.mouseCollector,d),window.addEventListener("keypress",this.a.keyboardCollector,d),window.addEventListener("devicemotion",this.a.accelerometerCollector,d)):document.attachEvent?(document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)):r(new p.exception.bug("can't attach event")),this.q=!0)},stopCollectors:function(){this.q&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,d),window.removeEventListener("mousemove",this.a.mouseCollector,d),window.removeEventListener("keypress",this.a.keyboardCollector,d),window.removeEventListener("devicemotion",this.a.accelerometerCollector,d)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.q=d)},addEventListener:function(e,t){this.w[e][this.V++]=t},removeEventListener:function(e,t){var n,r,i=this.w[e],o=[];for(r in i)i.hasOwnProperty(r)&&i[r]===t&&o.push(r);for(n=0;n<o.length;n++)r=o[n],delete i[r]},$:function(){s(1)},ba:function(e){p.random.addEntropy([e.x||e.clientX||e.offsetX||0,e.y||e.clientY||e.offsetY||0],2,"mouse"),s(0)},aa:function(){s(2)},U:function(e){if(e=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z,window.orientation){var t=window.orientation;"number"==typeof t&&p.random.addEntropy(t,1,"accelerometer")}e&&p.random.addEntropy(e,2,"accelerometer"),s(0)}},p.random=new p.prng(6);e:try{var h,g,m,v;if(v="undefined"!=typeof t){var y;if(y=t.exports){var b;try{b=e("crypto")}catch(w){b=null}y=(g=b)&&g.randomBytes}v=y}if(v)h=g.randomBytes(128),h=new Uint32Array(new Uint8Array(h).buffer),p.random.addEntropy(h,1024,"crypto['randomBytes']");else if(window&&Uint32Array){if(m=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(m);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break e;window.msCrypto.getRandomValues(m)}p.random.addEntropy(m,1024,"crypto['getRandomValues']")}}catch(S){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(S))}p.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},Y:function(e,t,n,i){n=n||{},i=i||{};var o,a=p.json,s=a.e({iv:p.random.randomWords(4,0)},a.defaults);return a.e(s,n),n=s.adata,"string"==typeof s.salt&&(s.salt=p.codec.base64.toBits(s.salt)),"string"==typeof s.iv&&(s.iv=p.codec.base64.toBits(s.iv)),(!p.mode[s.mode]||!p.cipher[s.cipher]||"string"==typeof e&&100>=s.iter||64!==s.ts&&96!==s.ts&&128!==s.ts||128!==s.ks&&192!==s.ks&&256!==s.ks||2>s.iv.length||4<s.iv.length)&&r(new p.exception.invalid("json encrypt: invalid parameters")),"string"==typeof e?(o=p.misc.cachedPbkdf2(e,s),e=o.key.slice(0,s.ks/32),s.salt=o.salt):p.ecc&&e instanceof p.ecc.elGamal.publicKey&&(o=e.kem(),s.kemtag=o.tag,e=o.key.slice(0,s.ks/32)),"string"==typeof t&&(t=p.codec.utf8String.toBits(t)),"string"==typeof n&&(n=p.codec.utf8String.toBits(n)),o=new p.cipher[s.cipher](e),a.e(i,s),i.key=e,s.ct=p.mode[s.mode].encrypt(o,t,s.iv,n,s.ts),s},encrypt:function(e,t,n,r){var i=p.json,o=i.Y.apply(i,arguments);return i.encode(o)},X:function(e,t,n,i){n=n||{},i=i||{};var o=p.json;t=o.e(o.e(o.e({},o.defaults),t),n,!0);var a;return n=t.adata,"string"==typeof t.salt&&(t.salt=p.codec.base64.toBits(t.salt)),"string"==typeof t.iv&&(t.iv=p.codec.base64.toBits(t.iv)),(!p.mode[t.mode]||!p.cipher[t.cipher]||"string"==typeof e&&100>=t.iter||64!==t.ts&&96!==t.ts&&128!==t.ts||128!==t.ks&&192!==t.ks&&256!==t.ks||!t.iv||2>t.iv.length||4<t.iv.length)&&r(new p.exception.invalid("json decrypt: invalid parameters")),"string"==typeof e?(a=p.misc.cachedPbkdf2(e,t),e=a.key.slice(0,t.ks/32),t.salt=a.salt):p.ecc&&e instanceof p.ecc.elGamal.secretKey&&(e=e.unkem(p.codec.base64.toBits(t.kemtag)).slice(0,t.ks/32)),"string"==typeof n&&(n=p.codec.utf8String.toBits(n)),a=new p.cipher[t.cipher](e),n=p.mode[t.mode].decrypt(a,t.ct,t.iv,n,t.ts),o.e(i,t),i.key=e,p.codec.utf8String.fromBits(n)},decrypt:function(e,t,n,r){var i=p.json;return i.X(e,i.decode(t),n,r)},encode:function(e){var t,n="{",i="";for(t in e)if(e.hasOwnProperty(t))switch(t.match(/^[a-z0-9]+$/i)||r(new p.exception.invalid("json encode: invalid property name")),n+=i+'"'+t+'":',i=",",typeof e[t]){case"number":case"boolean":n+=e[t];break;case"string":n+='"'+escape(e[t])+'"';break;case"object":n+='"'+p.codec.base64.fromBits(e[t],0)+'"';break;default:r(new p.exception.bug("json encode: unsupported type"))}return n+"}"},decode:function(e){e=e.replace(/\s/g,""),e.match(/^\{.*\}$/)||r(new p.exception.invalid("json decode: this isn't json!")),e=e.replace(/^\{|\}$/g,"").split(/,/);var t,n,i={};for(t=0;t<e.length;t++)(n=e[t].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i))||r(new p.exception.invalid("json decode: this isn't json!")),i[n[2]]=n[3]?parseInt(n[3],10):n[2].match(/^(ct|salt|iv)$/)?p.codec.base64.toBits(n[4]):unescape(n[4]);return i},e:function(e,t,n){if(e===f&&(e={}),t===f)return e;for(var i in t)t.hasOwnProperty(i)&&(n&&e[i]!==f&&e[i]!==t[i]&&r(new p.exception.invalid("required parameter overridden")),e[i]=t[i]);return e},ea:function(e,t){var n,r={};for(n in e)e.hasOwnProperty(n)&&e[n]!==t[n]&&(r[n]=e[n]);return r},da:function(e,t){var n,r={};for(n=0;n<t.length;n++)e[t[n]]!==f&&(r[t[n]]=e[t[n]]);return r}},p.encrypt=p.json.encrypt,p.decrypt=p.json.decrypt,p.misc.ca={},p.misc.cachedPbkdf2=function(e,t){var n,r=p.misc.ca;return t=t||{},n=t.iter||1e3,r=r[e]=r[e]||{},n=r[n]=r[n]||{firstSalt:t.salt&&t.salt.length?t.salt.slice(0):p.random.randomWords(2,0)},r=t.salt===f?n.firstSalt:t.salt,n[r]=n[r]||p.misc.pbkdf2(e,r,t.iter),{key:n[r].slice(0),salt:r.slice(0)}}},{crypto:35}],18:[function(e,t,n){(function(t){var r=e("socket.io-client");n.install=function(e){var n={};e.deliver("http",function(i,o,a){n[i.http]||(n[i.http]=r.connect(i.http),n[i.http].on("packet",function(n){e.receive(new t(n.data,"base64").toString("binary"),i)})),n[i.http].emit("packet",{data:o.toString("base64")})})}}).call(this,e("buffer").Buffer)},{buffer:29,"socket.io-client":19}],19:[function(require,module,exports){var io="undefined"==typeof module?{}:module.exports;!function(){!function(e,t){var n=e;n.version="0.9.17",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,r){var i,o,a=n.util.parseUri(e);t&&t.location&&(a.protocol=a.protocol||t.location.protocol.slice(0,-1),a.host=a.host||(t.document?t.document.domain:t.location.hostname),a.port=a.port||t.location.port),i=n.util.uniqueUri(a);var s={host:a.host,secure:"https"==a.protocol,port:a.port||("https"==a.protocol?443:80),query:a.query||""};return n.util.merge(s,r),!s["force new connection"]&&n.sockets[i]&&(n.sockets[i].connected||n.sockets[i].connecting||n.sockets[i].open||n.sockets[i].reconnecting)||(o=new n.Socket(s)),!s["force new connection"]&&o&&(n.sockets[i]=o),o=o||n.sockets[i],o.of(a.path.length>1?a.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){for(var t=r.exec(e||""),n={},o=14;o--;)n[i[o]]=t[o]||"";return n},n.uniqueUri=function(e){var n=e.protocol,r=e.host,i=e.port;return"document"in t?(r=r||document.domain,i=i||("https"==n&&"https:"!==document.location.protocol?443:document.location.port)):(r=r||"localhost",i||"https"!=n||(i=443)),(n||"http")+"://"+r+":"+(i||80)},n.query=function(e,t){var r=n.chunkQuery(e||""),i=[];n.merge(r,n.chunkQuery(t||""));for(var o in r)r.hasOwnProperty(o)&&i.push(o+"="+r[o]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(e){for(var t,n={},r=e.split("&"),i=0,o=r.length;o>i;++i)t=r[i].split("="),t[0]&&(n[t[0]]=t[1]);return n};var o=!1;n.load=function(e){return"document"in t&&"complete"===document.readyState||o?e():void n.on(t,"load",e,!1)},n.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&n.load(function(){o=!0}),n.defer=function(e){return n.ua.webkit&&"undefined"==typeof importScripts?void n.load(function(){setTimeout(e,100)}):e()},n.merge=function(e,t,r,i){var o,a=i||[],s="undefined"==typeof r?2:r;for(o in t)t.hasOwnProperty(o)&&n.indexOf(a,o)<0&&("object"==typeof e[o]&&s?n.merge(e[o],t[o],s-1,a):(e[o]=t[o],a.push(t[o])));return e},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.intersect=function(e,t){for(var r=[],i=e.length>t.length?e:t,o=e.length>t.length?t:e,a=0,s=o.length;s>a;a++)~n.indexOf(i,o[a])&&r.push(o[a]);return r},n.indexOf=function(e,t,n){for(var r=e.length,n=0>n?0>n+r?0:n+r:n||0;r>n&&e[n]!==t;n++);return n>=r?-1:n},n.toArray=function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return void 0!=e.withCredentials}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function n(){r.removeListener(e,n),t.apply(this,arguments)}var r=this;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var r=this.$events[e];if(t.util.isArray(r)){for(var i=-1,o=0,a=r.length;a>o;o++)if(r[o]===n||r[o].listener&&r[o].listener===n){i=o;break}if(0>i)return this;r.splice(i,1),r.length||delete this.$events[e]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,r);else{if(!t.util.isArray(n))return!1;for(var i=n.slice(),o=0,a=i.length;a>o;o++)i[o].apply(this,r)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){"use strict";function f(e){return 10>e?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,c=t[e];switch(c instanceof Date&&(c=date(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,n=0;o>n;n+=1)a[n]=str(n,c)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,c),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(i=str(r,c),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})},JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(e,t){var n=e.parser={},r=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],o=n.advice=["reconnect"],a=t.JSON,s=t.util.indexOf;n.encodePacket=function(e){var t=s(r,e.type),n=e.id||"",c=e.endpoint||"",u=e.ack,l=null;switch(e.type){case"error":var f=e.reason?s(i,e.reason):"",d=e.advice?s(o,e.advice):"";(""!==f||""!==d)&&(l=f+(""!==d?"+"+d:""));break;case"message":""!==e.data&&(l=e.data);break;case"event":var p={name:e.name};e.args&&e.args.length&&(p.args=e.args),l=a.stringify(p);break;case"json":l=a.stringify(e.data);break;case"connect":e.qs&&(l=e.qs);break;case"ack":l=e.ackId+(e.args&&e.args.length?"+"+a.stringify(e.args):"")}var h=[t,n+("data"==u?"+":""),c];return null!==l&&void 0!==l&&h.push(l),h.join(":")},n.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var n=0,r=e.length;r>n;n++){var i=e[n];t+=""+i.length+""+e[n]}return t};var c=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(c);if(!t)return{};var n=t[2]||"",e=t[5]||"",s={type:r[t[1]],endpoint:t[4]||""};switch(n&&(s.id=n,t[3]?s.ack="data":s.ack=!0),s.type){case"error":var t=e.split("+");s.reason=i[t[0]]||"",s.advice=o[t[1]]||"";break;case"message":s.data=e||"";break;case"event":try{var u=a.parse(e);s.name=u.name,s.args=u.args}catch(l){}s.args=s.args||[];break;case"json":try{s.data=a.parse(e)}catch(l){}break;case"connect":s.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t&&(s.ackId=t[1],s.args=[],t[3]))try{s.args=t[3]?a.parse(t[3]):[]}catch(l){}break;case"disconnect":case"heartbeat":}return s},n.decodePayload=function(e){if(""==e.charAt(0)){for(var t=[],r=1,i="";r<e.length;r++)""==e.charAt(r)?(t.push(n.decodePacket(e.substr(r+1).substr(0,i))),r+=Number(i)+1,i=""):i+=e.charAt(r);return t}return[n.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.heartbeats=function(){return!0},n.prototype.onData=function(e){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==e){var n=t.parser.decodePayload(e);if(n&&n.length)for(var r=0,i=n.length;i>r;r++)this.onPacket(n[r])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),"heartbeat"==e.type?this.onHeartbeat():("connect"==e.type&&""==e.endpoint&&this.onConnect(),"error"==e.type&&"reconnect"==e.advice&&(this.isOpen=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){if(this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(n,"beforeunload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=r,t.util.mixin(r,t.EventEmitter),r.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),""!==e&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},r.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},r.prototype.handshake=function(e){function n(t){t instanceof Error?(r.connecting=!1,r.onError(t.message)):e.apply(null,t.split(":"))}var r=this,o=this.options,a=["http"+(o.secure?"s":"")+":/",o.host+":"+o.port,o.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var s=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src=a+"&jsonp="+t.j.length,s.parentNode.insertBefore(c,s),t.j.push(function(e){n(e),c.parentNode.removeChild(c)})}else{var u=t.util.request();u.open("GET",a,!0),this.isXDomain()&&(u.withCredentials=!0),u.onreadystatechange=function(){4==u.readyState&&(u.onreadystatechange=i,200==u.status?n(u.responseText):403==u.status?r.onError(u.responseText):(r.connecting=!1,!r.reconnecting&&r.onError(u.responseText)))},u.send(null)}},r.prototype.getTransport=function(e){for(var n,r=e||this.transports,i=0;n=r[i];i++)if(t.Transport[n]&&t.Transport[n].check(this)&&(!this.isXDomain()||t.Transport[n].xdomainCheck(this)))return new t.Transport[n](this,this.sessionid);return null},r.prototype.connect=function(e){if(this.connecting)return this;var n=this;return n.connecting=!0,this.handshake(function(r,i,o,a){function s(e){return n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e),n.transport?void n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected&&(n.connecting=!1,n.options["try multiple transports"])){for(var e=n.transports;e.length>0&&e.splice(0,1)[0]!=n.transport.name;);e.length?s(e):n.publish("connect_failed")}},n.options["connect timeout"]))}):n.publish("connect_failed")}n.sessionid=r,n.closeTimeout=1e3*o,n.heartbeatTimeout=1e3*i,n.transports||(n.transports=n.origTransports=a?t.util.intersect(a.split(","),n.options.transports):n.options.transports),n.setHeartbeatTimeout(),s(n.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&"function"==typeof e&&e()})}),this},r.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)}},r.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},r.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},r.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},r.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},r.prototype.disconnectSync=function(){var e=t.util.request(),n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,!1),e.send(null),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},r.prototype.onError=function(e){e&&e.advice&&"reconnect"===e.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},r.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(t||n)&&(this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},r.prototype.reconnect=function(){function e(){if(n.connected){for(var e in n.namespaces)n.namespaces.hasOwnProperty(e)&&""!==e&&n.namespaces[e].packet({type:"connect"});n.publish("reconnect",n.transport.name,n.reconnectionAttempts)}clearTimeout(n.reconnectionTimer),n.removeListener("connect_failed",t),n.removeListener("connect",t),n.reconnecting=!1,delete n.reconnectionAttempts,delete n.reconnectionDelay,delete n.reconnectionTimer,delete n.redoTransports,n.options["try multiple transports"]=i}function t(){return n.reconnecting?n.connected?e():n.connecting&&n.reconnecting?n.reconnectionTimer=setTimeout(t,1e3):void(n.reconnectionAttempts++>=r?n.redoTransports?(n.publish("reconnect_failed"),e()):(n.on("connect_failed",t),n.options["try multiple transports"]=!0,n.transports=n.origTransports,n.transport=n.getTransport(),n.redoTransports=!0,n.connect()):(n.reconnectionDelay<o&&(n.reconnectionDelay*=2),n.connect(),n.publish("reconnecting",n.reconnectionDelay,n.reconnectionAttempts),n.reconnectionTimer=setTimeout(t,n.reconnectionDelay))):void 0}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var n=this,r=this.options["max reconnection attempts"],i=this.options["try multiple transports"],o=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(t,this.reconnectionDelay),this.on("connect",t)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],r={type:"event",name:e};return"function"==typeof n&&(r.id=++this.ackPackets,r.ack="data",this.acks[r.id]=n,t=t.slice(0,t.length-1)),r.args=t,this.packet(r)},n.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function n(){r.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var r=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var i=["message",e.data];"data"==e.ack?i.push(n):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":var i=[e.name].concat(e.args);"data"==e.ack&&i.push(n),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):"unauthorized"==e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){t.Transport.apply(this,arguments)}e.websocket=r,t.util.inherit(r,t.Transport),r.prototype.name="websocket",r.prototype.open=function(){var e,r=t.util.query(this.socket.options.query),i=this;return e||(e=n.MozWebSocket||n.WebSocket),this.websocket=new e(this.prepareUrl()+r),this.websocket.onopen=function(){i.onOpen(),i.socket.setBuffer(!1)},this.websocket.onmessage=function(e){i.onData(e.data)},this.websocket.onclose=function(){i.onClose(),i.socket.setBuffer(!0)},this.websocket.onerror=function(e){i.onError(e)},this},t.util.ua.iDevice?r.prototype.send=function(e){var t=this;return setTimeout(function(){t.websocket.send(e)},0),this}:r.prototype.send=function(e){return this.websocket.send(e),this},r.prototype.payload=function(e){for(var t=0,n=e.length;n>t;t++)this.packet(e[t]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(e){this.socket.onError(e)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},r.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=n,t.util.inherit(n,t.Transport.websocket),n.prototype.name="flashsocket",n.prototype.open=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,n)}),this},n.prototype.send=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,n)}),this},n.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},n.prototype.ready=function(e,r){function i(){var t=e.options,i=t["flash policy port"],a=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];n.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=a.join("/")),843!==i&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+i),WebSocket.__initialize(),n.loaded=!0),r.call(o)}var o=this;return document.body?i():void t.util.load(i)},n.check=function(){return"undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},n.xdomainCheck=function(){return!0},"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(){if("undefined"!=typeof window&&!window.WebSocket){var e=window.console;if(e&&e.log&&e.error||(e={log:function(){},error:function(){}}),!swfobject.hasFlashPlayerVersion("10.0.0"))return void e.error("Flash Player >= 10.0.0 is required.");"file:"==location.protocol&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,n,r,i){var o=this;o.__id=WebSocket.__nextId++,WebSocket.__instances[o.__id]=o,o.readyState=WebSocket.CONNECTING,o.bufferedAmount=0,o.__events={},t?"string"==typeof t&&(t=[t]):t=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(o.__id,e,t,n||null,r||0,i||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";
var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return 0>t?!0:(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(e,t,n){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t,n){if(e in this.__events)for(var r=this.__events[e],i=r.length-1;i>=0;--i)if(r[i]===t){r.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(e){for(var t=this.__events[e.type]||[],n=0;n<t.length;++n)t[n](e);var r=this["on"+e.type];r&&r(e)},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol);var t;if("open"==e.type||"error"==e.type)t=this.__createSimpleEvent(e.type);else if("close"==e.type)t=this.__createSimpleEvent("close");else{if("message"!=e.type)throw"unknown event type: "+e.type;var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return void e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",t.appendChild(n),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var t=WebSocket.__flash.receiveEvents(),n=0;n<t.length;++n)WebSocket.__instances[t[n].webSocketId].__handleEvent(t[n])}catch(r){e.error(r)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return e&&e.enabledPlugin&&e.enabledPlugin.filename&&e.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))}}(),function(e,t,n){function r(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function i(){}e.XHR=r,t.util.inherit(r,t.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(e){for(var n=[],r=0,i=e.length;i>r;r++)n.push(t.parser.encodePacket(e[r]));this.send(t.parser.encodePayload(n))},r.prototype.send=function(e){return this.post(e),this},r.prototype.post=function(e){function t(){4==this.readyState&&(this.onreadystatechange=i,o.posting=!1,200==this.status?o.socket.setBuffer(!1):o.onClose())}function r(){this.onload=i,o.socket.setBuffer(!1)}var o=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=r:this.sendXHR.onreadystatechange=t,this.sendXHR.send(e)},r.prototype.close=function(){return this.onClose(),this},r.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +new Date);if(n.open(e||"GET",this.prepareUrl()+r,!0),"POST"==e)try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(i){}return n},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(e,r){try{var i=t.util.request(r),o=n.XDomainRequest&&i instanceof XDomainRequest,a=e&&e.options&&e.options.secure?"https:":"http:",s=n.location&&a!=n.location.protocol;if(i&&(!o||!s))return!0}catch(c){}return!1},r.xdomainCheck=function(e){return r.check(e,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e){t.Transport.XHR.apply(this,arguments)}e.htmlfile=n,t.util.inherit(n,t.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var n=this,r=t.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+r,t.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(e,t){e=e.replace(/\\\//g,"/"),this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(r){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},n.check=function(e){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{var n=new(window[["Active"].concat("Object").join("X")])("htmlfile");return n&&t.Transport.XHR.check(e)}catch(r){}return!1},n.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=r,t.util.inherit(r,t.Transport.XHR),t.util.merge(r,t.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.heartbeats=function(){return!1},r.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},r.prototype.get=function(){function e(){4==this.readyState&&(this.onreadystatechange=i,200==this.status?(o.onData(this.responseText),o.get()):o.onClose())}function t(){this.onload=i,this.onerror=i,o.retryCounter=1,o.onData(this.responseText),o.get()}function r(){o.retryCounter++,!o.retryCounter||o.retryCounter>3?o.onClose():o.get()}if(this.isOpen){var o=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=t,this.xhr.onerror=r):this.xhr.onreadystatechange=e,this.xhr.send(null)}},r.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},r.prototype.ready=function(e,n){var r=this;t.util.defer(function(){n.call(r)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function r(e){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var n=this;t.j.push(function(e){n._(e)})}var i=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=r,t.util.inherit(r,t.Transport["xhr-polling"]),r.prototype.name="jsonp-polling",r.prototype.post=function(e){function n(){r(),i.socket.setBuffer(!1)}function r(){i.iframe&&i.form.removeChild(i.iframe);try{a=document.createElement('<iframe name="'+i.iframeId+'">')}catch(e){a=document.createElement("iframe"),a.name=i.iframeId}a.id=i.iframeId,i.form.appendChild(a),i.iframe=a}var i=this,o=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var a,s=document.createElement("form"),c=document.createElement("textarea"),u=this.iframeId="socketio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style.display="none",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),c.name="d",s.appendChild(c),document.body.appendChild(s),this.form=s,this.area=c}this.form.action=this.prepareUrl()+o,r(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(l){}this.iframe.attachEvent?a.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n,this.socket.setBuffer(!0)},r.prototype.get=function(){var e=this,n=document.createElement("script"),r=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+r,n.onerror=function(){e.onClose()};var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o),this.script=n,i&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype._=function(e){return this.onData(e),this.isOpen&&this.get(),this},r.prototype.ready=function(e,n){var r=this;return i?void t.util.load(function(){n.call(r)}):n.call(this)},r.check=function(){return"document"in n},r.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),"function"==typeof define&&define.amd&&define([],function(){return io})}()},{}],20:[function(e,t,n){(function(t){function r(e){e.bridgeCache={},i(e),setTimeout(function(){r(e)},Y.link_timer)}function i(e){Object.keys(e.buckets).forEach(function(t){var n=e.buckets[t].sort(function(e,t){return e.age-t.age});n.length&&K("link maintenance on bucket",t,n.length),n.slice(0,Y.link_k).forEach(function(t){t.linked&&k(t.to)&&(Date.now()-t.linked.sentAt<Math.ceil(Y.link_timer/2)||t.linked.send({js:{seed:e.seed}}))})})}function o(e){var t=this;if(e===!0&&(t.bridging=!0),t.bridging)return!0;if(!e)return t.bridging;var n="string"==typeof e?t.whois(e):e;return n&&n.bridging?!0:!1}function a(e){var t=this;if(!e.parts)return G("invalid args to addSeed",e);var n=t.whokey(e.parts,!1,e.keys);return n?(Array.isArray(e.paths)&&e.paths.forEach(function(e){e=n.pathGet(e),e.seed=!0}),n.isSeed=!0,void t.seeds.push(n)):G("invalid seed info",e)}function s(e){function t(){if(r){var t=n.seeds.filter(function(e){return k(e.to)}).length;if(t)return e(null,t),void(r=0);r--,r||e(n.locals.length?null:"offline",n.locals.length)}}var n=this;if(n.waits.length>0)return n.waiting=function(){n.online(e)};n.isOnline=!0,n.send({type:"lan"},j(n.ping()));var r=n.seeds.length;return r?void n.seeds.forEach(function(e){e.link(function(){k(e.to)&&e.pathSync(),t()})}):(G("no seeds"),e(null,0))}function c(e,n){var r=this,i=$(e);if(!i)return G("failed to decode a packet from",n,new t(e).toString("hex"));if(2!=i.length){if(i.sender=n,i.id=r.pcounter++,i.at=Date.now(),K(">>>>",Date(),e.length,i.head.length,n&&[n.type,n.ip,n.port,n.id].join(",")),"ping"==i.js.type)return C(r,i);if("pong"==i.js.type)return _(r,i);if(1==i.head.length){var o=z(r,i);if(!o||!o.verify)return G("couldn't decode open (possibly using the wrong public key?)",o&&o.err);if(!E(o.js.line,32))return G("invalid line id enclosed",o.js.line);if(o.js.to!==r.hashname)return G("open for wrong hashname",o.js.to);var a=x(r.parts,o.js.from);if(a!=o.csid)return G("open with mismatch CSID",a,o.csid);var s=r.whokey(o.js.from,o.key);if(!s)return G("invalid hashname",o.js.from);if(s.csid=o.csid,"number"!=typeof o.js.at)return G("invalid at",o.js.at);if(s.openAt&&o.js.at<s.openAt)return K("dropping older open");if(s.openAt=o.js.at,K("inOpen verified",s.hashname,n&&JSON.stringify(n.json)),o.js.line==s.lineIn){var c=Date.now()-(s.openAcked||0);if(c<Y.seek_timeout||c<Y.nat_timeout&&s.openDup>=3)return;s.openDup++}else s.openDup=0;var u=s.open();return s.active(),s.openAcked=Date.now(),n=s.pathIn(n),n?r.send(n,u,s):s.relayChan&&s.relayChan.send({body:u}),void(o.js.line!=s.lineIn&&(s.lineIn=o.js.line,K("new line",s.lineIn,s.lineOut),r.CSets[o.csid].openline(s,o),r.lines[s.lineOut]=s,Object.keys(s.chans).forEach(function(e){var t=s.chans[e];if(t){if(!t.recvAt)return;s.receive({js:{c:t.id,err:"reset"}})}delete s.chans[e]})))}if(0==i.head.length){var l=i.body.slice(0,16).toString("hex"),s=r.lines[l];if(!s){if(!r.bridgeLine[l])return K("unknown line received",l,i.sender);K("BRIDGE",JSON.stringify(r.bridgeLine[l]),l);var f=H.createHash("sha256").update(i.body).digest("hex");if(r.bridgeCache[f])return;return r.bridgeCache[f]=!0,r.send(r.bridgeLine[l],j(!1,i.body))}var d;return(d=r.CSets[s.csid].delineize(s,i))?K("couldn't decrypt line",d,i.sender):(s.linedAt=s.openAt,s.active(),void s.receive(i))}Object.keys(i.js).length>0&&G("dropping incoming packet of unknown type",i.js,i.sender)}}function u(e,t,n){var r=this;if("object"!=typeof e)return!1;var i=x(r.parts,e);if(!i)return!1;var o=r.whois(R(e));if(!o)return!1;n&&(t=n[i]);var a=O(r,o,i,t);return a?(G("whokey err",o.hashname,a),!1):H.createHash("sha256").update(o.key).digest("hex")!=e[i]?(G("whokey part mismatch",o.hashname,i,e[i],H.createHash("sha256").update(o.key).digest("hex")),delete o.key,!1):(o.parts=e,o)}function l(e){var n=this;if(!e)return G("whois called without a hashname",e,(new Error).stack),!1;if("string"!=typeof e)return G("wrong type, should be string",typeof e,e),!1;if(!E(e,64))return G("whois called without a valid hashname",e),!1;if(e===n.hashname)return K("whois called for self"),!1;var r=n.all[e];if(r)return r;r=n.all[e]={hashname:e,chans:{},self:n,paths:[],isAlive:0,sendwait:[]},r.at=Date.now(),r.bucket=T(n.hashname,e),n.buckets[r.bucket]||(n.buckets[r.bucket]=[]);var i=[n.hashname,e].sort();return r.chanOut=i[0]==n.hashname?2:1,r.start=p,r.raw=d,r.pathGet=function(e){if("object"!=typeof e||"string"!=typeof e.type)return!1;var t=I(e,r.paths);return t?t:(e=JSON.parse(JSON.stringify(e)),e.json||(e.json=JSON.parse(JSON.stringify(e))),K("adding new path",r.paths.length,JSON.stringify(e.json)),W(r.hashname,e.type,JSON.stringify(e.json)),r.paths.push(e),B(e)||(r.isPublic=!0),"ipv4"==e.type&&n.paths.forEach(function(t){"ipv4"==t.type&&t.ip==e.ip&&(r.isLocal=!0)}),e)},r.pathOut=function(e){return(e=r.pathGet(e))?(e.sentAt||"ipv4"!=e.type||n.send(e,j()),e.sentAt=Date.now(),!k(r.to)&&k(e)&&(r.to=e),e):!1},r.pathEnd=function(e){if(e.seed)return!1;r.to==e&&(r.to=!1),e.gone=!0;var t=r.paths.indexOf(e);return t>=0&&r.paths.splice(t,1),K("PATH END",JSON.stringify(e.json)),!1},r.pathIn=function(e){return(e=r.pathGet(e))?(e.recvAt||e.sentAt||(K("PATH INNEW",B(e)?"local":"public",JSON.stringify(e.json),r.paths.map(function(e){return JSON.stringify(e.json)})),"ipv4"!=e.type||N(e.ip)||(r.ip=e.ip,r.port=e.port),r.paths.forEach(function(t){return t!=e&&t.type==e.type?k(t)?e.ip&&t.ip==e.ip?r.pathEnd(t):"http"==e.type?r.pathEnd(t):void 0:r.pathEnd(t):void 0}),-1==X.indexOf(e.type)&&(r.bridging=!0),B(e)&&!r.isLocal&&(r.isLocal=!0,r.pathSync())),e.recvAt=Date.now(),r.to=e,e):!1},r.active=function(){n.recvAt=Date.now(),(!r.recvAt||Date.now()-r.recvAt>Y.nat_timeout)&&setTimeout(function(){r.pathSync()},10),r.recvAt=Date.now(),r.sendwait.forEach(function(e){r.chans[e.js.c]&&r.send(e)}),r.sendwait=[]},r.send=function(e){function i(){if(r.vias){var e=r.vias;delete r.vias,Object.keys(e).forEach(function(t){n.whois(t).peer(r.hashname,e[t])})}}if(t.isBuffer(e)&&console.log("lined packet?!",r.hashname,typeof r.sendwait.length,(new Error).stack),r.lineIn){K("line sending",r.hashname,r.lineIn);var o=n.CSets[r.csid].lineize(r,e);if(r.sentAt=Date.now(),e.to)return n.send(e.to,o,r);if(k(r.to))return n.send(r.to,o,r);if(r.relayChan)return r.relayChan.send({body:o})}return r.openAt=!1,-1==r.sendwait.indexOf(e)&&r.sendwait.push(e),K("alive failthrough",r.sendSeek,Object.keys(r.vias||{})),r.open()&&r.paths.forEach(function(e){n.send(e,r.open(),r)}),r.vias?i():void((!r.sendSeek||Date.now()-r.sendSeek>5e3)&&(r.sendSeek=Date.now(),n.seek(r,function(e){r.sendwait.length&&i()})))},r.receive=function(e){if(!e.js||"number"!=typeof e.js.c)return G("dropping invalid channel packet",e.js);e.sender=r.pathIn(e.sender),e.from=r;var t=r.chans[e.js.c];if(K("LINEIN",t&&t.type,JSON.stringify(e.js),e.body&&e.body.length),t!==!1){if(t)return t.receive(e);var i={};if("undefined"==typeof e.js.seq&&(i=n.raws),0===e.js.seq&&(i=n.rels),i[e.js.type]){if(e.js.c%2==r.chanOut%2)return G("channel id incorrect",e.js.c,r.chanOut);var o=i==n.raws?"raw":"start",t=r[o](e.js.type,{bare:!0,id:e.js.c},i[e.js.type]);t.receive(e)}}},r.chanEnded=function(e){r.chans[e]&&(K("channel ended",e,r.chans[e].type,r.hashname),r.chans[e]=!1)},r.sees=function(e){if("string"!=typeof e&&G("invalid see address",e,r.hashname),"string"!=typeof e)return!1;var t=e.split(",");if(!n.isHashname(t[0])||t[0]==n.hashname)return!1;var i=n.whois(t[0]);return i?(t.length>=4&&4==t[2].split(".").length&&parseInt(t[3])>0&&i.pathGet({type:"ipv4",ip:t[2],port:parseInt(t[3])}),i.vias||(i.vias={}),i.vias[r.hashname]=i.cisd||t[1],i):!1},r.seek=function(e,t){var n=T(r.hashname,e),i=e.substr(0,Math.ceil((255-n)/4)+2);r.raw("seek",{timeout:Y.seek_timeout,retry:3,js:{seek:i}},function(e,n,r){t(n.js.err,Array.isArray(n.js.see)?n.js.see:[])})},r.address=function(e){if(!e)return"";var t=x(r.parts,e.parts);return t?r.ip?[r.hashname,t,r.ip,r.port].join(","):[r.hashname,t].join(","):""},r.link=function(e){e||(e=function(){}),K("LINKTRY",r.hashname);var t={seed:n.seed};return t.see=n.buckets[r.bucket].sort(function(e,t){return e.age-t.age}).filter(function(e){return e.seed}).map(function(e){return e.address(r)}).slice(0,8),t.see.length<8&&Object.keys(n.buckets).forEach(function(e){t.see.length>=8||n.buckets[e].sort(function(e,t){return e.age-t.age}).forEach(function(e){t.see.length>=8||!e.seed||-1!=t.see.indexOf(e.address(r))||t.see.push(e.address(r))})}),n.isBridge(r)&&(t.bridges=n.paths.filter(function(e){return!B(e)}).map(function(e){return e.type})),r.linked?(r.linked.send({js:t}),e()):void(r.linked=r.raw("link",{retry:3,js:t,timeout:Y.idle_timeout},function(t,n,r){b(t,n,r),e(n.js.err)}))},r.peer=function(e,t){if(t&&n.parts[t]){var i={peer:e};i.paths=r.pathsOut(),r.raw("peer",{timeout:Y.nat_timeout,js:i,body:L(n,t)},function(t,r,i){i.relayTo||(i.relayTo=n.whois(e)),h(i,r)})}},r.open=function(){return r.parts?(r.opened||(r.opened=V(n,r)),r.opened):!1},r.pathsOut=function(){var e=[];return n.paths.forEach(function(t){(!B(t)||r.isLocal)&&e.push(t)}),e},r.pathSync=function(){if(!r.pathSyncing){r.pathSyncing=!0,K("pathSync",r.hashname);var e={},t=r.pathsOut();t.length>0&&(e.paths=t);var i=[];r.raw("path",{js:e,timeout:1e4},function(e,t){if(e)return void(r.pathSyncing=!1);if(t.from.isSeed&&"object"==typeof t.js.path&&"ipv4"==t.js.path.type&&!N(t.js.path.ip)&&(K("updating public ipv4",JSON.stringify(n.pub4),JSON.stringify(t.js.path)),n.pathSet(n.pub4,!0),n.pub4={type:"ipv4",ip:t.js.path.ip,port:parseInt(t.js.path.port)},n.pathSet(n.pub4)),t.sender){i.push(t.sender);var o=t.sender;i.forEach(function(e){X.indexOf(o.type)<X.indexOf(e.type)||B(o)||(o=e)}),K("pathSync best",r.hashname,JSON.stringify(o.json)),r.to=o}})}},r.ticket=function(e){return n.pencode(e).length>1024?!1:U(n,r,e)},r.ticketed=function(e){return packet=$(e),packet?F(n,r,packet):!1},r}function f(e,t){function n(){c=c.sort(function(t,n){return T(e.hashname,t)-T(e.hashname,n)})}function r(t){for(Object.keys(a).forEach(function(e){-1==c.indexOf(e)&&c.push(e)}),Object.keys(s).forEach(function(e){-1==c.indexOf(e)&&c.push(e)}),n();cb=e.seeking.shift();)cb(t,c.slice())}function i(t){if(e.seeking.length){if(K("SEEK LOOP",c),0==Object.keys(s).length&&0==c.length)return r("failed to find the hashname");var f=t||c.shift();if(f){if(f==e.hashname)return r();if(a[f]||s[f])return t||i();var d=T(e.hashname,f);if(d>l)return t||i();u[f]&&(l=d),s[f]=!0;var p=o.whois(f);p.seek(e.hashname,function(e,r){r.forEach(function(e){var t=p.sees(e);t&&(u[p.hashname]&&0==r.indexOf(e)&&(u[t.hashname]=!0),c.push(t.hashname))}),n(),a[f]=!0,delete s[f],t||i()})}}}var o=this;if("string"==typeof e&&(e=o.whois(e)),t||(t=function(){}),!e)return t("invalid hashname");var a={},s={},c=[],u={},l=255,f=[];Object.keys(o.buckets).forEach(function(t){o.buckets[t].forEach(function(t){t.hashname!=e&&t.seed&&k(t.to)&&f.push(t)})}),f.sort(function(t,n){return T(e.hashname,t.hashname)-T(e.hashname,n.hashname)}).slice(0,3).forEach(function(e){u[e.hashname]=!0,c.push(e.hashname)}),K("seek starting with",c,f.length),e.seeking||(e.seeking=[]),e.seeking.push(t),e.seeking.length>1||(i(),i(),i(),o.locals.forEach(function(e){i(e.hashname)}))}function d(e,t,n){function r(){a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){return a.ended?void o.chanEnded(a.id):o.receive({js:{err:"timeout",c:a.id}})},t.timeout)}function i(){a.ended||a.opened||(a.send(t),4e3>s&&(s*=2),t.retry--,t.retry&&setTimeout(i,s))}var o=this,a={type:e,callback:n};if(a.id=t.id,a.startAt=Date.now(),a.id||(a.id=o.chanOut,o.chanOut+=2),a.isOut=a.id%2==o.chanOut%2,o.chans[a.id]=a,a.timeout=function(e){t.timeout=e,r()},a.timeout(t.timeout||Y.chan_timeout),a.hashname=o.hashname,K("new unreliable channel",o.hashname,a.type,a.id),a.receive=function(e){return o.chans[a.id]?(a.opened=!0,a.ended=a.ended||e.js.err||e.js.end,a.recvAt=Date.now(),a.last=e.sender,a.callback(a.ended,e,a),void r()):K("dropping receive packet to dead channel",a.id,e.js)},a.send=function(e){return o.chans[a.id]?(e.js||(e.js={}),e.js.c=a.id,a.ended=a.ended||e.js.err||e.js.end,a.sentAt=Date.now(),K("SEND",a.type,JSON.stringify(e.js),e.body&&e.body.length),void o.send(e)):K("dropping send packet to dead channel",a.id,e.js)},a.end=function(){a.ended||a.send({js:{end:!0}})},a.fail=function(e){a.ended||(a.ended=e||"failed",o.send({js:{err:a.ended,c:a.id}}))},t.js&&(t.js.type=e,a.send(t),t.retry)){var s=1e3;setTimeout(i,s)}return a}function p(e,t,n){function r(){o.timer&&clearTimeout(o.timer),o.timer=setTimeout(function(){o.ended=o.ended||!0,i.chanEnded(o.id)},t.timeout)}var i=this,o={inq:[],outq:[],outSeq:0,inDone:-1,outConfirmed:-1,lastAck:-1,callback:n};return o.id=t.id,o.startAt=Date.now(),o.id||(o.id=i.chanOut,i.chanOut+=2),o.isOut=o.id%2==i.chanOut%2,i.chans[o.id]=o,t.bare||"_"===e.substr(0,1)||(e="_"+e),o.type=e,"_"!=o.type.substr(0,1)&&(o.safe=!0),o.hashname=i.hashname,K("new channel",i.hashname,o.type,o.id),o.timeout=function(e){t.timeout=e},o.timeout(t.timeout||Y.chan_timeout),o.wrap=function(e){return Z[e]?Z[e](o):!1},o.receive=function(e){if(e.js.err)return o.inq=[],o.ended=e.js.err,o.callback(e.js.err,e,o,function(){}),void r();o.recvAt=Date.now(),o.opened=!0,o.last=e.sender;var t=parseInt(e.js.ack);if(t>o.outSeq)return G("bad ack, dropping entirely",o.outSeq,t);var n=Array.isArray(e.js.miss)?e.js.miss:[];if(n.length>100&&(G("too many misses",n.length,o.id,e.from.hashname),n=n.slice(0,100)),n.length>0||t>o.lastAck){K("miss processing",t,o.lastAck,n,o.outq.length),o.lastAck=t;var i=o.outq;o.outq=[],i.forEach(function(e){return e.js.seq<=t?(e.callback&&e.callback(),void(e.js.end&&r())):(o.outq.push(e),void(-1!=n.indexOf(e.js.seq)&&(Date.now()-e.resentAt<1e3||(e.resentAt=Date.now(),o.ack(e)))))})}var a=e.js.seq;if(a>=0){if(o.acker||(o.acker=setTimeout(function(){delete o.acker,o.ack()},Y.chan_autoack)),a<=o.inDone||o.inq[a-(o.inDone+1)])return o.forceAck=!0;if(a-o.inDone>Y.chan_inbuf)return G("chan too far behind, dropping",a,o.inDone,o.id,e.from.hashname),o.forceAck=!0;o.inq[a-(o.inDone+1)]=e,K("INQ",Object.keys(o.inq),o.inDone,o.handling),o.handler()}},o.handler=function(){if(!o.handling){var e=o.inq[0];!e&&o.inq.length>0&&(o.forceAck=!0),e&&(o.handling=!0,o.ended=o.ended||e.js.end,o.safe||(e.js=e.js._||{}),o.callback(o.ended,e,o,function(e){o.inq.shift(),o.inDone++,o.handling=!1,e&&o.ack(),o.ended&&r(),o.handler()}))}},o.resend=function(){if(!o.ended&&o.outq.length){var e=o.outq[o.outq.length-1];if(Date.now()-e.sentAt>t.timeout)return void i.receive({js:{err:"timeout",c:o.id}});K("channel resending"),o.ack(e),setTimeout(function(){o.resend()},Y.chan_resend)}},o.ack=function(e){if(e||K("ACK CHECK",o.id,o.outConfirmed,o.inDone),!e){if(!o.forceAck&&o.outConfirmed==o.inDone)return;e={js:{}}}if(o.forceAck=!1,o.inDone>=0&&(o.outConfirmed=e.js.ack=o.inDone),delete e.js.miss,o.inq.length>0){e.js.miss=[];for(var t=0;t<o.inq.length;t++)o.inq[t]||e.js.miss.push(o.inDone+t+1)}e.js.c=o.id,K("SEND",o.type,JSON.stringify(e.js)),r(),i.send(e)},o.send=function(e){if(e||(e={}),e.err){if(o.ended)return;return o.ended=e.err,i.send({js:{err:e.err,c:o.id}}),r()}var t={};return t.js=o.safe?e.js:{_:e.js},e.type&&(t.js.type=e.type),e.end&&(t.js.end=e.end),t.body=e.body,t.callback=e.callback,t.js.seq=o.outSeq++,t.sentAt=Date.now(),o.outq.push(t),o.ack(t),o.resender&&clearTimeout(o.resender),o.resender=setTimeout(function(){o.resend()},Y.chan_resend),o},o.end=function(){return o.ended?o.ack():void o.send({js:{end:!0}})},o.fail=function(e){var t="failed";"string"==typeof e&&(t=e),"object"==typeof e&&e.js&&e.js.err&&(t=e.js.err),o.send({err:t})},t.js&&(t.type=e,o.send(t)),o}function h(e,t){var n=e.relayTo,r=t.from.self;if((t.js.err||t.js.warn)&&!e.migrating&&n.relayChan==e&&!n.to){K("relay failing, trying to migrate",n.hashname),e.migrating=!0;var i=[];n.paths.forEach(function(e){r.bridges[e.type]&&Object.keys(r.bridges[e.type]).forEach(function(e){-1==i.indexOf(e)&&i.push(e)})});var o;i.forEach(function(e){if(!o&&e!=n.hashname&&e!=t.from.hashname){var i=r.whois(e);k(i.to)&&(o=i.peer(n.hashname,n.csid))}})}if(t.js.err||t.js.end)return K("ending relay from",e.hashname,"to",n.hashname,t.js.err||t.js.end),void(n.relayChan==e&&(n.relayChan=!1));n.to&&n.to.recvAt<e.startAt&&(n.to=!1),n.relayChan=e;var a=t.js.bridge?JSON.parse(JSON.stringify(t.sender.json)):!1;t.body&&t.body.length&&r.receive(t.body,a),n.pathSync()}function g(e,t,n){if(n.relayTo)return h(n,t);var r=n.relayTo=t.from.self.whokey(t.js.from,t.body);return n.relayTo?(n.timeout(Y.nat_timeout),Array.isArray(t.js.paths)&&t.js.paths.forEach(function(e){return"string"!=typeof e.type?K("bad path",JSON.stringify(e)):void t.from.self.send(e,r.open(),r)}),n.send({body:r.open()}),void t.from.sees(r.hashname)):G("invalid connect request from",t.from.hashname,t.js)}function m(e,t,n,r){if(t.ended&&!n.ended)return n.send({js:{err:"disconnected"}});if(n.ended&&!t.ended)return t.send({js:{err:"disconnected"}});var i={};if(e.isBridge(t.hashname)||e.isBridge(n.hashname)){var o=$(r.body),a=o&&o.body&&o.body.length>16&&o.body.slice(0,16).toString("hex");a&&0==o.head.length&&!n.bridged&&n.last&&!e.lines[a]&&(n.bridged=!0,K("auto-bridging",n.hashname,a,JSON.stringify(n.last.json)),e.bridgeLine[a]=JSON.parse(JSON.stringify(n.last.json)))}t.bridged&&n.bridged&&(i={bridge:!0}),(!t.relayed||Date.now()-t.relayed>1e3)&&(t.relayed=Date.now(),t.relays=0),t.relays++,t.relays>5&&(K("relay too fast, warning",t.relays),i.warn="toofast"),t.relayed=Date.now(),n.send({js:i,body:r.body})}function v(e,t,n){if(!e){var r=t.from.self;if(n.relay)return m(r,n,n.relay,t);if(E(t.js.peer,64)){var i=r.whois(t.js.peer);if(i){if(!(k(i.to)||r.isBridge(t.from.hashname)||r.isBridge(i.hashname)))return K("disconnected peer request");Array.isArray(t.js.paths)||(t.js.paths=[]),t.from.paths.forEach(function(e){e.recvAt&&-1!=X.indexOf(e.type)&&(!B(e)||i.isLocal)&&t.js.paths.push(e.json)});var o={from:t.from.parts,paths:[]};t.js.paths.forEach(function(e){"string"==typeof e.type&&(I(e,o.paths)||o.paths.push(e))}),n.timeout(Y.nat_timeout),n.relay=i.raw("connect",{js:o,body:t.body},function(e,t,i){e||m(r,i,n,t)})}}}}function y(e,t,n){if(!e){if(!E(t.js.seek))return G("invalid seek of ",t.js.seek,"from:",t.from.hashname);var r=t.from.self,i=t.js.seek,o=[],a={},s=T(r.hashname,t.js.seek),c=r.buckets[s]?r.buckets[s]:[];c.sort(function(e,t){return e.age-t.age}).forEach(function(e){o.length||e.seed&&(o.push(e.address(t.from)),a[e.hashname]=!0)}),c.sort(function(e,t){return T(i,e.hashname)-T(i,t.hashname)}).forEach(function(e){a[e.hashname]||(e.seed||e.hashname.substr(0,i.length)==i)&&(o.push(e.address(t.from)),a[e.hashname]=!0)});var u={end:!0,see:o.filter(function(e){return e}).slice(0,8)};n.send({js:u})}}function b(e,t,n){if(!e){var r=t.from.self;n.timeout(2*Y.nat_timeout),K("LINKUP",t.from.hashname),t.from.age||(t.from.age=Date.now()),t.from.linked=n,t.from.seed=t.js.seed,-1==r.buckets[t.from.bucket].indexOf(t.from)&&r.buckets[t.from.bucket].push(t.from),t.from.seed&&t.from.isLocal&&-1==r.locals.indexOf(t.from)&&r.locals.push(t.from),n.sentAt||t.from.link(),Array.isArray(t.js.see)&&t.js.see.forEach(function(e){var n=t.from.sees(e);n&&!n.linked&&r.buckets[n.bucket].length<Y.link_k&&n.link()}),Array.isArray(t.js.bridges)&&t.js.bridges.forEach(function(e){r.bridges[e]||(r.bridges[e]={}),r.bridges[e][t.from.hashname]=Date.now()}),n.callback=w}}function w(e,t,n){if(t.from&&t.from.linked&&t.from.linked==n){var r=t.from.self;if(e){K("LINKDOWN",t.from.hashname,e),delete t.from.linked;var i=r.buckets[t.from.bucket].indexOf(t.from);return i>-1&&r.buckets[t.from.bucket].splice(i,1),void(n.recvAt&&t.from.link())}t.from.seed=t.js.seed,Date.now()-n.sentAt>Math.ceil(Y.link_timer/2)&&n.send({js:{seed:r.seed}})}}function S(e,t,n){if(!e){t.from.self;Array.isArray(t.js.paths)&&t.js.paths.forEach(function(e){t.from.pathGet(e)}),t.from.paths.forEach(function(e){var t={};X.indexOf(e.type)>=0&&(t.path=e.json),n.send({js:t,to:e})})}}function C(e,t){if(t.js.trace!=e.tracer&&!(e.locals.length>1||e.lanSkip&&e.lanSkip==t.js.trace)){K("PING-PONG",t.js,t.sender),e.lanSkip=t.js.trace;var n=x(e.parts,t.js);if(n){var r={type:"pong",from:e.parts,trace:t.js.trace};e.send(t.sender,j(r,L(e,n)))}}}function _(e,t){if(K("PONG",JSON.stringify(t.js),JSON.stringify(t.sender)),t.js.trace==e.tracer){if(e.locals.length>=5)return G("locals full");if(t.body&&0!=t.body.length){var n=e.whokey(t.js.from,t.body);if(!n)return G("invalid lan request from",t.js.from,t.sender);n.local=!0,K("local seed open",n.hashname,JSON.stringify(t.sender)),e.send(t.sender,n.open(),n),n.link()}}}function E(e,t){return"string"!=typeof e?!1:t&&e.length!==t?!1:0!==e.replace(/[a-f0-9]+/i,"").length?!1:!0}function T(e,t){var n=A(e),r=A(t);if(!n.length||!r.length)return-1;for(var i=[-1,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3],o=252,a=0;a<n.length;a++){if(!r[a])return o;var s=n[a]^r[a];if(s)return o+i[s];o-=4}return o}function A(e){for(var t=[],n=0;n<e.length/2;n++){var r=parseInt(e.substr(2*n,2),16);if(isNaN(r))return[];t[t.length]=r>>4,t[t.length]=15&r}return t}function I(e,t){var n;return e&&Array.isArray(t)?(t.forEach(function(t){if(t&&t.type==e.type)switch(e.type){case"ipv4":case"ipv6":e.ip==t.ip&&e.port==t.port&&(n=t);break;case"http":e.http==t.http&&(n=t);break;default:e.id===t.id&&(n=t)}}),n):n}function k(e){return!e||e.gone?!1:e.recvAt&&Date.now()-e.recvAt<Y.nat_timeout?!0:!1;
}function x(e,t){if("object"!=typeof e||"object"!=typeof t)return!1;for(var n,r=Object.keys(e).sort();n=r.pop();)if(t[n])return n;return!1}function B(t){return t&&t.type?"bluetooth"==t.type?!0:"http"==t.type&&"string"==typeof t.http?N(e("url").parse(t.http).hostname):["ipv4","ipv6"].indexOf(t.type)>=0?N(t.ip):!1:!1}function N(e){if(e.indexOf(":")>=0)return 0==e.indexOf("::")?!0:0==e.indexOf("fc00")?!0:0==e.indexOf("fe80")?!0:!1;var t=e.split(".");return"0"==t[0]?!0:"127"==t[0]?!0:"10"==t[0]?!0:"192"==t[0]&&"168"==t[1]?!0:"172"==t[0]&&t[1]>=16&&t[1]<=31?!0:"169"==t[0]&&"254"==t[1]?!0:!1}function D(e){return H.randomBytes(e).toString("hex")}function R(e){var n=new t(0);return Object.keys(e).sort().forEach(function(r){n=H.createHash("sha256").update(t.concat([n,new t(r)])).digest(),n=H.createHash("sha256").update(t.concat([n,new t(e[r])])).digest()}),n.toString("hex")}function j(e,n){!n&&e&&e.js&&(n=e.body,e=e.js);var r="number"==typeof e?new t(String.fromCharCode(e)):new t(e?JSON.stringify(e):"","utf8");"string"==typeof n&&(n=new t(n,"binary")),n=n||new t(0);var i=new t(2);return i.writeInt16BE(r.length,0),t.concat([i,r,n])}function $(e){if(!e)return void 0;var n="string"==typeof e?new t(e,"binary"):e;if(e.length<2)return void 0;var r=n.readUInt16BE(0);if(r>n.length-2)return void 0;var i=n.slice(2,r+2),o=n.slice(r+2),a={};if(r>1)try{a=JSON.parse(i.toString("utf8"))}catch(s){return void console.log("couldn't parse JS",n.toString("hex"),s)}return{js:a,length:n.length,head:i.toString("binary"),body:o}}function L(e,t){return e.cs&&e.cs[t]&&e.cs[t].key}function M(e){e.cs={},e.keys={},e.parts={};var t=!1;return Object.keys(e.id).forEach(function(n){2==n.length&&(e.cs[n]={},e.CSets[n]||(t=n+" not supported"),t=t||e.CSets[n].loadkey(e.cs[n],e.id[n],e.id[n+"_secret"]),e.keys[n]=e.id[n],e.parts[n]=H.createHash("sha256").update(e.cs[n].key).digest("hex"))}),t}function O(e,t,n,r){return t.csid=n,e.CSets[n].loadkey(t,r)}function P(e,t){function n(a){if(a)return e(a);var s=o.pop();return s?void r.CSets[s].genkey(i,n,t):(r.load(i),e(null,i))}var r=this,i={},o=Object.keys(r.CSets);return 0==o.length?e("no sets supported"):void n()}function U(e,t,n){if(!t.csid)return console.log("can't ticket w/ no key"),!1;var r={};return e.CSets[t.csid].loadkey(r,t.key),e.CSets[t.csid].openize(e,r,j(n))}function F(e,t,n){var r,i=n.head.charCodeAt().toString(16);if(e.CSets[i]&&i==t.csid){n.from=t;try{r=e.CSets[i].deopenize(e,n)}catch(o){r={err:o}}}else r={err:"invalid CSID of "+i};return r.err||!r.inner?(K("deticketize failed",r.err),!1):r.inner}function V(e,t){if(!t.csid)return void console.log("can't open w/ no key");t.lineOut||(t.lineOut=D(16)),t.lineAt||(t.lineAt=Date.now());var n={};return n.at=t.lineAt,n.to=t.hashname,n.from=e.parts,n.line=t.lineOut,e.CSets[t.csid].openize(e,t,n)}function z(e,t){var n,r=t.head.charCodeAt().toString(16);if(!e.CSets[r])return{err:"unknown CSID of "+r};try{n=e.CSets[r].deopenize(e,t)}catch(i){return{err:i}}return n.csid=r,n}function q(e){"string"!=typeof e&&(e="");var t=e.match(/[0-9A-Fa-f]{64}/);if(!t)return Q.parse(e);var n=t[0],r=n.substr(0,32),i=Q.parse(e.replace(n,r));return i.hostname!=r?Q.parse(e):(Object.keys(i).forEach(function(e){"string"==typeof i[e]&&(i[e]=i[e].replace(r,n))}),i)}var H=e("crypto"),G=function(){return void console.log.apply(console,arguments)},K=function(){};n.debug=function(e){K=e};var W=function(){};n.info=function(e){W=e};var Y=n.defaults={};Y.chan_timeout=1e4,Y.seek_timeout=3e3,Y.chan_autoack=1e3,Y.chan_resend=2e3,Y.chan_outbuf=100,Y.chan_inbuf=50,Y.nat_timeout=3e4,Y.idle_timeout=2*Y.nat_timeout,Y.link_timer=Y.nat_timeout-5e3,Y.link_max=256,Y.link_k=8;var X=["bluetooth","webrtc","ipv6","ipv4","http"];n["switch"]=function(){var e={seeds:[],locals:[],lines:{},bridges:{},bridgeLine:{},all:{},buckets:[],capacity:[],rels:{},raws:{},paths:[],bridgeCache:{},networks:{},CSets:{}};return e.load=function(t){if("object"!=typeof t)return"bad keys";e.id=t;var n=M(e);return n?n:0==Object.keys(e.cs).length?"missing cipher sets":(e.hashname=R(e.parts),!1)},e.make=P,e.seed=!0,e.pcounter=1,e.receive=c,e.deliver=function(t,n){e.networks[t]=n},e.send=function(t,n,r){return n?t?e.networks[t.type]?(r&&(t=r.pathOut(t)),K("<<<<",Date(),n.length,t&&[t.type,t.ip,t.port,t.id].join(","),r&&r.hashname),e.networks[t.type](t,n,r)):!1:K("send called w/ no path, dropping",(new Error).stack)&&!1:K("send called w/ no packet, dropping",(new Error).stack)&&!1},e.pathSet=function(t,n){var r;if(t){if(r=I(t,e.paths))return void(n&&e.paths.splice(e.paths.indexOf(r),1));K("local path add",JSON.stringify(t)),W("self",t.type,JSON.stringify(t)),e.paths.push(t),e.isOnline&&i(e)}},e.addSeed=a,e.whois=l,e.whokey=u,e.start=function(t,n,r,i){var o=e.whois(t);return o?o.start(n,r,i):i("invalid hashname")},e.online=s,e.listen=function(t,n){return"string"!=typeof t||"function"!=typeof n?G("invalid arguments to listen"):("_"!==t.substr(0,1)&&(t="_"+t),void(e.rels[t]=n))},e.raw=function(t,n){return"string"!=typeof t||"function"!=typeof n?G("invalid arguments to raw"):void(e.raws[t]=n)},e.raws.peer=v,e.raws.connect=g,e.raws.seek=y,e.raws.path=S,e.raws.link=b,e.seek=f,e.pencode=j,e.pdecode=$,e.isLocalIP=N,e.randomHEX=D,e.uriparse=q,e.pathMatch=I,e.isHashname=function(e){return E(e,64)},e.isBridge=o,e.wraps=Z,e.waits=[],e.waiting=!1,e.wait=function(t){return t?e.waits.push(!0):(e.waits.pop(),void(e.waiting&&0==e.waits.length&&e.waiting()))},e.ping=function(){e.tracer||(e.tracer=D(16));var t={type:"ping",trace:e.tracer};return Object.keys(e.parts).forEach(function(e){t[e]=!0}),t},r(e),e};var Z={bulk:function(e){var t="";e.callback=function(e,n,r,i){i(),n.body&&(t+=n.body),r.onBulk&&e&&r.onBulk(e!==!0?e:!1,t)},e.bulk=function(t,n){for(;t;){var r=t.substr(0,1e3);t=t.substr(1e3);var i={body:r};t||(i.callback=n),e.send(i)}e.end()}}},Q=e("url")}).call(this,e("buffer").Buffer)},{buffer:29,crypto:35,url:70}],21:[function(e,t,n){n.json=e("./seeds.json"),n.install=function(t,r){var i=n.json;r&&r.seeds&&("string"==typeof r.seeds&&(i=e(r.seeds)),"object"==typeof r.seeds&&(i=r.seeds)),Object.keys(i).forEach(function(e){t.addSeed(i[e])})}},{"./seeds.json":22}],22:[function(e,t,n){t.exports={"876d5ce8956009afc010fc908ca29617a444db660cd5598d81bb6a5a2635ba7a":{paths:[{type:"http",http:"http://azure.lewisl.net:42424"}],parts:{"2a":"a9b3da6d514c8aeb1cc001f5423dbf80f0c523a000b1087286fd1b18168d9e3e","1a":"fc1c470beb1ca7fdb6ecf7a7e3b542e087e0e7705d91666e7a124bc2aeeea9bf"},keys:{"2a":"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1Lb4LwKUW1D3XI/jK5cBtbO17e/6oSD5myO/wYOIyRcJpDgRe////94ugsPGO/FtDnNdWTJ8/bpRGkxnlHadSGA0K3hukx+SOSdddzB/wAp86l0eCuiIBeDfnBYvxC4KmiRHFHMXSRYq2HWSzH2Knz65g/6VI/Qe/F4M8+A19Wxq1RBDtLcigJtkUdJ/y4TUdSwAPaM/mcQFwjCqssC8sgH6LzqPP43+yloxqG5Hx4IsWgcnBzaCQh8yYbP04nH7fd19gPXyWCSjo3CdSwnvfCHiU/eulXT1wubMhR0ZI/XrF3fC8tglgAOsqSxBdwpWo7iZzrTX2sxV8QWnZ5xsmwIDAQAB","1a":"BO7ZnXZ6VorqlSXhXLfkHtPwctqM53eL3WRqRX/RHGVB2QuTYwLMnw=="}}}},{}],23:[function(e,t,n){(function(t){n.install=function(n){n.sock=function(e){if(n.isHashname(e)&&(e={to:e}),"object"!=typeof e)return console.log("invalid args")&&!1;var t=n.whois(e.to);if(!t)return console.log("invalid to hashname",e.to)&&!1;delete e.to;var r=t.start("sock",{bare:!0,js:e});return r.wrap("stream")},n.onSock=function(e){n.rels.sock=function(t,n,r,i){t||(i(),e(r.wrap("stream")))}},n.wraps.stream=function(n){var r=new e("stream").Duplex();r.on("finish",function(){n.send({js:{end:!0}})}),r.on("error",function(e){n.fail({js:{err:e}})}),r._write=function(e,t,i){if(n.ended)return i("closed");for(;e.length;){var o=e.slice(0,1e3);e=e.slice(1e3);var a={js:{},body:o};e.length||(a.callback=i,r.ended&&(a.js.end=!0)),n.send(a)}},r.end=function(e){r.ended=!0,e||(e=new t(0)),r.write(e)};var i=!1;return r._read=function(e){i&&i(),i=!1},n.callback=function(e,t,n,o){t.body&&(r.push(t.body)||(i=o)),e&&r.push(null),i||o()},r}}}).call(this,e("buffer").Buffer)},{buffer:29}],24:[function(e,t,n){n.install=function(e){e.TSockets={},e.socket=function(t,n){if("string"!=typeof t)return warn("invalid TS uri")&&!1;if(0==t.indexOf("ts://")){var r=t.substr(5).split("/"),i=e.whois(r.shift());if(!i)return warn("invalid TS hashname")&&!1;var o=r.join("/");o||(o="/");var a=i.start("ts",{bare:!0,js:{path:o}});return a.wrap("TS"),a.socket}return 0!=t.indexOf("/")?warn("invalid TS listening uri")&&!1:void(e.TSockets[t]=n)},e.rels.ts=function(e,t,n,r){if(!e){var i=t.from.self;if(r(),"string"!=typeof t.js.path||!i.TSockets[t.js.path])return n.err("unknown path");n.wrap("TS"),i.TSockets[t.js.path](n.socket),n.send({js:{open:!0}})}},e.wraps.TS=function(e){return e.socket={data:"",hashname:e.hashname,id:e.id},e.callback=function(e,t,n,r){n.socket.readyState=1,n.socket.onopen&&(n.socket.onopen(),delete n.socket.onopen),t.body&&(n.socket.data+=t.body),t.js.done?n.socket.onmessageack?n.socket.onmessageack(n.socket,r):(n.socket.onmessage&&n.socket.onmessage(n.socket),n.socket.data="",r()):r(),e&&(n.socket.readyState=2,1!=e&&n.socket.onerror&&n.socket.onerror(e),n.socket.onclose&&n.socket.onclose())},e.socket.readyState=e.lastIn?1:0,e.socket.send=function(t,n){if(1!=e.socket.readyState)return console.log("sending fail to TS readyState",e.socket.readyState)&&!1;for(;t;){var r=t.substr(0,1e3);t=t.substr(1e3);var i={js:{},body:r};t||(i.callback=n,i.js.done=!0),e.send(i)}},e.socket.close=function(){e.socket.readyState=2,e.done()},e.socket}}},{}],25:[function(e,t,n){(function(t){function r(e,t){t(e);var n=o.Readable();return n._read=function(){},n.emit("end"),n}function i(e){var n=o.Duplex();return n._read=function(){},n.on("finish",function(){e.send({js:{end:!0}})}),n._write=function(t,r,i){for(;t.length;){var o=t.slice(0,1e3);t=t.slice(1e3);var a={js:{},body:o};t.length||(a.callback=i,n.ended&&(a.js.end=!0)),e.send(a)}},n.end=function(e){n.ended=!0,e||(e=new t(0)),n.write(e)},n}var o=e("stream"),a=(e("url"),e("http"));n.install=function(e){e.thtp={},e.thtp.request=function(n,o){if(o||(o=function(){}),"string"==typeof n&&(n={uri:n}),"object"!=typeof n||!(n.uri||n.url||n.hashname))return r("invalid args",o);n.hashname&&(n.uri="thtp://"+n.hashname+n.path);var a=e.uriparse(n.uri||n.url);if("thtp:"!=a.protocol)return r("invalid protocol "+a.protocol,o);if(a.hostname==e.hashname)return r("can't request self",o);var s;if(!(s=e.whois(a.hostname)))return r("invalid hashname",o);var c={};"object"==typeof n.headers&&Object.keys(n.headers).forEach(function(e){c[e.toLowerCase()]=n.headers[e].toString()}),n.body&&(c["content-length"]=n.body.length.toString()),c.method=n.method||"get",c.path=a.path;var u=e.pencode(c,n.body);c={},u.length<=1e3&&(c.end=!0);var l=new t(0),f=i(s.start("thtp",{bare:!0,js:c,body:u.slice(0,1e3)},function(n,r,i,a){if(a(!0),f.headers)return f.push(r.body),void(n&&f.emit("end"));r.body&&(l=t.concat([l,r.body]));var s;return(s=e.pdecode(l))?(f.status=parseInt(s.js.status)||500,f.headers=s.js,o(f.status>=300?f.status.toString():!1,f),s.body&&f.push(s.body),void(n&&f.emit("end"))):void(n&&o(500,f))}));return u.length>1e3&&f.end(u.slice(1e3)),f},e.thtp.listen=function(n){e.rels.thtp=function(o,a,s,c){var u,l=new t(0);s.callback=function(o,a,s,c){return c(!0),u?(a.body&&u.push(a.body),void(o&&u.emit("end"))):(l=t.concat([l,a.body]),(http=e.pdecode(l))?"string"!=typeof http.js.method||"string"!=typeof http.js.path?s.err("invalid"):(u=i(s),u.method=http.js.method,u.path=http.js.path,delete http.js.method,delete http.js.path,u.headers=http.js,n(u,function(t){if(t||(t={}),t.err)return r(o,s.err);var n={};"object"==typeof t.headers&&Object.keys(t.headers).forEach(function(e){n[e.toLowerCase()]=t.headers[e].toString()}),n.status=t.status||200,t.json&&(t.body=JSON.stringify(t.json)),t.body&&(n["content-length"]=t.body.length.toString());var i=e.pencode(n,t.body),n={};return t.body&&i.length<=1e3&&(n.end=!0),s.send({js:n,body:i.slice(0,1e3)}),i.length>1e3&&u.write(i.slice(1e3)),u}),http.body&&u.push(http.body),void(o&&u.emit("end"))):void(o&&s.end()))},s.callback(o,a,s,c)}};var n={};e.thtp.match=function(t,r){var i=e.uriparse(t).pathname;n[i]=r,Object.keys(n).length>1||e.thtp.listen(function(e,t){var r;return Object.keys(n).forEach(function(t){0==e.path.indexOf(t)&&(r&&r.length>t||(r=t))}),r?n[r](e,t):void t({status:404,body:"not found"})})},e.thtp.proxy=function(t){"0.0.0.0"==t.address&&(t.address="127.0.0.1"),e.thtp.listen(function(e,n){var r={host:t.address,port:t.port,headers:e.headers,method:e.method,path:e.path};e.pipe(a.request(r,function(e){e.pipe(n({status:e.statusCode,headers:e.headers}))}))})}}}).call(this,e("buffer").Buffer)},{buffer:29,http:46,stream:69,url:70}],26:[function(e,t,n){(function(t){var r=e("crypto");n.install=function(e){var n={};e.token=function(i,o){if("function"==typeof i&&(o=i,i=!1),!i){var a=new t(e.hashname,"hex"),s=new t(e.randomHEX(8),"hex"),c=r.createHash("sha256").update(t.concat([a,s])).digest();i=t.concat([a.slice(0,16),s,c.slice(0,8)]).toString("hex")}return o&&(n[i]=o),i},e.raws.token=function(e,t,r){if(!e){var i=t.from.self;return i.isHashname(t.js.token)?n[t.js.token]?(n[t.js.token](t.from),r.send({js:{end:!0}})):i.tokens?void i.tokens(t.js.token,t.from,function(e){e&&r.err(e),can.send({js:{end:!0}})}):r.err("unknown"):r.err("invalid")}},e.dispense=function(n,i){e.seek(n,function(o,a){if(!Array.isArray(a))return i(o||"not found");var s;return a.forEach(function(e){if(e.substr(0,32)==n.substr(0,32)){var i=new t(e,"hex"),o=new t(n.substr(32,16),"hex"),a=r.createHash("sha256").update(t.concat([i,o])).digest();token2=t.concat([i.slice(0,16),o,a.slice(0,8)]).toString("hex"),n==token2&&(s=e)}}),s&&(s=e.whois(s))?void s.raw("token",{js:{token:n},retries:3},function(e){i(e!==!0?e:!1,s)}):i("not found")})}}}).call(this,e("buffer").Buffer)},{buffer:29,crypto:35}],27:[function(e,t,n){(function(t){var r=e("webrtc-peer");n.install=function(e){function n(n,a,s){a.wrap("TS"),o[s]=a;var c;a.socket.onopen=function(){c=new r.peer({initiate:n,_self:"self",_peer:s}),c.DEBUG=!0,c.onsignal=function(e){console.log("RTC OUT",e),a.socket.send(JSON.stringify(e))},c.onconnection=function(){console.log("RTC CONNECTED"),i[s]=c,a.cached&&c.send(a.cached)},c.onmessage=function(n){e.receive(new t(n,"base64"),{type:"webrtc"})}},a.socket.onmessage=function(e){console.log("RTC IN",e);try{e=JSON.parse(e.data)}catch(t){return console.log("rtc parse error",t,e.data)}c.signal(e)}}if(!r.hasWebRTC)return!1;e.pathSet({type:"webrtc"});var i={},o={};e.deliver("webrtc",function(e,t,r){var a=t.toString("base64");if(i[r.hashname])return i[r.hashname].send(a);if(o[r.hashname])return o[r.hashname].cached=a;var s=r.start("webrtc",{bare:!0});setTimeout(function(){s.send({type:"webrtc",js:{open:!0}})},10),n(!0,s,r.hashname)}),e.rels.webrtc=function(e,t,r,i){if(i(),!e){var a=t.from.hashname;if(o[a]&&r.id<o[a].id)return r.fail("duplicate");r.send({js:{open:!0}}),n(!1,r,a)}}}}).call(this,e("buffer").Buffer)},{buffer:29,"webrtc-peer":28}],28:[function(e,t,n){function r(e){e||(e={}),e.reliable=!0;var t={iceServers:n.iceServers},r=e.reliable?{}:{optional:[{RtpDataChannels:!0}]};this._rtc=new i(t,r),this.LOG_SELF=e._self,this.LOG_PEER=e._peer,this._channel=null,this.onsignal=null,this.onmessage=null,this.onconnection=null;var o=this,a=this._rtc;e.initiate?this._setupChannel():a.ondatachannel=this._setupChannel.bind(this),a.onnegotiationneeded=function(e){o.DEBUG&&console.log(o.LOG_SELF,"saw negotiation trigger and will create an offer"),a.createOffer(function(e){o.DEBUG&&console.log(o.LOG_SELF,"created offer, sending to",o.LOG_PEER),a.setLocalDescription(e,function(){console.log("DONE")}),o._sendSignal(e)},function(e){console.warn(o.LOG_SELF,"failed to create offer",e)})},a.onicecandidate=function(e){e.candidate&&o._sendSignal({candidate:e.candidate})},a.onicechange=function(e){o.DEBUG&&console.log(o.LOG_SELF,"ICE change",a.iceGatheringState,a.iceConnectionState)},a.onstatechange=function(e){o.DEBUG&&console.log(o.LOG_SELF,"State change",a.signalingState,a.readyState)}}n.peer=r,n.iceServers=[{url:"stun:23.21.150.121"}];var i=window.mozRTCPeerConnection||window.RTCPeerConnection||window.webkitRTCPeerConnection,o=window.mozRTCSessionDescription||window.RTCSessionDescription||window.webkitRTCSessionDescription,a=window.mozRTCIceCandidate||window.RTCIceCandidate||window.webkitRTCIceCandidate;n.hasWebRTC=i?!0:!1,r.prototype._sendSignal=function(e){if(!this.onsignal)throw Error("Need to send message but `onsignal` handler is not set.");this.onsignal(e)},r.prototype.signal=function(e){var t=this,n=this._rtc;if(t.DEBUG&&console.log(this.LOG_SELF,"got data",e,"from",this.LOG_PEER),e.sdp)n.setRemoteDescription(new o(e),function(){var e="offer"==n.remoteDescription.type;t.DEBUG&&console.log(t.LOG_SELF,"set offer, now creating answer:",e),e&&n.createAnswer(function(e){t.DEBUG&&console.log(t.LOG_SELF,"got anwer, sending back to",t.LOG_PEER),n.setLocalDescription(e),t._sendSignal(e)},function(e){console.warn(t.LOG_SELF,"couldn't create answer",e)})},function(e){console.warn(t.LOG_SELF,"couldn't set remote description",e)});else if(e.candidate)try{n.addIceCandidate(new a(e.candidate))}catch(r){console.error("Couldn't add candidate",r)}},r.prototype.send=function(e){return this._channel&&"open"===this._channel.readyState?void this._channel.send(e):this.DEBUG&&console.log("dropping data, no open channel")},r.prototype._setupChannel=function(e){var t=this,n=this._rtc;e&&t.DEBUG&&console.log(this.LOG_SELF,"received data channel",e.channel.readyState),this._channel=e?e.channel:n.createDataChannel("telehash"),this._channel.onopen=function(e){t.DEBUG&&console.log(t.LOG_SELF,"DATA CHANNEL IS OPEN",t._channel),t.onconnection&&t.onconnection(t._channel)},this._channel.onmessage=function(e){t.DEBUG&&console.log(t.LOG_SELF,"received message!",e),t.onmessage&&t.onmessage(e.data)},window.mozRTCPeerConnection&&setTimeout(function(){n.onnegotiationneeded()},0),window.dbgChannel=this._channel}},{}],29:[function(e,t,n){function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);var i=typeof e;"base64"===t&&"string"===i&&(e=k(e));var o;if("number"===i)o=N(e);else if("string"===i)o=r.byteLength(e,t);else{if("object"!==i)throw new Error("First argument needs to be a number, array or string.");o=N(e.length)}var a;r._useTypedArrays?a=r._augment(new Uint8Array(o)):(a=this,a.length=o,a._isBuffer=!0);var s;if(r._useTypedArrays&&"number"==typeof e.byteLength)a._set(e);else if(R(e))if(r.isBuffer(e))for(s=0;o>s;s++)a[s]=e.readUInt8(s);else for(s=0;o>s;s++)a[s]=(e[s]%256+256)%256;else if("string"===i)a.write(e,0,t);else if("number"===i&&!r._useTypedArrays&&!n)for(s=0;o>s;s++)a[s]=0;return a}function i(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;q(o%2===0,"Invalid hex string"),r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(t.substr(2*a,2),16);q(!isNaN(s),"Invalid hex string"),e[n+a]=s}return a}function o(e,t,n,r){var i=P($(t),e,n,r);return i}function a(e,t,n,r){var i=P(L(t),e,n,r);return i}function s(e,t,n,r){return a(e,t,n,r)}function c(e,t,n,r){var i=P(O(t),e,n,r);return i}function u(e,t,n,r){var i=P(M(t),e,n,r);return i}function l(e,t,n){return 0===t&&n===e.length?H.fromByteArray(e):H.fromByteArray(e.slice(t,n))}function f(e,t,n){var r="",i="";n=Math.min(e.length,n);for(var o=t;n>o;o++)e[o]<=127?(r+=U(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return r+U(i)}function d(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function p(e,t,n){return d(e,t,n)}function h(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=j(e[o]);return i}function g(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function m(e,t,n,r){r||(q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o;return n?(o=e[t],i>t+1&&(o|=e[t+1]<<8)):(o=e[t]<<8,i>t+1&&(o|=e[t+1])),o}}function v(e,t,n,r){r||(q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o;return n?(i>t+2&&(o=e[t+2]<<16),i>t+1&&(o|=e[t+1]<<8),o|=e[t],i>t+3&&(o+=e[t+3]<<24>>>0)):(i>t+1&&(o=e[t+1]<<16),i>t+2&&(o|=e[t+2]<<8),i>t+3&&(o|=e[t+3]),o+=e[t]<<24>>>0),o}}function y(e,t,n,r){r||(q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o=m(e,t,n,!0),a=32768&o;return a?-1*(65535-o+1):o}}function b(e,t,n,r){r||(q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o=v(e,t,n,!0),a=2147483648&o;return a?-1*(4294967295-o+1):o}}function w(e,t,n,r){return r||(q("boolean"==typeof n,"missing or invalid endian"),q(t+3<e.length,"Trying to read beyond buffer length")),G.read(e,t,n,23,4)}function S(e,t,n,r){return r||(q("boolean"==typeof n,"missing or invalid endian"),q(t+7<e.length,"Trying to read beyond buffer length")),G.read(e,t,n,52,8)}function C(e,t,n,r,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==n&&null!==n,"missing offset"),q(n+1<e.length,"trying to write beyond buffer length"),F(t,65535));var o=e.length;if(!(n>=o)){for(var a=0,s=Math.min(o-n,2);s>a;a++)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a);return n+2}}function _(e,t,n,r,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==n&&null!==n,"missing offset"),q(n+3<e.length,"trying to write beyond buffer length"),F(t,4294967295));var o=e.length;if(!(n>=o)){for(var a=0,s=Math.min(o-n,4);s>a;a++)e[n+a]=t>>>8*(r?a:3-a)&255;return n+4}}function E(e,t,n,r,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==n&&null!==n,"missing offset"),q(n+1<e.length,"Trying to write beyond buffer length"),V(t,32767,-32768));var o=e.length;if(!(n>=o))return t>=0?C(e,t,n,r,i):C(e,65535+t+1,n,r,i),n+2}function T(e,t,n,r,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==n&&null!==n,"missing offset"),q(n+3<e.length,"Trying to write beyond buffer length"),V(t,2147483647,-2147483648));var o=e.length;if(!(n>=o))return t>=0?_(e,t,n,r,i):_(e,4294967295+t+1,n,r,i),n+4}function A(e,t,n,r,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==n&&null!==n,"missing offset"),q(n+3<e.length,"Trying to write beyond buffer length"),z(t,3.4028234663852886e38,-3.4028234663852886e38));var o=e.length;if(!(n>=o))return G.write(e,t,n,r,23,4),n+4}function I(e,t,n,r,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==n&&null!==n,"missing offset"),q(n+7<e.length,"Trying to write beyond buffer length"),z(t,1.7976931348623157e308,-1.7976931348623157e308));var o=e.length;if(!(n>=o))return G.write(e,t,n,r,52,8),n+8}function k(e){for(e=x(e).replace(W,"");e.length%4!==0;)e+="=";return e}function x(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function B(e,t,n){return"number"!=typeof e?n:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function N(e){return e=~~Math.ceil(+e),0>e?0:e}function D(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function R(e){return D(e)||r.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function j(e){return 16>e?"0"+e.toString(16):e.toString(16)}function $(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(127>=r)t.push(r);else{var i=n;r>=55296&&57343>=r&&n++;for(var o=encodeURIComponent(e.slice(i,n+1)).substr(1).split("%"),a=0;a<o.length;a++)t.push(parseInt(o[a],16))}}return t}function L(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function M(e){for(var t,n,r,i=[],o=0;o<e.length;o++)t=e.charCodeAt(o),n=t>>8,r=t%256,i.push(r),i.push(n);return i}function O(e){return H.toByteArray(e)}function P(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}function U(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function F(e,t){q("number"==typeof e,"cannot write a non-number as a number"),q(e>=0,"specified a negative value for writing an unsigned value"),q(t>=e,"value is larger than maximum value for type"),q(Math.floor(e)===e,"value has a fractional component")}function V(e,t,n){q("number"==typeof e,"cannot write a non-number as a number"),q(t>=e,"value larger than maximum allowed value"),q(e>=n,"value smaller than minimum allowed value"),q(Math.floor(e)===e,"value has a fractional component")}function z(e,t,n){q("number"==typeof e,"cannot write a non-number as a number"),q(t>=e,"value larger than maximum allowed value"),q(e>=n,"value smaller than minimum allowed value")}function q(e,t){if(!e)throw new Error(t||"Failed assertion")}var H=e("base64-js"),G=e("ieee754");n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192,r._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(n){return!1}}(),r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},r.byteLength=function(e,t){var n;switch(e=e.toString(),t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=$(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=O(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},r.concat=function(e,t){if(q(D(e),"Usage: Buffer.concat(list[, length])"),0===e.length)return new r(0);if(1===e.length)return e[0];var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var i=new r(t),o=0;for(n=0;n<e.length;n++){var a=e[n];a.copy(i,o),o+=a.length}return i},r.compare=function(e,t){q(r.isBuffer(e)&&r.isBuffer(t),"Arguments must be Buffers");for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);a>o&&e[o]===t[o];o++);return o!==a&&(n=e[o],i=t[o]),i>n?-1:n>i?1:0},r.prototype.write=function(e,t,n,r){if(isFinite(t))isFinite(n)||(r=n,n=void 0);else{var l=r;r=t,t=n,n=l}t=Number(t)||0;var f=this.length-t;n?(n=Number(n),n>f&&(n=f)):n=f,r=String(r||"utf8").toLowerCase();var d;switch(r){case"hex":d=i(this,e,t,n);break;case"utf8":case"utf-8":d=o(this,e,t,n);break;case"ascii":d=a(this,e,t,n);break;case"binary":d=s(this,e,t,n);break;case"base64":d=c(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=u(this,e,t,n);break;default:throw new Error("Unknown encoding")}return d},r.prototype.toString=function(e,t,n){var r=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,n=void 0===n?r.length:Number(n),n===t)return"";var i;switch(e){case"hex":i=h(r,t,n);break;case"utf8":case"utf-8":i=f(r,t,n);break;case"ascii":i=d(r,t,n);break;case"binary":i=p(r,t,n);break;case"base64":i=l(r,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=g(r,t,n);break;default:throw new Error("Unknown encoding")}return i},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.equals=function(e){return q(r.isBuffer(e),"Argument must be a Buffer"),0===r.compare(this,e)},r.prototype.compare=function(e){return q(r.isBuffer(e),"Argument must be a Buffer"),r.compare(this,e)},r.prototype.copy=function(e,t,n,i){var o=this;if(n||(n=0),i||0===i||(i=this.length),t||(t=0),i!==n&&0!==e.length&&0!==o.length){q(i>=n,"sourceEnd < sourceStart"),q(t>=0&&t<e.length,"targetStart out of bounds"),q(n>=0&&n<o.length,"sourceStart out of bounds"),q(i>=0&&i<=o.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var a=i-n;if(100>a||!r._useTypedArrays)for(var s=0;a>s;s++)e[s+t]=this[s+n];else e._set(this.subarray(n,n+a),t)}},r.prototype.slice=function(e,t){var n=this.length;if(e=B(e,n,0),t=B(t,n,n),r._useTypedArrays)return r._augment(this.subarray(e,t));for(var i=t-e,o=new r(i,void 0,!0),a=0;i>a;a++)o[a]=this[a+e];return o},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.readUInt8=function(e,t){return t||(q(void 0!==e&&null!==e,"missing offset"),q(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},r.prototype.readUInt16LE=function(e,t){return m(this,e,!0,t)},r.prototype.readUInt16BE=function(e,t){return m(this,e,!1,t)},r.prototype.readUInt32LE=function(e,t){return v(this,e,!0,t)},r.prototype.readUInt32BE=function(e,t){return v(this,e,!1,t)},r.prototype.readInt8=function(e,t){if(t||(q(void 0!==e&&null!==e,"missing offset"),q(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var n=128&this[e];return n?-1*(255-this[e]+1):this[e]}},r.prototype.readInt16LE=function(e,t){return y(this,e,!0,t)},r.prototype.readInt16BE=function(e,t){return y(this,e,!1,t)},r.prototype.readInt32LE=function(e,t){return b(this,e,!0,t)},r.prototype.readInt32BE=function(e,t){return b(this,e,!1,t)},r.prototype.readFloatLE=function(e,t){return w(this,e,!0,t)},r.prototype.readFloatBE=function(e,t){return w(this,e,!1,t)},r.prototype.readDoubleLE=function(e,t){return S(this,e,!0,t)},r.prototype.readDoubleBE=function(e,t){return S(this,e,!1,t)},r.prototype.writeUInt8=function(e,t,n){return n||(q(void 0!==e&&null!==e,"missing value"),q(void 0!==t&&null!==t,"missing offset"),q(t<this.length,"trying to write beyond buffer length"),F(e,255)),t>=this.length?void 0:(this[t]=e,t+1)},r.prototype.writeUInt16LE=function(e,t,n){return C(this,e,t,!0,n)},r.prototype.writeUInt16BE=function(e,t,n){return C(this,e,t,!1,n)},r.prototype.writeUInt32LE=function(e,t,n){return _(this,e,t,!0,n)},r.prototype.writeUInt32BE=function(e,t,n){return _(this,e,t,!1,n)},r.prototype.writeInt8=function(e,t,n){return n||(q(void 0!==e&&null!==e,"missing value"),q(void 0!==t&&null!==t,"missing offset"),q(t<this.length,"Trying to write beyond buffer length"),V(e,127,-128)),t>=this.length?void 0:(e>=0?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n),t+1)},r.prototype.writeInt16LE=function(e,t,n){return E(this,e,t,!0,n)},r.prototype.writeInt16BE=function(e,t,n){return E(this,e,t,!1,n)},r.prototype.writeInt32LE=function(e,t,n){return T(this,e,t,!0,n)},r.prototype.writeInt32BE=function(e,t,n){return T(this,e,t,!1,n)},r.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return I(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return I(this,e,t,!1,n)},r.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),q(n>=t,"end < start"),n!==t&&0!==this.length){q(t>=0&&t<this.length,"start out of bounds"),q(n>=0&&n<=this.length,"end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=$(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}},r.prototype.inspect=function(){for(var e=[],t=this.length,r=0;t>r;r++)if(e[r]=j(this[r]),r===n.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r._useTypedArrays)return new r(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var K=r.prototype;r._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=K.get,e.set=K.set,
e.write=K.write,e.toString=K.toString,e.toLocaleString=K.toString,e.toJSON=K.toJSON,e.equals=K.equals,e.compare=K.compare,e.copy=K.copy,e.slice=K.slice,e.readUInt8=K.readUInt8,e.readUInt16LE=K.readUInt16LE,e.readUInt16BE=K.readUInt16BE,e.readUInt32LE=K.readUInt32LE,e.readUInt32BE=K.readUInt32BE,e.readInt8=K.readInt8,e.readInt16LE=K.readInt16LE,e.readInt16BE=K.readInt16BE,e.readInt32LE=K.readInt32LE,e.readInt32BE=K.readInt32BE,e.readFloatLE=K.readFloatLE,e.readFloatBE=K.readFloatBE,e.readDoubleLE=K.readDoubleLE,e.readDoubleBE=K.readDoubleBE,e.writeUInt8=K.writeUInt8,e.writeUInt16LE=K.writeUInt16LE,e.writeUInt16BE=K.writeUInt16BE,e.writeUInt32LE=K.writeUInt32LE,e.writeUInt32BE=K.writeUInt32BE,e.writeInt8=K.writeInt8,e.writeInt16LE=K.writeInt16LE,e.writeInt16BE=K.writeInt16BE,e.writeInt32LE=K.writeInt32LE,e.writeInt32BE=K.writeInt32BE,e.writeFloatLE=K.writeFloatLE,e.writeFloatBE=K.writeFloatBE,e.writeDoubleLE=K.writeDoubleLE,e.writeDoubleBE=K.writeDoubleBE,e.fill=K.fill,e.inspect=K.inspect,e.toArrayBuffer=K.toArrayBuffer,e};var W=/[^+\/0-9A-z]/g},{"base64-js":30,ieee754:31}],30:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a?62:t===s?63:c>t?-1:c+10>t?t-c+26+26:l+26>t?t-l:u+26>t?t-u+26:void 0}function n(e){function n(e){u[f++]=e}var r,i,a,s,c,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;c="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,u=new o(3*e.length/4-c),a=c>0?e.length-4:e.length;var f=0;for(r=0,i=0;a>r;r+=4,i+=3)s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===c?(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&s)):1===c&&(s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(s>>8&255),n(255&s)),u}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,a,s=e.length%3,c="";for(i=0,a=e.length-s;a>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],c+=n(o);switch(s){case 1:o=e[e.length-1],c+=t(o>>2),c+=t(o<<4&63),c+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],c+=t(o>>10),c+=t(o>>4&63),c+=t(o<<2&63),c+="="}return c}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),c="0".charCodeAt(0),u="a".charCodeAt(0),l="A".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],31:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,f=n?i-1:0,d=n?-1:1,p=e[t+f];for(f+=d,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+f>=1?d/c:d*Math.pow(2,1-f),t*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*c-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g}},{}],32:[function(e,t,n){(function(n){function r(e){return function(){var t=[],r={update:function(e,r){return n.isBuffer(e)||(e=new n(e,r)),t.push(e),this},digest:function(r){var i=n.concat(t),o=e(i);return t=null,r?o.toString(r):o}};return r}}var i=e("sha.js"),o=r(e("./md5")),a=r(e("ripemd160"));t.exports=function(e){return"md5"===e?new o:"rmd160"===e?new a:i(e)}}).call(this,e("buffer").Buffer)},{"./md5":36,buffer:29,ripemd160:37,"sha.js":39}],33:[function(e,t,n){(function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);this._opad=c,this._alg=e,t=this._key=n.isBuffer(t)?t:new n(t),t.length>o?t=i(e).update(t).digest():t.length<o&&(t=n.concat([t,a],o));for(var s=this._ipad=new n(o),c=this._opad=new n(o),u=0;o>u;u++)s[u]=54^t[u],c[u]=92^t[u];this._hash=i(e).update(s)}var i=e("./create-hash"),o=64,a=new n(o);a.fill(0),t.exports=r,r.prototype.update=function(e,t){return this._hash.update(e,t),this},r.prototype.digest=function(e){var t=this._hash.digest();return i(this._alg).update(this._opad).update(t).digest(e)}}).call(this,e("buffer").Buffer)},{"./create-hash":32,buffer:29}],34:[function(e,t,n){(function(e){function n(t,n){if(t.length%o!==0){var r=t.length+(o-t.length%o);t=e.concat([t,a],r)}for(var i=[],s=n?t.readInt32BE:t.readInt32LE,c=0;c<t.length;c+=o)i.push(s.call(t,c));return i}function r(t,n,r){for(var i=new e(n),o=r?i.writeInt32BE:i.writeInt32LE,a=0;a<t.length;a++)o.call(i,t[a],4*a,!0);return i}function i(t,i,o,a){e.isBuffer(t)||(t=new e(t));var c=i(n(t,a),t.length*s);return r(c,o,a)}var o=4,a=new e(o);a.fill(0);var s=8;t.exports={hash:i}}).call(this,e("buffer").Buffer)},{buffer:29}],35:[function(e,t,n){(function(t){function r(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function i(e,t){for(var n in e)t(e[n],n)}var o=e("./rng");n.createHash=e("./create-hash"),n.createHmac=e("./create-hmac"),n.randomBytes=function(e,n){if(!n||!n.call)return new t(o(e));try{n.call(this,void 0,new t(o(e)))}catch(r){n(r)}},n.getHashes=function(){return["sha1","sha256","md5","rmd160"]};var a=e("./pbkdf2")(n.createHmac);n.pbkdf2=a.pbkdf2,n.pbkdf2Sync=a.pbkdf2Sync,i(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(e){n[e]=function(){r("sorry,",e,"is not implemented yet")}})}).call(this,e("buffer").Buffer)},{"./create-hash":32,"./create-hmac":33,"./pbkdf2":43,"./rng":44,buffer:29}],36:[function(e,t,n){function r(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,r=-271733879,i=-1732584194,l=271733878,f=0;f<e.length;f+=16){var d=n,p=r,h=i,g=l;n=o(n,r,i,l,e[f+0],7,-680876936),l=o(l,n,r,i,e[f+1],12,-389564586),i=o(i,l,n,r,e[f+2],17,606105819),r=o(r,i,l,n,e[f+3],22,-1044525330),n=o(n,r,i,l,e[f+4],7,-176418897),l=o(l,n,r,i,e[f+5],12,1200080426),i=o(i,l,n,r,e[f+6],17,-1473231341),r=o(r,i,l,n,e[f+7],22,-45705983),n=o(n,r,i,l,e[f+8],7,1770035416),l=o(l,n,r,i,e[f+9],12,-1958414417),i=o(i,l,n,r,e[f+10],17,-42063),r=o(r,i,l,n,e[f+11],22,-1990404162),n=o(n,r,i,l,e[f+12],7,1804603682),l=o(l,n,r,i,e[f+13],12,-40341101),i=o(i,l,n,r,e[f+14],17,-1502002290),r=o(r,i,l,n,e[f+15],22,1236535329),n=a(n,r,i,l,e[f+1],5,-165796510),l=a(l,n,r,i,e[f+6],9,-1069501632),i=a(i,l,n,r,e[f+11],14,643717713),r=a(r,i,l,n,e[f+0],20,-373897302),n=a(n,r,i,l,e[f+5],5,-701558691),l=a(l,n,r,i,e[f+10],9,38016083),i=a(i,l,n,r,e[f+15],14,-660478335),r=a(r,i,l,n,e[f+4],20,-405537848),n=a(n,r,i,l,e[f+9],5,568446438),l=a(l,n,r,i,e[f+14],9,-1019803690),i=a(i,l,n,r,e[f+3],14,-187363961),r=a(r,i,l,n,e[f+8],20,1163531501),n=a(n,r,i,l,e[f+13],5,-1444681467),l=a(l,n,r,i,e[f+2],9,-51403784),i=a(i,l,n,r,e[f+7],14,1735328473),r=a(r,i,l,n,e[f+12],20,-1926607734),n=s(n,r,i,l,e[f+5],4,-378558),l=s(l,n,r,i,e[f+8],11,-2022574463),i=s(i,l,n,r,e[f+11],16,1839030562),r=s(r,i,l,n,e[f+14],23,-35309556),n=s(n,r,i,l,e[f+1],4,-1530992060),l=s(l,n,r,i,e[f+4],11,1272893353),i=s(i,l,n,r,e[f+7],16,-155497632),r=s(r,i,l,n,e[f+10],23,-1094730640),n=s(n,r,i,l,e[f+13],4,681279174),l=s(l,n,r,i,e[f+0],11,-358537222),i=s(i,l,n,r,e[f+3],16,-722521979),r=s(r,i,l,n,e[f+6],23,76029189),n=s(n,r,i,l,e[f+9],4,-640364487),l=s(l,n,r,i,e[f+12],11,-421815835),i=s(i,l,n,r,e[f+15],16,530742520),r=s(r,i,l,n,e[f+2],23,-995338651),n=c(n,r,i,l,e[f+0],6,-198630844),l=c(l,n,r,i,e[f+7],10,1126891415),i=c(i,l,n,r,e[f+14],15,-1416354905),r=c(r,i,l,n,e[f+5],21,-57434055),n=c(n,r,i,l,e[f+12],6,1700485571),l=c(l,n,r,i,e[f+3],10,-1894986606),i=c(i,l,n,r,e[f+10],15,-1051523),r=c(r,i,l,n,e[f+1],21,-2054922799),n=c(n,r,i,l,e[f+8],6,1873313359),l=c(l,n,r,i,e[f+15],10,-30611744),i=c(i,l,n,r,e[f+6],15,-1560198380),r=c(r,i,l,n,e[f+13],21,1309151649),n=c(n,r,i,l,e[f+4],6,-145523070),l=c(l,n,r,i,e[f+11],10,-1120210379),i=c(i,l,n,r,e[f+2],15,718787259),r=c(r,i,l,n,e[f+9],21,-343485551),n=u(n,d),r=u(r,p),i=u(i,h),l=u(l,g)}return Array(n,r,i,l)}function i(e,t,n,r,i,o){return u(l(u(u(t,e),u(r,o)),i),n)}function o(e,t,n,r,o,a,s){return i(t&n|~t&r,e,t,o,a,s)}function a(e,t,n,r,o,a,s){return i(t&r|n&~r,e,t,o,a,s)}function s(e,t,n,r,o,a,s){return i(t^n^r,e,t,o,a,s)}function c(e,t,n,r,o,a,s){return i(n^(t|~r),e,t,o,a,s)}function u(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function l(e,t){return e<<t|e>>>32-t}var f=e("./helpers");t.exports=function(e){return f.hash(e,r,16)}},{"./helpers":34}],37:[function(e,t,n){(function(e){function n(e,t,n){return e^t^n}function r(e,t,n){return e&t|~e&n}function i(e,t,n){return(e|~t)^n}function o(e,t,n){return e&n|t&~n}function a(e,t,n){return e^(t|~n)}function s(e,t){return e<<t|e>>>32-t}function c(t){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var r=g(t),i=8*t.length,o=8*t.length;r[i>>>5]|=128<<24-i%32,r[(i+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var a=0;a<r.length;a+=16)v(n,r,a);for(var a=0;5>a;a++){var s=n[a];n[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var c=m(n);return new e(c)}t.exports=c;var u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],h=[1352829926,1548603684,1836072691,2053994217,0],g=function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},m=function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},v=function(e,t,c){for(var g=0;16>g;g++){var m=c+g,v=t[m];t[m]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)}var y,b,w,S,C,_,E,T,A,I;_=y=e[0],E=b=e[1],T=w=e[2],A=S=e[3],I=C=e[4];for(var k,g=0;80>g;g+=1)k=y+t[c+u[g]]|0,k+=16>g?n(b,w,S)+p[0]:32>g?r(b,w,S)+p[1]:48>g?i(b,w,S)+p[2]:64>g?o(b,w,S)+p[3]:a(b,w,S)+p[4],k=0|k,k=s(k,f[g]),k=k+C|0,y=C,C=S,S=s(w,10),w=b,b=k,k=_+t[c+l[g]]|0,k+=16>g?a(E,T,A)+h[0]:32>g?o(E,T,A)+h[1]:48>g?i(E,T,A)+h[2]:64>g?r(E,T,A)+h[3]:n(E,T,A)+h[4],k=0|k,k=s(k,d[g]),k=k+I|0,_=I,I=A,A=s(T,10),T=E,E=k;k=e[1]+w+A|0,e[1]=e[2]+S+I|0,e[2]=e[3]+C+_|0,e[3]=e[4]+y+E|0,e[4]=e[0]+b+T|0,e[0]=k}}).call(this,e("buffer").Buffer)},{buffer:29}],38:[function(e,t,n){var r=e("./util"),i=r.write,o=r.zeroFill;t.exports=function(e){function t(t,n){this._block=new e(t),this._finalSize=n,this._blockSize=t,this._len=0,this._s=0}function n(e,t){return null==t?e.byteLength||e.length:"ascii"==t||"binary"==t?e.length:"hex"==t?e.length/2:"base64"==t?e.length/3:void 0}return t.prototype.init=function(){this._s=0,this._len=0},t.prototype.update=function(t,r){var o,a=this._blockSize;r||"string"!=typeof t||(r="utf8"),r?("utf-8"===r&&(r="utf8"),("base64"===r||"utf8"===r)&&(t=new e(t,r),r=null),o=n(t,r)):o=t.byteLength||t.length;for(var s=this._len+=o,c=this._s=this._s||0,u=0,l=this._block;s>c;){var f=Math.min(o,u+a);i(l,t,r,c%a,u,f);var d=f-u;c+=d,u+=d,c%a||this._update(l)}return this._s=c,this},t.prototype.digest=function(e){var t=this._blockSize,n=this._finalSize,i=8*this._len,a=this._block,s=i%(8*t);a[this._len%t]=128,o(this._block,this._len%t+1),s>=8*n&&(this._update(this._block),r.zeroFill(this._block,0)),a.writeInt32BE(i,n+4);var c=this._update(this._block)||this._hash();return null==e?c:c.toString(e)},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t}},{"./util":42}],39:[function(e,t,n){var n=t.exports=function(e){var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t},r=e("buffer").Buffer,i=e("./hash")(r);n.sha=n.sha1=e("./sha1")(r,i),n.sha256=e("./sha256")(r,i)},{"./hash":38,"./sha1":40,"./sha256":41,buffer:29}],40:[function(e,t,n){t.exports=function(t,n){function r(){return g.length?g.pop().init():this instanceof r?(this._w=h,n.call(this,64,56),this._h=null,void this.init()):new r}function i(e,t,n,r){return 20>e?t&n|~t&r:40>e?t^n^r:60>e?t&n|t&r|n&r:t^n^r}function o(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function a(e,t){return e+t|0}function s(e,t){return e<<t|e>>>32-t}var c=e("util").inherits;c(r,n);var u=0,l=4,f=8,d=12,p=16,h=new Int32Array(80),g=[];r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,n.prototype.init.call(this),this},r.prototype._POOL=g;new t(1)instanceof DataView;return r.prototype._update=function(e){var t,n,r,c,u,l,f,d,p,h,g=this._block;this._h;t=l=this._a,n=f=this._b,r=d=this._c,c=p=this._d,u=h=this._e;for(var m=this._w,v=0;80>v;v++){var y=m[v]=16>v?g.readInt32BE(4*v):s(m[v-3]^m[v-8]^m[v-14]^m[v-16],1),b=a(a(s(t,5),i(v,n,r,c)),a(a(u,y),o(v)));u=c,c=r,r=s(n,30),n=t,t=b}this._a=a(t,l),this._b=a(n,f),this._c=a(r,d),this._d=a(c,p),this._e=a(u,h)},r.prototype._hash=function(){g.length<100&&g.push(this);var e=new t(20);return e.writeInt32BE(0|this._a,u),e.writeInt32BE(0|this._b,l),e.writeInt32BE(0|this._c,f),e.writeInt32BE(0|this._d,d),e.writeInt32BE(0|this._e,p),e},r}},{util:72}],41:[function(e,t,n){var r=e("util").inherits;e("./util");t.exports=function(e,t){function n(){h.length,this.init(),this._w=p,t.call(this,64,56)}function i(e,t){return e>>>t|e<<32-t}function o(e,t){return e>>>t}function a(e,t,n){return e&t^~e&n}function s(e,t,n){return e&t^e&n^t&n}function c(e){return i(e,2)^i(e,13)^i(e,22)}function u(e){return i(e,6)^i(e,11)^i(e,25)}function l(e){return i(e,7)^i(e,18)^o(e,3)}function f(e){return i(e,17)^i(e,19)^o(e,10)}var d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];r(n,t);var p=new Array(64),h=[];n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this};return n.prototype._update=function(e){var t,n,r,i,o,p,h,g,m,v,y=this._block,b=this._w;t=0|this._a,n=0|this._b,r=0|this._c,i=0|this._d,o=0|this._e,p=0|this._f,h=0|this._g,g=0|this._h;for(var w=0;64>w;w++){var S=b[w]=16>w?y.readInt32BE(4*w):f(b[w-2])+b[w-7]+l(b[w-15])+b[w-16];m=g+u(o)+a(o,p,h)+d[w]+S,v=c(t)+s(t,n,r),g=h,h=p,p=o,o=i+m,i=r,r=n,n=t,t=m+v}this._a=t+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0,this._f=p+this._f|0,this._g=h+this._g|0,this._h=g+this._h|0},n.prototype._hash=function(){h.length<10&&h.push(this);var t=new e(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},n}},{"./util":42,util:72}],42:[function(e,t,n){function r(e,t,n,r,i,o,a){var s=o-i;if("ascii"===n||"binary"===n)for(var c=0;s>c;c++)e[r+c]=t.charCodeAt(c+i);else if(null==n)for(var c=0;s>c;c++)e[r+c]=t[c+i];else{if("hex"!==n)throw"base64"===n?new Error("base64 encoding not yet supported"):new Error(n+" encoding not yet supported");for(var c=0;s>c;c++){var u=i+c;e[r+c]=parseInt(t[2*u]+t[2*u+1],16)}}}function i(e,t){for(var n=t;n<e.length;n++)e[n]=0}n.write=r,n.zeroFill=i,n.toString=toString},{}],43:[function(e,t,n){(function(e){var n=64,r=new e(n);r.fill(0),t.exports=function(t,i){return i=i||{},i.pbkdf2=function(e,t,n,r,o){if("function"!=typeof o)throw new Error("No callback provided to pbkdf2");setTimeout(function(){o(null,i.pbkdf2Sync(e,t,n,r))})},i.pbkdf2Sync=function(i,o,a,s){if("number"!=typeof a)throw new TypeError("Iterations not a number");if(0>a)throw new TypeError("Bad iterations");if("number"!=typeof s)throw new TypeError("Key length not a number");if(0>s)throw new TypeError("Bad key length");var i=e.isBuffer(i)?i:new e(i);i.length>n?i=createHash(alg).update(i).digest():i.length<n&&(i=e.concat([i,r],n));var c,u,l,f=0,d=1,p=new e(4),h=new e(s);for(h.fill(0);s;){u=s>20?20:s,p[0]=d>>24&255,p[1]=d>>16&255,p[2]=d>>8&255,p[3]=255&d,c=t("sha1",i),c.update(o),c.update(p),l=c.digest(),l.copy(h,f,0,u);for(var g=1;a>g;g++){c=t("sha1",i),c.update(l),l=c.digest();for(var m=0;u>m;m++)h[m]^=l[m]}s-=u,d++,f+=u}return h},i}}).call(this,e("buffer").Buffer)},{buffer:29}],44:[function(e,t,n){(function(e){!function(){var n,r,i=this;n=function(t){for(var n,n,r=new e(t),i=0;t>i;i++)0==(3&i)&&(n=4294967296*Math.random()),r[i]=n>>>((3&i)<<3)&255;return r},i.crypto&&crypto.getRandomValues&&(r=function(t){var n=new e(t);return crypto.getRandomValues(n),n}),t.exports=r||n}()}).call(this,e("buffer").Buffer)},{buffer:29}],45:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),c=1;r>c;c++)o[c-1]=arguments[c];n.apply(this,o)}else if(a(n)){for(r=arguments.length,o=new Array(r-1),c=1;r>c;c++)o[c-1]=arguments[c];for(u=n.slice(),r=u.length,c=0;r>c;c++)u[c].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned){var n;n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],46:[function(e,t,n){var r=t.exports,i=(e("events").EventEmitter,e("./lib/request")),o=e("url");r.request=function(e,t){"string"==typeof e&&(e=o.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.scheme||(e.scheme=window.location.protocol.split(":")[0]),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https"==e.scheme?443:80);var n=new i(new a,e);return t&&n.on("response",t),n},r.get=function(e,t){e.method="GET";var n=r.request(e,t);return n.end(),n},r.Agent=function(){},r.Agent.defaultMaxSockets=4;var a=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{var n=new window.ActiveXObject(e[t]);return function(){if(n){var r=n;return n=null,r}return new window.ActiveXObject(e[t])}}catch(r){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();r.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":47,events:45,url:70}],47:[function(e,t,n){var r=e("stream"),i=e("./response"),o=e("Base64"),a=e("inherits"),s=t.exports=function(e,t){var n=this;n.writable=!0,n.xhr=e,n.body=[],n.uri=(t.scheme||"http")+"://"+t.host+(t.port?":"+t.port:"")+(t.path||"/"),"undefined"==typeof t.withCredentials&&(t.withCredentials=!0);try{e.withCredentials=t.withCredentials}catch(r){}if(t.responseType)try{e.responseType=t.responseType}catch(r){}if(e.open(t.method||"GET",n.uri,!0),n._headers={},t.headers)for(var a=c(t.headers),s=0;s<a.length;s++){var u=a[s];if(n.isSafeRequestHeader(u)){var l=t.headers[u];n.setHeader(u,l)}}t.auth&&this.setHeader("Authorization","Basic "+o.btoa(t.auth));var f=new i;f.on("close",function(){n.emit("close")}),f.on("ready",function(){n.emit("response",f)}),e.onreadystatechange=function(){e.__aborted||f.handle(e)}};a(s,r),s.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t},s.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]},s.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},s.prototype.write=function(e){this.body.push(e)},s.prototype.destroy=function(e){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},s.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var t=c(this._headers),n=0;n<t.length;n++){var r=t[n],i=this._headers[r];if(u(i))for(var o=0;o<i.length;o++)this.xhr.setRequestHeader(r,i[o]);else this.xhr.setRequestHeader(r,i)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(u(this.body[0])){for(var a=[],n=0;n<this.body.length;n++)a.push.apply(a,this.body[n]);this.xhr.send(a)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var s=0,n=0;n<this.body.length;n++)s+=this.body[n].length;for(var a=new this.body[0].constructor(s),l=0,n=0;n<this.body.length;n++)for(var f=this.body[n],o=0;o<f.length;o++)a[l++]=f[o];this.xhr.send(a)}else{for(var a="",n=0;n<this.body.length;n++)a+=this.body[n].toString();this.xhr.send(a)}},s.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],s.prototype.isSafeRequestHeader=function(e){return e?-1===l(s.unsafeHeaders,e.toLowerCase()):!1};var c=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}},{"./response":48,Base64:49,inherits:50,stream:69}],48:[function(e,t,n){function r(e){for(var t=e.getAllResponseHeaders().split(/\r?\n/),n={},r=0;r<t.length;r++){var i=t[r];if(""!==i){var o=i.match(/^([^:]+):\s*(.*)/);if(o){var a=o[1].toLowerCase(),s=o[2];void 0!==n[a]?c(n[a])?n[a].push(s):n[a]=[n[a],s]:n[a]=s}else n[i]=!0}}return n}var i=e("stream"),o=e("util"),a=t.exports=function(e){this.offset=0,this.readable=!0};o.inherits(a,i);var s={streaming:!0,status2:!0};a.prototype.getResponse=function(e){var t=String(e.responseType).toLowerCase();return"blob"===t?e.responseBlob||e.response:"arraybuffer"===t?e.response:e.responseText},a.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},a.prototype.handle=function(e){if(2===e.readyState&&s.status2){try{this.statusCode=e.status,this.headers=r(e)}catch(t){s.status2=!1}s.status2&&this.emit("ready")}else if(s.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=r(e),this.emit("ready"))}catch(t){}try{this._emitData(e)}catch(t){s.streaming=!1}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"))},a.prototype._emitData=function(e){var t=this.getResponse(e);return t.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(t,this.offset)),void(this.offset=t.byteLength)):void(t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length))};var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{stream:69,util:72}],49:[function(e,t,n){!function(){function e(e){this.message=e}var t="undefined"!=typeof n?n:this,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var n,i,o=0,a=r,s="";t.charAt(0|o)||(a="=",o%1);s+=a.charAt(63&n>>8-o%1*8)){if(i=t.charCodeAt(o+=.75),i>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|i}return s}),t.atob||(t.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,o=0,a=0,s="";i=t.charAt(a++);~i&&(n=o%4?64*n+i:i,o++%4)?s+=String.fromCharCode(255&n>>(-2*o&6)):0)i=r.indexOf(i);return s})}()},{}],50:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],51:[function(e,t,n){function r(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],52:[function(e,t,n){(function(e){!function(r){function i(e){throw RangeError(R[e])}function o(e,t){for(var n=e.length;n--;)e[n]=t(e[n]);return e}function a(e,t){return o(e.split(D),t).join(".")}function s(e){for(var t,n,r=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function c(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=L(e>>>10&1023|55296),e=56320|1023&e),t+=L(e)}).join("")}function u(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:C}function l(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function f(e,t,n){var r=0;for(e=n?$(e/A):e>>1,e+=$(e/t);e>j*E>>1;r+=C)e=$(e/j);return $(r+(j+1)*e/(e+T))}function d(e){var t,n,r,o,a,s,l,d,p,h,g=[],m=e.length,v=0,y=k,b=I;for(n=e.lastIndexOf(x),0>n&&(n=0),r=0;n>r;++r)e.charCodeAt(r)>=128&&i("not-basic"),g.push(e.charCodeAt(r));for(o=n>0?n+1:0;m>o;){for(a=v,s=1,l=C;o>=m&&i("invalid-input"),d=u(e.charCodeAt(o++)),(d>=C||d>$((S-v)/s))&&i("overflow"),v+=d*s,p=b>=l?_:l>=b+E?E:l-b,!(p>d);l+=C)h=C-p,s>$(S/h)&&i("overflow"),s*=h;t=g.length+1,b=f(v-a,t,0==a),$(v/t)>S-y&&i("overflow"),y+=$(v/t),v%=t,g.splice(v++,0,y)}return c(g)}function p(e){var t,n,r,o,a,c,u,d,p,h,g,m,v,y,b,w=[];for(e=s(e),m=e.length,t=k,n=0,a=I,c=0;m>c;++c)g=e[c],128>g&&w.push(L(g));for(r=o=w.length,o&&w.push(x);m>r;){for(u=S,c=0;m>c;++c)g=e[c],g>=t&&u>g&&(u=g);for(v=r+1,u-t>$((S-n)/v)&&i("overflow"),n+=(u-t)*v,t=u,c=0;m>c;++c)if(g=e[c],t>g&&++n>S&&i("overflow"),g==t){for(d=n,p=C;h=a>=p?_:p>=a+E?E:p-a,!(h>d);p+=C)b=d-h,y=C-h,w.push(L(l(h+b%y,0))),
d=$(b/y);w.push(L(l(d,0))),a=f(n,v,r==o),n=0,++r}++n,++t}return w.join("")}function h(e){return a(e,function(e){return B.test(e)?d(e.slice(4).toLowerCase()):e})}function g(e){return a(e,function(e){return N.test(e)?"xn--"+p(e):e})}var m="object"==typeof n&&n,v="object"==typeof t&&t&&t.exports==m&&t,y="object"==typeof e&&e;(y.global===y||y.window===y)&&(r=y);var b,w,S=2147483647,C=36,_=1,E=26,T=38,A=700,I=72,k=128,x="-",B=/^xn--/,N=/[^ -~]/,D=/\x2E|\u3002|\uFF0E|\uFF61/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=C-_,$=Math.floor,L=String.fromCharCode;if(b={version:"1.2.4",ucs2:{decode:s,encode:c},decode:d,encode:p,toASCII:g,toUnicode:h},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(m&&!m.nodeType)if(v)v.exports=b;else for(w in b)b.hasOwnProperty(w)&&(m[w]=b[w]);else r.punycode=b}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],53:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;u>l;++l){var f,d,p,h,g=e[l].replace(s,"%20"),m=g.indexOf(n);m>=0?(f=g.substr(0,m),d=g.substr(m+1)):(f=g,d=""),p=decodeURIComponent(f),h=decodeURIComponent(d),r(a,p)?i(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],54:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(i(a))+n;return o(e[a])?r(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],55:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":53,"./encode":54}],56:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":57}],57:[function(e,t,n){(function(n){function r(e){return this instanceof r?(c.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}t.exports=r;var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},s=e("core-util-is");s.inherits=e("inherits");var c=e("./_stream_readable"),u=e("./_stream_writable");s.inherits(r,c),o(a(u.prototype),function(e){r.prototype[e]||(r.prototype[e]=u.prototype[e])})}).call(this,e("sycGbZ"))},{"./_stream_readable":59,"./_stream_writable":61,"core-util-is":62,inherits:50,sycGbZ:51}],58:[function(e,t,n){function r(e){return this instanceof r?void i.call(this,e):new r(e)}t.exports=r;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":60,"core-util-is":62,inherits:50}],59:[function(e,t,n){(function(n){function r(t,n){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(k||(k=e("string_decoder/").StringDecoder),this.decoder=new k(t.encoding),this.encoding=t.encoding)}function i(e){return this instanceof i?(this._readableState=new r(e,this),this.readable=!0,void A.call(this)):new i(e)}function o(e,t,n,r,i){var o=u(t,n);if(o)e.emit("error",o);else if(null===n||void 0===n)t.reading=!1,t.ended||l(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else!t.decoder||i||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&f(e),p(e,t);else i||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){if(e>=x)e=x;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function c(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||null===e?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=s(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function u(e,t){var n=null;return E.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||n||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.length>0?f(e):w(e)}function f(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?n.nextTick(function(){d(e)}):d(e))}function d(e){e.emit("readable")}function p(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(function(){h(e,t)}))}function h(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&m(e)}}function m(e){function t(e,t,i){var o=e.write(n);!1===o&&r.awaitDrain++}var n,r=e._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=e.read());)if(1===r.pipesCount?t(r.pipes,0,null):S(r.pipes,t),e.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(T.listenerCount(e,"data")>0&&y(e))):void(r.ranOut=!0)}function v(){this._readableState.ranOut&&(this._readableState.ranOut=!1,m(this))}function y(e,t){var r=e._readableState;if(r.flowing)throw new Error("Cannot switch to old mode now.");var i=t||!1,o=!1;e.readable=!0,e.pipe=A.prototype.pipe,e.on=e.addListener=A.prototype.on,e.on("readable",function(){o=!0;for(var t;!i&&null!==(t=e.read());)e.emit("data",t);null===t&&(o=!1,e._readableState.needReadable=!0)}),e.pause=function(){i=!0,this.emit("pause")},e.resume=function(){i=!1,o?n.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function b(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,a=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(a)n=r.shift();else if(!e||e>=i)n=o?r.join(""):E.concat(r,i),r.length=0;else if(e<r[0].length){var s=r[0];n=s.slice(0,e),r[0]=s.slice(e)}else if(e===r[0].length)n=r.shift();else{n=o?"":new E(e);for(var c=0,u=0,l=r.length;l>u&&e>c;u++){var s=r[0],f=Math.min(e-c,s.length);o?n+=s.slice(0,f):s.copy(n,c,0,f),f<s.length?r[0]=s.slice(f):r.shift(),c+=f}}return n}function w(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,n.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function S(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function C(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}t.exports=i;var _=e("isarray"),E=e("buffer").Buffer;i.ReadableState=r;var T=e("events").EventEmitter;T.listenerCount||(T.listenerCount=function(e,t){return e.listeners(t).length});var A=e("stream"),I=e("core-util-is");I.inherits=e("inherits");var k;I.inherits(i,A),i.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new E(e,t),t="")),o(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(t){k||(k=e("string_decoder/").StringDecoder),this._readableState.decoder=new k(t),this._readableState.encoding=t};var x=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var r=t.needReadable;t.length-e<=t.highWaterMark&&(r=!0),(t.ended||t.reading)&&(r=!1),r&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=c(n,t));var i;return i=e>0?b(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&w(this),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function r(e){e===l&&o()}function i(){e.end()}function o(){e.removeListener("close",s),e.removeListener("finish",c),e.removeListener("drain",h),e.removeListener("error",a),e.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",o),(!e._writableState||e._writableState.needDrain)&&h()}function a(t){u(),e.removeListener("error",a),0===T.listenerCount(e,"error")&&e.emit("error",t)}function s(){e.removeListener("finish",c),u()}function c(){e.removeListener("close",s),u()}function u(){l.unpipe(e)}var l=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1;var d=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,p=d?i:o;f.endEmitted?n.nextTick(p):l.once("end",p),e.on("unpipe",r);var h=g(l);return e.on("drain",h),e._events&&e._events.error?_(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",s),e.once("finish",c),e.emit("pipe",l),f.flowing||(this.on("readable",v),f.flowing=!0,n.nextTick(function(){m(l)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=C(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var n=A.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||y(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&f(this,r):this.read(0))}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){y(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){y(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return S(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){n&&(n=!1,e.resume())},r},i._fromList=b}).call(this,e("sycGbZ"))},{buffer:29,"core-util-is":62,events:45,inherits:50,isarray:63,stream:69,"string_decoder/":64,sycGbZ:51}],60:[function(e,t,n){function r(e,t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e);var t=(this._transformState=new r(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=(e._readableState,e._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var s=e("./_stream_duplex"),c=e("core-util-is");c.inherits=e("inherits"),c.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":57,"core-util-is":62,inherits:50}],61:[function(e,t,n){(function(n){function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function i(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(t){var n=e("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new i(t,this),this.writable=!0,void C.call(this)):new o(t)}function a(e,t,r){var i=new Error("write after end");e.emit("error",i),n.nextTick(function(){r(i)})}function s(e,t,r,i){var o=!0;if(!w.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");e.emit("error",a),n.nextTick(function(){i(a)}),o=!1}return o}function c(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new w(t,n)),t}function u(e,t,n,i,o){n=c(t,n,i),w.isBuffer(n)&&(i="buffer");var a=t.objectMode?1:n.length;t.length+=a;var s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing?t.buffer.push(new r(n,i,o)):l(e,t,a,n,i,o),s}function l(e,t,n,r,i,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,e._write(r,i,t.onwrite),t.sync=!1}function f(e,t,r,i,o){r?n.nextTick(function(){o(i)}):o(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if(d(r),t)f(e,r,i,t,o);else{var a=v(e,r);a||r.bufferProcessing||!r.buffer.length||m(e,r),i?n.nextTick(function(){h(e,r,a,o)}):h(e,r,a,o)}}function h(e,t,n,r){n||g(e,t),r(),n&&y(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){t.bufferProcessing=!0;for(var n=0;n<t.buffer.length;n++){var r=t.buffer[n],i=r.chunk,o=r.encoding,a=r.callback,s=t.objectMode?1:i.length;if(l(e,t,s,i,o,a),t.writing){n++;break}}t.bufferProcessing=!1,n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}function v(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){var n=v(e,t);return n&&(t.finished=!0,e.emit("finish")),n}function b(e,t,r){t.ending=!0,y(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0}t.exports=o;var w=e("buffer").Buffer;o.WritableState=i;var S=e("core-util-is");S.inherits=e("inherits");var C=e("stream");S.inherits(o,C),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return"function"==typeof t&&(n=t,t=null),w.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=function(){}),r.ended?a(this,r,n):s(this,r,e,n)&&(i=u(this,r,e,t,n)),i},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),r.ending||r.finished||b(this,r,n)}}).call(this,e("sycGbZ"))},{"./_stream_duplex":57,buffer:29,"core-util-is":62,inherits:50,stream:69,sycGbZ:51}],62:[function(e,t,n){(function(e){function t(e){return Array.isArray(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function c(e){return"symbol"==typeof e}function u(e){return void 0===e}function l(e){return f(e)&&"[object RegExp]"===v(e)}function f(e){return"object"==typeof e&&null!==e}function d(e){return f(e)&&"[object Date]"===v(e)}function p(e){return f(e)&&("[object Error]"===v(e)||e instanceof Error)}function h(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(t){return e.isBuffer(t)}function v(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=a,n.isString=s,n.isSymbol=c,n.isUndefined=u,n.isRegExp=l,n.isObject=f,n.isDate=d,n.isError=p,n.isFunction=h,n.isPrimitive=g,n.isBuffer=m}).call(this,e("buffer").Buffer)},{buffer:29}],63:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],64:[function(e,t,n){function r(e){if(e&&!c(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){var t=this.charReceived=e.length%2;return this.charLength=t?2:0,t}function a(e){var t=this.charReceived=e.length%3;return this.charLength=t?3:0,t}var s=e("buffer").Buffer,c=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},u=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="",n=0;this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,n,r),this.charReceived+=r-n,n=r,this.charReceived<this.charLength)return"";t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,r==e.length)return t;e=e.slice(r,e.length);break}this.charLength+=this.surrogateSize,t=""}var o=this.detectIncompleteChar(e),a=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-o,a),this.charReceived=o,a-=o),t+=e.toString(this.encoding,0,a);var a=t.length-1,i=t.charCodeAt(a);if(i>=55296&&56319>=i){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),this.charBuffer.write(t.charAt(t.length-1),this.encoding),t.substring(0,a)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}return t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{buffer:29}],65:[function(e,t,n){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":58}],66:[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":57,"./lib/_stream_passthrough.js":58,"./lib/_stream_readable.js":59,"./lib/_stream_transform.js":60,"./lib/_stream_writable.js":61}],67:[function(e,t,n){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":60}],68:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":61}],69:[function(e,t,n){function r(){i.call(this)}t.exports=r;var i=e("events").EventEmitter,o=e("inherits");o(r,i),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function r(){u.readable&&u.resume&&u.resume()}function o(){l||(l=!0,e.end())}function a(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(c(),0===i.listenerCount(this,"error"))throw e}function c(){u.removeListener("data",n),e.removeListener("drain",r),u.removeListener("end",o),u.removeListener("close",a),u.removeListener("error",s),e.removeListener("error",s),u.removeListener("end",c),u.removeListener("close",c),e.removeListener("close",c)}var u=this;u.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(u.on("end",o),u.on("close",a));var l=!1;return u.on("error",s),e.on("error",s),u.on("end",c),u.on("close",c),e.on("close",c),e.emit("pipe",u),e}},{events:45,inherits:50,"readable-stream/duplex.js":56,"readable-stream/passthrough.js":65,"readable-stream/readable.js":66,"readable-stream/transform.js":67,"readable-stream/writable.js":68}],70:[function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&u(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return c(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}function c(e){return"string"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function f(e){return null==e}var d=e("punycode");n.parse=i,n.resolve=a,n.resolveObject=s,n.format=o,n.Url=r;var p=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","	"],m=["{","}","|","\\","^","`"].concat(g),v=["'"].concat(m),y=["%","/","?",";","#"].concat(v),b=["/","?","#"],w=255,S=/^[a-z0-9A-Z_-]{0,63}$/,C=/^([a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=e("querystring");r.prototype.parse=function(e,t,n){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e;r=r.trim();var i=p.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||i&&E[i]||(r=r.substr(2),this.slashes=!0)}if(!E[i]&&(a||i&&!T[i])){for(var s=-1,u=0;u<b.length;u++){var l=r.indexOf(b[u]);-1!==l&&(-1===s||s>l)&&(s=l)}var f,h;h=-1===s?r.lastIndexOf("@"):r.lastIndexOf("@",s),-1!==h&&(f=r.slice(0,h),r=r.slice(h+1),this.auth=decodeURIComponent(f)),s=-1;for(var u=0;u<y.length;u++){var l=r.indexOf(y[u]);-1!==l&&(-1===s||s>l)&&(s=l)}-1===s&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var m=this.hostname.split(/\./),u=0,I=m.length;I>u;u++){var k=m[u];if(k&&!k.match(S)){for(var x="",B=0,N=k.length;N>B;B++)x+=k.charCodeAt(B)>127?"x":k[B];if(!x.match(S)){var D=m.slice(0,u),R=m.slice(u+1),j=k.match(C);j&&(D.push(j[1]),R.unshift(j[2])),R.length&&(r="/"+R.join(".")+r),this.hostname=D.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var $=this.hostname.split("."),L=[],u=0;u<$.length;++u){var M=$[u];L.push(M.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(M):M)}this.hostname=L.join(".")}var O=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+O,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!_[o])for(var u=0,I=v.length;I>u;u++){var U=v[u],F=encodeURIComponent(U);F===U&&(F=escape(U)),r=r.split(U).join(F)}var V=r.indexOf("#");-1!==V&&(this.hash=r.substr(V),r=r.slice(0,V));var z=r.indexOf("?");if(-1!==z?(this.search=r.substr(z),this.query=r.substr(z+1),t&&(this.query=A.parse(this.query)),r=r.slice(0,z)):t&&(this.search="",this.query={}),r&&(this.pathname=r),T[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var O=this.pathname||"",M=this.search||"";this.path=O+M}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(o=A.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||T[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c(e)){var t=new r;t.parse(e,!1,!0),e=t}var n=new r;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),T[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!T[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||E[e.protocol])n.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var o=n.pathname||"",a=n.search||"";n.path=o+a}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),u=e.host||e.pathname&&"/"===e.pathname.charAt(0),d=u||s||n.host&&e.pathname,p=d,h=n.pathname&&n.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],g=n.protocol&&!T[n.protocol];if(g&&(n.hostname="",n.port=null,n.host&&(""===h[0]?h[0]=n.host:h.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),d=d&&(""===i[0]||""===h[0])),u)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,h=i;else if(i.length)h||(h=[]),h.pop(),h=h.concat(i),n.search=e.search,n.query=e.query;else if(!f(e.search)){if(g){n.hostname=n.host=h.shift();var m=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return n.search=e.search,n.query=e.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!h.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var v=h.slice(-1)[0],y=(n.host||e.host)&&("."===v||".."===v)||""===v,b=0,w=h.length;w>=0;w--)v=h[w],"."==v?h.splice(w,1):".."===v?(h.splice(w,1),b++):b&&(h.splice(w,1),b--);if(!d&&!p)for(;b--;b)h.unshift("..");!d||""===h[0]||h[0]&&"/"===h[0].charAt(0)||h.unshift(""),y&&"/"!==h.join("/").substr(-1)&&h.push("");var S=""===h[0]||h[0]&&"/"===h[0].charAt(0);if(g){n.hostname=n.host=S?"":h.length?h.shift():"";var m=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return d=d||n.host&&h.length,d&&!S&&h.unshift(""),h.length?n.pathname=h.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=h.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:52,querystring:55}],71:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],72:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),S(r.showHidden)&&(r.showHidden=!1),S(r.depth)&&(r.depth=2),S(r.colors)&&(r.colors=!1),S(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var o=u(e,t);if(o)return o;var a=Object.keys(t),g=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),T(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(t);if(0===a.length){if(A(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(C(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(T(t))return l(t)}var v="",y=!1,w=["{","}"];if(h(t)&&(y=!0,w=["[","]"]),A(t)){var S=t.name?": "+t.name:"";v=" [Function"+S+"]"}if(C(t)&&(v=" "+RegExp.prototype.toString.call(t)),
E(t)&&(v=" "+Date.prototype.toUTCString.call(t)),T(t)&&(v=" "+l(t)),0===a.length&&(!y||0==t.length))return w[0]+v+w[1];if(0>r)return C(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var _;return _=y?f(e,t,r,g,a):a.map(function(n){return d(e,t,r,g,n,y)}),e.seen.pop(),p(_,v,w)}function u(e,t){if(S(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var o=[],a=0,s=t.length;s>a;++a)N(t,String(a))?o.push(d(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))}),o}function d(e,t,n,r,i,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),N(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(n)?c(e,u.value,null):c(e,u.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),S(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function S(e){return void 0===e}function C(e){return _(e)&&"[object RegExp]"===k(e)}function _(e){return"object"==typeof e&&null!==e}function E(e){return _(e)&&"[object Date]"===k(e)}function T(e){return _(e)&&("[object Error]"===k(e)||e instanceof Error)}function A(e){return"function"==typeof e}function I(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function k(e){return Object.prototype.toString.call(e)}function x(e){return 10>e?"0"+e.toString(10):e.toString(10)}function B(){var e=new Date,t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":");return[e.getDate(),$[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(D,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];o>n;s=r[++n])a+=m(s)||!_(s)?" "+s:" "+i(s);return a},n.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(S(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var R,j={};n.debuglog=function(e){if(S(R)&&(R=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!j[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var r=t.pid;j[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else j[e]=function(){};return j[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=g,n.isNull=m,n.isNullOrUndefined=v,n.isNumber=y,n.isString=b,n.isSymbol=w,n.isUndefined=S,n.isRegExp=C,n.isObject=_,n.isDate=E,n.isError=T,n.isFunction=A,n.isPrimitive=I,n.isBuffer=e("./support/isBuffer");var $=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",B(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("sycGbZ"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":71,inherits:50,sycGbZ:51}]},{},[1])}(),_retrieveGlobal()}),System.registerDynamic("npm:moment@2.10.6/moment",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(e,r){"object"==typeof t&&"undefined"!=typeof n?n.exports=r():"function"==typeof define&&define.amd?define(r):e.moment=r()}(this,function(){"use strict";function t(){return Ln.apply(null,arguments)}function r(e){Ln=e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function a(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function u(e,t,n,r){return Be(e,t,n,r,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function f(e){return null==e._pf&&(e._pf=l()),e._pf}function d(e){if(null==e._isValid){var t=f(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function p(e){var t=u(NaN);return null!=e?c(f(t),e):f(t).userInvalidated=!0,t}function h(e,t){var n,r,i;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=f(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),On.length>0)for(n in On)r=On[n],i=t[r],"undefined"!=typeof i&&(e[r]=i);return e}function g(e){h(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),Pn===!1&&(Pn=!0,t.updateOffset(this),Pn=!1)}function m(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function v(e){return 0>e?Math.ceil(e):Math.floor(e)}function y(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=v(t)),n}function b(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&y(e[r])!==y(t[r]))&&a++;return a+o}function w(){}function S(e){return e?e.toLowerCase().replace("_","-"):e}function C(e){for(var t,n,r,i,o=0;o<e.length;){for(i=S(e[o]).split("-"),t=i.length,n=S(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=_(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&b(i,n,!0)>=t-1)break;t--}o++}return null}function _(t){var r=null;if(!Un[t]&&"undefined"!=typeof n&&n&&n.exports)try{r=Mn._abbr,e("./locale/"+t),E(r)}catch(i){}return Un[t]}function E(e,t){var n;return e&&(n="undefined"==typeof t?A(e):T(e,t),n&&(Mn=n)),Mn._abbr}function T(e,t){return null!==t?(t.abbr=e,Un[e]=Un[e]||new w,Un[e].set(t),E(e),Un[e]):(delete Un[e],null)}function A(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Mn;if(!i(e)){if(t=_(e))return t;e=[e]}return C(e)}function I(e,t){var n=e.toLowerCase();Fn[n]=Fn[n+"s"]=Fn[t]=e}function k(e){return"string"==typeof e?Fn[e]||Fn[e.toLowerCase()]:void 0}function x(e){var t,n,r={};for(n in e)s(e,n)&&(t=k(n),t&&(r[t]=e[n]));return r}function B(e,n){return function(r){return null!=r?(D(this,e,r),t.updateOffset(this,n),this):N(this,e)}}function N(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function D(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function R(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=k(e),"function"==typeof this[e])return this[e](t);return this}function j(e,t,n){var r=""+Math.abs(e),i=t-r.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function $(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(Hn[e]=i),t&&(Hn[t[0]]=function(){return j(i.apply(this,arguments),t[1],t[2])}),n&&(Hn[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function L(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function M(e){var t,n,r=e.match(Vn);for(t=0,n=r.length;n>t;t++)Hn[r[t]]?r[t]=Hn[r[t]]:r[t]=L(r[t]);return function(i){var o="";for(t=0;n>t;t++)o+=r[t]instanceof Function?r[t].call(i,e):r[t];return o}}function O(e,t){return e.isValid()?(t=P(t,e.localeData()),qn[t]=qn[t]||M(t),qn[t](e)):e.localeData().invalidDate()}function P(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(zn.lastIndex=0;r>=0&&zn.test(e);)e=e.replace(zn,n),zn.lastIndex=0,r-=1;return e}function U(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function F(e,t,n){ar[e]=U(t)?t:function(e){return e&&n?n:t}}function V(e,t){return s(ar,e)?ar[e](t._strict,t._locale):new RegExp(z(e))}function z(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function q(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(r=function(e,n){n[t]=y(e)}),n=0;n<e.length;n++)sr[e[n]]=r}function H(e,t){q(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function G(e,t,n){null!=t&&s(sr,e)&&sr[e](t,n._a,n,e)}function K(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function W(e){return this._months[e.month()]}function Y(e){return this._monthsShort[e.month()]}function X(e,t,n){var r,i,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(i=u([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function Z(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),K(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function Q(e){return null!=e?(Z(this,e),t.updateOffset(this,!0),this):N(this,"Month")}function J(){return K(this.year(),this.month())}function ee(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[ur]<0||n[ur]>11?ur:n[lr]<1||n[lr]>K(n[cr],n[ur])?lr:n[fr]<0||n[fr]>24||24===n[fr]&&(0!==n[dr]||0!==n[pr]||0!==n[hr])?fr:n[dr]<0||n[dr]>59?dr:n[pr]<0||n[pr]>59?pr:n[hr]<0||n[hr]>999?hr:-1,f(e)._overflowDayOfYear&&(cr>t||t>lr)&&(t=lr),f(e).overflow=t),e}function te(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function ne(e,t){var n=!0;return c(function(){return n&&(te(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function re(e,t){vr[e]||(te(t),vr[e]=!0)}function ie(e){var t,n,r=e._i,i=yr.exec(r);if(i){for(f(e).iso=!0,t=0,n=br.length;n>t;t++)if(br[t][1].exec(r)){e._f=br[t][0];break}for(t=0,n=wr.length;n>t;t++)if(wr[t][1].exec(r)){e._f+=(i[6]||" ")+wr[t][0];break}r.match(rr)&&(e._f+="Z"),_e(e)}else e._isValid=!1}function oe(e){var n=Sr.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(ie(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function ae(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return 1970>e&&s.setFullYear(e),s}function se(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ce(e){return ue(e)?366:365}function ue(e){return e%4===0&&e%100!==0||e%400===0}function le(){return ue(this.year())}function fe(e,t,n){var r,i=n-t,o=n-e.day();return o>i&&(o-=7),i-7>o&&(o+=7),r=Ne(e).add(o,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function de(e){return fe(e,this._week.dow,this._week.doy).week}function pe(){return this._week.dow}function he(){return this._week.doy}function ge(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function me(e){var t=fe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function ve(e,t,n,r,i){var o,a=6+i-r,s=se(e,0,1+a),c=s.getUTCDay();return i>c&&(c+=7),n=null!=n?1*n:i,o=1+a+7*(t-1)-c+n,{year:o>0?e:e-1,dayOfYear:o>0?o:ce(e-1)+o}}function ye(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function be(e,t,n){return null!=e?e:null!=t?t:n}function we(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Se(e){var t,n,r,i,o=[];if(!e._d){for(r=we(e),e._w&&null==e._a[lr]&&null==e._a[ur]&&Ce(e),e._dayOfYear&&(i=be(e._a[cr],r[cr]),e._dayOfYear>ce(i)&&(f(e)._overflowDayOfYear=!0),n=se(i,0,e._dayOfYear),e._a[ur]=n.getUTCMonth(),e._a[lr]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;7>t;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[fr]&&0===e._a[dr]&&0===e._a[pr]&&0===e._a[hr]&&(e._nextDay=!0,e._a[fr]=0),e._d=(e._useUTC?se:ae).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[fr]=24)}}function Ce(e){var t,n,r,i,o,a,s;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,a=4,n=be(t.GG,e._a[cr],fe(Ne(),1,4).year),r=be(t.W,1),i=be(t.E,1)):(o=e._locale._week.dow,a=e._locale._week.doy,n=be(t.gg,e._a[cr],fe(Ne(),o,a).year),r=be(t.w,1),null!=t.d?(i=t.d,o>i&&++r):i=null!=t.e?t.e+o:o),s=ve(n,r,i,a,o),e._a[cr]=s.year,e._dayOfYear=s.dayOfYear}function _e(e){if(e._f===t.ISO_8601)return void ie(e);e._a=[],f(e).empty=!0;var n,r,i,o,a,s=""+e._i,c=s.length,u=0;for(i=P(e._f,e._locale).match(Vn)||[],n=0;n<i.length;n++)o=i[n],r=(s.match(V(o,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&f(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),u+=r.length),Hn[o]?(r?f(e).empty=!1:f(e).unusedTokens.push(o),G(o,r,e)):e._strict&&!r&&f(e).unusedTokens.push(o);f(e).charsLeftOver=c-u,s.length>0&&f(e).unusedInput.push(s),f(e).bigHour===!0&&e._a[fr]<=12&&e._a[fr]>0&&(f(e).bigHour=void 0),e._a[fr]=Ee(e._locale,e._a[fr],e._meridiem),Se(e),ee(e)}function Ee(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function Te(e){var t,n,r,i,o;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=h({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],_e(t),d(t)&&(o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,(null==r||r>o)&&(r=o,n=t));c(e,n||t)}function Ae(e){if(!e._d){var t=x(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],Se(e)}}function Ie(e){var t=new g(ee(ke(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function ke(e){var t=e._i,n=e._f;return e._locale=e._locale||A(e._l),null===t||void 0===n&&""===t?p({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),m(t)?new g(ee(t)):(i(n)?Te(e):n?_e(e):o(t)?e._d=t:xe(e),e))}function xe(e){var n=e._i;void 0===n?e._d=new Date:o(n)?e._d=new Date(+n):"string"==typeof n?oe(e):i(n)?(e._a=a(n.slice(0),function(e){return parseInt(e,10)}),Se(e)):"object"==typeof n?Ae(e):"number"==typeof n?e._d=new Date(n):t.createFromInputFallback(e)}function Be(e,t,n,r,i){var o={};return"boolean"==typeof n&&(r=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=r,Ie(o)}function Ne(e,t,n,r){return Be(e,t,n,r,!1)}function De(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Ne();for(n=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](n))&&(n=t[r]);return n}function Re(){var e=[].slice.call(arguments,0);return De("isBefore",e)}function je(){var e=[].slice.call(arguments,0);return De("isAfter",e)}function $e(e){var t=x(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,c=t.minute||0,u=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*u+6e4*c+36e5*s,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=A(),this._bubble()}function Le(e){return e instanceof $e}function Me(e,t){$(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+j(~~(e/60),2)+t+j(~~e%60,2)})}function Oe(e){var t=(e||"").match(rr)||[],n=t[t.length-1]||[],r=(n+"").match(Ar)||["-",0,0],i=+(60*r[1])+y(r[2]);return"+"===r[0]?i:-i}function Pe(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(m(e)||o(e)?+e:+Ne(e))-+r,r._d.setTime(+r._d+i),t.updateOffset(r,!1),r):Ne(e).local()}function Ue(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Fe(e,n){var r,i=this._offset||0;return null!=e?("string"==typeof e&&(e=Oe(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&n&&(r=Ue(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==e&&(!n||this._changeInProgress?rt(this,Qe(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Ue(this)}function Ve(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function ze(e){return this.utcOffset(0,e)}function qe(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ue(this),"m")),this}function He(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Oe(this._i)),this}function Ge(e){return e=e?Ne(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Ke(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function We(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var e={};if(h(e,this),e=ke(e),e._a){var t=e._isUTC?u(e._a):Ne(e._a);this._isDSTShifted=this.isValid()&&b(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ye(){return!this._isUTC}function Xe(){return this._isUTC}function Ze(){return this._isUTC&&0===this._offset}function Qe(e,t){var n,r,i,o=e,a=null;return Le(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(a=Ir.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:y(a[lr])*n,h:y(a[fr])*n,m:y(a[dr])*n,s:y(a[pr])*n,ms:y(a[hr])*n}):(a=kr.exec(e))?(n="-"===a[1]?-1:1,o={y:Je(a[2],n),M:Je(a[3],n),d:Je(a[4],n),h:Je(a[5],n),m:Je(a[6],n),s:Je(a[7],n),w:Je(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=tt(Ne(o.from),Ne(o.to)),o={},o.ms=i.milliseconds,o.M=i.months),r=new $e(o),Le(e)&&s(e,"_locale")&&(r._locale=e._locale),r}function Je(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function et(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function tt(e,t){var n;return t=Pe(t,e),e.isBefore(t)?n=et(e,t):(n=et(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function nt(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(re(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=Qe(n,r),rt(this,i,e),this}}function rt(e,n,r,i){var o=n._milliseconds,a=n._days,s=n._months;i=null==i?!0:i,o&&e._d.setTime(+e._d+o*r),a&&D(e,"Date",N(e,"Date")+a*r),s&&Z(e,N(e,"Month")+s*r),i&&t.updateOffset(e,a||s)}function it(e,t){var n=e||Ne(),r=Pe(n,this).startOf("day"),i=this.diff(r,"days",!0),o=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(t&&t[o]||this.localeData().calendar(o,this,Ne(n)))}function ot(){return new g(this)}function at(e,t){var n;return t=k("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=m(e)?e:Ne(e),+this>+e):(n=m(e)?+e:+Ne(e),n<+this.clone().startOf(t))}function st(e,t){var n;return t=k("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=m(e)?e:Ne(e),+e>+this):(n=m(e)?+e:+Ne(e),+this.clone().endOf(t)<n)}function ct(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function ut(e,t){var n;return t=k(t||"millisecond"),"millisecond"===t?(e=m(e)?e:Ne(e),+this===+e):(n=+Ne(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function lt(e,t,n){var r,i,o=Pe(e,this),a=6e4*(o.utcOffset()-this.utcOffset());return t=k(t),"year"===t||"month"===t||"quarter"===t?(i=ft(this,o),"quarter"===t?i/=3:"year"===t&&(i/=12)):(r=this-o,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-a)/864e5:"week"===t?(r-a)/6048e5:r),n?i:v(i)}function ft(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return 0>t-o?(n=e.clone().add(i-1,"months"),r=(t-o)/(o-n)):(n=e.clone().add(i+1,"months"),r=(t-o)/(n-o)),-(i+r)}function dt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function pt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():O(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ht(e){var n=O(this,e||t.defaultFormat);return this.localeData().postformat(n)}function gt(e,t){return this.isValid()?Qe({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mt(e){return this.from(Ne(),e)}function vt(e,t){return this.isValid()?Qe({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function yt(e){return this.to(Ne(),e)}function bt(e){var t;return void 0===e?this._locale._abbr:(t=A(e),null!=t&&(this._locale=t),this)}function wt(){return this._locale}function St(e){switch(e=k(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function Ct(e){return e=k(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function _t(){return+this._d-6e4*(this._offset||0)}function Et(){return Math.floor(+this/1e3)}function Tt(){return this._offset?new Date(+this):this._d}function At(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function It(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function kt(){return d(this)}function xt(){return c({},f(this))}function Bt(){return f(this).overflow}function Nt(e,t){$(0,[e,e.length],0,t)}function Dt(e,t,n){return fe(Ne([e,11,31+t-n]),t,n).week}function Rt(e){var t=fe(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function jt(e){var t=fe(this,1,4).year;return null==e?t:this.add(e-t,"y")}function $t(){return Dt(this.year(),1,4)}function Lt(){var e=this.localeData()._week;return Dt(this.year(),e.dow,e.doy)}function Mt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Ot(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Pt(e){return this._weekdays[e.day()]}function Ut(e){return this._weekdaysShort[e.day()]}function Ft(e){return this._weekdaysMin[e.day()]}function Vt(e){var t,n,r;for(this._weekdaysParse=this._weekdaysParse||[],t=0;7>t;t++)if(this._weekdaysParse[t]||(n=Ne([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function zt(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ot(e,this.localeData()),this.add(e-t,"d")):t}function qt(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ht(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Gt(e,t){$(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Kt(e,t){return t._meridiemParse}function Wt(e){return"p"===(e+"").toLowerCase().charAt(0)}function Yt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Xt(e,t){t[hr]=y(1e3*("0."+e))}function Zt(){return this._isUTC?"UTC":""}function Qt(){return this._isUTC?"Coordinated Universal Time":""}function Jt(e){return Ne(1e3*e)}function en(){return Ne.apply(null,arguments).parseZone()}function tn(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.call(t,n):r}function nn(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function rn(){return this._invalidDate}function on(e){return this._ordinal.replace("%d",e)}function an(e){return e}function sn(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)}function cn(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function un(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ln(e,t,n,r){var i=A(),o=u().set(r,t);return i[n](o,e)}function fn(e,t,n,r,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return ln(e,t,n,i);var o,a=[];for(o=0;r>o;o++)a[o]=ln(e,o,n,i);return a}function dn(e,t){return fn(e,t,"months",12,"month")}function pn(e,t){return fn(e,t,"monthsShort",12,"month")}function hn(e,t){return fn(e,t,"weekdays",7,"day")}function gn(e,t){return fn(e,t,"weekdaysShort",7,"day")}function mn(e,t){return fn(e,t,"weekdaysMin",7,"day")}function vn(){var e=this._data;return this._milliseconds=Zr(this._milliseconds),this._days=Zr(this._days),this._months=Zr(this._months),e.milliseconds=Zr(e.milliseconds),e.seconds=Zr(e.seconds),e.minutes=Zr(e.minutes),e.hours=Zr(e.hours),e.months=Zr(e.months),e.years=Zr(e.years),this}function yn(e,t,n,r){var i=Qe(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function bn(e,t){return yn(this,e,t,1)}function wn(e,t){return yn(this,e,t,-1)}function Sn(e){return 0>e?Math.floor(e):Math.ceil(e)}function Cn(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,c=this._data;return o>=0&&a>=0&&s>=0||0>=o&&0>=a&&0>=s||(o+=864e5*Sn(En(s)+a),a=0,s=0),c.milliseconds=o%1e3,e=v(o/1e3),c.seconds=e%60,t=v(e/60),c.minutes=t%60,n=v(t/60),c.hours=n%24,a+=v(n/24),i=v(_n(a)),s+=i,a-=Sn(En(i)),r=v(s/12),s%=12,c.days=a,c.months=s,c.years=r,this}function _n(e){return 4800*e/146097}function En(e){return 146097*e/4800}function Tn(e){var t,n,r=this._milliseconds;if(e=k(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+_n(t),"month"===e?n:n/12;switch(t=this._days+Math.round(En(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function An(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)}function In(e){return function(){return this.as(e)}}function kn(e){return e=k(e),this[e+"s"]()}function xn(e){return function(){return this._data[e]}}function Bn(){return v(this.days()/7)}function Nn(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Dn(e,t,n){var r=Qe(e).abs(),i=pi(r.as("s")),o=pi(r.as("m")),a=pi(r.as("h")),s=pi(r.as("d")),c=pi(r.as("M")),u=pi(r.as("y")),l=i<hi.s&&["s",i]||1===o&&["m"]||o<hi.m&&["mm",o]||1===a&&["h"]||a<hi.h&&["hh",a]||1===s&&["d"]||s<hi.d&&["dd",s]||1===c&&["M"]||c<hi.M&&["MM",c]||1===u&&["y"]||["yy",u];return l[2]=t,l[3]=+e>0,l[4]=n,Nn.apply(null,l)}function Rn(e,t){return void 0===hi[e]?!1:void 0===t?hi[e]:(hi[e]=t,!0)}function jn(e){var t=this.localeData(),n=Dn(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function $n(){var e,t,n,r=gi(this._milliseconds)/1e3,i=gi(this._days),o=gi(this._months);e=v(r/60),t=v(e/60),r%=60,e%=60,n=v(o/12),o%=12;var a=n,s=o,c=i,u=t,l=e,f=r,d=this.asSeconds();return d?(0>d?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(c?c+"D":"")+(u||l||f?"T":"")+(u?u+"H":"")+(l?l+"M":"")+(f?f+"S":""):"P0D"}var Ln,Mn,On=t.momentProperties=[],Pn=!1,Un={},Fn={},Vn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,zn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,qn={},Hn={},Gn=/\d/,Kn=/\d\d/,Wn=/\d{3}/,Yn=/\d{4}/,Xn=/[+-]?\d{6}/,Zn=/\d\d?/,Qn=/\d{1,3}/,Jn=/\d{1,4}/,er=/[+-]?\d{1,6}/,tr=/\d+/,nr=/[+-]?\d+/,rr=/Z|[+-]\d\d:?\d\d/gi,ir=/[+-]?\d+(\.\d{1,3})?/,or=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ar={},sr={},cr=0,ur=1,lr=2,fr=3,dr=4,pr=5,hr=6;$("M",["MM",2],"Mo",function(){return this.month()+1}),$("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),$("MMMM",0,0,function(e){return this.localeData().months(this,e)}),I("month","M"),F("M",Zn),F("MM",Zn,Kn),F("MMM",or),F("MMMM",or),q(["M","MM"],function(e,t){t[ur]=y(e)-1}),q(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[ur]=i:f(n).invalidMonth=e});var gr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),mr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),vr={};t.suppressDeprecationWarnings=!1;var yr=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,br=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],wr=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Sr=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=ne("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),$(0,["YY",2],0,function(){return this.year()%100}),$(0,["YYYY",4],0,"year"),$(0,["YYYYY",5],0,"year"),$(0,["YYYYYY",6,!0],0,"year"),I("year","y"),F("Y",nr),F("YY",Zn,Kn),F("YYYY",Jn,Yn),F("YYYYY",er,Xn),F("YYYYYY",er,Xn),q(["YYYYY","YYYYYY"],cr),q("YYYY",function(e,n){n[cr]=2===e.length?t.parseTwoDigitYear(e):y(e)}),q("YY",function(e,n){n[cr]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(e){return y(e)+(y(e)>68?1900:2e3)};var Cr=B("FullYear",!1);$("w",["ww",2],"wo","week"),
$("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),F("w",Zn),F("ww",Zn,Kn),F("W",Zn),F("WW",Zn,Kn),H(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=y(e)});var _r={dow:0,doy:6};$("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),F("DDD",Qn),F("DDDD",Wn),q(["DDD","DDDD"],function(e,t,n){n._dayOfYear=y(e)}),t.ISO_8601=function(){};var Er=ne("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Ne.apply(null,arguments);return this>e?this:e}),Tr=ne("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Ne.apply(null,arguments);return e>this?this:e});Me("Z",":"),Me("ZZ",""),F("Z",rr),F("ZZ",rr),q(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Oe(e)});var Ar=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Ir=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,kr=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Qe.fn=$e.prototype;var xr=nt(1,"add"),Br=nt(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Nr=ne("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});$(0,["gg",2],0,function(){return this.weekYear()%100}),$(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Nt("gggg","weekYear"),Nt("ggggg","weekYear"),Nt("GGGG","isoWeekYear"),Nt("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),F("G",nr),F("g",nr),F("GG",Zn,Kn),F("gg",Zn,Kn),F("GGGG",Jn,Yn),F("gggg",Jn,Yn),F("GGGGG",er,Xn),F("ggggg",er,Xn),H(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=y(e)}),H(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),$("Q",0,0,"quarter"),I("quarter","Q"),F("Q",Gn),q("Q",function(e,t){t[ur]=3*(y(e)-1)}),$("D",["DD",2],"Do","date"),I("date","D"),F("D",Zn),F("DD",Zn,Kn),F("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),q(["D","DD"],lr),q("Do",function(e,t){t[lr]=y(e.match(Zn)[0],10)});var Dr=B("Date",!0);$("d",0,"do","day"),$("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),$("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),$("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),$("e",0,0,"weekday"),$("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),F("d",Zn),F("e",Zn),F("E",Zn),F("dd",or),F("ddd",or),F("dddd",or),H(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);null!=r?t.d=r:f(n).invalidWeekday=e}),H(["d","e","E"],function(e,t,n,r){t[r]=y(e)});var Rr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),jr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$r="Su_Mo_Tu_We_Th_Fr_Sa".split("_");$("H",["HH",2],0,"hour"),$("h",["hh",2],0,function(){return this.hours()%12||12}),Gt("a",!0),Gt("A",!1),I("hour","h"),F("a",Kt),F("A",Kt),F("H",Zn),F("h",Zn),F("HH",Zn,Kn),F("hh",Zn,Kn),q(["H","HH"],fr),q(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),q(["h","hh"],function(e,t,n){t[fr]=y(e),f(n).bigHour=!0});var Lr=/[ap]\.?m?\.?/i,Mr=B("Hours",!0);$("m",["mm",2],0,"minute"),I("minute","m"),F("m",Zn),F("mm",Zn,Kn),q(["m","mm"],dr);var Or=B("Minutes",!1);$("s",["ss",2],0,"second"),I("second","s"),F("s",Zn),F("ss",Zn,Kn),q(["s","ss"],pr);var Pr=B("Seconds",!1);$("S",0,0,function(){return~~(this.millisecond()/100)}),$(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),$(0,["SSS",3],0,"millisecond"),$(0,["SSSS",4],0,function(){return 10*this.millisecond()}),$(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),$(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),$(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),$(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),$(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),F("S",Qn,Gn),F("SS",Qn,Kn),F("SSS",Qn,Wn);var Ur;for(Ur="SSSS";Ur.length<=9;Ur+="S")F(Ur,tr);for(Ur="S";Ur.length<=9;Ur+="S")q(Ur,Xt);var Fr=B("Milliseconds",!1);$("z",0,0,"zoneAbbr"),$("zz",0,0,"zoneName");var Vr=g.prototype;Vr.add=xr,Vr.calendar=it,Vr.clone=ot,Vr.diff=lt,Vr.endOf=Ct,Vr.format=ht,Vr.from=gt,Vr.fromNow=mt,Vr.to=vt,Vr.toNow=yt,Vr.get=R,Vr.invalidAt=Bt,Vr.isAfter=at,Vr.isBefore=st,Vr.isBetween=ct,Vr.isSame=ut,Vr.isValid=kt,Vr.lang=Nr,Vr.locale=bt,Vr.localeData=wt,Vr.max=Tr,Vr.min=Er,Vr.parsingFlags=xt,Vr.set=R,Vr.startOf=St,Vr.subtract=Br,Vr.toArray=At,Vr.toObject=It,Vr.toDate=Tt,Vr.toISOString=pt,Vr.toJSON=pt,Vr.toString=dt,Vr.unix=Et,Vr.valueOf=_t,Vr.year=Cr,Vr.isLeapYear=le,Vr.weekYear=Rt,Vr.isoWeekYear=jt,Vr.quarter=Vr.quarters=Mt,Vr.month=Q,Vr.daysInMonth=J,Vr.week=Vr.weeks=ge,Vr.isoWeek=Vr.isoWeeks=me,Vr.weeksInYear=Lt,Vr.isoWeeksInYear=$t,Vr.date=Dr,Vr.day=Vr.days=zt,Vr.weekday=qt,Vr.isoWeekday=Ht,Vr.dayOfYear=ye,Vr.hour=Vr.hours=Mr,Vr.minute=Vr.minutes=Or,Vr.second=Vr.seconds=Pr,Vr.millisecond=Vr.milliseconds=Fr,Vr.utcOffset=Fe,Vr.utc=ze,Vr.local=qe,Vr.parseZone=He,Vr.hasAlignedHourOffset=Ge,Vr.isDST=Ke,Vr.isDSTShifted=We,Vr.isLocal=Ye,Vr.isUtcOffset=Xe,Vr.isUtc=Ze,Vr.isUTC=Ze,Vr.zoneAbbr=Zt,Vr.zoneName=Qt,Vr.dates=ne("dates accessor is deprecated. Use date instead.",Dr),Vr.months=ne("months accessor is deprecated. Use month instead",Q),Vr.years=ne("years accessor is deprecated. Use year instead",Cr),Vr.zone=ne("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ve);var zr=Vr,qr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Hr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Gr="Invalid date",Kr="%d",Wr=/\d{1,2}/,Yr={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Xr=w.prototype;Xr._calendar=qr,Xr.calendar=tn,Xr._longDateFormat=Hr,Xr.longDateFormat=nn,Xr._invalidDate=Gr,Xr.invalidDate=rn,Xr._ordinal=Kr,Xr.ordinal=on,Xr._ordinalParse=Wr,Xr.preparse=an,Xr.postformat=an,Xr._relativeTime=Yr,Xr.relativeTime=sn,Xr.pastFuture=cn,Xr.set=un,Xr.months=W,Xr._months=gr,Xr.monthsShort=Y,Xr._monthsShort=mr,Xr.monthsParse=X,Xr.week=de,Xr._week=_r,Xr.firstDayOfYear=he,Xr.firstDayOfWeek=pe,Xr.weekdays=Pt,Xr._weekdays=Rr,Xr.weekdaysMin=Ft,Xr._weekdaysMin=$r,Xr.weekdaysShort=Ut,Xr._weekdaysShort=jr,Xr.weekdaysParse=Vt,Xr.isPM=Wt,Xr._meridiemParse=Lr,Xr.meridiem=Yt,E("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),t.lang=ne("moment.lang is deprecated. Use moment.locale instead.",E),t.langData=ne("moment.langData is deprecated. Use moment.localeData instead.",A);var Zr=Math.abs,Qr=In("ms"),Jr=In("s"),ei=In("m"),ti=In("h"),ni=In("d"),ri=In("w"),ii=In("M"),oi=In("y"),ai=xn("milliseconds"),si=xn("seconds"),ci=xn("minutes"),ui=xn("hours"),li=xn("days"),fi=xn("months"),di=xn("years"),pi=Math.round,hi={s:45,m:45,h:22,d:26,M:11},gi=Math.abs,mi=$e.prototype;mi.abs=vn,mi.add=bn,mi.subtract=wn,mi.as=Tn,mi.asMilliseconds=Qr,mi.asSeconds=Jr,mi.asMinutes=ei,mi.asHours=ti,mi.asDays=ni,mi.asWeeks=ri,mi.asMonths=ii,mi.asYears=oi,mi.valueOf=An,mi._bubble=Cn,mi.get=kn,mi.milliseconds=ai,mi.seconds=si,mi.minutes=ci,mi.hours=ui,mi.days=li,mi.weeks=Bn,mi.months=fi,mi.years=di,mi.humanize=jn,mi.toISOString=$n,mi.toString=$n,mi.toJSON=$n,mi.locale=bt,mi.localeData=wt,mi.toIsoString=ne("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$n),mi.lang=Nr,$("X",0,0,"unix"),$("x",0,0,"valueOf"),F("x",nr),F("X",ir),q("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),q("x",function(e,t,n){n._d=new Date(y(e))}),t.version="2.10.6",r(Ne),t.fn=zr,t.min=Re,t.max=je,t.utc=u,t.unix=Jt,t.months=dn,t.isDate=o,t.locale=E,t.invalid=p,t.duration=Qe,t.isMoment=m,t.weekdays=hn,t.parseZone=en,t.localeData=A,t.isDuration=Le,t.monthsShort=pn,t.weekdaysMin=mn,t.defineLocale=T,t.weekdaysShort=gn,t.normalizeUnits=k,t.relativeTimeThreshold=Rn;var vi=t;return vi}),r.define=i,n.exports}),System.registerDynamic("npm:ng-cordova@0.1.17-alpha/dist/ng-cordova",["github:angular/bower-angular@1.4.5"],!1,function(e,t,n){var r=System.get("@@global-helpers").prepareGlobal(n.id,null,null);return function(){"format global";"deps angular";!function(){angular.module("ngCordova",["ngCordova.plugins"]),angular.module("ngCordova.plugins.actionSheet",[]).factory("$cordovaActionSheet",["$q","$window",function(e,t){return{show:function(n){var r=e.defer();return t.plugins.actionsheet.show(n,function(e){r.resolve(e)}),r.promise},hide:function(){return t.plugins.actionsheet.hide()}}}]),angular.module("ngCordova.plugins.adMob",[]).factory("$cordovaAdMob",["$q","$window",function(e,t){return{createBannerView:function(n){var r=e.defer();return t.plugins.AdMob.createBannerView(n,function(){r.resolve()},function(){r.reject()}),r.promise},createInterstitialView:function(n){var r=e.defer();return t.plugins.AdMob.createInterstitialView(n,function(){r.resolve()},function(){r.reject()}),r.promise},requestAd:function(n){var r=e.defer();return t.plugins.AdMob.requestAd(n,function(){r.resolve()},function(){r.reject()}),r.promise},showAd:function(n){var r=e.defer();return t.plugins.AdMob.showAd(n,function(){r.resolve()},function(){r.reject()}),r.promise},requestInterstitialAd:function(n){var r=e.defer();return t.plugins.AdMob.requestInterstitialAd(n,function(){r.resolve()},function(){r.reject()}),r.promise}}}]),angular.module("ngCordova.plugins.appAvailability",[]).factory("$cordovaAppAvailability",["$q",function(e){return{check:function(t){var n=e.defer();return appAvailability.check(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.appRate",[]).provider("$cordovaAppRate",[function(){this.setPreferences=function(e){e&&angular.isObject(e)&&(AppRate.preferences.useLanguage=e.language||null,AppRate.preferences.displayAppName=e.appName||"",AppRate.preferences.promptAgainForEachNewVersion=e.promptForNewVersion||!0,AppRate.preferences.openStoreInApp=e.openStoreInApp||!1,AppRate.preferences.usesUntilPrompt=e.usesUntilPrompt||3,AppRate.preferences.useCustomRateDialog=e.useCustomRateDialog||!1,AppRate.preferences.storeAppURL.ios=e.iosURL||null,AppRate.preferences.storeAppURL.android=e.androidURL||null,AppRate.preferences.storeAppURL.blackberry=e.blackberryURL||null,AppRate.preferences.storeAppURL.windows8=e.windowsURL||null)},this.setCustomLocale=function(e){var t={title:"Rate %@",message:"If you enjoy using %@, would you mind taking a moment to rate it? It wont take more than a minute. Thanks for your support!",cancelButtonLabel:"No, Thanks",laterButtonLabel:"Remind Me Later",rateButtonLabel:"Rate It Now"};t=angular.extend(t,e),AppRate.preferences.customLocale=t},this.$get=["$q",function(e){return{promptForRating:function(t){var n=e.defer(),r=AppRate.promptForRating(t);return n.resolve(r),n.promise},navigateToAppStore:function(){var t=e.defer(),n=AppRate.navigateToAppStore();return t.resolve(n),t.promise},onButtonClicked:function(e){AppRate.onButtonClicked=function(t){e.call(this,t)}},onRateDialogShow:function(e){AppRate.onRateDialogShow=e()}}}]}]),angular.module("ngCordova.plugins.appVersion",[]).factory("$cordovaAppVersion",["$q",function(e){return{getAppVersion:function(){var t=e.defer();return cordova.getAppVersion(function(e){t.resolve(e)}),t.promise}}}]),angular.module("ngCordova.plugins.backgroundGeolocation",[]).factory("$cordovaBackgroundGeolocation",["$q","$window",function(e,t){return{init:function(){t.navigator.geolocation.getCurrentPosition(function(e){return e})},configure:function(n){this.init();var r=e.defer();return t.plugins.backgroundGeoLocation.configure(function(e){r.notify(e),t.plugins.backgroundGeoLocation.finish()},function(e){r.reject(e)},n),this.start(),r.promise},start:function(){var n=e.defer();return t.plugins.backgroundGeoLocation.start(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},stop:function(){var n=e.defer();return t.plugins.backgroundGeoLocation.stop(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.badge",[]).factory("$cordovaBadge",["$q",function(e){return{hasPermission:function(){var t=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?t.resolve(!0):t.reject("You do not have permission")}),t.promise},promptForPermission:function(){return cordova.plugins.notification.badge.promptForPermission()},set:function(t){var n=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?n.resolve(cordova.plugins.notification.badge.set(t)):n.reject("You do not have permission to set Badge")}),n.promise},get:function(){var t=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?cordova.plugins.notification.badge.get(function(e){t.resolve(e)}):t.reject("You do not have permission to get Badge")}),t.promise},clear:function(){var t=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?t.resolve(cordova.plugins.notification.badge.clear()):t.reject("You do not have permission to clear Badge")}),t.promise},configure:function(e){return cordova.plugins.notification.badge.configure(e)}}}]),angular.module("ngCordova.plugins.barcodeScanner",[]).factory("$cordovaBarcodeScanner",["$q",function(e){return{scan:function(t){var n=e.defer();return cordova.plugins.barcodeScanner.scan(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},encode:function(t,n){var r=e.defer();return t=t||"TEXT_TYPE",cordova.plugins.barcodeScanner.encode(t,n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.batteryStatus",[]).factory("$cordovaBatteryStatus",["$rootScope","$window","$timeout",function(e,t,n){var r=function(t){n(function(){e.$broadcast("$cordovaBatteryStatus:status",t)})},i=function(t){n(function(){e.$broadcast("$cordovaBatteryStatus:critical",t)})},o=function(t){n(function(){e.$broadcast("$cordovaBatteryStatus:low",t)})};return document.addEventListener("deviceready",function(){navigator.battery&&(t.addEventListener("batterystatus",r,!1),t.addEventListener("batterycritical",i,!1),t.addEventListener("batterylow",o,!1))},!1),!0}]).run(["$cordovaBatteryStatus",function(e){}]),angular.module("ngCordova.plugins.ble",[]).factory("$cordovaBLE",["$q",function(e){return{scan:function(t,n){var r=e.defer();return ble.scan(t,n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},connect:function(t){var n=e.defer();return ble.connect(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},disconnect:function(t){var n=e.defer();return ble.disconnect(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},read:function(t,n,r){var i=e.defer();return ble.read(t,n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},write:function(t,n,r,i){var o=e.defer();return ble.write(t,n,r,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},writeCommand:function(t,n,r,i){var o=e.defer();return ble.writeCommand(t,n,r,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},startNotification:function(t,n,r){var i=e.defer();return ble.startNotification(t,n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},stopNotification:function(t,n,r){var i=e.defer();return ble.stopNotification(t,n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},isConnected:function(t){var n=e.defer();return ble.isConnected(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},isEnabled:function(){var t=e.defer();return ble.isEnabled(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.bluetoothSerial",[]).factory("$cordovaBluetoothSerial",["$q","$window",function(e,t){return{connect:function(n){var r=e.defer();return t.bluetoothSerial.connect(n,function(){r.resolve()},function(e){r.reject(e)}),r.promise},connectInsecure:function(n){var r=e.defer();return t.bluetoothSerial.connectInsecure(n,function(){r.resolve()},function(e){r.reject(e)}),r.promise},disconnect:function(){var n=e.defer();return t.bluetoothSerial.disconnect(function(){n.resolve()},function(e){n.reject(e)}),n.promise},list:function(){var n=e.defer();return t.bluetoothSerial.list(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},discoverUnpaired:function(){var n=e.defer();return t.bluetoothSerial.discoverUnpaired(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},setDeviceDiscoveredListener:function(){var n=e.defer();return t.bluetoothSerial.setDeviceDiscoveredListener(function(e){n.notify(e)}),n.promise},clearDeviceDiscoveredListener:function(){t.bluetoothSerial.clearDeviceDiscoveredListener()},showBluetoothSettings:function(){var n=e.defer();return t.bluetoothSerial.showBluetoothSettings(function(){n.resolve()},function(e){n.reject(e)}),n.promise},isEnabled:function(){var n=e.defer();return t.bluetoothSerial.isEnabled(function(){n.resolve()},function(){n.reject()}),n.promise},enable:function(){var n=e.defer();return t.bluetoothSerial.enable(function(){n.resolve()},function(){n.reject()}),n.promise},isConnected:function(){var n=e.defer();return t.bluetoothSerial.isConnected(function(){n.resolve()},function(){n.reject()}),n.promise},available:function(){var n=e.defer();return t.bluetoothSerial.available(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},read:function(){var n=e.defer();return t.bluetoothSerial.read(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},readUntil:function(n){var r=e.defer();return t.bluetoothSerial.readUntil(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},write:function(n){var r=e.defer();return t.bluetoothSerial.write(n,function(){r.resolve()},function(e){r.reject(e)}),r.promise},subscribe:function(n){var r=e.defer();return t.bluetoothSerial.subscribe(n,function(e){r.notify(e)},function(e){r.reject(e)}),r.promise},subscribeRawData:function(){var n=e.defer();return t.bluetoothSerial.subscribeRawData(function(e){n.notify(e)},function(e){n.reject(e)}),n.promise},unsubscribe:function(){var n=e.defer();return t.bluetoothSerial.unsubscribe(function(){n.resolve()},function(e){n.reject(e)}),n.promise},unsubscribeRawData:function(){var n=e.defer();return t.bluetoothSerial.unsubscribeRawData(function(){n.resolve()},function(e){n.reject(e)}),n.promise},clear:function(){var n=e.defer();return t.bluetoothSerial.clear(function(){n.resolve()},function(e){n.reject(e)}),n.promise},readRSSI:function(){var n=e.defer();return t.bluetoothSerial.readRSSI(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.brightness",[]).factory("$cordovaBrightness",["$q","$window",function(e,t){return{get:function(){var n=e.defer();return t.cordova.plugins.brightness.getBrightness(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},set:function(n){var r=e.defer();return t.cordova.plugins.brightness.setBrightness(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},setKeepScreenOn:function(n){var r=e.defer();return t.cordova.plugins.brightness.setKeepScreenOn(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.calendar",[]).factory("$cordovaCalendar",["$q","$window",function(e,t){return{createCalendar:function(n){var r=e.defer(),i=t.plugins.calendar.getCreateCalendarOptions();return"string"==typeof n?i.calendarName=n:i=angular.extend(i,n),t.plugins.calendar.createCalendar(i,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},deleteCalendar:function(n){var r=e.defer();return t.plugins.calendar.deleteCalendar(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEvent:function(n){var r=e.defer(),i={title:null,location:null,notes:null,startDate:null,endDate:null};return i=angular.extend(i,n),t.plugins.calendar.createEvent(i.title,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEventWithOptions:function(n){var r=e.defer(),i=[],o=window.plugins.calendar.getCalendarOptions(),a={title:null,location:null,notes:null,startDate:null,endDate:null};i=Object.keys(a);for(var s in n)-1===i.indexOf(s)?o[s]=n[s]:a[s]=n[s];return t.plugins.calendar.createEventWithOptions(a.title,a.location,a.notes,new Date(a.startDate),new Date(a.endDate),o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEventInteractively:function(n){var r=e.defer(),i={title:null,location:null,notes:null,startDate:null,endDate:null};return i=angular.extend(i,n),t.plugins.calendar.createEventInteractively(i.title,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEventInNamedCalendar:function(n){var r=e.defer(),i={title:null,location:null,notes:null,startDate:null,endDate:null,calendarName:null};return i=angular.extend(i,n),t.plugins.calendar.createEventInNamedCalendar(i.title,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),i.calendarName,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},findEvent:function(n){var r=e.defer(),i={title:null,location:null,notes:null,startDate:null,endDate:null};return i=angular.extend(i,n),t.plugins.calendar.findEvent(i.title,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},listEventsInRange:function(n,r){var i=e.defer();return t.plugins.calendar.listEventsInRange(n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},listCalendars:function(){var n=e.defer();return t.plugins.calendar.listCalendars(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},findAllEventsInNamedCalendar:function(n){var r=e.defer();return t.plugins.calendar.findAllEventsInNamedCalendar(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},modifyEvent:function(n){var r=e.defer(),i={title:null,location:null,notes:null,startDate:null,endDate:null,newTitle:null,newLocation:null,newNotes:null,newStartDate:null,newEndDate:null};return i=angular.extend(i,n),t.plugins.calendar.modifyEvent(i.title,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),i.newTitle,i.newLocation,i.newNotes,new Date(i.newStartDate),new Date(i.newEndDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},deleteEvent:function(n){var r=e.defer(),i={newTitle:null,location:null,notes:null,startDate:null,endDate:null};return i=angular.extend(i,n),t.plugins.calendar.deleteEvent(i.newTitle,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.camera",[]).factory("$cordovaCamera",["$q",function(e){return{getPicture:function(t){var n=e.defer();return navigator.camera?(navigator.camera.getPicture(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)},cleanup:function(){var t=e.defer();return navigator.camera.cleanup(function(){t.resolve()},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.capture",[]).factory("$cordovaCapture",["$q",function(e){return{captureAudio:function(t){var n=e.defer();return navigator.device.capture?(navigator.device.capture.captureAudio(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)},captureImage:function(t){var n=e.defer();return navigator.device.capture?(navigator.device.capture.captureImage(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)},captureVideo:function(t){var n=e.defer();return navigator.device.capture?(navigator.device.capture.captureVideo(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)}}}]),angular.module("ngCordova.plugins.clipboard",[]).factory("$cordovaClipboard",["$q","$window",function(e,t){return{copy:function(n){var r=e.defer();return t.cordova.plugins.clipboard.copy(n,function(){r.resolve()},function(){r.reject()}),r.promise},paste:function(){var n=e.defer();return t.cordova.plugins.clipboard.paste(function(e){n.resolve(e)},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.contacts",[]).factory("$cordovaContacts",["$q",function(e){return{save:function(t){var n=e.defer(),r=navigator.contacts.create(t);return r.save(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},remove:function(t){var n=e.defer(),r=navigator.contacts.create(t);return r.remove(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},clone:function(e){var t=navigator.contacts.create(e);return t.clone(e)},find:function(t){var n=e.defer(),r=t.fields||["id","displayName"];return delete t.fields,navigator.contacts.find(r,function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},pickContact:function(){var t=e.defer();return navigator.contacts.pickContact(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.datePicker",[]).factory("$cordovaDatePicker",["$window","$q",function(e,t){return{show:function(n){var r=t.defer();return n=n||{date:new Date,mode:"date"},e.datePicker.show(n,function(e){r.resolve(e)}),r.promise}}}]),angular.module("ngCordova.plugins.device",[]).factory("$cordovaDevice",[function(){return{getDevice:function(){return device},getCordova:function(){return device.cordova},getModel:function(){return device.model},getName:function(){return device.name},getPlatform:function(){return device.platform},getUUID:function(){return device.uuid},getVersion:function(){return device.version}}}]),angular.module("ngCordova.plugins.deviceMotion",[]).factory("$cordovaDeviceMotion",["$q",function(e){return{getCurrentAcceleration:function(){var t=e.defer();return navigator.accelerometer.getCurrentAcceleration(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},watchAcceleration:function(t){var n=e.defer(),r=navigator.accelerometer.watchAcceleration(function(e){n.notify(e)},function(e){n.reject(e)},t);return n.promise.cancel=function(){navigator.accelerometer.clearWatch(r)},n.promise.clearWatch=function(e){navigator.accelerometer.clearWatch(e||r)},n.promise.watchID=r,n.promise},clearWatch:function(e){return navigator.accelerometer.clearWatch(e)}}}]),angular.module("ngCordova.plugins.deviceOrientation",[]).factory("$cordovaDeviceOrientation",["$q",function(e){var t={frequency:3e3};return{getCurrentHeading:function(){var t=e.defer();return navigator.compass.getCurrentHeading(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},watchHeading:function(n){var r=e.defer(),i=angular.extend(t,n),o=navigator.compass.watchHeading(function(e){r.notify(e)},function(e){r.reject(e)},i);return r.promise.cancel=function(){navigator.compass.clearWatch(o)},r.promise.clearWatch=function(e){navigator.compass.clearWatch(e||o)},r.promise.watchID=o,r.promise},clearWatch:function(e){return navigator.compass.clearWatch(e)}}}]),angular.module("ngCordova.plugins.dialogs",[]).factory("$cordovaDialogs",["$q","$window",function(e,t){return{alert:function(n,r,i){var o=e.defer();return t.navigator.notification?navigator.notification.alert(n,function(){o.resolve()},r,i):(t.alert(n),o.resolve()),o.promise},confirm:function(n,r,i){var o=e.defer();return t.navigator.notification?navigator.notification.confirm(n,function(e){o.resolve(e)},r,i):t.confirm(n)?o.resolve(1):o.resolve(2),o.promise},prompt:function(n,r,i,o){var a=e.defer();if(t.navigator.notification)navigator.notification.prompt(n,function(e){a.resolve(e)},r,i,o);else{var s=t.prompt(n,o);null!==s?a.resolve({input1:s,buttonIndex:1}):a.resolve({input1:s,buttonIndex:2})}return a.promise},beep:function(e){return navigator.notification.beep(e)}}}]),angular.module("ngCordova.plugins.emailComposer",[]).factory("$cordovaEmailComposer",["$q",function(e){return{isAvailable:function(){var t=e.defer();return cordova.plugins.email.isAvailable(function(e){e?t.resolve():t.reject()}),t.promise},open:function(t){var n=e.defer();return cordova.plugins.email.open(t,function(){n.reject()}),n.promise},addAlias:function(e,t){cordova.plugins.email.addAlias(e,t)}}}]),angular.module("ngCordova.plugins.facebook",[]).provider("$cordovaFacebook",[function(){this.browserInit=function(e,t){this.appID=e,this.appVersion=t||"v2.0",facebookConnectPlugin.browserInit(this.appID,this.appVersion)},this.$get=["$q",function(e){return{login:function(t){var n=e.defer();return facebookConnectPlugin.login(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},showDialog:function(t){var n=e.defer();return facebookConnectPlugin.showDialog(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},api:function(t,n){var r=e.defer();return facebookConnectPlugin.api(t,n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},getAccessToken:function(){var t=e.defer();return facebookConnectPlugin.getAccessToken(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},getLoginStatus:function(){var t=e.defer();return facebookConnectPlugin.getLoginStatus(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},logout:function(){var t=e.defer();return facebookConnectPlugin.logout(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]}]),angular.module("ngCordova.plugins.facebookAds",[]).factory("$cordovaFacebookAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.FacebookAds.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.FacebookAds.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.FacebookAds.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.FacebookAds.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.FacebookAds.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.FacebookAds.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.FacebookAds.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.FacebookAds.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.file",[]).constant("$cordovaFileError",{1:"NOT_FOUND_ERR",2:"SECURITY_ERR",3:"ABORT_ERR",4:"NOT_READABLE_ERR",5:"ENCODING_ERR",6:"NO_MODIFICATION_ALLOWED_ERR",7:"INVALID_STATE_ERR",8:"SYNTAX_ERR",9:"INVALID_MODIFICATION_ERR",10:"QUOTA_EXCEEDED_ERR",11:"TYPE_MISMATCH_ERR",12:"PATH_EXISTS_ERR"}).provider("$cordovaFile",[function(){this.$get=["$q","$window","$cordovaFileError",function(e,t,n){return{getFreeDiskSpace:function(){var t=e.defer();return cordova.exec(function(e){t.resolve(e)},function(e){t.reject(e)},"File","getFreeDiskSpace",[]),t.promise},checkDir:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("directory cannot start with /");try{var a=r+i;t.resolveLocalFileSystemURL(a,function(e){e.isDirectory===!0?o.resolve(e):o.reject({code:13,message:"input is not a directory"})},function(e){e.message=n[e.code],o.reject(e)})}catch(s){s.message=n[s.code],o.reject(s)}return o.promise},checkFile:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("directory cannot start with /");try{var a=r+i;t.resolveLocalFileSystemURL(a,function(e){e.isFile===!0?o.resolve(e):o.reject({code:13,message:"input is not a file"})},function(e){e.message=n[e.code],o.reject(e)})}catch(s){s.message=n[s.code],
o.reject(s)}return o.promise},createDir:function(r,i,o){var a=e.defer();/^\//.test(i)&&a.reject("directory cannot start with /"),o=o?!1:!0;var s={create:!0,exclusive:o};try{t.resolveLocalFileSystemURL(r,function(e){e.getDirectory(i,s,function(e){a.resolve(e)},function(e){e.message=n[e.code],a.reject(e)})},function(e){e.message=n[e.code],a.reject(e)})}catch(c){c.message=n[c.code],a.reject(c)}return a.promise},createFile:function(r,i,o){var a=e.defer();/^\//.test(i)&&a.reject("file-name cannot start with /"),o=o?!1:!0;var s={create:!0,exclusive:o};try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,s,function(e){a.resolve(e)},function(e){e.message=n[e.code],a.reject(e)})},function(e){e.message=n[e.code],a.reject(e)})}catch(c){c.message=n[c.code],a.reject(c)}return a.promise},removeDir:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getDirectory(i,{create:!1},function(e){e.remove(function(){o.resolve({success:!0,fileRemoved:e})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},removeFile:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.remove(function(){o.resolve({success:!0,fileRemoved:e})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},removeRecursively:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getDirectory(i,{create:!1},function(e){e.removeRecursively(function(){o.resolve({success:!0,fileRemoved:e})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},writeFile:function(r,i,o,a){var s=e.defer();/^\//.test(i)&&s.reject("file-name cannot start with /"),a=a?!1:!0;var c={create:!0,exclusive:a};try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,c,function(e){e.createWriter(function(e){c.append===!0&&e.seek(e.length),c.truncate&&e.truncate(c.truncate),e.onwriteend=function(e){this.error?s.reject(this.error):s.resolve(e)},e.write(o),s.promise.abort=function(){e.abort()}})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})}catch(u){u.message=n[u.code],s.reject(u)}return s.promise},writeExistingFile:function(r,i,o){var a=e.defer();/^\//.test(i)&&a.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.createWriter(function(e){e.seek(e.length),e.onwriteend=function(e){this.error?a.reject(this.error):a.resolve(e)},e.write(o),a.promise.abort=function(){e.abort()}})},function(e){e.message=n[e.code],a.reject(e)})},function(e){e.message=n[e.code],a.reject(e)})}catch(s){s.message=n[s.code],a.reject(s)}return a.promise},readAsText:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?o.resolve(e.target.result):void 0!==e.target.error||null!==e.target.error?o.reject(e.target.error):o.reject({code:null,message:"READER_ONLOADEND_ERR"})},t.readAsText(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},readAsDataURL:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?o.resolve(e.target.result):void 0!==e.target.error||null!==e.target.error?o.reject(e.target.error):o.reject({code:null,message:"READER_ONLOADEND_ERR"})},t.readAsDataURL(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},readAsBinaryString:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?o.resolve(e.target.result):void 0!==e.target.error||null!==e.target.error?o.reject(e.target.error):o.reject({code:null,message:"READER_ONLOADEND_ERR"})},t.readAsBinaryString(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},readAsArrayBuffer:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?o.resolve(e.target.result):void 0!==e.target.error||null!==e.target.error?o.reject(e.target.error):o.reject({code:null,message:"READER_ONLOADEND_ERR"})},t.readAsArrayBuffer(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},moveFile:function(n,r,i,o){var a=e.defer();o=o||r,(/^\//.test(r)||/^\//.test(o))&&a.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(n,function(e){e.getFile(r,{create:!1},function(e){t.resolveLocalFileSystemURL(i,function(t){e.moveTo(t,o,function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})}catch(s){a.reject(s)}return a.promise},moveDir:function(n,r,i,o){var a=e.defer();o=o||r,(/^\//.test(r)||/^\//.test(o))&&a.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(n,function(e){e.getDirectory(r,{create:!1},function(e){t.resolveLocalFileSystemURL(i,function(t){e.moveTo(t,o,function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})}catch(s){a.reject(s)}return a.promise},copyDir:function(r,i,o,a){var s=e.defer();a=a||i,(/^\//.test(i)||/^\//.test(a))&&s.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getDirectory(i,{create:!1,exclusive:!1},function(e){t.resolveLocalFileSystemURL(o,function(t){e.copyTo(t,a,function(e){s.resolve(e)},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})}catch(c){c.message=n[c.code],s.reject(c)}return s.promise},copyFile:function(r,i,o,a){var s=e.defer();a=a||i,/^\//.test(i)&&s.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1,exclusive:!1},function(e){t.resolveLocalFileSystemURL(o,function(t){e.copyTo(t,a,function(e){s.resolve(e)},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})}catch(c){c.message=n[c.code],s.reject(c)}return s.promise}}}]}]),angular.module("ngCordova.plugins.fileOpener2",[]).factory("$cordovaFileOpener2",["$q",function(e){return{open:function(t,n){var r=e.defer();return cordova.plugins.fileOpener2.open(t,n,{error:function(e){r.reject(e)},success:function(){r.resolve()}}),r.promise},uninstall:function(t){var n=e.defer();return cordova.plugins.fileOpener2.uninstall(t,{error:function(e){n.reject(e)},success:function(){n.resolve()}}),n.promise},appIsInstalled:function(t){var n=e.defer();return cordova.plugins.fileOpener2.appIsInstalled(t,{success:function(e){n.resolve(e)}}),n.promise}}}]),angular.module("ngCordova.plugins.fileTransfer",[]).factory("$cordovaFileTransfer",["$q","$timeout",function(e,t){return{download:function(n,r,i,o){var a=e.defer(),s=new FileTransfer,c=i&&i.encodeURI===!1?n:encodeURI(n);return i&&void 0!==i.timeout&&null!==i.timeout&&(t(function(){s.abort()},i.timeout),i.timeout=null),s.onprogress=function(e){a.notify(e)},a.promise.abort=function(){s.abort()},s.download(c,r,a.resolve,a.reject,o,i),a.promise},upload:function(n,r,i,o){var a=e.defer(),s=new FileTransfer,c=i&&i.encodeURI===!1?n:encodeURI(n);return i&&void 0!==i.timeout&&null!==i.timeout&&(t(function(){s.abort()},i.timeout),i.timeout=null),s.onprogress=function(e){a.notify(e)},a.promise.abort=function(){s.abort()},s.upload(r,c,a.resolve,a.reject,i,o),a.promise}}}]),angular.module("ngCordova.plugins.flashlight",[]).factory("$cordovaFlashlight",["$q","$window",function(e,t){return{available:function(){var n=e.defer();return t.plugins.flashlight.available(function(e){n.resolve(e)}),n.promise},switchOn:function(){var n=e.defer();return t.plugins.flashlight.switchOn(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},switchOff:function(){var n=e.defer();return t.plugins.flashlight.switchOff(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},toggle:function(){var n=e.defer();return t.plugins.flashlight.toggle(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.flurryAds",[]).factory("$cordovaFlurryAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.FlurryAds.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.FlurryAds.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.FlurryAds.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.FlurryAds.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.FlurryAds.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.FlurryAds.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.FlurryAds.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.FlurryAds.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.ga",[]).factory("$cordovaGA",["$q","$window",function(e,t){return{init:function(n,r){var i=e.defer();return r=r>=0?r:10,t.plugins.gaPlugin.init(function(e){i.resolve(e)},function(e){i.reject(e)},n,r),i.promise},trackEvent:function(n,r,i,o,a,s){var c=e.defer();return t.plugins.gaPlugin.trackEvent(function(e){c.resolve(e)},function(e){c.reject(e)},i,o,a,s),c.promise},trackPage:function(n,r,i){var o=e.defer();return t.plugins.gaPlugin.trackPage(function(e){o.resolve(e)},function(e){o.reject(e)},i),o.promise},setVariable:function(n,r,i,o){var a=e.defer();return t.plugins.gaPlugin.setVariable(function(e){a.resolve(e)},function(e){a.reject(e)},i,o),a.promise},exit:function(n,r){var i=e.defer();return t.plugins.gaPlugin.exit(function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.geolocation",[]).factory("$cordovaGeolocation",["$q",function(e){return{getCurrentPosition:function(t){var n=e.defer();return navigator.geolocation.getCurrentPosition(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},watchPosition:function(t){var n=e.defer(),r=navigator.geolocation.watchPosition(function(e){n.notify(e)},function(e){n.reject(e)},t);return n.promise.cancel=function(){navigator.geolocation.clearWatch(r)},n.promise.clearWatch=function(e){navigator.geolocation.clearWatch(e||r)},n.promise.watchID=r,n.promise},clearWatch:function(e){return navigator.geolocation.clearWatch(e)}}}]),angular.module("ngCordova.plugins.globalization",[]).factory("$cordovaGlobalization",["$q",function(e){return{getPreferredLanguage:function(){var t=e.defer();return navigator.globalization.getPreferredLanguage(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},getLocaleName:function(){var t=e.defer();return navigator.globalization.getLocaleName(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},getFirstDayOfWeek:function(){var t=e.defer();return navigator.globalization.getFirstDayOfWeek(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},dateToString:function(t,n){var r=e.defer();return navigator.globalization.dateToString(t,function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise},stringToDate:function(t,n){var r=e.defer();return navigator.globalization.stringToDate(t,function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise},getDatePattern:function(t){var n=e.defer();return navigator.globalization.getDatePattern(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},getDateNames:function(t){var n=e.defer();return navigator.globalization.getDateNames(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},isDayLightSavingsTime:function(t){var n=e.defer();return navigator.globalization.isDayLightSavingsTime(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},numberToString:function(t,n){var r=e.defer();return navigator.globalization.numberToString(t,function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise},stringToNumber:function(t,n){var r=e.defer();return navigator.globalization.stringToNumber(t,function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise},getNumberPattern:function(t){var n=e.defer();return navigator.globalization.getNumberPattern(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},getCurrencyPattern:function(t){var n=e.defer();return navigator.globalization.getCurrencyPattern(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.googleAds",[]).factory("$cordovaGoogleAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.AdMob.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.AdMob.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.AdMob.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.AdMob.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.AdMob.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.AdMob.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.AdMob.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.AdMob.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.googleAnalytics",[]).factory("$cordovaGoogleAnalytics",["$q","$window",function(e,t){return{startTrackerWithId:function(n){var r=e.defer();return t.analytics.startTrackerWithId(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},setUserId:function(n){var r=e.defer();return t.analytics.setUserId(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},debugMode:function(){var n=e.defer();return t.analytics.debugMode(function(e){n.resolve(e)},function(){n.reject()}),n.promise},trackView:function(n){var r=e.defer();return t.analytics.trackView(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},addCustomDimension:function(n,r){var i=e.defer();return t.analytics.addCustomDimension(n,r,function(){i.resolve()},function(e){i.reject(e)}),i.promise},trackEvent:function(n,r,i,o){var a=e.defer();return t.analytics.trackEvent(n,r,i,o,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},trackException:function(n,r){var i=e.defer();return t.analytics.trackException(n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},trackTiming:function(n,r,i,o){var a=e.defer();return t.analytics.trackTiming(n,r,i,o,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},addTransaction:function(n,r,i,o,a,s){var c=e.defer();return t.analytics.addTransaction(n,r,i,o,a,s,function(e){c.resolve(e)},function(e){c.reject(e)}),c.promise},addTransactionItem:function(n,r,i,o,a,s,c){var u=e.defer();return t.analytics.addTransactionItem(n,r,i,o,a,s,c,function(e){u.resolve(e)},function(e){u.reject(e)}),u.promise}}}]),angular.module("ngCordova.plugins.googleMap",[]).factory("$cordovaGoogleMap",["$q","$window",function(e,t){var n=null;return{getMap:function(r){var i=e.defer();if(t.plugin.google.maps){var o=document.getElementById("map_canvas");n=t.plugin.google.maps.Map.getMap(r),n.setDiv(o),i.resolve(n)}else i.reject(null);return i.promise},isMapLoaded:function(){return!!n},addMarker:function(t){var r=e.defer();return n.addMarker(t,function(e){r.resolve(e)}),r.promise},getMapTypeIds:function(){return t.plugin.google.maps.mapTypeId},setVisible:function(t){var r=e.defer();return n.setVisible(t),r.promise},cleanup:function(){n=null}}}]),angular.module("ngCordova.plugins.googlePlayGame",[]).factory("$cordovaGooglePlayGame",["$q",function(e){return{auth:function(){var t=e.defer();return googleplaygame.auth(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},signout:function(){var t=e.defer();return googleplaygame.signout(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},isSignedIn:function(){var t=e.defer();return googleplaygame.isSignedIn(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},showPlayer:function(){var t=e.defer();return googleplaygame.showPlayer(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},submitScore:function(t){var n=e.defer();return googleplaygame.submitScore(t,function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},showAllLeaderboards:function(){var t=e.defer();return googleplaygame.showAllLeaderboards(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},showLeaderboard:function(t){var n=e.defer();return googleplaygame.showLeaderboard(t,function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},unlockAchievement:function(t){var n=e.defer();return googleplaygame.unlockAchievement(t,function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},incrementAchievement:function(t){var n=e.defer();return googleplaygame.incrementAchievement(t,function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},showAchievements:function(){var t=e.defer();return googleplaygame.showAchievements(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.googleplus",[]).factory("$cordovaGooglePlus",["$q","$window",function(e,t){return{login:function(n){var r=e.defer();return void 0===n&&(n={}),t.plugins.googleplus.login({iOSApiKey:n},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},silentLogin:function(n){var r=e.defer();return void 0===n&&(n={}),t.plugins.googleplus.trySilentLogin({iOSApiKey:n},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},logout:function(){var n=e.defer();t.plugins.googleplus.logout(function(e){n.resolve(e)})},disconnect:function(){var n=e.defer();t.plugins.googleplus.disconnect(function(e){n.resolve(e)})}}}]),angular.module("ngCordova.plugins.healthKit",[]).factory("$cordovaHealthKit",["$q","$window",function(e,t){return{isAvailable:function(){var n=e.defer();return t.plugins.healthkit.available(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},checkAuthStatus:function(n){var r=e.defer();return n=n||"HKQuantityTypeIdentifierHeight",t.plugins.healthkit.checkAuthStatus({type:n},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},requestAuthorization:function(n,r){var i=e.defer();return n=n||["HKCharacteristicTypeIdentifierDateOfBirth","HKQuantityTypeIdentifierActiveEnergyBurned","HKQuantityTypeIdentifierHeight"],r=r||["HKQuantityTypeIdentifierActiveEnergyBurned","HKQuantityTypeIdentifierHeight","HKQuantityTypeIdentifierDistanceCycling"],t.plugins.healthkit.requestAuthorization({readTypes:n,writeTypes:r},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},readDateOfBirth:function(){var n=e.defer();return t.plugins.healthkit.readDateOfBirth(function(e){n.resolve(e)},function(e){n.resolve(e)}),n.promise},readGender:function(){var n=e.defer();return t.plugins.healthkit.readGender(function(e){n.resolve(e)},function(e){n.resolve(e)}),n.promise},saveWeight:function(n,r,i){var o=e.defer();return t.plugins.healthkit.saveWeight({unit:r||"lb",amount:n,date:i||new Date},function(e){o.resolve(e)},function(e){o.resolve(e)}),o.promise},readWeight:function(n){var r=e.defer();return t.plugins.healthkit.readWeight({unit:n||"lb"},function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},saveHeight:function(n,r,i){var o=e.defer();return t.plugins.healthkit.saveHeight({unit:r||"in",amount:n,date:i||new Date},function(e){o.resolve(e)},function(e){o.resolve(e)}),o.promise},readHeight:function(n){var r=e.defer();return t.plugins.healthkit.readHeight({unit:n||"in"},function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},findWorkouts:function(){var n=e.defer();return t.plugins.healthkit.findWorkouts({},function(e){n.resolve(e)},function(e){n.resolve(e)}),n.promise},saveWorkout:function(n){var r=e.defer();return t.plugins.healthkit.saveWorkout(n,function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},querySampleType:function(n){var r=e.defer();return t.plugins.healthkit.querySampleType(n,function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise}}}]),angular.module("ngCordova.plugins.httpd",[]).factory("$cordovaHttpd",["$q",function(e){return{startServer:function(t){var n=e.defer();return cordova.plugins.CorHttpd.startServer(t,function(){n.resolve()},function(){n.reject()}),n.promise},stopServer:function(){var t=e.defer();return cordova.plugins.CorHttpd.stopServer(function(){t.resolve()},function(){t.reject()}),t.promise},getURL:function(){var t=e.defer();return cordova.plugins.CorHttpd.getURL(function(e){t.resolve(e)},function(){t.reject()}),t.promise},getLocalPath:function(){var t=e.defer();return cordova.plugins.CorHttpd.getLocalPath(function(e){t.resolve(e)},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.iAd",[]).factory("$cordovaiAd",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.iAd.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.iAd.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.iAd.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.iAd.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.iAd.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.iAd.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.iAd.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.iAd.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.imagePicker",[]).factory("$cordovaImagePicker",["$q","$window",function(e,t){return{getPictures:function(n){var r=e.defer();return t.imagePicker.getPictures(function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise}}}]),angular.module("ngCordova.plugins.inAppBrowser",[]).provider("$cordovaInAppBrowser",[function(){var e,t=this.defaultOptions={};this.setDefaultOptions=function(e){t=angular.extend(t,e)},this.$get=["$rootScope","$q","$window","$timeout",function(n,r,i,o){return{open:function(a,s,c){var u=r.defer();if(c&&!angular.isObject(c))return u.reject("options must be an object"),u.promise;var l=angular.extend({},t,c),f=[];angular.forEach(l,function(e,t){f.push(t+"="+e)});var d=f.join();return e=i.open(a,s,d),e.addEventListener("loadstart",function(e){o(function(){n.$broadcast("$cordovaInAppBrowser:loadstart",e)})},!1),e.addEventListener("loadstop",function(e){u.resolve(e),o(function(){n.$broadcast("$cordovaInAppBrowser:loadstop",e)})},!1),e.addEventListener("loaderror",function(e){u.reject(e),o(function(){n.$broadcast("$cordovaInAppBrowser:loaderror",e)})},!1),e.addEventListener("exit",function(e){o(function(){n.$broadcast("$cordovaInAppBrowser:exit",e)})},!1),u.promise},close:function(){e.close(),e=null},show:function(){e.show()},executeScript:function(t){var n=r.defer();return e.executeScript(t,function(e){n.resolve(e)}),n.promise},insertCSS:function(t){var n=r.defer();return e.insertCSS(t,function(e){n.resolve(e)}),n.promise}}}]}]),angular.module("ngCordova.plugins.insomnia",[]).factory("$cordovaInsomnia",["$window",function(e){return{keepAwake:function(){return e.plugins.insomnia.keepAwake()},allowSleepAgain:function(){return e.plugins.insomnia.allowSleepAgain()}}}]),angular.module("ngCordova.plugins.instagram",[]).factory("$cordovaInstagram",["$q",function(e){return{share:function(t){var n=e.defer();return window.Instagram?(Instagram.share(t.image,t.caption,function(e){e?n.reject(e):n.resolve(!0)}),n.promise):(console.error("Tried to call Instagram.share but the Instagram plugin isn't installed!"),n.resolve(null),n.promise)},isInstalled:function(){var t=e.defer();return window.Instagram?(Instagram.isInstalled(function(e,n){e?t.reject(e):t.resolve(n||!0)}),t.promise):(console.error("Tried to call Instagram.isInstalled but the Instagram plugin isn't installed!"),t.resolve(null),t.promise)}}}]),angular.module("ngCordova.plugins.keyboard",[]).factory("$cordovaKeyboard",["$rootScope","$timeout",function(e,t){var n=function(){e.$evalAsync(function(){e.$broadcast("$cordovaKeyboard:show")})},r=function(){e.$evalAsync(function(){e.$broadcast("$cordovaKeyboard:hide")})};return document.addEventListener("deviceready",function(){cordova.plugins.Keyboard&&(window.addEventListener("native.keyboardshow",n,!1),window.addEventListener("native.keyboardhide",r,!1))}),{hideAccessoryBar:function(e){return cordova.plugins.Keyboard.hideKeyboardAccessoryBar(e)},close:function(){return cordova.plugins.Keyboard.close()},show:function(){return cordova.plugins.Keyboard.show()},disableScroll:function(e){return cordova.plugins.Keyboard.disableScroll(e)},isVisible:function(){return cordova.plugins.Keyboard.isVisible},clearShowWatch:function(){document.removeEventListener("native.keyboardshow",n),e.$$listeners["$cordovaKeyboard:show"]=[]},clearHideWatch:function(){document.removeEventListener("native.keyboardhide",r),e.$$listeners["$cordovaKeyboard:hide"]=[]}}}]),angular.module("ngCordova.plugins.keychain",[]).factory("$cordovaKeychain",["$q",function(e){return{getForKey:function(t,n){var r=e.defer(),i=new Keychain;return i.getForKey(r.resolve,r.reject,t,n),r.promise},setForKey:function(t,n,r){var i=e.defer(),o=new Keychain;return o.setForKey(i.resolve,i.reject,t,n,r),i.promise},removeForKey:function(t,n){var r=e.defer(),i=new Keychain;return i.removeForKey(r.resolve,r.reject,t,n),r.promise}}}]),angular.module("ngCordova.plugins.localNotification",[]).factory("$cordovaLocalNotification",["$q","$window","$rootScope","$timeout",function(e,t,n,r){return document.addEventListener("deviceready",function(){t.cordova&&t.cordova.plugins&&t.cordova.plugins.notification&&t.cordova.plugins.notification.local&&(t.cordova.plugins.notification.local.on("schedule",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:schedule",e,t)})}),t.cordova.plugins.notification.local.on("trigger",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:trigger",e,t)})}),t.cordova.plugins.notification.local.on("update",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:update",e,t)})}),t.cordova.plugins.notification.local.on("clear",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:clear",e,t)})}),t.cordova.plugins.notification.local.on("clearall",function(e){r(function(){n.$broadcast("$cordovaLocalNotification:clearall",e)})}),t.cordova.plugins.notification.local.on("cancel",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:cancel",e,t)})}),t.cordova.plugins.notification.local.on("cancelall",function(e){r(function(){n.$broadcast("$cordovaLocalNotification:cancelall",e)})}),t.cordova.plugins.notification.local.on("click",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:click",e,t)})}))},!1),{schedule:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.schedule(n,function(e){i.resolve(e)},r),i.promise},add:function(n,r){console.warn('Deprecated: use "schedule" instead.');var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.schedule(n,function(e){i.resolve(e)},r),i.promise},update:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.update(n,function(e){i.resolve(e)},r),i.promise},clear:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.clear(n,function(e){i.resolve(e)},r),i.promise},clearAll:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.clearAll(function(e){r.resolve(e)},n),r.promise},cancel:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.cancel(n,function(e){i.resolve(e)},r),i.promise},cancelAll:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.cancelAll(function(e){r.resolve(e)},n),r.promise},isPresent:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.isPresent(n,function(e){i.resolve(e)},r),i.promise},isScheduled:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.isScheduled(n,function(e){i.resolve(e)},r),i.promise},isTriggered:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.isTriggered(n,function(e){i.resolve(e)},r),i.promise},hasPermission:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.hasPermission(function(e){e?r.resolve(e):r.reject(e)},n),r.promise},registerPermission:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.registerPermission(function(e){e?r.resolve(e):r.reject(e)},n),r.promise},promptForPermission:function(n){console.warn('Deprecated: use "registerPermission" instead.');var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.registerPermission(function(e){e?r.resolve(e):r.reject(e)},n),r.promise},getAllIds:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getAllIds(function(e){r.resolve(e)},n),r.promise},getIds:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getIds(function(e){r.resolve(e)},n),r.promise},getScheduledIds:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getScheduledIds(function(e){r.resolve(e)},n),r.promise},getTriggeredIds:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getTriggeredIds(function(e){
r.resolve(e)},n),r.promise},get:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.get(n,function(e){i.resolve(e)},r),i.promise},getAll:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getAll(function(e){r.resolve(e)},n),r.promise},getScheduled:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.getScheduled(n,function(e){i.resolve(e)},r),i.promise},getAllScheduled:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getAllScheduled(function(e){r.resolve(e)},n),r.promise},getTriggered:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.getTriggered(n,function(e){i.resolve(e)},r),i.promise},getAllTriggered:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getAllTriggered(function(e){r.resolve(e)},n),r.promise},getDefaults:function(){return t.cordova.plugins.notification.local.getDefaults()},setDefaults:function(e){t.cordova.plugins.notification.local.setDefaults(e)}}}]),angular.module("ngCordova.plugins.mMediaAds",[]).factory("$cordovaMMediaAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.mMedia.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.mMedia.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.mMedia.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.mMedia.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.mMedia.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.mMedia.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.mMedia.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.mMedia.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.media",[]).factory("$cordovaMedia",["$q",function(e){return{newMedia:function(t){var n,r=e.defer(),i=null;return n=new Media(t,function(e){r.resolve(e)},function(e){r.reject(e)},function(e){i=e}),r.promise.getCurrentPosition=function(){n.getCurrentPosition(function(e){},function(e){})},r.promise.getDuration=function(){n.getDuration()},r.promise.play=function(e){"object"!=typeof e&&(e={}),n.play(e)},r.promise.pause=function(){n.pause()},r.promise.stop=function(){n.stop()},r.promise.release=function(){n.release()},r.promise.seekTo=function(e){n.seekTo(e)},r.promise.setVolume=function(e){n.setVolume(e)},r.promise.startRecord=function(){n.startRecord()},r.promise.stopRecord=function(){n.stopRecord()},r.promise.media=n,r.promise}}}]),angular.module("ngCordova.plugins.mobfoxAds",[]).factory("$cordovaMobFoxAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.MobFox.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.MobFox.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.MobFox.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.MobFox.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.MobFox.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.MobFox.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.MobFox.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.MobFox.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins",["ngCordova.plugins.actionSheet","ngCordova.plugins.adMob","ngCordova.plugins.appAvailability","ngCordova.plugins.appRate","ngCordova.plugins.appVersion","ngCordova.plugins.backgroundGeolocation","ngCordova.plugins.badge","ngCordova.plugins.barcodeScanner","ngCordova.plugins.batteryStatus","ngCordova.plugins.ble","ngCordova.plugins.bluetoothSerial","ngCordova.plugins.brightness","ngCordova.plugins.calendar","ngCordova.plugins.camera","ngCordova.plugins.capture","ngCordova.plugins.clipboard","ngCordova.plugins.contacts","ngCordova.plugins.datePicker","ngCordova.plugins.device","ngCordova.plugins.deviceMotion","ngCordova.plugins.deviceOrientation","ngCordova.plugins.dialogs","ngCordova.plugins.emailComposer","ngCordova.plugins.facebook","ngCordova.plugins.facebookAds","ngCordova.plugins.file","ngCordova.plugins.fileTransfer","ngCordova.plugins.fileOpener2","ngCordova.plugins.flashlight","ngCordova.plugins.flurryAds","ngCordova.plugins.ga","ngCordova.plugins.geolocation","ngCordova.plugins.globalization","ngCordova.plugins.googleAds","ngCordova.plugins.googleAnalytics","ngCordova.plugins.googleMap","ngCordova.plugins.googlePlayGame","ngCordova.plugins.healthKit","ngCordova.plugins.httpd","ngCordova.plugins.iAd","ngCordova.plugins.imagePicker","ngCordova.plugins.inAppBrowser","ngCordova.plugins.keyboard","ngCordova.plugins.keychain","ngCordova.plugins.localNotification","ngCordova.plugins.media","ngCordova.plugins.mMediaAds","ngCordova.plugins.mobfoxAds","ngCordova.plugins.mopubAds","ngCordova.plugins.nativeAudio","ngCordova.plugins.network","ngCordova.plugins.oauth","ngCordova.plugins.oauthUtility","ngCordova.plugins.pinDialog","ngCordova.plugins.prefs","ngCordova.plugins.printer","ngCordova.plugins.progressIndicator","ngCordova.plugins.push","ngCordova.plugins.sms","ngCordova.plugins.socialSharing","ngCordova.plugins.spinnerDialog","ngCordova.plugins.splashscreen","ngCordova.plugins.sqlite","ngCordova.plugins.statusbar","ngCordova.plugins.toast","ngCordova.plugins.touchid","ngCordova.plugins.vibration","ngCordova.plugins.videoCapturePlus","ngCordova.plugins.zip","ngCordova.plugins.insomnia"]),angular.module("ngCordova.plugins.mopubAds",[]).factory("$cordovaMoPubAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.MoPub.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.MoPub.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.MoPub.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.MoPub.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.MoPub.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.MoPub.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.MoPub.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.MoPub.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.nativeAudio",[]).factory("$cordovaNativeAudio",["$q","$window",function(e,t){return{preloadSimple:function(n,r){var i=e.defer();return t.plugins.NativeAudio.preloadSimple(n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},preloadComplex:function(n,r,i,o){var a=e.defer();return t.plugins.NativeAudio.preloadComplex(n,r,i,o,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},play:function(n,r){var i=e.defer();return t.plugins.NativeAudio.play(n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},stop:function(n){var r=e.defer();return t.plugins.NativeAudio.stop(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},loop:function(n){var r=e.defer();return t.plugins.NativeAudio.loop(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},unload:function(n){var r=e.defer();return t.plugins.NativeAudio.unload(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},setVolumeForComplexAsset:function(n,r){var i=e.defer();return t.plugins.NativeAudio.setVolumeForComplexAsset(n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.network",[]).factory("$cordovaNetwork",["$rootScope","$timeout",function(e,t){var n=function(){var n=navigator.connection.type;t(function(){e.$broadcast("$cordovaNetwork:offline",n)})},r=function(){var n=navigator.connection.type;t(function(){e.$broadcast("$cordovaNetwork:online",n)})};return document.addEventListener("deviceready",function(){navigator.connection&&(document.addEventListener("offline",n,!1),document.addEventListener("online",r,!1))}),{getNetwork:function(){return navigator.connection.type},isOnline:function(){var e=navigator.connection.type;return e!==Connection.UNKNOWN&&e!==Connection.NONE},isOffline:function(){var e=navigator.connection.type;return e===Connection.UNKNOWN||e===Connection.NONE},clearOfflineWatch:function(){document.removeEventListener("offline",n),e.$$listeners["$cordovaNetwork:offline"]=[]},clearOnlineWatch:function(){document.removeEventListener("online",n),e.$$listeners["$cordovaNetwork:online"]=[]}}}]).run(["$cordovaNetwork",function(e){}]),angular.module("ngCordova.plugins.oauth",["ngCordova.plugins.oauthUtility"]).factory("$cordovaOauth",["$q","$http","$cordovaOauthUtility",function(e,t,n){return{adfs:function(n,r,i){var o=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var s=window.open(r+"/adfs/oauth2/authorize?response_type=code&client_id="+n+"&redirect_uri=http://localhost/callback&resource="+i,"_blank","location=no");s.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){var i=e.url.split("code=")[1];t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:r+"/adfs/oauth2/token",data:"client_id="+n+"&code="+i+"&redirect_uri=http://localhost/callback&grant_type=authorization_code"}).success(function(e){o.resolve(e)}).error(function(e,t){o.reject("Problem authenticating")})["finally"](function(){setTimeout(function(){s.close()},10)})}}),s.addEventListener("exit",function(e){o.reject("The sign in flow was canceled")})}else o.reject("Could not find InAppBrowser plugin")}else o.reject("Cannot authenticate via a web browser");return o.promise},dropbox:function(t){var n=e.defer();if(window.cordova){var r=cordova.require("cordova/plugin_list").metadata;if(r.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var i=window.open("https://www.dropbox.com/1/oauth2/authorize?client_id="+t+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],r=t.split("&"),o=[],a=0;a<r.length;a++)o[r[a].split("=")[0]]=r[a].split("=")[1];void 0!==o.access_token&&null!==o.access_token?n.resolve({access_token:o.access_token,token_type:o.token_type,uid:o.uid}):n.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(e){n.reject("The sign in flow was canceled")})}else n.reject("Could not find InAppBrowser plugin")}else n.reject("Cannot authenticate via a web browser");return n.promise},digitalOcean:function(n,r){var i=e.defer();if(window.cordova){var o=cordova.require("cordova/plugin_list").metadata;if(o.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var a=window.open("https://cloud.digitalocean.com/v1/oauth/authorize?client_id="+n+"&redirect_uri=http://localhost/callback&response_type=code&scope=read%20write","_blank","location=no,clearsessioncache=yes,clearcache=yes");a.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){var o=e.url.split("code=")[1];t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:"https://cloud.digitalocean.com/v1/oauth/token",data:"client_id="+n+"&client_secret="+r+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+o}).success(function(e){i.resolve(e)}).error(function(e,t){i.reject("Problem authenticating")})["finally"](function(){setTimeout(function(){a.close()},10)})}}),a.addEventListener("exit",function(e){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin")}else i.reject("Cannot authenticate via a web browser");return i.promise},google:function(t,n){var r=e.defer();if(window.cordova){var i=cordova.require("cordova/plugin_list").metadata;if(i.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var o=window.open("https://accounts.google.com/o/oauth2/auth?client_id="+t+"&redirect_uri=http://localhost/callback&scope="+n.join(" ")+"&approval_prompt=force&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");o.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],n=t.split("&"),i=[],a=0;a<n.length;a++)i[n[a].split("=")[0]]=n[a].split("=")[1];void 0!==i.access_token&&null!==i.access_token?r.resolve({access_token:i.access_token,token_type:i.token_type,expires_in:i.expires_in}):r.reject("Problem authenticating"),setTimeout(function(){o.close()},10)}}),o.addEventListener("exit",function(e){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},github:function(n,r,i){var o=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var s=window.open("https://github.com/login/oauth/authorize?client_id="+n+"&redirect_uri=http://localhost/callback&scope="+i.join(","),"_blank","location=no,clearsessioncache=yes,clearcache=yes");s.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t.defaults.headers.post.accept="application/json",t({method:"post",url:"https://github.com/login/oauth/access_token",data:"client_id="+n+"&client_secret="+r+"&redirect_uri=http://localhost/callback&code="+requestToken}).success(function(e){o.resolve(e)}).error(function(e,t){o.reject("Problem authenticating")})["finally"](function(){setTimeout(function(){s.close()},10)}))}),s.addEventListener("exit",function(e){o.reject("The sign in flow was canceled")})}else o.reject("Could not find InAppBrowser plugin")}else o.reject("Cannot authenticate via a web browser");return o.promise},facebook:function(t,n){var r=e.defer();if(window.cordova){var i=cordova.require("cordova/plugin_list").metadata;if(i.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var o=window.open("https://www.facebook.com/dialog/oauth?client_id="+t+"&redirect_uri=http://localhost/callback&response_type=token&scope="+n.join(","),"_blank","location=no,clearsessioncache=yes,clearcache=yes");o.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],n=t.split("&"),i=[],a=0;a<n.length;a++)i[n[a].split("=")[0]]=n[a].split("=")[1];void 0!==i.access_token&&null!==i.access_token?r.resolve({access_token:i.access_token,expires_in:i.expires_in}):r.reject("Problem authenticating"),setTimeout(function(){o.close()},10)}}),o.addEventListener("exit",function(e){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},linkedin:function(n,r,i,o){var a=e.defer();if(window.cordova){var s=cordova.require("cordova/plugin_list").metadata;if(s.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var c=window.open("https://www.linkedin.com/uas/oauth2/authorization?client_id="+n+"&redirect_uri=http://localhost/callback&scope="+i.join(" ")+"&response_type=code&state="+o,"_blank","location=no,clearsessioncache=yes,clearcache=yes");c.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:"https://www.linkedin.com/uas/oauth2/accessToken",data:"client_id="+n+"&client_secret="+r+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){a.resolve(e)}).error(function(e,t){a.reject("Problem authenticating")})["finally"](function(){setTimeout(function(){c.close()},10)}))}),c.addEventListener("exit",function(e){a.reject("The sign in flow was canceled")})}else a.reject("Could not find InAppBrowser plugin")}else a.reject("Cannot authenticate via a web browser");return a.promise},instagram:function(t,n){var r=e.defer();if(window.cordova){var i=cordova.require("cordova/plugin_list").metadata;if(i.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var o=window.open("https://api.instagram.com/oauth/authorize/?client_id="+t+"&redirect_uri=http://localhost/callback&scope="+n.join(" ")+"&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");o.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],n=t.split("&"),i=[],a=0;a<n.length;a++)i[n[a].split("=")[0]]=n[a].split("=")[1];void 0!==i.access_token&&null!==i.access_token?r.resolve({access_token:i.access_token}):r.reject("Problem authenticating"),setTimeout(function(){o.close()},10)}}),o.addEventListener("exit",function(e){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},box:function(n,r,i){var o=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var s=window.open("https://app.box.com/api/oauth2/authorize/?client_id="+n+"&redirect_uri=http://localhost/callback&state="+i+"&response_type=code","_blank","location=no,clearsessioncache=yes,clearcache=yes");s.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:"https://app.box.com/api/oauth2/token",data:"client_id="+n+"&client_secret="+r+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){o.resolve(e)}).error(function(e,t){o.reject("Problem authenticating")})["finally"](function(){setTimeout(function(){s.close()},10)}))}),s.addEventListener("exit",function(e){o.reject("The sign in flow was canceled")})}else o.reject("Could not find InAppBrowser plugin")}else o.reject("Cannot authenticate via a web browser");return o.promise},reddit:function(n,r,i){var o=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var s=window.open("https://ssl.reddit.com/api/v1/authorize?client_id="+n+"&redirect_uri=http://localhost/callback&duration=permanent&state=ngcordovaoauth&scope="+i.join(",")+"&response_type=code","_blank","location=no,clearsessioncache=yes,clearcache=yes");s.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t.defaults.headers.post.Authorization="Basic "+btoa(n+":"+r),t({method:"post",url:"https://ssl.reddit.com/api/v1/access_token",data:"redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){o.resolve(e)}).error(function(e,t){o.reject("Problem authenticating")})["finally"](function(){setTimeout(function(){s.close()},10)}))}),s.addEventListener("exit",function(e){o.reject("The sign in flow was canceled")})}else o.reject("Could not find InAppBrowser plugin")}else o.reject("Cannot authenticate via a web browser");return o.promise},twitter:function(r,i){var o=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0)if("undefined"!=typeof jsSHA){var s={oauth_consumer_key:r,oauth_nonce:n.createNonce(10),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_version:"1.0"},c=n.createSignature("POST","https://api.twitter.com/oauth/request_token",s,{oauth_callback:"http://localhost/callback"},i);t({method:"post",url:"https://api.twitter.com/oauth/request_token",headers:{Authorization:c.authorization_header,"Content-Type":"application/x-www-form-urlencoded"},data:"oauth_callback="+encodeURIComponent("http://localhost/callback")}).success(function(e){for(var r=e.split("&"),a={},c=0;c<r.length;c++)a[r[c].split("=")[0]]=r[c].split("=")[1];a.hasOwnProperty("oauth_token")===!1&&o.reject("Oauth request token was not received");var u=window.open("https://api.twitter.com/oauth/authenticate?oauth_token="+a.oauth_token,"_blank","location=no,clearsessioncache=yes,clearcache=yes");u.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var r=e.url.split("?")[1],a=r.split("&"),c={},l=0;l<a.length;l++)c[a[l].split("=")[0]]=a[l].split("=")[1];c.hasOwnProperty("oauth_verifier")===!1&&o.reject("Browser authentication failed to complete.  No oauth_verifier was returned"),delete s.oauth_signature,s.oauth_token=c.oauth_token;var f=n.createSignature("POST","https://api.twitter.com/oauth/access_token",s,{oauth_verifier:c.oauth_verifier},i);t({method:"post",url:"https://api.twitter.com/oauth/access_token",headers:{Authorization:f.authorization_header},params:{oauth_verifier:c.oauth_verifier}}).success(function(e){for(var t=e.split("&"),n={},r=0;r<t.length;r++)n[t[r].split("=")[0]]=t[r].split("=")[1];n.hasOwnProperty("oauth_token_secret")===!1&&o.reject("Oauth access token was not received"),o.resolve(n)}).error(function(e){o.reject(e)})["finally"](function(){setTimeout(function(){u.close()},10)})}}),u.addEventListener("exit",function(e){o.reject("The sign in flow was canceled")})}).error(function(e){o.reject(e)})}else o.reject("Missing jsSHA JavaScript library");else o.reject("Could not find InAppBrowser plugin")}else o.reject("Cannot authenticate via a web browser");return o.promise},meetup:function(t){var n=e.defer();if(window.cordova){var r=cordova.require("cordova/plugin_list").metadata;if(r.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var i=window.open("https://secure.meetup.com/oauth2/authorize/?client_id="+t+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],r=t.split("&"),o={},a=0;a<r.length;a++)o[r[a].split("=")[0]]=r[a].split("=")[1];void 0!==o.access_token&&null!==o.access_token?n.resolve(o):n.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(e){n.reject("The sign in flow was canceled")})}else n.reject("Could not find InAppBrowser plugin")}else n.reject("Cannot authenticate via a web browser");return n.promise},salesforce:function(t,n){var r="http://localhost/callback",i=function(e,t,n){return e+"services/oauth2/authorize?display=touch&response_type=token&client_id="+escape(t)+"&redirect_uri="+escape(n)},o=function(e,t){return e.substr(0,t.length)===t},a=e.defer();if(window.cordova){var s=cordova.require("cordova/plugin_list").metadata;if(s.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var c=window.open(i(t,n,r),"_blank","location=no,clearsessioncache=yes,clearcache=yes");c.addEventListener("loadstart",function(e){if(o(e.url,r)){var t={},n=e.url.split("#")[1];if(n){var i=n.split("&");for(var s in i){var u=i[s].split("=");t[u[0]]=unescape(u[1])}}"undefined"==typeof t||"undefined"==typeof t.access_token?a.reject("Problem authenticating"):a.resolve(t),setTimeout(function(){c.close()},10)}}),c.addEventListener("exit",function(e){a.reject("The sign in flow was canceled")})}else a.reject("Could not find InAppBrowser plugin")}else a.reject("Cannot authenticate via a web browser");return a.promise},strava:function(n,r,i){var o=e.defer();if(window.cordova){var a=cordova.require("cordova/plugin_list").metadata;if(a.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var s=window.open("https://www.strava.com/oauth/authorize?client_id="+n+"&redirect_uri=http://localhost/callback&scope="+i.join(",")+"&response_type=code&approval_prompt=force","_blank","location=no,clearsessioncache=yes,clearcache=yes");s.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:"https://www.strava.com/oauth/token",data:"client_id="+n+"&client_secret="+r+"&code="+requestToken}).success(function(e){o.resolve(e)}).error(function(e,t){o.reject("Problem authenticating")})["finally"](function(){setTimeout(function(){s.close()},10)}))}),s.addEventListener("exit",function(e){o.reject("The sign in flow was canceled")})}else o.reject("Could not find InAppBrowser plugin")}else o.reject("Cannot authenticate via a web browser");return o.promise},foursquare:function(t){var n=e.defer();if(window.cordova){var r=cordova.require("cordova/plugin_list").metadata;if(r.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var i=window.open("https://foursquare.com/oauth2/authenticate?client_id="+t+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],r=t.split("&"),o=[],a=0;a<r.length;a++)o[r[a].split("=")[0]]=r[a].split("=")[1];if(void 0!==o.access_token&&null!==o.access_token){var s={access_token:o.access_token,expires_in:o.expires_in};n.resolve(s)}else n.reject("Problem authenticating");setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(e){n.reject("The sign in flow was canceled")})}else n.reject("Could not find InAppBrowser plugin")}else n.reject("Cannot authenticate via a web browser");return n.promise},magento:function(r,i,o){var a=e.defer();if(window.cordova){var s=cordova.require("cordova/plugin_list").metadata;if(s.hasOwnProperty("org.apache.cordova.inappbrowser")===!0)if("undefined"!=typeof jsSHA){var c={oauth_callback:"http://localhost/callback",oauth_consumer_key:i,oauth_nonce:n.createNonce(5),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_version:"1.0"},u=n.createSignature("POST",r+"/oauth/initiate",c,{oauth_callback:"http://localhost/callback"},o);t.defaults.headers.post.Authorization=u.authorization_header,t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:r+"/oauth/initiate",data:"oauth_callback=http://localhost/callback"}).success(function(e){for(var i=e.split("&"),s={},u=0;u<i.length;u++)s[i[u].split("=")[0]]=i[u].split("=")[1];s.hasOwnProperty("oauth_token")===!1&&a.reject("Oauth request token was not received");var l=s.oauth_token_secret,f=window.open(r+"/oauth/authorize?oauth_token="+s.oauth_token,"_blank","location=no,clearsessioncache=yes,clearcache=yes");f.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var i=e.url.split("?")[1],s=i.split("&"),u={},d=0;d<s.length;d++)u[s[d].split("=")[0]]=s[d].split("=")[1];u.hasOwnProperty("oauth_verifier")===!1&&a.reject("Browser authentication failed to complete.  No oauth_verifier was returned"),delete c.oauth_signature,delete c.oauth_callback,c.oauth_token=u.oauth_token,c.oauth_nonce=n.createNonce(5),c.oauth_verifier=u.oauth_verifier;var p=n.createSignature("POST",r+"/oauth/token",c,{},o,l);t.defaults.headers.post.Authorization=p.authorization_header,t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:r+"/oauth/token"}).success(function(e){for(var t=e.split("&"),n={},r=0;r<t.length;r++)n[t[r].split("=")[0]]=t[r].split("=")[1];n.hasOwnProperty("oauth_token_secret")===!1&&a.reject("Oauth access token was not received"),a.resolve(n)}).error(function(e){a.reject(e)})["finally"](function(){setTimeout(function(){f.close()},10)})}}),f.addEventListener("exit",function(e){a.reject("The sign in flow was canceled")})}).error(function(e){a.reject(e)})}else a.reject("Missing jsSHA JavaScript library");else a.reject("Could not find InAppBrowser plugin")}else a.reject("Cannot authenticate via a web browser");return a.promise},vkontakte:function(t,n){var r=e.defer();if(window.cordova){var i=cordova.require("cordova/plugin_list").metadata;if(i.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var o=window.open("https://oauth.vk.com/authorize?client_id="+t+"&redirect_uri=http://oauth.vk.com/blank.html&response_type=token&scope="+n.join(",")+"&display=touch&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");o.addEventListener("loadstart",function(e){var t=e.url.split("#");if("https://oauth.vk.com/blank.html"==t[0]||"http://oauth.vk.com/blank.html"==t[0]){for(var n=e.url.split("#")[1],i=n.split("&"),a=[],s=0;s<i.length;s++)a[i[s].split("=")[0]]=i[s].split("=")[1];void 0!==a.access_token&&null!==a.access_token?r.resolve({access_token:a.access_token,expires_in:a.expires_in,user_id:a.user_id}):r.reject("Problem authenticating"),setTimeout(function(){o.close()},10)}}),o.addEventListener("exit",function(e){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},imgur:function(t){var n=e.defer();if(window.cordova){var r=cordova.require("cordova/plugin_list").metadata;if(r.hasOwnProperty("org.apache.cordova.inappbrowser")===!0){var i=window.open("https://api.imgur.com/oauth2/authorize?client_id="+t+"&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){i.removeEventListener("exit",function(e){}),i.close();for(var t=e.url.split("#")[1],r=t.split("&"),o=[],a=0;a<r.length;a++)o[r[a].split("=")[0]]=r[a].split("=")[1];void 0!==o.access_token&&null!==o.access_token?n.resolve({access_token:o.access_token,expires_in:o.expires_in,account_username:o.account_username}):n.reject("Problem authenticating")}}),i.addEventListener("exit",function(e){n.reject("The sign in flow was canceled")})}else n.reject("Could not find InAppBrowser plugin")}else n.reject("Cannot authenticate via a web browser");return n.promise}}}]),angular.module("ngCordova.plugins.oauthUtility",[]).factory("$cordovaOauthUtility",["$q",function(e){return{createSignature:function(e,t,n,r,i,o){if("undefined"!=typeof jsSHA){for(var a=angular.copy(n),s=Object.keys(r),c=0;c<s.length;c++)a[s[c]]=encodeURIComponent(r[s[c]]);var u=e+"&"+encodeURIComponent(t)+"&",l=Object.keys(a).sort();for(c=0;c<l.length;c++)u+=c==l.length-1?encodeURIComponent(l[c]+"="+a[l[c]]):encodeURIComponent(l[c]+"="+a[l[c]]+"&");var f=new jsSHA(u,"TEXT"),d="";
o&&(d=encodeURIComponent(o)),n.oauth_signature=encodeURIComponent(f.getHMAC(encodeURIComponent(i)+"&"+d,"TEXT","SHA-1","B64"));var p=Object.keys(n),h="OAuth ";for(c=0;c<p.length;c++)h+=c==p.length-1?p[c]+'="'+n[p[c]]+'"':p[c]+'="'+n[p[c]]+'",';return{signature_base_string:u,authorization_header:h,signature:n.oauth_signature}}return"Missing jsSHA JavaScript library"},createNonce:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;e>r;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}}}]),angular.module("ngCordova.plugins.pinDialog",[]).factory("$cordovaPinDialog",["$q","$window",function(e,t){return{prompt:function(n,r,i){var o=e.defer();return t.plugins.pinDialog.prompt(n,function(e){o.resolve(e)},r,i),o.promise}}}]),angular.module("ngCordova.plugins.prefs",[]).factory("$cordovaPreferences",["$window","$q",function(e,t){return{set:function(n,r){var i=t.defer();return e.appgiraffe.plugins.applicationPreferences.set(n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},get:function(n){var r=t.defer();return e.appgiraffe.plugins.applicationPreferences.get(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.printer",[]).factory("$cordovaPrinter",["$q","$window",function(e,t){return{isAvailable:function(){var n=e.defer();return t.plugin.printer.isAvailable(function(e){n.resolve(e)}),n.promise},print:function(n,r){var i=e.defer();return t.plugin.printer.print(n,r,function(){i.resolve()}),i.promise}}}]),angular.module("ngCordova.plugins.progressIndicator",[]).factory("$cordovaProgress",["$q",function(e){return{show:function(e){var t=e||"Please wait...";return ProgressIndicator.show(t)},showSimple:function(e){var t=e||!1;return ProgressIndicator.showSimple(t)},showSimpleWithLabel:function(e,t){var n=e||!1,r=t||"Loading...";return ProgressIndicator.showSimpleWithLabel(n,r)},showSimpleWithLabelDetail:function(e,t,n){var r=e||!1,i=t||"Loading...",o=n||"Please wait";return ProgressIndicator.showSimpleWithLabelDetail(r,i,o)},showDeterminate:function(e,t){var n=e||!1,r=t||5e4;return ProgressIndicator.showDeterminate(n,r)},showDeterminateWithLabel:function(e,t,n){var r=e||!1,i=t||5e4,o=n||"Loading...";return ProgressIndicator.showDeterminateWithLabel(r,i,o)},showAnnular:function(e,t){var n=e||!1,r=t||5e4;return ProgressIndicator.showAnnular(n,r)},showAnnularWithLabel:function(e,t,n){var r=e||!1,i=t||5e4,o=n||"Loading...";return ProgressIndicator.showAnnularWithLabel(r,i,o)},showBar:function(e,t){var n=e||!1,r=t||5e4;return ProgressIndicator.showBar(n,r)},showBarWithLabel:function(e,t,n){var r=e||!1,i=t||5e4,o=n||"Loading...";return ProgressIndicator.showBarWithLabel(r,i,o)},showSuccess:function(e,t){var n=e||!1,r=t||"Success";return ProgressIndicator.showSuccess(n,r)},showText:function(e,t,n){var r=e||!1,i=t||"Warning",o=n||"center";return ProgressIndicator.showText(r,i,o)},hide:function(){return ProgressIndicator.hide()}}}]),angular.module("ngCordova.plugins.push",[]).factory("$cordovaPush",["$q","$window","$rootScope","$timeout",function(e,t,n,r){return{onNotification:function(e){r(function(){n.$broadcast("$cordovaPush:notificationReceived",e)})},register:function(n){var r,i=e.defer();return void 0!==n&&void 0===n.ecb&&(r=null===document.querySelector("[ng-app]")?"document.body":"document.querySelector('[ng-app]')",n.ecb="angular.element("+r+").injector().get('$cordovaPush').onNotification"),t.plugins.pushNotification.register(function(e){i.resolve(e)},function(e){i.reject(e)},n),i.promise},unregister:function(n){var r=e.defer();return t.plugins.pushNotification.unregister(function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise},setBadgeNumber:function(n){var r=e.defer();return t.plugins.pushNotification.setApplicationIconBadgeNumber(function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise}}}]),angular.module("ngCordova.plugins.sms",[]).factory("$cordovaSms",["$q",function(e){return{send:function(t,n,r){var i=e.defer();return sms.send(t,n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.socialSharing",[]).factory("$cordovaSocialSharing",["$q","$window",function(e,t){return{share:function(n,r,i,o){var a=e.defer();return r=r||null,i=i||null,o=o||null,t.plugins.socialsharing.share(n,r,i,o,function(){a.resolve(!0)},function(){a.reject(!1)}),a.promise},shareViaTwitter:function(n,r,i){var o=e.defer();return r=r||null,i=i||null,t.plugins.socialsharing.shareViaTwitter(n,r,i,function(){o.resolve(!0)},function(){o.reject(!1)}),o.promise},shareViaWhatsApp:function(n,r,i){var o=e.defer();return r=r||null,i=i||null,t.plugins.socialsharing.shareViaWhatsApp(n,r,i,function(){o.resolve(!0)},function(){o.reject(!1)}),o.promise},shareViaFacebook:function(n,r,i){var o=e.defer();return n=n||null,r=r||null,i=i||null,t.plugins.socialsharing.shareViaFacebook(n,r,i,function(){o.resolve(!0)},function(){o.reject(!1)}),o.promise},shareViaFacebookWithPasteMessageHint:function(n,r,i,o){var a=e.defer();return r=r||null,i=i||null,t.plugins.socialsharing.shareViaFacebookWithPasteMessageHint(n,r,i,o,function(){a.resolve(!0)},function(){a.reject(!1)}),a.promise},shareViaSMS:function(n,r){var i=e.defer();return t.plugins.socialsharing.shareViaSMS(n,r,function(){i.resolve(!0)},function(){i.reject(!1)}),i.promise},shareViaEmail:function(n,r,i,o,a,s){var c=e.defer();return i=i||null,o=o||null,a=a||null,s=s||null,t.plugins.socialsharing.shareViaEmail(n,r,i,o,a,s,function(){c.resolve(!0)},function(){c.reject(!1)}),c.promise},shareVia:function(n,r,i,o,a){var s=e.defer();return r=r||null,i=i||null,o=o||null,a=a||null,t.plugins.socialsharing.shareVia(n,r,i,o,a,function(){s.resolve(!0)},function(){s.reject(!1)}),s.promise},canShareViaEmail:function(){var n=e.defer();return t.plugins.socialsharing.canShareViaEmail(function(){n.resolve(!0)},function(){n.reject(!1)}),n.promise},canShareVia:function(n,r,i,o,a){var s=e.defer();return t.plugins.socialsharing.canShareVia(n,r,i,o,a,function(e){s.resolve(e)},function(e){s.reject(e)}),s.promise},available:function(){var t=e.defer();window.plugins.socialsharing.available(function(e){e?t.resolve():t.reject()})}}}]),angular.module("ngCordova.plugins.spinnerDialog",[]).factory("$cordovaSpinnerDialog",["$window",function(e){return{show:function(t,n,r){return r=r||!1,e.plugins.spinnerDialog.show(t,n,r)},hide:function(){return e.plugins.spinnerDialog.hide()}}}]),angular.module("ngCordova.plugins.splashscreen",[]).factory("$cordovaSplashscreen",[function(){return{hide:function(){return navigator.splashscreen.hide()},show:function(){return navigator.splashscreen.show()}}}]),angular.module("ngCordova.plugins.sqlite",[]).factory("$cordovaSQLite",["$q","$window",function(e,t){return{openDB:function(e,n){return"undefined"==typeof n&&(n=0),t.sqlitePlugin.openDatabase({name:e,bgType:n})},execute:function(t,n,r){var i=e.defer();return t.transaction(function(e){e.executeSql(n,r,function(e,t){i.resolve(t)},function(e,t){i.reject(t)})}),i.promise},insertCollection:function(t,n,r){var i=e.defer(),o=r.slice(0);return t.transaction(function(e){!function t(){var r=o.splice(0,1)[0];try{e.executeSql(n,r,function(e,n){0===o.length?i.resolve(n):t()},function(e,t){i.reject(t)})}catch(a){i.reject(a)}}()}),i.promise},nestedExecute:function(t,n,r,i,o){var a=e.defer();return t.transaction(function(e){e.executeSql(n,i,function(e,t){a.resolve(t),e.executeSql(r,o,function(e,t){a.resolve(t)})})},function(e,t){a.reject(t)}),a.promise},deleteDB:function(n){var r=e.defer();return t.sqlitePlugin.deleteDatabase(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.statusbar",[]).factory("$cordovaStatusbar",[function(){return{overlaysWebView:function(e){return StatusBar.overlaysWebView(!!e)},STYLES:{DEFAULT:0,LIGHT_CONTENT:1,BLACK_TRANSLUCENT:2,BLACK_OPAQUE:3},style:function(e){switch(e){case 0:return StatusBar.styleDefault();case 1:return StatusBar.styleLightContent();case 2:return StatusBar.styleBlackTranslucent();case 3:return StatusBar.styleBlackOpaque();default:return StatusBar.styleDefault()}},styleColor:function(e){return StatusBar.backgroundColorByName(e)},styleHex:function(e){return StatusBar.backgroundColorByHexString(e)},hide:function(){return StatusBar.hide()},show:function(){return StatusBar.show()},isVisible:function(){return StatusBar.isVisible}}}]),angular.module("ngCordova.plugins.toast",[]).factory("$cordovaToast",["$q","$window",function(e,t){return{showShortTop:function(n){var r=e.defer();return t.plugins.toast.showShortTop(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showShortCenter:function(n){var r=e.defer();return t.plugins.toast.showShortCenter(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showShortBottom:function(n){var r=e.defer();return t.plugins.toast.showShortBottom(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showLongTop:function(n){var r=e.defer();return t.plugins.toast.showLongTop(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showLongCenter:function(n){var r=e.defer();return t.plugins.toast.showLongCenter(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showLongBottom:function(n){var r=e.defer();return t.plugins.toast.showLongBottom(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},show:function(n,r,i){var o=e.defer();return t.plugins.toast.show(n,r,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}}]),angular.module("ngCordova.plugins.touchid",[]).factory("$cordovaTouchID",["$q",function(e){return{checkSupport:function(){var t=e.defer();return window.cordova?touchid.checkSupport(function(e){t.resolve(e)},function(e){t.reject(e)}):t.reject("Not supported without cordova.js"),t.promise},authenticate:function(t){var n=e.defer();return window.cordova?touchid.authenticate(function(e){n.resolve(e)},function(e){n.reject(e)},t):n.reject("Not supported without cordova.js"),n.promise}}}]),angular.module("ngCordova.plugins.vibration",[]).factory("$cordovaVibration",[function(){return{vibrate:function(e){return navigator.notification.vibrate(e)},vibrateWithPattern:function(e,t){return navigator.notification.vibrateWithPattern(e,t)},cancelVibration:function(){return navigator.notification.cancelVibration()}}}]),angular.module("ngCordova.plugins.videoCapturePlus",[]).provider("$cordovaVideoCapturePlus",[function(){var e={};this.setLimit=function(t){e.limit=t},this.setMaxDuration=function(t){e.duration=t},this.setHighQuality=function(t){e.highquality=t},this.useFrontCamera=function(t){e.frontcamera=t},this.setPortraitOverlay=function(t){e.portraitOverlay=t},this.setLandscapeOverlay=function(t){e.landscapeOverlay=t},this.setOverlayText=function(t){e.overlayText=t},this.$get=["$q","$window",function(t,n){return{captureVideo:function(r){var i=t.defer();return n.plugins.videocaptureplus?(n.plugins.videocaptureplus.captureVideo(i.resolve,i.reject,angular.extend({},e,r)),i.promise):(i.resolve(null),i.promise)}}}]}]),angular.module("ngCordova.plugins.zip",[]).factory("$cordovaZip",["$q","$window",function(e,t){return{unzip:function(n,r){var i=e.defer();return t.zip.unzip(n,r,function(e){0===e?i.resolve():i.reject()},function(e){i.notify(e)}),i.promise}}}])}()}(),r()}),System.registerDynamic("npm:qr-image@3.1.0/lib/qr",["github:jspm/nodelibs-stream@0.1.0","npm:qr-image@3.1.0/lib/qr-base","npm:qr-image@3.1.0/lib/png","npm:qr-image@3.1.0/lib/vector","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(t){"use strict";function r(e,t){e="string"==typeof e?{ec_level:e}:e||{};var n={type:String(t||e.type||"png").toLowerCase()},r="png"==n.type?d:p;for(var i in r)n[i]=i in e?e[i]:r[i];return n}function i(e,n){n=r(n);var i=c(e,n.ec_level,n.parse_url),o=new s;switch(o._read=f,n.type){case"svg":case"pdf":case"eps":t.nextTick(function(){l[n.type](i,o,n.margin,n.size)});break;case"svgpath":t.nextTick(function(){var e=l.svg_object(i,n.margin,n.size);o.push(e.path),o.push(null)});break;case"png":default:t.nextTick(function(){var e=u.bitmap(i,n.size,n.margin);n.customize&&n.customize(e),u.png(e,o)})}return o}function o(e,t){t=r(t);var n,i=c(e,t.ec_level,t.parse_url);switch(t.type){case"svg":case"pdf":case"eps":var o=[];l[t.type](i,o,t.margin,t.size),n=o.filter(Boolean).join("");break;case"png":default:var a=u.bitmap(i,t.size,t.margin);t.customize&&t.customize(a),n=u.png_sync(a)}return n}function a(e,t){t=r(t,"svg");var n=c(e,t.ec_level);return l.svg_object(n,t.margin)}var s=e("github:jspm/nodelibs-stream@0.1.0").Readable,c=e("npm:qr-image@3.1.0/lib/qr-base").QR,u=e("npm:qr-image@3.1.0/lib/png"),l=e("npm:qr-image@3.1.0/lib/vector"),f=function(){},d={parse_url:!1,ec_level:"M",size:5,margin:4,customize:null},p={parse_url:!1,ec_level:"M",margin:1,size:0};n.exports={matrix:c,image:i,imageSync:o,svgObject:a}}(e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:ramda@0.17.1/dist/ramda",["github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(e){(function(){"use strict";var e={"@@functional/placeholder":!0},r=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,o){return t.apply(this,arguments)};case 6:return function(e,n,r,i,o,a){return t.apply(this,arguments)};case 7:return function(e,n,r,i,o,a,s){return t.apply(this,arguments)};case 8:return function(e,n,r,i,o,a,s,c){return t.apply(this,arguments)};case 9:return function(e,n,r,i,o,a,s,c,u){return t.apply(this,arguments)};case 10:return function(e,n,r,i,o,a,s,c,u,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},i=function(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))},o=function(e){return function(){return!e.apply(this,arguments)}},a=function(e,t){e=e||[],t=t||[];var n,r=e.length,i=t.length,o=[];for(n=0;r>n;)o[o.length]=e[n],n+=1;for(n=0;i>n;)o[o.length]=t[n],n+=1;return o},s=function(e,t,n){for(var r=0,i=n.length;i>r;){if(e(t,n[r]))return!0;r+=1}return!1},c=function(e){return function t(n){return 0===arguments.length?t:null!=n&&n["@@functional/placeholder"]===!0?t:e.apply(this,arguments)}},u=function(e){return function t(n,r){var i=arguments.length;return 0===i?t:1===i&&null!=n&&n["@@functional/placeholder"]===!0?t:1===i?c(function(t){return e(n,t)}):2===i&&null!=n&&n["@@functional/placeholder"]===!0&&null!=r&&r["@@functional/placeholder"]===!0?t:2===i&&null!=n&&n["@@functional/placeholder"]===!0?c(function(t){return e(t,r)}):2===i&&null!=r&&r["@@functional/placeholder"]===!0?c(function(t){return e(n,t)}):e(n,r)}},l=function(e){return function t(n,r,i){var o=arguments.length;return 0===o?t:1===o&&null!=n&&n["@@functional/placeholder"]===!0?t:1===o?u(function(t,r){return e(n,t,r)}):2===o&&null!=n&&n["@@functional/placeholder"]===!0&&null!=r&&r["@@functional/placeholder"]===!0?t:2===o&&null!=n&&n["@@functional/placeholder"]===!0?u(function(t,n){return e(t,r,n)}):2===o&&null!=r&&r["@@functional/placeholder"]===!0?u(function(t,r){return e(n,t,r)}):2===o?c(function(t){return e(n,r,t)}):3===o&&null!=n&&n["@@functional/placeholder"]===!0&&null!=r&&r["@@functional/placeholder"]===!0&&null!=i&&i["@@functional/placeholder"]===!0?t:3===o&&null!=n&&n["@@functional/placeholder"]===!0&&null!=r&&r["@@functional/placeholder"]===!0?u(function(t,n){return e(t,n,i)}):3===o&&null!=n&&n["@@functional/placeholder"]===!0&&null!=i&&i["@@functional/placeholder"]===!0?u(function(t,n){return e(t,r,n)}):3===o&&null!=r&&r["@@functional/placeholder"]===!0&&null!=i&&i["@@functional/placeholder"]===!0?u(function(t,r){return e(n,t,r)}):3===o&&null!=n&&n["@@functional/placeholder"]===!0?c(function(t){return e(t,r,i)}):3===o&&null!=r&&r["@@functional/placeholder"]===!0?c(function(t){return e(n,t,i)}):3===o&&null!=i&&i["@@functional/placeholder"]===!0?c(function(t){return e(n,r,t)}):e(n,r,i)}},f=function ui(e,t,n){return function(){for(var i=[],o=0,a=e,s=0;s<t.length||o<arguments.length;){var c;s<t.length&&(null==t[s]||t[s]["@@functional/placeholder"]!==!0||o>=arguments.length)?c=t[s]:(c=arguments[o],o+=1),i[s]=c,(null==c||c["@@functional/placeholder"]!==!0)&&(a-=1),s+=1}return 0>=a?n.apply(this,i):r(a,ui(e,i,n))}},d=function(e,t){for(var n=0,r=t.length,i=[];r>n;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i},p=function(e){return{"@@transducer/value":e,"@@transducer/reduced":!0}},h=function(e){return function(t){return d(function(e){return"function"==typeof t[e]},e(t))}},g=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)},m=function(e){return e},v=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)},y=Number.isInteger||function(e){return e<<0===e},b=function(e){return"[object Number]"===Object.prototype.toString.call(e)},w=function(e){return"[object String]"===Object.prototype.toString.call(e)},S=function(e){return"function"==typeof e["@@transducer/step"]},C=function(e,t){for(var n=0,r=t.length,i=Array(r);r>n;)i[n]=e(t[n]),n+=1;return i},_=function(e,t){return function(){return t.call(this,e.apply(this,arguments))}},E=function(e,t){return function(){var n=this;return e.apply(n,arguments).then(function(e){return t.call(n,e)})}},T=function(e){return'"'+e.replace(/"/g,'\\"')+'"'},A=function(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}},I=function li(e,t,n){switch(arguments.length){case 1:return li(e,0,e.length);case 2:return li(e,t,e.length);default:for(var r=[],i=0,o=Math.max(0,Math.min(e.length,n)-t);o>i;)r[i]=e[t+i],i+=1;return r}},k=function(){var e=function(e){return(10>e?"0":"")+e};return"function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(t){return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),x=function(){function e(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=function(){return this.xf["@@transducer/init"]()},e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(n=!0):this.seenFirstValue=!0,this.lastValue=t,n?e:this.xf["@@transducer/step"](e,t)},u(function(t,n){return new e(t,n)})}(),B={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}},N=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=B.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},u(function(t,n){return new e(t,n)})}(),D=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=A(this.xf["@@transducer/step"](e,t))),e},u(function(t,n){return new e(t,n)})}(),R=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=A(this.xf["@@transducer/step"](e,this.idx))),e},u(function(t,n){return new e(t,n)})}(),j=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},u(function(t,n){return new e(t,n)})}(),$=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},u(function(t,n){return new e(t,n)})}(),L=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=B.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},u(function(t,n){return new e(t,n)})}(),M=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=B.result,e.prototype["@@transducer/step"]=function(e,t){return 0===this.n?A(e):(this.n-=1,this.xf["@@transducer/step"](e,t))},u(function(t,n){return new e(t,n)})}(),O=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=B.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):A(e)},u(function(t,n){return new e(t,n)})}(),P=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},function(t){return new e(t)}}(),U=u(function(e,t){return e+t}),F=l(function(e,t,n){if(t>=n.length||t<-n.length)return n;var r=0>t?n.length:0,i=r+t,o=a(n);return o[i]=e(n[i]),o}),V=c(function(e){return function(){return e}}),z=u(function(e,t){for(var n=0,r=t.length-(e-1),i=new Array(r>=0?r:0);r>n;)i[n]=I(t,n,n+e),n+=1;return i}),q=u(function(e,t){return a(t,[e])}),H=u(function(e,t){return e.apply(this,t)}),G=l(function(e,t,n){var r={};for(var i in n)r[i]=n[i];return r[e]=t,r}),K=l(function fi(e,t,n){switch(e.length){case 0:return n;case 1:return G(e[0],t,n);default:return G(e[0],fi(I(e,1),t,Object(n[e[0]])),n)}}),W=u(function(e,t){return r(e.length,function(){return e.apply(t,arguments)})}),Y=u(function(e,t){return function(){return e.apply(this,arguments)&&t.apply(this,arguments)}}),X=c(function(e){return function(t,n){return e(t,n)?-1:e(n,t)?1:0}}),Z=c(o),Q=c(function(e){return function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}}}),J=l(s),ee=u(function(e,t){for(var n={},r=t.length,i=0;r>i;){var o=e(t[i]);n[o]=(g(o,n)?n[o]:0)+1,i+=1}return n}),te=u(function(e,t){var n={};return n[e]=t,n}),ne=u(function(e,t){return 1===e?c(t):r(e,f(e,[],t))}),re=U(-1),ie=u(function(e,t){return null==t?e:t}),oe=l(function(e,t,n){for(var r=[],i=0,o=t.length,a=J(e);o>i;)a(t[i],n)||a(t[i],r)||(r[r.length]=t[i]),i+=1;return r}),ae=u(function(e,t){var n={};for(var r in t)r!==e&&(n[r]=t[r]);return n}),se=u(function di(e,t){switch(e.length){case 0:return t;case 1:return ae(e[0],t);default:var n=e[0],r=I(e,1);return null==t[n]?t:G(n,di(r,t[n]),t)}}),ce=u(function(e,t){return e/t}),ue=u(function(e,t){for(var n=t.length-1;n>=0&&e(t[n]);)n-=1;return I(t,0,n+1)}),le=u(function(e,t){return function(){return e.apply(this,arguments)||t.apply(this,arguments)}}),fe=c(function(e){if(null!=e&&"function"==typeof e.empty)return e.empty();if(null!=e&&null!=typeof e.constructor&&"function"==typeof e.constructor.empty)return e.constructor.empty();switch(Object.prototype.toString.call(e)){case"[object Array]":return[];case"[object Object]":return{};case"[object String]":return""}}),de=u(function pi(e,t){var n,r,i,o={};for(r in t)n=e[r],i=typeof n,o[r]="function"===i?n(t[r]):"object"===i?pi(e[r],t[r]):t[r];return o}),pe=c(function(e){for(var t=0,n=e.length,r={};n>t;)v(e[t])&&e[t].length&&(r[e[t][0]]=e[t][1]),t+=1;return r}),he=u(function(e,t){return e>t}),ge=u(function(e,t){return e>=t}),me=u(g),ve=u(function(e,t){return e in t}),ye=u(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}),be=c(m),we=l(function(e,t,n){return ne(Math.max(e.length,t.length,n.length),function(){return e.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)})}),Se=U(1),Ce=l(function(e,t,n){e=e<n.length&&e>=0?e:n.length;var r=I(n);return r.splice(e,0,t),r}),_e=l(function(e,t,n){return e=e<n.length&&e>=0?e:n.length,a(a(I(n,0,e),t),I(n,e))}),Ee=u(function(e,t){return null!=t&&t.constructor===e||t instanceof e}),Te=c(function(e){return v(e)?!0:e?"object"!=typeof e?!1:e instanceof String?!1:1===e.nodeType?!!e.length:0===e.length?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1:!1}),Ae=c(function(e){return 0===Object(e).length}),Ie=c(function(e){return null==e}),ke=function(){var e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],n=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};return c("function"==typeof Object.keys?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(r){if(Object(r)!==r)return[];var i,o,a=[];for(i in r)g(i,r)&&(a[a.length]=i);if(e)for(o=t.length-1;o>=0;)i=t[o],g(i,r)&&!n(a,i)&&(a[a.length]=i),o-=1;return a})}(),xe=c(function(e){var t,n=[];for(t in e)n[n.length]=t;return n}),Be=c(function(e){return null!=e&&Ee(Number,e.length)?e.length:NaN}),Ne=u(function(e,t){return t>e}),De=u(function(e,t){return t>=e}),Re=l(function(e,t,n){for(var r=0,i=n.length,o=[],a=[t];i>r;)a=e(a[0],n[r]),o[r]=a[1],r+=1;return[a[0],o]}),je=l(function(e,t,n){for(var r=n.length-1,i=[],o=[t];r>=0;)o=e(o[0],n[r]),i[r]=o[1],r-=1;return[o[0],i]}),$e=u(function(e,t){return t.match(e)||[]}),Le=u(function(e,t){return y(e)?!y(t)||1>t?NaN:(e%t+t)%t:NaN}),Me=u(function(e,t){return t>e?t:e}),Oe=l(function(e,t,n){return e(n)>e(t)?n:t}),Pe=u(function(e,t){for(var n={},r=ke(e),i=0;i<r.length;)n[r[i]]=e[r[i]],i+=1;for(r=ke(t),i=0;i<r.length;)n[r[i]]=t[r[i]],i+=1;return n}),Ue=u(function(e,t){return e>t?t:e}),Fe=l(function(e,t,n){return e(n)<e(t)?n:t}),Ve=u(function(e,t){return e%t}),ze=u(function(e,t){return e*t}),qe=u(function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,n){return t.call(this,e,n)};case 3:return function(e,n,r){return t.call(this,e,n,r)};case 4:return function(e,n,r,i){return t.call(this,e,n,r,i)};case 5:return function(e,n,r,i,o){return t.call(this,e,n,r,i,o)};case 6:return function(e,n,r,i,o,a){return t.call(this,e,n,r,i,o,a)};case 7:return function(e,n,r,i,o,a,s){return t.call(this,e,n,r,i,o,a,s)};case 8:return function(e,n,r,i,o,a,s,c){return t.call(this,e,n,r,i,o,a,s,c)};case 9:return function(e,n,r,i,o,a,s,c,u){return t.call(this,e,n,r,i,o,a,s,c,u)};case 10:return function(e,n,r,i,o,a,s,c,u,l){return t.call(this,e,n,r,i,o,a,s,c,u,l)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),He=c(function(e){return-e}),Ge=c(function(e){return!e}),Ke=u(function(e,t){var n=0>e?t.length+e:e;return w(t)?t.charAt(n):t[n]}),We=c(function(e){return function(){return Ke(e,arguments)}}),Ye=u(function(e,t){return t.charAt(0>e?t.length+e:e)}),Xe=u(function(e,t){return t.charCodeAt(0>e?t.length+e:e)}),Ze=c(function(e){return[e]}),Qe=c(function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments))}}),Je=function(){var e=function(t){return{value:t,map:function(n){return e(n(t))}}};return l(function(t,n,r){return t(function(t){return e(n(t))})(r).value})}(),et=u(function(e,t){if(null!=t){for(var n=t,r=0,i=e.length;i>r&&null!=n;r+=1)n=n[e[r]];return n}}),tt=u(function(e,t){for(var n={},r=0;r<e.length;)e[r]in t&&(n[e[r]]=t[e[r]]),r+=1;return n}),nt=u(function(e,t){for(var n={},r=0,i=e.length;i>r;){var o=e[r];n[o]=t[o],r+=1}return n}),rt=u(function(e,t){var n={};for(var r in t)e(t[r],r,t)&&(n[r]=t[r]);return n}),it=u(function(e,t){return a([e],t)}),ot=u(function(e,t){return t[e]}),at=l(function(e,t,n){return null!=n&&g(t,n)?n[t]:e}),st=l(function(e,t,n){return e(n[t])}),ct=u(function(e,t){for(var n=e.length,r=[],i=0;n>i;)r[i]=t[e[i]],i+=1;return r}),ut=u(function(e,t){if(!b(e)||!b(t))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=e;t>r;)n.push(r),r+=1;return n}),lt=l(function(e,t,n){for(var r=n.length-1;r>=0;)t=e(t,n[r]),r-=1;return t}),ft=c(A),dt=l(function(e,t,n){return a(I(n,0,Math.min(e,n.length)),I(n,Math.min(n.length,e+t)))}),pt=l(function(e,t,n){return n.replace(e,t)}),ht=c(function(e){return I(e).reverse()}),gt=l(function(e,t,n){for(var r=0,i=n.length,o=[t];i>r;)t=e(t,n[r]),o[r+1]=t,r+=1;return o}),mt=l(function(e,t,n){return Je(e,V(t),n)}),vt=u(function(e,t){return I(t).sort(e)}),yt=u(function(e,t){return I(t).sort(function(t,n){var r=e(t),i=e(n);return i>r?-1:r>i?1:0})}),bt=u(function(e,t){return e-t}),wt=u(function(e,t){for(var n=t.length-1;n>=0&&e(t[n]);)n-=1;return I(t,n+1,1/0)}),St=u(function(e,t){return e(t),t}),Ct=u(function(e,t){return i(e).test(t)}),_t=u(function(e,t){for(var n=Number(t),r=new Array(n),i=0;n>i;)r[i]=e(i),i+=1;return r}),Et=c(function(e){var t=[];for(var n in e)g(n,e)&&(t[t.length]=[n,e[n]]);return t}),Tt=c(function(e){var t=[];for(var n in e)t[t.length]=[n,e[n]];return t}),At=function(){var e="	\n\f\r \u2028\u2029\ufeff",t="",n="function"==typeof String.prototype.trim;return c(n&&!e.trim()&&t.trim()?function(e){return e.trim()}:function(t){var n=new RegExp("^["+e+"]["+e+"]*"),r=new RegExp("["+e+"]["+e+"]*$");return t.replace(n,"").replace(r,"")})}(),It=c(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),kt=c(function(e){return function(){return e(I(arguments))}}),xt=c(function(e){return qe(1,e)}),Bt=u(function(e,t){return ne(e,function(){for(var n,r=1,i=t,o=0;e>=r&&"function"==typeof i;)n=r===e?arguments.length:o+i.length,i=i.apply(this,I(arguments,o,n)),r+=1,o=n;return i})}),Nt=u(function(e,t){for(var n=e(t),r=[];n&&n.length;)r[r.length]=n[0],n=e(n[1]);return r}),Dt=u(function(e,t){for(var n,r=0,i=t.length,o=[];i>r;)n=t[r],s(e,n,o)||(o[o.length]=n),r+=1;return o}),Rt=l(function(e,t,n){return F(V(t),e,n)}),jt=c(function(e){for(var t=ke(e),n=t.length,r=[],i=0;n>i;)r[i]=e[t[i]],i+=1;return r}),$t=c(function(e){var t,n=[];for(t in e)n[n.length]=e[t];return n}),Lt=function(){var e=function(e){return{value:e,map:function(){return this}}};return u(function(t,n){return t(e)(n).value})}(),Mt=u(function(e,t){for(var n in e)if(g(n,e)&&!e[n](t[n]))return!1;return!0}),Ot=u(function(e,t){return ne(e.length,function(){return t.apply(this,a([e],arguments))})}),Pt=u(function(e,t){for(var n,r=0,i=e.length,o=t.length,a=[];i>r;){for(n=0;o>n;)a[a.length]=[e[r],t[n]],n+=1;r+=1}return a}),Ut=u(function(e,t){for(var n=[],r=0,i=Math.min(e.length,t.length);i>r;)n[r]=[e[r],t[r]],r+=1;return n}),Ft=u(function(e,t){for(var n=0,r=e.length,i={};r>n;)i[e[n]]=t[n],n+=1;return i}),Vt=l(function(e,t,n){for(var r=[],i=0,o=Math.min(t.length,n.length);o>i;)r[i]=e(t[i],n[i]),i+=1;return r}),zt=V(!1),qt=V(!0),Ht=function(e,t){return function(){var n=arguments.length;if(0===n)return t();var r=arguments[n-1];return v(r)||"function"!=typeof r[e]?t.apply(this,arguments):r[e].apply(r,I(arguments,0,n-1))}},Gt=function hi(e,t,n){var r=function(r){for(var i=t.length,o=0;i>o;){if(e===t[o])return n[o];o+=1}t[o+1]=e,n[o+1]=r;for(var a in e)r[a]=hi(e[a],t,n);return r};switch(It(e)){case"Object":return r({});case"Array":
return r([]);case"Date":return new Date(e);case"RegExp":return i(e);default:return e}},Kt=function(e){return function(t){var n=I(arguments,1);return r(Math.max(0,t.length-n.length),function(){return t.apply(this,e(n,arguments))})}},Wt=function(e,t,n){return function(){var r=arguments.length;if(0===r)return n();var i=arguments[r-1];if(!v(i)){var o=I(arguments,0,r-1);if("function"==typeof i[e])return i[e].apply(i,o);if(S(i)){var a=t.apply(null,o);return a(i)}}return n.apply(this,arguments)}},Yt=function gi(e,t,n,r){var i=It(e);if(i!==It(t))return!1;if("Boolean"===i||"Number"===i||"String"===i)return"object"==typeof e?"object"==typeof t&&ye(e.valueOf(),t.valueOf()):ye(e,t);if(ye(e,t))return!0;if("RegExp"===i)return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode;if(Object(e)===e){if("Date"===i&&e.getTime()!==t.getTime())return!1;var o=ke(e);if(o.length!==ke(t).length)return!1;for(var a=n.length-1;a>=0;){if(n[a]===e)return r[a]===t;a-=1}for(n[n.length]=e,r[r.length]=t,a=o.length-1;a>=0;){var s=o[a];if(!g(s,t)||!gi(t[s],e[s],n,r))return!1;a-=1}return n.pop(),r.pop(),!0}return!1},Xt=function(e,t){return null!=t&&!v(t)&&"function"==typeof t[e]},Zt=function(e){return function t(n){for(var r,i,o,a=[],s=0,c=n.length;c>s;){if(Te(n[s]))for(r=e?t(n[s]):n[s],i=0,o=r.length;o>i;)a[a.length]=r[i],i+=1;else a[a.length]=n[s];s+=1}return a}},Qt=function(){function e(e,t,n){for(var r=0,i=n.length;i>r;){if(t=e["@@transducer/step"](t,n[r]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}function t(e,t,n){for(var r=n.next();!r.done;){if(t=e["@@transducer/step"](t,r.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function n(e,t,n){return e["@@transducer/result"](n.reduce(W(e["@@transducer/step"],e),t))}var r="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(i,o,a){if("function"==typeof i&&(i=P(i)),Te(a))return e(i,o,a);if("function"==typeof a.reduce)return n(i,o,a);if(null!=a[r])return t(i,o,a[r]());if("function"==typeof a.next)return t(i,o,a);throw new TypeError("reduce: list must be array or iterable")}}(),Jt=function(){var e={"@@transducer/init":Array,"@@transducer/step":function(e,t){return a(e,[t])},"@@transducer/result":m},t={"@@transducer/init":String,"@@transducer/step":function(e,t){return e+t},"@@transducer/result":m},n={"@@transducer/init":Object,"@@transducer/step":function(e,t){return Pe(e,Te(t)?te(t[0],t[1]):t)},"@@transducer/result":m};return function(r){if(S(r))return r;if(Te(r))return e;if("string"==typeof r)return t;if("object"==typeof r)return n;throw new Error("Cannot create transformer for "+r)}}(),en=function(){function e(e,t){this.xf=t,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=A(this.xf["@@transducer/step"](e,!1))),e},u(function(t,n){return new e(t,n)})}(),tn=function(){function e(e,t){this.xf=t,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=A(this.xf["@@transducer/step"](e,!0))),e},u(function(t,n){return new e(t,n)})}(),nn=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=B.result,e.prototype["@@transducer/step"]=function(e,t){return this.n>0?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},u(function(t,n){return new e(t,n)})}(),rn=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=B.result,e.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},u(function(t,n){return new e(t,n)})}(),on=function(){function e(e,t){this.xf=t,this.f=e,this.inputs={}}return e.prototype["@@transducer/init"]=B.init,e.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if(g(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]),e["@@transducer/reduced"])){e=e["@@transducer/value"];break}return this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n=this.f(t);return this.inputs[n]=this.inputs[n]||[n,[]],this.inputs[n][1]=q(t,this.inputs[n][1]),e},u(function(t,n){return new e(t,n)})}(),an=c(function(e){return ne(e.length,function(){var t=0,n=arguments[0],r=arguments[arguments.length-1],i=I(arguments);return i[0]=function(){var e=n.apply(this,a(arguments,[t,r]));return t+=1,e},e.apply(this,i)})}),sn=u(Wt("all",en,function(e,t){for(var n=0;n<t.length;){if(!e(t[n]))return!1;n+=1}return!0})),cn=u(function(e,t){return Xt("and",e)?e.and(t):e&&t}),un=u(Wt("any",tn,function(e,t){for(var n=0;n<t.length;){if(e(t[n]))return!0;n+=1}return!1})),ln=c(function(e){return qe(2,e)}),fn=c(function(e){return Gt(e,[],[])}),dn=u(function(e,t){if(v(t))return a(e,t);if(Xt("concat",e))return e.concat(t);throw new TypeError("can't concat "+typeof e)}),pn=c(function(e){return ne(e.length,e)}),hn=u(Wt("dropWhile",rn,function(e,t){for(var n=0,r=t.length;r>n&&e(t[n]);)n+=1;return I(t,n)})),gn=u(function(e,t){return Xt("equals",e)?e.equals(t):Xt("equals",t)?t.equals(e):Yt(e,t,[],[])}),mn=u(Wt("filter",N,d)),vn=u(Wt("find",D,function(e,t){for(var n=0,r=t.length;r>n;){if(e(t[n]))return t[n];n+=1}})),yn=u(Wt("findIndex",R,function(e,t){for(var n=0,r=t.length;r>n;){if(e(t[n]))return n;n+=1}return-1})),bn=u(Wt("findLast",j,function(e,t){for(var n=t.length-1;n>=0;){if(e(t[n]))return t[n];n-=1}})),wn=u(Wt("findLastIndex",$,function(e,t){for(var n=t.length-1;n>=0;){if(e(t[n]))return n;n-=1}return-1})),Sn=c(Zt(!0)),Cn=c(function(e){return pn(function(t,n){var r=I(arguments);return r[0]=n,r[1]=t,e.apply(this,r)})}),_n=u(Ht("forEach",function(e,t){for(var n=t.length,r=0;n>r;)e(t[r]),r+=1;return t})),En=c(h(ke)),Tn=c(h(xe)),An=u(Wt("groupBy",on,function(e,t){return Qt(function(t,n){var r=e(n);return t[r]=q(n,t[r]||(t[r]=[])),t},{},t)})),In=Ke(0),kn=l(function(e,t,n){for(var r=[],i=0;i<t.length;)s(e,t[i],n)&&(r[r.length]=t[i]),i+=1;return Dt(e,r)}),xn=u(Ht("intersperse",function(e,t){for(var n=[],r=0,i=t.length;i>r;)r===i-1?n.push(t[r]):n.push(t[r],e),r+=1;return n})),Bn=l(function(e,t,n){return S(e)?Qt(t(e),e["@@transducer/init"](),n):Qt(t(Jt(e)),e,n)}),Nn=c(function(e){for(var t=ke(e),n=t.length,r=0,i={};n>r;){var o=t[r],a=e[o],s=g(a,i)?i[a]:i[a]=[];s[s.length]=o,r+=1}return i}),Dn=c(function(e){for(var t=ke(e),n=t.length,r=0,i={};n>r;){var o=t[r];i[e[o]]=o,r+=1}return i}),Rn=Ke(-1),jn=u(function(e,t){if(Xt("lastIndexOf",t))return t.lastIndexOf(e);for(var n=t.length-1;n>=0;){if(gn(t[n],e))return n;n-=1}return-1}),$n=u(Wt("map",L,C)),Ln=u(function(e,t){return Qt(function(n,r){return n[r]=e(t[r]),n},{},ke(t))}),Mn=u(function(e,t){return Qt(function(n,r){return n[r]=e(t[r],r,t),n},{},ke(t))}),On=u(o(Wt("any",tn,un))),Pn=u(function(e,t){return Xt("or",e)?e.or(t):e||t}),Un=pn(Kt(a)),Fn=pn(Kt(Cn(a))),Vn=u(function(e,t){return Qt(function(t,n){var r=t[e(n)?0:1];return r[r.length]=n,t},[[],[]],t)}),zn=l(function(e,t,n){return gn(et(e,n),t)}),qn=u(function(e,t){return $n(ot(e),t)}),Hn=l(function(e,t,n){return st(gn(t),e,n)}),Gn=l(function(e,t,n){return st(Ee(e),t,n)}),Kn=l(Qt),Wn=u(function(e,t){return mn(o(e),t)}),Yn=u(function(e,t){return _t(V(e),t)}),Xn=l(Ht("slice",function(e,t,n){return Array.prototype.slice.call(n,e,t)})),Zn=u(function(e,t){if(0>=e)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<t.length;)n.push(Xn(r,r+=e,t));return n}),Qn=Kn(U,0),Jn=Ht("tail",Xn(1,1/0)),er=u(Wt("take",M,function(e,t){return Xn(0,0>e?1/0:e,t)})),tr=u(Wt("takeWhile",O,function(e,t){for(var n=0,r=t.length;r>n&&e(t[n]);)n+=1;return I(t,0,n)})),nr=ne(4,function(e,t,n,r){return Qt(e("function"==typeof t?P(t):t),n,r)}),rr=l(function(e,t,n){return Dt(e,a(t,n))}),ir=Dt(gn),or=c(Zt(!1)),ar=pn(function(e){var t=I(arguments,1),n=t.length;return pn(r(n,function(){for(var r=[],i=0;n>i;)r[i]=t[i](arguments[i]),i+=1;return e.apply(this,r.concat(I(arguments,n)))}))}),sr=u(function(e,t){return Mt(Ln(gn,e),t)}),cr=function(){var e=function(e){return{"@@transducer/init":B.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){var r=e["@@transducer/step"](t,n);return r["@@transducer/reduced"]?p(r):r}}};return function(t){var n=e(t);return{"@@transducer/init":B.init,"@@transducer/result":function(e){return n["@@transducer/result"](e)},"@@transducer/step":function(e,t){return Te(t)?Qt(n,e,t):Qt(n,e,[t])}}}}(),ur=function(e,t,n){for(var r=n;r<e.length;){if(gn(e[r],t))return r;r+=1}return-1},lr=function(e){return function(t){var n=function(){var n=arguments;return e(function(e){return e.apply(null,n)},t)};return arguments.length>1?n.apply(null,I(arguments,1)):r(Math.max.apply(Math,qn("length",t)),n)}},fr=u(function(e,t){return $n(e,cr(t))}),dr=c(lr(sn)),pr=c(lr(un)),hr=u(function(e,t){return Xt("ap",e)?e.ap(t):Qt(function(e,n){return a(e,$n(n,t))},[],e)}),gr=pn(function(e){return e.apply(this,I(arguments,1))}),mr=u(Wt("chain",fr,function(e,t){return or($n(e,t))})),vr=l(function(e,t,n){function r(t,n){return hr($n(q,e(n)),t)}return Qt(r,t([]),n)}),yr=u(function(e,t){if(e>10)throw new Error("Constructor with greater than ten arguments");return 0===e?function(){return new t}:pn(qe(e,function(e,n,r,i,o,a,s,c,u,l){switch(arguments.length){case 1:return new t(e);case 2:return new t(e,n);case 3:return new t(e,n,r);case 4:return new t(e,n,r,i);case 5:return new t(e,n,r,i,o);case 6:return new t(e,n,r,i,o,a);case 7:return new t(e,n,r,i,o,a,s);case 8:return new t(e,n,r,i,o,a,s,c);case 9:return new t(e,n,r,i,o,a,s,c,u);case 10:return new t(e,n,r,i,o,a,s,c,u,l)}}))}),br=ne(3,function(e){var t=I(arguments,1);return ne(Math.max.apply(Math,qn("length",t)),function(){var n=arguments,r=this;return e.apply(r,C(function(e){return e.apply(r,n)},t))})}),wr=u(Wt("drop",nn,function(e,t){return Xn(Math.max(0,e),1/0,t)})),Sr=u(function(e,t){return er(e<t.length?t.length-e:0,t)}),Cr=u(Wt("dropRepeatsWith",x,function(e,t){var n=[],r=1,i=t.length;if(0!==i)for(n[0]=t[0];i>r;)e(Rn(n),t[r])||(n[n.length]=t[r]),r+=1;return n})),_r=l(function(e,t,n){return gn(t[e],n[e])}),Er=u(function(e,t){return Xt("indexOf",t)?t.indexOf(e):ur(t,e,0)}),Tr=Xn(0,-1),Ar=c(function(e){for(var t=e.length,n=0;t>n;){if(ur(e,e[n],n+1)>=0)return!1;n+=1}return!0}),Ir=u(function(e,t){return function(n){return function(r){return $n(function(e){return t(e,r)},n(e(r)))}}}),kr=c(function(e){return Ir(Ke(e),Rt(e))}),xr=c(function(e){return Ir(ot(e),G(e))}),Br=u(function(e,t){var n=ne(e,t);return ne(e,function(){return Qt(hr,$n(n,arguments[0]),I(arguments,1))})}),Nr=c(function(e){return Qn(e)/e.length}),Dr=c(function(e){var t=e.length;if(0===t)return NaN;var n=2-t%2,r=(t-n)/2;return Nr(I(e).sort(function(e,t){return t>e?-1:e>t?1:0}).slice(r,r+n))}),Rr=c(function(e){return Kn(Pe,{},e)}),jr=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return ne(arguments[0].length,Kn(_,arguments[0],Jn(arguments)))},$r=function(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return ne(arguments[0].length,Kn(E,arguments[0],Jn(arguments)))},Lr=Kn(ze,1),Mr=ar(C,nt,be),Or=u(function(e,t){return wr(e>=0?t.length-e:0,t)}),Pr=function(e,t){return ur(t,e,0)>=0},Ur=function mi(e,t){var n=function(n){var r=t.concat([e]);return Pr(n,r)?"<Circular>":mi(n,r)},r=function(e,t){return C(function(t){return T(t)+": "+n(e[t])},t.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+C(n,e).join(", ")+"))";case"[object Array]":return"["+C(n,e).concat(r(e,Wn(Ct(/^\d+$/),ke(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+n(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+T(k(e))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+n(e.valueOf())+")":1/e===-(1/0)?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+n(e.valueOf())+")":T(e);case"[object Undefined]":return"undefined";default:return"function"==typeof e.constructor&&"Object"!==e.constructor.name&&"function"==typeof e.toString&&"[object Object]"!==e.toString()?e.toString():"{"+r(e,ke(e)).join(", ")+"}"}},Fr=vr(be),Vr=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return jr.apply(this,ht(arguments))},zr=function(){return 0===arguments.length?be:Vr.apply(this,$n(mr,arguments))},qr=function(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return $r.apply(this,ht(arguments))},Hr=c(function(e){return yr(e.length,e)}),Gr=u(Pr),Kr=u(function(e,t){for(var n=[],r=0,i=e.length;i>r;)Pr(e[r],t)||Pr(e[r],n)||(n[n.length]=e[r]),r+=1;return n}),Wr=c(Wt("dropRepeats",x(gn),Cr(gn))),Yr=u(function(e,t){return ir(d(Cn(Pr)(e),t))}),Xr=c(function(e){return Br(e.length,e)}),Zr=u(function(e,t){var n={};for(var r in t)Pr(r,e)||(n[r]=t[r]);return n}),Qr=function(){return zr.apply(this,ht(arguments))},Jr=c(function(e){return Ur(e,[])}),ei=u(Vr(ir,a)),ti=u(function(e,t){for(var n,r,i=0,o=[],a=[];i<t.length;)r=t[i],n=e(r),Pr(n,o)||(a.push(r),o.push(n)),i+=1;return a}),ni=u(function(e,t){return ne(e+1,function(){var n=arguments[e];if(null!=n&&Ee(Function,n[t]))return n[t].apply(n,I(arguments,0,e));throw new TypeError(Jr(n)+' does not have a method named "'+t+'"')})}),ri=ni(1,"join"),ii=c(function(e){var t={};return function(){var n=Jr(arguments);return g(n,t)||(t[n]=e.apply(this,arguments)),t[n]}}),oi=ni(1,"split"),ai=ni(0,"toLowerCase"),si=ni(0,"toUpperCase"),ci={F:zt,T:qt,__:e,add:U,addIndex:an,adjust:F,all:sn,allPass:dr,always:V,and:cn,any:un,anyPass:pr,ap:hr,aperture:z,append:q,apply:H,assoc:G,assocPath:K,binary:ln,bind:W,both:Y,call:gr,chain:mr,clone:fn,commute:Fr,commuteMap:vr,comparator:X,complement:Z,compose:Vr,composeK:zr,composeP:qr,concat:dn,cond:Q,construct:Hr,constructN:yr,contains:Gr,containsWith:J,converge:br,countBy:ee,createMapEntry:te,curry:pn,curryN:ne,dec:re,defaultTo:ie,difference:Kr,differenceWith:oe,dissoc:ae,dissocPath:se,divide:ce,drop:wr,dropLast:Sr,dropLastWhile:ue,dropRepeats:Wr,dropRepeatsWith:Cr,dropWhile:hn,either:le,empty:fe,eqProps:_r,equals:gn,evolve:de,filter:mn,find:vn,findIndex:yn,findLast:bn,findLastIndex:wn,flatten:Sn,flip:Cn,forEach:_n,fromPairs:pe,functions:En,functionsIn:Tn,groupBy:An,gt:he,gte:ge,has:me,hasIn:ve,head:In,identical:ye,identity:be,ifElse:we,inc:Se,indexOf:Er,init:Tr,insert:Ce,insertAll:_e,intersection:Yr,intersectionWith:kn,intersperse:xn,into:Bn,invert:Nn,invertObj:Dn,invoker:ni,is:Ee,isArrayLike:Te,isEmpty:Ae,isNil:Ie,isSet:Ar,join:ri,keys:ke,keysIn:xe,last:Rn,lastIndexOf:jn,length:Be,lens:Ir,lensIndex:kr,lensProp:xr,lift:Xr,liftN:Br,lt:Ne,lte:De,map:$n,mapAccum:Re,mapAccumRight:je,mapObj:Ln,mapObjIndexed:Mn,match:$e,mathMod:Le,max:Me,maxBy:Oe,mean:Nr,median:Dr,memoize:ii,merge:Pe,mergeAll:Rr,min:Ue,minBy:Fe,modulo:Ve,multiply:ze,nAry:qe,negate:He,none:On,not:Ge,nth:Ke,nthArg:We,nthChar:Ye,nthCharCode:Xe,of:Ze,omit:Zr,once:Qe,or:Pn,over:Je,partial:Un,partialRight:Fn,partition:Vn,path:et,pathEq:zn,pick:tt,pickAll:nt,pickBy:rt,pipe:jr,pipeK:Qr,pipeP:$r,pluck:qn,prepend:it,product:Lr,project:Mr,prop:ot,propEq:Hn,propIs:Gn,propOr:at,propSatisfies:st,props:ct,range:ut,reduce:Kn,reduceRight:lt,reduced:ft,reject:Wn,remove:dt,repeat:Yn,replace:pt,reverse:ht,scan:gt,set:mt,slice:Xn,sort:vt,sortBy:yt,split:oi,splitEvery:Zn,subtract:bt,sum:Qn,tail:Jn,take:er,takeLast:Or,takeLastWhile:wt,takeWhile:tr,tap:St,test:Ct,times:_t,toLower:ai,toPairs:Et,toPairsIn:Tt,toString:Jr,toUpper:si,transduce:nr,trim:At,type:It,unapply:kt,unary:xt,uncurryN:Bt,unfold:Nt,union:ei,unionWith:rr,uniq:ir,uniqBy:ti,uniqWith:Dt,unnest:or,update:Rt,useWith:ar,values:jt,valuesIn:$t,view:Lt,where:Mt,whereEq:sr,wrap:Ot,xprod:Pt,zip:Ut,zipObj:Ft,zipWith:Vt};"object"==typeof t?n.exports=ci:"function"==typeof define&&define.amd?define(function(){return ci}):this.R=ci}).call(this)}(e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:baobab@2.0.0-rc1/dist/baobab",["npm:emmett@3.1.1","npm:baobab@2.0.0-rc1/dist/cursor","npm:baobab@2.0.0-rc1/dist/watcher","npm:baobab@2.0.0-rc1/dist/facet","npm:baobab@2.0.0-rc1/dist/type","npm:baobab@2.0.0-rc1/dist/update","npm:baobab@2.0.0-rc1/dist/helpers"],!0,function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return"/"+e.map(function(e){return C["default"]["function"](e)||C["default"].object(e)?"#"+T.uniqid()+"#":e}).join("/")}var c=this,u=c.define;c.define=void 0,Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;s=u=c=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return void 0;e=u,t=o,n=a,r=!0}},p=e("npm:emmett@3.1.1"),h=r(p),g=e("npm:baobab@2.0.0-rc1/dist/cursor"),m=r(g),v=e("npm:baobab@2.0.0-rc1/dist/watcher"),y=r(v),b=e("npm:baobab@2.0.0-rc1/dist/facet"),w=r(b),S=e("npm:baobab@2.0.0-rc1/dist/type"),C=r(S),_=e("npm:baobab@2.0.0-rc1/dist/update"),E=r(_),T=e("npm:baobab@2.0.0-rc1/dist/helpers"),A={autoCommit:!0,asynchronous:!0,immutable:!0,persistent:!0,pure:!0,validate:null,validationBehavior:"rollback"},I=function(e){function t(e,n){var r=this;if(o(this,t),d(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),arguments.length<1&&(e={}),!C["default"].object(e)&&!C["default"].array(e))throw T.makeError("Baobab: invalid data.",{data:e});this.options=T.shallowMerge({},A,n),this.options.persistent||(this.options.immutable=!1),this._identity="[object Baobab]",this._cursors={},this._future=null,this._transaction=[],this._affectedPathsIndex={},this._facets={},this._previousData=null,this._data=e,this.root=this.select(),this.options.immutable&&T.deepFreeze(this._data);var i=function(e){r[e]=function(){var t=this.root[e].apply(this.root,arguments);return t instanceof m["default"]?this:t}};["apply","concat","exists","get","push","merge","project","serialize","set","splice","unset","unshift"].forEach(i),this._initializeComputedDataIndex()}return a(t,e),f(t,[{key:"_initializeComputedDataIndex",value:function(){var e=this,t=function n(t){var r=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];if(C["default"].object(t)){var o=void 0;for(o in t)if("$"===o[0]){var a=new w["default"](e,r.concat(o),t[o]);T.deepMerge(e._facets,T.pathObject(r,i({},o,a)))}else n(t[o],r.concat(o))}};return t(this._data)}},{key:"select",value:function(e){if(e=e||[],arguments.length>1&&(e=T.arrayFrom(arguments)),!C["default"].path(e))throw T.makeError("Baobab.select: invalid path.",{path:e});e=[].concat(e);var t=s(e),n=this._cursors[t];return n||(n=new m["default"](this,e,t),this._cursors[t]=n),this.emit("select",{path:e,cursor:n}),n}},{key:"update",value:function(e,t){var n=this;if(e=T.coercePath(e),!C["default"].operationType(t.type))throw T.makeError('Baobab.update: unknown operation type "'+t.type+'".',{operation:t});var r=T.getIn(this._data,e),i=r.solvedPath,o=r.exists;if(!i)throw T.makeError("Baobab.update: could not solve the given path.",{path:i});if("unset"!==t.type||o){this._transaction.length||(this._previousData=this.get());var a=s(i),c=E["default"](this._data,i,t,this.options),u=c.data,f=c.node;return this._data=u,this._affectedPathsIndex[a]=!0,this._transaction.push(l({},t,{path:i})),this.emit("write",{path:i}),this.options.autoCommit?this.options.asynchronous?(this._future||(this._future=setTimeout(function(){return n.commit()},0)),f):(this.commit(),f):f}}},{key:"commit",value:function(){this._future&&(this._future=clearTimeout(this._future));var e=Object.keys(this._affectedPathsIndex).map(function(e){return"/"!==e?e.split("/").slice(1):[]}),t=this.options,n=t.validate,r=t.validationBehavior;if("function"==typeof n){var i=n.call(this,this._previousData,this._data,e);if(i instanceof Error&&(this.emit("invalid",{error:i}),"rollback"===r))return this._data=this._previousData,this._affectedPathsIndex={},this._transaction=[],this._previousData=this._data,this}var o=this._transaction,a=this._previousData;return this._affectedPathsIndex={},this._transaction=[],this._previousData=this._data,this.emit("update",{paths:e,currentData:this._data,transaction:o,previousData:a}),this}},{key:"watch",value:function(e){return new y["default"](this,e)}},{key:"release",value:function(){var e=void 0;delete this._data,delete this._previousData,delete this._transaction,delete this._affectedPathsIndex,delete this._facets;for(e in this._cursors)this._cursors[e].release();delete this._cursors,this.kill()}},{key:"toJSON",value:function(){return this.serialize()}},{key:"toString",value:function(){return this._identity}}]),t}(h["default"]);return t["default"]=I,Object.defineProperty(I,"version",{value:"2.0.0-rc1"}),I.Cursor=m["default"],t["default"]=I,n.exports=t["default"],c.define=u,n.exports}),System.registerDynamic("app.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-nav-bar class="bar-positive">\n  <ion-nav-back-button class="button-clear">\n    <!-- <i class="icon ion-ios-arrow-back"></i> Back -->\n  </ion-nav-back-button>\n</ion-nav-bar>\n<ion-nav-view></ion-nav-view>\n',r.define=i,n.exports}),System.registerDynamic("app-menu.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-side-menus enable-menu-with-back-views="false">\n  <ion-side-menu side="left" expose-aside-when="large">\n    <toc-conversations-menu></toc-conversations-menu>\n  </ion-side-menu>\n  <ion-side-menu-content>\n    <ion-nav-bar class="bar-positive">\n      <ion-nav-back-button class="button-clear">\n        <!-- <i class="icon ion-ios-arrow-back"></i> Back -->\n      </ion-nav-back-button>\n      <ion-nav-buttons side="left">\n        <button menu-toggle="left"\n          class="button button-icon button-clear ion-ios-chatbubble-outline">\n          <span class="toc-notification-badge"\n            ng-if="appView.notificationCount !== 0">\n            {{appView.notificationCount}}\n          </span>\n        </button>\n      </ion-nav-buttons>\n      <ion-nav-buttons side="right">\n        <button menu-toggle="right"\n          class="button button-icon button-clear ion-navicon">\n        </button>\n      </ion-nav-buttons>\n    </ion-nav-bar>\n    <toc-notification-overlay></toc-notification-overlay>\n    <ion-nav-view></ion-nav-view>\n  </ion-side-menu-content>\n  <ion-side-menu side="right">\n    <toc-options-menu></toc-options-menu>\n  </ion-side-menu>\n</ion-side-menus>\n',r.define=i,n.exports}),System.registerDynamic("components/update-profile-modal/update-profile-modal.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-modal-view>\n  <form name="tocUpdateProfileForm" id="toc-update-profile-form"\n    ng-submit="updateProfileModal.updateProfile(tocUpdateProfileForm)"\n    novalidate>\n  <ion-header-bar class="bar-royal">\n    <h1 class="title">Update Profile</h1>\n  </ion-header-bar>\n  <ion-content class="has-subfooter">\n    <div class="list">\n      <div class="item item-divider item-calm item-clear">\n        What would you like to change?\n      </div>\n      <div class="item item-avatar">\n        <img alt="New avatar" ng-src="{{updateProfileModal.getNewAvatar()}}" />\n        <h2>{{updateProfileModal.userInfo.displayName || \'Anonymous\'}}</h2>\n        <p>Your new user card</p>\n      </div>\n      <div class="item item-input item-stacked-label">\n        <span class="input-label">Your name</span>\n        <input type="text" ng-model="updateProfileModal.userInfo.displayName"\n          form="toc-update-profile-form"\n          placeholder="Your friends will see this in their contact lists">\n      </div>\n      <div class="item item-input item-stacked-label">\n        <span class="input-label">Your email</span>\n        <input type="email" ng-model="updateProfileModal.userInfo.email"\n          form="toc-update-profile-form"\n          placeholder="Your avatar will be generated from this email"\n          ng-model-options="{\n            updateOn: \'default blur\',\n            debounce: { default: 1000, blur: 0}\n          }">\n      </div>\n    </div>\n  </ion-content>\n  <div class="bar bar-subfooter">\n    <div class="col">\n      <a onclick="window.open(\'https://www.libravatar.org/\', \'_system\');"\n        class="button button-outline button-block button-royal">\n        Change your email avatar\n      </a>\n    </div>\n  </div>\n  <ion-footer-bar>\n    <div class="col">\n      <button type="button"\n        class="button button-block button-outline button-calm"\n        ng-click="::updateProfileModal.removeModal()">\n        Cancel\n      </button>\n    </div>\n    <div class="col">\n      <button type="submit" form="toc-update-profile-form"\n        class="button button-block button-outline button-balanced">\n        Update\n      </button>\n    </div>\n  </ion-footer-bar>\n  </form>\n</ion-modal-view>\n',r.define=i,n.exports}),System.registerDynamic("components/begin-conversation-modal/begin-conversation-modal.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-modal-view>\n  <ion-header-bar class="bar-royal">\n    <h1 class="title">Start a Conversation</h1>\n  </ion-header-bar>\n  <ion-content class="has-subfooter">\n    <div class="list">\n      <div class="item item-divider item-calm item-clear">\n        How would you like to start?\n      </div>\n      <ion-radio class="item-icon-left"\n        ng-repeat="(id, inviteMethod) in ::beginConversationModal.inviteMethods\n          track by id"\n        ng-model="beginConversationModal.inviteMethod"\n        ng-value="::id" ng-if="::inviteMethod.isEnabled">\n        <i class="icon" ng-class="::inviteMethod.icon"></i>\n        {{::inviteMethod.text}}\n      </ion-radio>\n    </div>\n  </ion-content>\n  <div class="bar bar-subfooter">\n    <div class="col">\n      <button type="button" ng-click="::beginConversationModal.showIdPopup()"\n        class="button button-outline button-block button-royal">\n        Show your ID\n      </button>\n    </div>\n  </div>\n  <ion-footer-bar>\n    <div class="col">\n      <button class="button button-block button-outline button-calm"\n        ng-click="::beginConversationModal.removeModal()">\n        Cancel\n      </button>\n    </div>\n    <div class="col">\n      <button class="button button-block button-outline button-balanced"\n        ng-click="::beginConversationModal.doInvite()">\n        Start\n      </button>\n    </div>\n  </ion-footer-bar>\n</ion-modal-view>\n',r.define=i,n.exports}),System.registerDynamic("components/password-prompt-modal/password-prompt-modal.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-modal-view>\n  <form name="tocPasswordPromptForm" id="toc-password-prompt-form"\n    ng-submit="passwordPromptModal.begin(tocPasswordPromptForm)" novalidate>\n  <ion-header-bar class="bar-royal">\n    <h1 class="title">\n      {{\n        passwordPromptModal.userExists ?\n          \'Welcome Back to Toc Messenger!\' :\n          \'Welcome to Toc Messenger!\'\n      }}\n    </h1>\n  </ion-header-bar>\n  <ion-content class="has-subfooter">\n    <div class="list">\n      <div class="item item-divider item-calm item-clear">\n        {{\n          passwordPromptModal.userExists ?\n            \'Nice to see you again!\' :\n            \'First time using Toc?\'\n        }}\n      </div>\n      <label class="item item-input item-floating-label">\n        <span class="input-label">\n          Enter your password\n        </span>\n        <input type="password" form="toc-password-prompt-form"\n          placeholder="{{\n            passwordPromptModal.userExists ?\n              \'A password is all you need to continue\' :\n              \'A password is all you need to get started\'\n          }}"\n          ng-model="passwordPromptModal.password" toc-auto-focus required>\n      </label>\n      <label class="item item-input item-floating-label"\n        ng-if="!passwordPromptModal.userExists">\n        <span class="input-label">\n          Verify your password\n        </span>\n        <input type="password" form="toc-password-prompt-form"\n          placeholder="Enter it one more time, just in case"\n          toc-equal-to="passwordPromptModal.password"\n          ng-model="passwordPromptModal.passwordConfirm" required>\n      </label>\n      <ion-toggle ng-model="passwordPromptModal.staySignedIn"\n        form="toc-password-prompt-form"\n        toggle-class="toggle-calm" class="toc-stay-signed-in-toggle">\n        Remain signed in next time?\n        <span class="item-note">\n          {{\n            passwordPromptModal.staySignedIn ?\n              \'We\\\'ll remember you until you sign out\' :\n              \'We\\\'ll ask for your password again\'\n          }}\n        </span>\n      </ion-toggle>\n      <!-- <div class="item item-divider item-calm item-clear">\n        What do we do with your data?\n      </div>\n      <div class="item">\n        Well... ( _)>-\n      </div>\n      <div class="item item-icon-right">\n        <i class="icon ion-cash"></i>\n        We turn it into cold, hard cash.\n      </div>\n      <div class="item">\n        (_)\n      </div> -->\n    </div>\n    <!-- <div class="padding">\n      <button type="button"\n        class="button button-block button-calm button-outline">\n        Get Toc for other platforms\n      </button>\n    </div> -->\n    <!-- <div class="padding">\n      <button type="button"\n        class="button button-block button-calm button-outline">\n        How do we use your data?\n      </button>\n    </div> -->\n  </ion-content>\n  <div class="bar bar-subfooter">\n    <div class="col">\n      <button type="button"\n        ng-click="passwordPromptModal.showCloudConnectModal()"\n        class="button button-outline button-block button-royal">\n        <!-- TODO: connect to different account if already connected -->\n        {{\n          passwordPromptModal.userExists ?\n            \'Use this account on other devices?\' :\n            \'Already have a Toc account?\'\n        }}\n        <!-- modal title: let\'s get you connected! -->\n      </button>\n    </div>\n  </div>\n  <ion-footer-bar>\n    <div class="col">\n      <button type="submit" form="toc-password-prompt-form"\n        class="button button-block button-outline button-balanced">\n        {{\n          passwordPromptModal.userExists ?\n            \'Let\\\'s continue!\' :\n            \'Let\\\'s get started!\'\n        }}\n      </button>\n    </div>\n  </ion-footer-bar>\n  </form>\n</ion-modal-view>\n',
r.define=i,n.exports}),System.registerDynamic("components/channel-card/channel-card.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<div class="toc-channel-card item item-avatar" ng-class="{\n    \'toc-channel-pending\': channelCard.contact.statusId === -1\n  }">\n  <img class="toc-channel-card-avatar"\n    ng-src="{{channelCard.getAvatar(channelCard.contact.userInfo)}}">\n  </img>\n  <div class="toc-channel-card-status-indicator"\n    ng-class="channelCard.status">\n  </div>\n  <h2>{{channelCard.contact.userInfo.displayName || \'Anonymous\'}}</h2>\n  <p class="toc-channel-card-quote" ng-class="{\n      \'toc-channel-card-quote-unread\': channelCard.channel.unreadMessageId\n    }">\n    {{channelCard.quote}}\n  </p>\n</div>\n',r.define=i,n.exports}),System.registerDynamic("components/channel-list/channel-list.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-list>\n  <toc-channel-card channel-id="{{::id}}"\n    ng-repeat="(id, channel) in channelList.channels track by id"\n    ng-class="{\'toc-active-view\': channelList.viewId === id}"\n    ng-click="channelList.handleClick(channel)" menu-close>\n  </toc-channel-card>\n</ion-list>\n',r.define=i,n.exports}),System.registerDynamic("components/message-list/message-list.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<div class="toc-message-list list">\n  <div class="toc-message item item-avatar"\n    ng-repeat="message in messageList.messages track by message.messageInfo.id"\n    ng-class="{\n      \'toc-message-avatar\': messageList.isSenderSeparator(message),\n      \'toc-message-simple\': !messageList.isSenderSeparator(message),\n      \'toc-message-user\': messageList.isByUser(message),\n      \'toc-message-contact\': !messageList.isByUser(message)\n    }">\n    <img ng-src="{{messageList.getAvatar(message)}}"\n      alt="Avatar for {{messageList.getUserInfo(message).email}}"\n      ng-if="messageList.isSenderSeparator(message)" />\n    <div ng-if="messageList.isUnread(message)"\n      class="toc-message-unread">\n      <div class="toc-message-unread-marker">\n      </div>\n    </div>\n    <div ng-if="messageList.isDateSeparator(message)"\n      class="toc-message-datestamp" toc-auto-select>\n      {{::messageList.getDatestamp(message)}}\n    </div>\n    <h2 toc-auto-select>\n      {{messageList.getUserInfo(message).displayName || \'Anonymous\'}}\n    </h2>\n    <p class="toc-message-content" toc-auto-select>\n      {{::message.messageInfo.content}}\n    </p>\n    <div ng-if="messageList.isMinuteSeparator(message)"\n      ng-hide="messageList.isMessageSending(message)"\n      class="toc-message-timestamp" toc-auto-select>\n      {{::messageList.getTimestamp(message)}}\n    </div>\n    <div class="toc-message-sending-indicator"\n      ng-if="messageList.isMessageSending(message)">\n      ...\n    </div>\n  </div>\n</div>\n',r.define=i,n.exports}),System.registerDynamic("components/notification-card/notification-card.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-slide-box class="toc-notification-card-slidebox"\n  delegate-handle="{{::notificationCard.notificationId}}" show-pager="false"\n  active-slide="1" on-slide-changed="notificationCard.swipe()">\n  <ion-slide>\n    <div class="toc-notification-card-swiped"></div>\n  </ion-slide>\n  <ion-slide>\n    <div class="toc-notification-card item item-avatar"\n      ng-click="notificationCard.click()">\n      <img class="toc-notification-card-icon"\n        ng-src="{{notificationCard.icon}}">\n      </img>\n      <h2>{{notificationCard.title}}</h2>\n      <p class="toc-notification-card-message">\n        {{notificationCard.message}}\n      </p>\n    </div>\n  </ion-slide>\n  <ion-slide>\n    <div class="toc-notification-card-swiped"></div>\n  </ion-slide>\n</ion-slide-box>\n',r.define=i,n.exports}),System.registerDynamic("components/notification-list/notification-list.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<div class="toc-notification-list list">\n  <div class="toc-notification-list-item"\n    ng-repeat="notification in notificationList.notifications track by notification.notificationInfo.id">\n    <toc-notification-card\n      notification-id="{{::notification.notificationInfo.id}}">\n    </toc-notification-card>\n  </div>\n</div>\n',r.define=i,n.exports}),System.registerDynamic("components/notification-overlay/notification-overlay.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<div class="bar bar-subheader toc-notification-overlay"\n  ng-if="notificationOverlay.showNotificationOverlay">\n  <toc-notification-card\n    notification-id="{{notificationOverlay.activeNotificationId}}"\n    class="toc-notification-overlay-card">\n  </toc-notification-card>\n</div>\n',r.define=i,n.exports}),System.registerDynamic("components/system-message-overlay/system-message-overlay.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<div class="toc-system-message-overlay-container">\n  <div class="toc-system-message-overlay card"\n    ng-show="systemMessageOverlay.showSystemMessage">\n    <div class="item item-text-wrap">\n      <p>{{systemMessageOverlay.message}}</p>\n    </div>\n  </div>\n</div>\n',r.define=i,n.exports}),System.registerDynamic("components/options-menu/options-menu.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-header-bar class="bar-positive">\n  <h1 class="title">Options</h1>\n</ion-header-bar>\n<ion-content>\n  <div class="list">\n    <div class="item">\n      <!-- TODO: add open source licenses here -->\n      About Toc\n    </div>\n    <div class="item">\n      <!-- TODO: renable onboarding procedure here -->\n      Show hints\n    </div>\n    <div class="item" ng-click="optionsMenu.showIdPopup()">\n      Show your ID\n    </div>\n    <div class="item" ng-click="optionsMenu.showCloudConnectModal()">\n      Use this account elsewhere\n    </div>\n    <div class="item" ng-click="optionsMenu.showDeleteDataConfirm()">\n      Clear data from this device\n    </div>\n    <div class="item" ng-click="optionsMenu.showSignoutConfirm()">\n      Sign out\n    </div>\n  </div>\n</ion-content>\n<ion-footer-bar>\n  <div class="col">\n    <button class="button button-block button-outline button-balanced"\n      ng-click="optionsMenu.showBeginConversationModal()">\n      Start a conversation\n    </button>\n  </div>\n</ion-footer-bar>\n',r.define=i,n.exports}),function(){var e=System.get("@@amd-helpers").createDefine();!function(){var e="forge";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return void("undefined"==typeof forge&&(forge={disableNativeCode:!1}));var t=!0;define=function(e,t){t(require,module)}}var n,r=function(t,r){r.exports=function(r){var i=n.map(function(e){return t(e)});if(r=r||{},r.defined=r.defined||{},r.defined[e])return r[e];r.defined[e]=!0;for(var o=0;o<i.length;++o)i[o](r);return r},r.exports.disableNativeCode=!1,r.exports(r.exports)},i=define;define=function(e,r){return n="string"==typeof e?r.slice(2):e.slice(2),t?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/forge",["require","module","npm:node-forge@0.6.34/js/aes","npm:node-forge@0.6.34/js/aesCipherSuites","npm:node-forge@0.6.34/js/asn1","npm:node-forge@0.6.34/js/cipher","npm:node-forge@0.6.34/js/cipherModes","npm:node-forge@0.6.34/js/debug","npm:node-forge@0.6.34/js/des","npm:node-forge@0.6.34/js/hmac","npm:node-forge@0.6.34/js/kem","npm:node-forge@0.6.34/js/log","npm:node-forge@0.6.34/js/md","npm:node-forge@0.6.34/js/mgf1","npm:node-forge@0.6.34/js/pbkdf2","npm:node-forge@0.6.34/js/pem","npm:node-forge@0.6.34/js/pkcs7","npm:node-forge@0.6.34/js/pkcs1","npm:node-forge@0.6.34/js/pkcs12","npm:node-forge@0.6.34/js/pki","npm:node-forge@0.6.34/js/prime","npm:node-forge@0.6.34/js/prng","npm:node-forge@0.6.34/js/pss","npm:node-forge@0.6.34/js/random","npm:node-forge@0.6.34/js/rc2","npm:node-forge@0.6.34/js/ssh","npm:node-forge@0.6.34/js/task","npm:node-forge@0.6.34/js/tls","npm:node-forge@0.6.34/js/util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),System.registerDynamic("components/user-card/user-card.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<div class="toc-user-card item item-avatar"\n  ng-click="userCard.dismissNotifications()">\n  <img ng-src="{{userCard.avatar}}" alt="{{userCard.avatarText}}" />\n  <h2>{{userCard.name}}</h2>\n  <p>\n    {{userCard.message}}\n  </p>\n</div>\n',r.define=i,n.exports}),System.registerDynamic("components/cloud-connect-modal/cloud-connect-modal.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-modal-view>\n  <ion-header-bar class="bar-royal">\n    <h1 class="title">Connect a Cloud Service</h1>\n  </ion-header-bar>\n  <ion-content class="has-subfooter">\n    <div class="list">\n      <div class="item item-divider item-calm item-clear">\n        Where would you like to store your data?\n      </div>\n      <ion-radio class="item item-avatar toc-square-avatar toc-cloud-service-item"\n        ng-repeat="(id, service) in ::cloudConnectModal.services track by id"\n        ng-model="cloudConnectModal.selectedService" ng-value="::id">\n        <img ng-src="assets/images/{{::service.img}}"\n          alt="Icon for {{::service.name}}" />\n        <h2>{{::service.name}}</h2>\n        <p>{{::service.description}}</p>\n      </ion-radio>\n      <!-- <label class="item item-input item-stacked-label">\n        <span class="input-label">Email</span>\n        <input type="password" placeholder="Your remoteStorage.io email."\n          ng-model="cloudConnectModal.email" toc-auto-focus>\n      </label> -->\n    </div>\n    <div class="card">\n      <div class="item item-text-wrap">\n        <p>Your data will stay private even on the cloud.</p>\n        <p>No one can access it without your password.</p>\n      </div>\n    </div>\n  </ion-content>\n  <div class="bar bar-subfooter">\n    <div class="col">\n      <a onclick="window.open(\'https://remotestorage.io/get/\', \'_system\');"\n        class="button button-block button-outline button-royal">\n        Get a storage account\n      </a>\n    </div>\n  </div>\n  <ion-footer-bar>\n    <div class="col">\n      <button class="button button-block button-outline button-calm"\n        ng-click="::cloudConnectModal.removeModal()">\n        Cancel\n      </button>\n    </div>\n    <div class="col">\n      <button class="button button-block button-outline button-balanced"\n        ng-click="::cloudConnectModal.connect()">\n        Connect\n      </button>\n    </div>\n  </ion-footer-bar>\n</ion-modal-view>\n',r.define=i,n.exports}),System.registerDynamic("views/channel/channel.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-view view-title="Toc Messenger">\n  <div class="bar bar-subheader toc-channel-subheader">\n    <toc-channel-card channel-id="{{::channelView.channelId}}"\n      ng-click="channelView.viewLatest()">\n    </toc-channel-card>\n  </div>\n\n  <ion-content class="has-subheader">\n    <toc-message-list channel-id="{{::channelView.channelId}}">\n    </toc-message-list>\n  </ion-content>\n\n  <ion-footer-bar class="toc-message-input-footer"\n    ng-click="channelView.viewLatest()">\n    <toc-message-input-area class="toc-message-input-area"\n      channel-id="{{::channelView.channelId}}">\n    </toc-message-input-area>\n  </ion-footer-bar>\n</ion-view>\n',r.define=i,n.exports}),System.registerDynamic("views/welcome/welcome.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-view view-title="Toc Messenger">\n  <ion-content class="has-subfooter">\n  </ion-content>\n</ion-view>\n',r.define=i,n.exports}),System.registerDynamic("components/message-input-area/message-input-area.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<form class="toc-message-input-form"\n  id="toc-message-input-form-{{::messageInputArea.channelId}}"\n  ng-submit="::messageInputArea.send()" novalidate>\n  <div class="toc-message-input-field-container">\n    <input class="toc-message-input-field" type="text" placeholder="Message"\n      form="toc-message-input-form-{{::messageInputArea.channelId}}"\n      ng-model="messageInputArea.message" ng-trim="false"\n      toc-auto-focus required>\n    </input>\n  </div>\n  <div class="toc-message-input-send-container">\n    <button type="submit"\n      form="toc-message-input-form-{{::messageInputArea.channelId}}"\n      class="button button-block button-outline button-balanced">\n      Send\n    </button>\n  </div>\n</form>\n',r.define=i,n.exports}),System.registerDynamic("github:angular-ui/ui-router@0.2.15",["github:angular-ui/ui-router@0.2.15/angular-ui-router"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("github:angular-ui/ui-router@0.2.15/angular-ui-router"),r.define=i,n.exports}),System.registerDynamic("components/conversations-menu/conversations-menu.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-header-bar class="bar-positive toc-conversations-menu-header">\n  <h1 class="title">Conversations</h1>\n</ion-header-bar>\n<div class="toc-conversations-menu-subheader bar bar-subheader">\n  <toc-user-card\n    ng-class="{\'toc-active-view\': conversationsMenu.viewId === \'home\'}"\n    ng-click="conversationsMenu.goToHome()" menu-close></toc-user-card>\n</div>\n<ion-content class="has-subheader">\n  <toc-channel-list>\n  </toc-channel-list>\n</ion-content>\n<ion-footer-bar>\n  <div class="col">\n    <button class="button button-block button-outline button-balanced"\n      ng-click="conversationsMenu.showBeginConversationModal()">\n      Start a conversation\n    </button>\n  </div>\n</ion-footer-bar>\n',r.define=i,n.exports}),System.registerDynamic("github:angular/bower-angular-sanitize@1.4.5",["github:angular/bower-angular-sanitize@1.4.5/angular-sanitize"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("github:angular/bower-angular-sanitize@1.4.5/angular-sanitize"),r.define=i,n.exports}),System.registerDynamic("github:angular/bower-angular-animate@1.4.5",["github:angular/bower-angular-animate@1.4.5/angular-animate"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("github:angular/bower-angular-animate@1.4.5/angular-animate"),r.define=i,n.exports}),System.registerDynamic("views/home/home.html!github:systemjs/plugin-text@0.0.2",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports='<ion-view view-title="Toc Messenger">\n  <div class="bar bar-subheader">\n    <toc-user-card enable-dismiss-notifications>\n    </toc-user-card>\n  </div>\n  <ion-content class="has-subheader has-subfooter">\n    <toc-notification-list></toc-notification-list>\n  </ion-content>\n  <div class="bar bar-subfooter">\n    <div class="col">\n      <button class="button button-block button-outline button-royal"\n        ng-click="homeView.showUpdateProfileModal()">\n        Update your profile\n      </button>\n    </div>\n  </div>\n  <ion-footer-bar>\n    <div class="col">\n      <button class="button button-block button-outline button-balanced"\n        ng-click="homeView.showBeginConversationModal()">\n        Start a conversation\n      </button>\n    </div>\n  </ion-footer-bar>\n</ion-view>\n',r.define=i,n.exports}),System.registerDynamic("libraries/ionic/ionic-library.js",[],!1,function(e,t,n){var r=System.get("@@global-helpers").prepareGlobal(n.id,null,null);return function(){!function(){function e(e,t,n){t!==!1?F.addEventListener(e,Q[e],n):F.removeEventListener(e,Q[e])}function t(e){var t=b(e.target),r=w(t);if(ionic.tap.requiresNativeClick(r)||H)return!1;var i=ionic.tap.pointerCoord(e);n("click",r,i.x,i.y),p(r)}function n(e,t,n,r){var i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,0,0,n,r,!1,!1,!1,!1,0,null),i.isIonicTap=!0,t.dispatchEvent(i)}function r(e){return"submit"==e.target.type&&0===e.detail?null:ionic.scroll.isScrolling&&ionic.tap.containsOrIsTextInput(e.target)||!e.isIonicTap&&!ionic.tap.requiresNativeClick(e.target)?(e.stopPropagation(),ionic.tap.isLabelWithTextInput(e.target)||e.preventDefault(),!1):void 0}function i(t){return t.isIonicTap||d(t)?null:z?(t.stopPropagation(),ionic.tap.isTextInput(t.target)&&W===t.target||/^(select|option)$/i.test(t.target.tagName)||t.preventDefault(),!1):(H=!1,G=ionic.tap.pointerCoord(t),e("mousemove"),void ionic.activator.start(t))}function o(n){return z?(n.stopPropagation(),n.preventDefault(),!1):d(n)||/^(select|option)$/i.test(n.target.tagName)?!1:(y(n)||t(n),e("mousemove",!1),ionic.activator.end(),void(H=!1))}function a(t){return y(t)?(e("mousemove",!1),ionic.activator.end(),H=!0,!1):void 0}function s(t){if(!d(t)&&(H=!1,f(),G=ionic.tap.pointerCoord(t),e(Y),ionic.activator.start(t),ionic.Platform.isIOS()&&ionic.tap.isLabelWithTextInput(t.target))){var n=w(b(t.target));n!==V&&t.preventDefault()}}function c(e){d(e)||(f(),y(e)||(t(e),/^(select|option)$/i.test(e.target.tagName)&&e.preventDefault()),W=e.target,l())}function u(t){return y(t)?(H=!0,e(Y,!1),ionic.activator.end(),!1):void 0}function l(){e(Y,!1),ionic.activator.end(),H=!1}function f(){z=!0,clearTimeout(q),q=setTimeout(function(){z=!1},600)}function d(e){return e.isTapHandled?!0:(e.isTapHandled=!0,ionic.scroll.isScrolling&&ionic.tap.containsOrIsTextInput(e.target)?(e.preventDefault(),!0):void 0)}function p(e){K=null;var t=!1;"SELECT"==e.tagName?(n("mousedown",e,0,0),e.focus&&e.focus(),t=!0):v()===e?t=!0:/^(input|textarea)$/i.test(e.tagName)||e.isContentEditable?(t=!0,e.focus&&e.focus(),e.value=e.value,z&&(K=e)):h(),t&&(v(e),ionic.trigger("ionic.focusin",{target:e},!0))}function h(){var e=v();e&&(/^(input|textarea|select)$/i.test(e.tagName)||e.isContentEditable)&&e.blur(),v(null)}function g(e){z&&ionic.tap.isTextInput(v())&&ionic.tap.isTextInput(K)&&K!==e.target&&(K.focus(),K=null),ionic.scroll.isScrolling=!1}function m(){v(null)}function v(e){return arguments.length&&(V=e),V||document.activeElement}function y(e){if(!e||1!==e.target.nodeType||!G||0===G.x&&0===G.y)return!1;var t=ionic.tap.pointerCoord(e),n=!(!e.target.classList||!e.target.classList.contains||"function"!=typeof e.target.classList.contains),r=n&&e.target.classList.contains("button")?Z:X;return Math.abs(G.x-t.x)>r||Math.abs(G.y-t.y)>r}function b(e,t){for(var n=e,r=0;6>r&&n;r++){if("LABEL"===n.tagName)return n;n=n.parentElement}return t!==!1?e:void 0}function w(e){if(e&&"LABEL"===e.tagName){if(e.control)return e.control;if(e.querySelector){var t=e.querySelector("input,textarea,select");if(t)return t}}return e}function S(){ionic.keyboard.isInitialized||(M()?(window.addEventListener("native.keyboardshow",le),window.addEventListener("native.keyboardhide",E)):document.body.addEventListener("focusout",E),document.body.addEventListener("ionic.focusin",ue),document.body.addEventListener("focusin",ue),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerDown",S):document.removeEventListener("touchstart",S),ionic.keyboard.isInitialized=!0)}function C(e){clearTimeout(ne),(!ionic.keyboard.isOpen||ionic.keyboard.isClosing)&&(ionic.keyboard.isOpening=!0,ionic.keyboard.isClosing=!1),ionic.keyboard.height=e.keyboardHeight,ae?k(j,!0):k(B,!0)}function _(e){return clearTimeout(ne),e.target&&!e.target.readOnly&&ionic.tap.isKeyboardElement(e.target)&&(ee=ionic.DomUtil.getParentWithClass(e.target,ce))?(J=e.target,ee.classList.contains("overflow-scroll")||(document.body.scrollTop=0,ee.scrollTop=0,ionic.requestAnimationFrame(function(){document.body.scrollTop=0,ee.scrollTop=0}),window.navigator.msPointerEnabled?document.addEventListener("MSPointerMove",I,!1):document.addEventListener("touchmove",I,!1)),(!ionic.keyboard.isOpen||ionic.keyboard.isClosing)&&(ionic.keyboard.isOpening=!0,ionic.keyboard.isClosing=!1),document.addEventListener("keydown",A,!1),void(ionic.keyboard.isOpen||M()?ionic.keyboard.isOpen&&B():k(B,!0))):void(J=null)}function E(){clearTimeout(ne),(ionic.keyboard.isOpen||ionic.keyboard.isOpening)&&(ionic.keyboard.isClosing=!0,ionic.keyboard.isOpening=!1),ne=setTimeout(function(){ionic.requestAnimationFrame(function(){ae?k(function(){j(),x()},!1):k(x,!1)})},50)}function T(){ionic.keyboard.isLandscape=!ionic.keyboard.isLandscape,ionic.Platform.isIOS()&&j(),ionic.Platform.isAndroid()&&(ionic.keyboard.isOpen&&M()?ae=!0:k(j,!1))}function A(e){ionic.scroll.isScrolling&&I(e)}function I(e){"TEXTAREA"!==e.target.tagName&&e.preventDefault()}function k(e,t){clearInterval(te);var n,r=0,i=L(),o=i;return n=ionic.Platform.isAndroid()&&ionic.Platform.version()<4.4?30:ionic.Platform.isAndroid()?10:1,te=setInterval(function(){o=L(),(!(++r<n)||(D(o)||R(o))&&ionic.keyboard.height)&&(M()||(ionic.keyboard.height=Math.abs(i-window.innerHeight)),ionic.keyboard.isOpen=t,clearInterval(te),e())},50),n}function x(){clearTimeout(ne),ionic.keyboard.isOpen=!1,ionic.keyboard.isClosing=!1,J&&ionic.trigger("resetScrollView",{target:J},!0),ionic.requestAnimationFrame(function(){document.body.classList.remove(se)}),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerMove",I):document.removeEventListener("touchmove",I),document.removeEventListener("keydown",A),ionic.Platform.isAndroid()&&(M()&&cordova.plugins.Keyboard.close(),J&&J.blur()),J=null}function B(){ionic.keyboard.isOpen=!0,ionic.keyboard.isOpening=!1;var e={keyboardHeight:N(),viewportHeight:re};if(J){e.target=J;var t=J.getBoundingClientRect();e.elementTop=Math.round(t.top),e.elementBottom=Math.round(t.bottom),e.windowHeight=e.viewportHeight-e.keyboardHeight,e.isElementUnderKeyboard=e.elementBottom>e.windowHeight,ionic.trigger("scrollChildIntoView",e,!0)}return setTimeout(function(){document.body.classList.add(se)},400),e}function N(){if(ionic.keyboard.height)return ionic.keyboard.height;if(ionic.Platform.isAndroid()){if(ionic.Platform.isFullScreen)return 275;var e=window.innerHeight;return re>e?re-e:0}return ionic.Platform.isIOS()?ionic.keyboard.isLandscape?206:ionic.Platform.isWebView()?260:216:275}function D(e){return!!(!ionic.keyboard.isLandscape&&ie&&Math.abs(ie-e)<2)}function R(e){return!!(ionic.keyboard.isLandscape&&oe&&Math.abs(oe-e)<2)}function j(){ae=!1,re=L(),ionic.keyboard.isLandscape&&!oe?oe=re:ionic.keyboard.isLandscape||ie||(ie=re),J&&ionic.trigger("resetScrollView",{target:J},!0),ionic.keyboard.isOpen&&ionic.tap.isTextInput(J)&&B()}function $(){var e=L();e/window.innerWidth<1&&(ionic.keyboard.isLandscape=!0),re=e,ionic.keyboard.isLandscape&&!oe?oe=re:ionic.keyboard.isLandscape||ie||(ie=re)}function L(){var e=window.innerHeight;return ionic.Platform.isAndroid()&&ionic.Platform.isFullScreen||!ionic.keyboard.isOpen&&!ionic.keyboard.isOpening||ionic.keyboard.isClosing?e:e+N()}function M(){return!!(window.cordova&&cordova.plugins&&cordova.plugins.Keyboard)}function O(){var e;for(e=0;e<document.head.children.length;e++)if("viewport"==document.head.children[e].name){fe=document.head.children[e];break}if(fe){var t,n=fe.content.toLowerCase().replace(/\s+/g,"").split(",");for(e=0;e<n.length;e++)n[e]&&(t=n[e].split("="),de[t[0]]=t.length>1?t[1]:"_");P()}}function P(){var e=de.width,t=de.height,n=ionic.Platform,r=n.version(),i="device-width",o="device-height",a=ionic.viewport.orientation();delete de.height,de.width=i,n.isIPad()?r>7?delete de.width:n.isWebView()?90==a?de.height="0":7==r&&(de.height=o):7>r&&(de.height="0"):n.isIOS()&&(n.isWebView()?r>7?delete de.width:7>r?t&&(de.height="0"):7==r&&(de.height=o):7>r&&t&&(de.height="0")),(e!==de.width||t!==de.height)&&U()}function U(){var e,t=[];for(e in de)de[e]&&t.push(e+("_"==de[e]?"":"="+de[e]));fe.content=t.join(", ")}window.ionic=window.ionic||{},window.ionic.views={},window.ionic.version="1.1.0",function(e){e.DelegateService=function(e){function t(){return!0}if(e.indexOf("$getByHandle")>-1)throw new Error("Method '$getByHandle' is implicitly added to each delegate service. Do not list it as a method.");return["$log",function(n){function r(e,t){this._instances=e,this.handle=t}function i(){this._instances=[]}function o(e){return function(){var t,r=this.handle,i=arguments,o=0;return this._instances.forEach(function(n){if((!r||r==n.$$delegateHandle)&&n.$$filterFn(n)){o++;var a=n[e].apply(n,i);1===o&&(t=a)}}),!o&&r?n.warn('Delegate for handle "'+r+'" could not find a corresponding element with delegate-handle="'+r+'"! '+e+"() was not called!\nPossible cause: If you are calling "+e+'() immediately, and your element with delegate-handle="'+r+'" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to '+e+"() and try again."):t}}return e.forEach(function(e){r.prototype[e]=o(e)}),i.prototype=r.prototype,i.prototype._registerInstance=function(e,n,r){var i=this._instances;return e.$$delegateHandle=n,e.$$filterFn=r||t,i.push(e),function(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}},i.prototype.$getByHandle=function(e){return new r(this._instances,e)},new i}]}}(window.ionic),function(e,t,n){function r(){o=!0;for(var e=0;e<i.length;e++)n.requestAnimationFrame(i[e]);i=[],t.removeEventListener("DOMContentLoaded",r)}var i=[],o="complete"===t.readyState||"interactive"===t.readyState;o||t.addEventListener("DOMContentLoaded",r),e._rAF=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,16)}}();var a=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame;n.DomUtil={requestAnimationFrame:function(t){return e._rAF(t)},cancelAnimationFrame:function(e){a(e)},animationFrameThrottle:function(e){var t,r,i;return function(){t=arguments,i=this,r||(r=!0,n.requestAnimationFrame(function(){e.apply(i,t),r=!1}))}},contains:function(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}},getPositionInParent:function(e){return{left:e.offsetLeft,top:e.offsetTop}},ready:function(e){o?n.requestAnimationFrame(e):i.push(e)},getTextBounds:function(n){if(t.createRange){var r=t.createRange();if(r.selectNodeContents(n),r.getBoundingClientRect){var i=r.getBoundingClientRect();if(i){var o=e.scrollX,a=e.scrollY;return{top:i.top+a,left:i.left+o,right:i.left+o+i.width,bottom:i.top+a+i.height,width:i.width,height:i.height}}}}return null},getChildIndex:function(e,t){if(t)for(var n,r=e.parentNode.children,i=0,o=0,a=r.length;a>i;i++)if(n=r[i],n.nodeName&&n.nodeName.toLowerCase()==t){if(n==e)return o;o++}return Array.prototype.slice.call(e.parentNode.children).indexOf(e)},swapNodes:function(e,t){t.parentNode.insertBefore(e,t)},elementIsDescendant:function(e,t,n){var r=e;do{if(r===t)return!0;r=r.parentNode}while(r&&r!==n);return!1},getParentWithClass:function(e,t,n){for(n=n||10;e.parentNode&&n--;){if(e.parentNode.classList&&e.parentNode.classList.contains(t))return e.parentNode;e=e.parentNode}return null},getParentOrSelfWithClass:function(e,t,n){for(n=n||10;e&&n--;){if(e.classList&&e.classList.contains(t))return e;e=e.parentNode}return null},rectContains:function(e,t,n,r,i,o){return n>e||e>i?!1:r>t||t>o?!1:!0},blurAll:function(){return t.activeElement&&t.activeElement!=t.body?(t.activeElement.blur(),t.activeElement):null},cachedAttr:function(e,t,n){if(e=e&&e.length&&e[0]||e,e&&e.setAttribute){var r="$attr-"+t;return arguments.length>2?e[r]!==n&&(e.setAttribute(t,n),e[r]=n):"undefined"==typeof e[r]&&(e[r]=e.getAttribute(t)),e[r]}},cachedStyles:function(e,t){if(e=e&&e.length&&e[0]||e,e&&e.style)for(var n in t)e["$style-"+n]!==t[n]&&(e.style[n]=e["$style-"+n]=t[n])}},n.requestAnimationFrame=n.DomUtil.requestAnimationFrame,n.cancelAnimationFrame=n.DomUtil.cancelAnimationFrame,n.animationFrameThrottle=n.DomUtil.animationFrameThrottle}(window,document,ionic),function(e){e.CustomEvent=function(){if("function"==typeof window.CustomEvent)return CustomEvent;var e=function(e,t){var n;t=t||{bubbles:!1,cancelable:!1,detail:void 0};try{n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail)}catch(r){n=document.createEvent("Event");for(var i in t)n[i]=t[i];n.initEvent(e,t.bubbles,t.cancelable)}return n};return e.prototype=window.Event.prototype,e}(),e.EventController={VIRTUALIZED_EVENTS:["tap","swipe","swiperight","swipeleft","drag","hold","release"],trigger:function(t,n,r,i){var o=new e.CustomEvent(t,{detail:n,bubbles:!!r,cancelable:!!i});n&&n.target&&n.target.dispatchEvent&&n.target.dispatchEvent(o)||window.dispatchEvent(o)},on:function(t,n,r){for(var i=r||window,o=0,a=this.VIRTUALIZED_EVENTS.length;a>o;o++)if(t==this.VIRTUALIZED_EVENTS[o]){var s=new e.Gesture(r);return s.on(t,n),s}i.addEventListener(t,n)},off:function(e,t,n){n.removeEventListener(e,t)},onGesture:function(t,n,r,i){var o=new e.Gesture(r,i);return o.on(t,n),o},offGesture:function(e,t,n){e&&e.off(t,n)},handlePopState:function(){}},e.on=function(){e.EventController.on.apply(e.EventController,arguments)},e.off=function(){e.EventController.off.apply(e.EventController,arguments)},e.trigger=e.EventController.trigger,e.onGesture=function(){return e.EventController.onGesture.apply(e.EventController.onGesture,arguments)},e.offGesture=function(){return e.EventController.offGesture.apply(e.EventController.offGesture,arguments)}}(window.ionic),function(e){function t(){if(!e.Gestures.READY){e.Gestures.event.determineEventTypes();for(var t in e.Gestures.gestures)e.Gestures.gestures.hasOwnProperty(t)&&e.Gestures.detection.register(e.Gestures.gestures[t]);e.Gestures.event.onTouch(e.Gestures.DOCUMENT,e.Gestures.EVENT_MOVE,e.Gestures.detection.detect),e.Gestures.event.onTouch(e.Gestures.DOCUMENT,e.Gestures.EVENT_END,e.Gestures.detection.detect),e.Gestures.READY=!0}}e.Gesture=function(t,n){return new e.Gestures.Instance(t,n||{})},e.Gestures={},e.Gestures.defaults={stop_browser_behavior:"disable-user-behavior"},e.Gestures.HAS_POINTEREVENTS=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,e.Gestures.HAS_TOUCHEVENTS="ontouchstart"in window,e.Gestures.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,e.Gestures.NO_MOUSEEVENTS=e.Gestures.HAS_TOUCHEVENTS&&window.navigator.userAgent.match(e.Gestures.MOBILE_REGEX),e.Gestures.EVENT_TYPES={},e.Gestures.DIRECTION_DOWN="down",e.Gestures.DIRECTION_LEFT="left",e.Gestures.DIRECTION_UP="up",e.Gestures.DIRECTION_RIGHT="right",e.Gestures.POINTER_MOUSE="mouse",e.Gestures.POINTER_TOUCH="touch",e.Gestures.POINTER_PEN="pen",e.Gestures.EVENT_START="start",e.Gestures.EVENT_MOVE="move",e.Gestures.EVENT_END="end",e.Gestures.DOCUMENT=window.document,e.Gestures.plugins={},e.Gestures.READY=!1,e.Gestures.Instance=function(n,r){var i=this;return null===n?this:(t(),this.element=n,this.enabled=!0,this.options=e.Gestures.utils.extend(e.Gestures.utils.extend({},e.Gestures.defaults),r||{}),this.options.stop_browser_behavior&&e.Gestures.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),e.Gestures.event.onTouch(n,e.Gestures.EVENT_START,function(t){i.enabled&&e.Gestures.detection.startDetect(i,t)}),this)},e.Gestures.Instance.prototype={on:function(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)this.element.addEventListener(n[r],t,!1);return this},off:function(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)this.element.removeEventListener(n[r],t,!1);return this},trigger:function(t,n){var r=e.Gestures.DOCUMENT.createEvent("Event");
r.initEvent(t,!0,!0),r.gesture=n;var i=this.element;return e.Gestures.utils.hasParent(n.target,i)&&(i=n.target),i.dispatchEvent(r),this},enable:function(e){return this.enabled=e,this}};var n=null,r=!1,i=!1;e.Gestures.event={bindDom:function(e,t,n){for(var r=t.split(" "),i=0;i<r.length;i++)e.addEventListener(r[i],n,!1)},onTouch:function(t,o,a){var s=this;this.bindDom(t,e.Gestures.EVENT_TYPES[o],function(c){var u=c.type.toLowerCase();if(!u.match(/mouse/)||!i){u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===c.which?r=!0:u.match(/mouse/)&&1!==c.which&&(r=!1),u.match(/touch|pointer/)&&(i=!0);var l=0;r&&(e.Gestures.HAS_POINTEREVENTS&&o!=e.Gestures.EVENT_END?l=e.Gestures.PointerEvent.updatePointer(o,c):u.match(/touch/)?l=c.touches.length:i||(l=u.match(/up/)?0:1),l>0&&o==e.Gestures.EVENT_END?o=e.Gestures.EVENT_MOVE:l||(o=e.Gestures.EVENT_END),(l||null===n)&&(n=c),a.call(e.Gestures.detection,s.collectEventData(t,o,s.getTouchList(n,o),c)),e.Gestures.HAS_POINTEREVENTS&&o==e.Gestures.EVENT_END&&(l=e.Gestures.PointerEvent.updatePointer(o,c))),l||(n=null,r=!1,i=!1,e.Gestures.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=e.Gestures.HAS_POINTEREVENTS?e.Gestures.PointerEvent.getEvents():e.Gestures.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],e.Gestures.EVENT_TYPES[e.Gestures.EVENT_START]=t[0],e.Gestures.EVENT_TYPES[e.Gestures.EVENT_MOVE]=t[1],e.Gestures.EVENT_TYPES[e.Gestures.EVENT_END]=t[2]},getTouchList:function(t){return e.Gestures.HAS_POINTEREVENTS?e.Gestures.PointerEvent.getTouchList():t.touches?t.touches:(t.identifier=1,[t])},collectEventData:function(t,n,r,i){var o=e.Gestures.POINTER_TOUCH;return(i.type.match(/mouse/)||e.Gestures.PointerEvent.matchType(e.Gestures.POINTER_MOUSE,i))&&(o=e.Gestures.POINTER_MOUSE),{center:e.Gestures.utils.getCenter(r),timeStamp:(new Date).getTime(),target:i.target,touches:r,eventType:n,pointerType:o,srcEvent:i,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return e.Gestures.detection.stopDetect()}}}},e.Gestures.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return Object.keys(e.pointers).sort().forEach(function(n){t.push(e.pointers[n])}),t},updatePointer:function(t,n){return t==e.Gestures.EVENT_END?this.pointers={}:(n.identifier=n.pointerId,this.pointers[n.pointerId]=n),Object.keys(this.pointers).length},matchType:function(t,n){if(!n.pointerType)return!1;var r={};return r[e.Gestures.POINTER_MOUSE]=n.pointerType==n.MSPOINTER_TYPE_MOUSE||n.pointerType==e.Gestures.POINTER_MOUSE,r[e.Gestures.POINTER_TOUCH]=n.pointerType==n.MSPOINTER_TYPE_TOUCH||n.pointerType==e.Gestures.POINTER_TOUCH,r[e.Gestures.POINTER_PEN]=n.pointerType==n.MSPOINTER_TYPE_PEN||n.pointerType==e.Gestures.POINTER_PEN,r[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},e.Gestures.utils={extend:function(e,t,n){for(var r in t)void 0!==e[r]&&n||(e[r]=t[r]);return e},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){for(var t=[],n=[],r=0,i=e.length;i>r;r++)t.push(e[r].pageX),n.push(e[r].pageY);return{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.pageY-e.pageY,r=t.pageX-e.pageX;return 180*Math.atan2(n,r)/Math.PI},getDirection:function(t,n){var r=Math.abs(t.pageX-n.pageX),i=Math.abs(t.pageY-n.pageY);return r>=i?t.pageX-n.pageX>0?e.Gestures.DIRECTION_LEFT:e.Gestures.DIRECTION_RIGHT:t.pageY-n.pageY>0?e.Gestures.DIRECTION_UP:e.Gestures.DIRECTION_DOWN},getDistance:function(e,t){var n=t.pageX-e.pageX,r=t.pageY-e.pageY;return Math.sqrt(n*n+r*r)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(t){return t==e.Gestures.DIRECTION_UP||t==e.Gestures.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(e,t){e&&e.classList&&(e.classList.add(t),e.onselectstart=function(){return!1})}},e.Gestures.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,n){this.current||(this.stopped=!1,this.current={inst:t,startEvent:e.Gestures.utils.extend({},n),lastEvent:!1,name:""},this.detect(n))},detect:function(t){if(!this.current||this.stopped)return null;t=this.extendEventData(t);for(var n=this.current.inst.options,r=0,i=this.gestures.length;i>r;r++){var o=this.gestures[r];if(!this.stopped&&n[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==e.Gestures.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t},stopDetect:function(){this.previous=e.Gestures.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var n=this.current.startEvent;if(n&&(t.touches.length!=n.touches.length||t.touches===n.touches)){n.touches=[];for(var r=0,i=t.touches.length;i>r;r++)n.touches.push(e.Gestures.utils.extend({},t.touches[r]))}var o=t.timeStamp-n.timeStamp,a=t.center.pageX-n.center.pageX,s=t.center.pageY-n.center.pageY,c=e.Gestures.utils.getVelocity(o,a,s);return e.Gestures.utils.extend(t,{deltaTime:o,deltaX:a,deltaY:s,velocityX:c.x,velocityY:c.y,distance:e.Gestures.utils.getDistance(n.center,t.center),angle:e.Gestures.utils.getAngle(n.center,t.center),direction:e.Gestures.utils.getDirection(n.center,t.center),scale:e.Gestures.utils.getScale(n.touches,t.touches),rotation:e.Gestures.utils.getRotation(n.touches,t.touches),startEvent:n}),t},register:function(t){var n=t.defaults||{};return void 0===n[t.name]&&(n[t.name]=!0),e.Gestures.utils.extend(e.Gestures.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},e.Gestures.gestures=e.Gestures.gestures||{},e.Gestures.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,n){switch(t.eventType){case e.Gestures.EVENT_START:clearTimeout(this.timer),e.Gestures.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==e.Gestures.detection.current.name&&(e.tap.cancelClick(),n.trigger("hold",t))},n.options.hold_timeout);break;case e.Gestures.EVENT_MOVE:t.distance>n.options.hold_threshold&&clearTimeout(this.timer);break;case e.Gestures.EVENT_END:clearTimeout(this.timer)}}},e.Gestures.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,n){if(t.eventType==e.Gestures.EVENT_END&&"touchcancel"!=t.srcEvent.type){var r=e.Gestures.detection.previous,i=!1;if(t.deltaTime>n.options.tap_max_touchtime||t.distance>n.options.tap_max_distance)return;r&&"tap"==r.name&&t.timeStamp-r.lastEvent.timeStamp<n.options.doubletap_interval&&t.distance<n.options.doubletap_distance&&(n.trigger("doubletap",t),i=!0),(!i||n.options.tap_always)&&(e.Gestures.detection.current.name="tap",n.trigger("tap",t))}}},e.Gestures.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.4},handler:function(t,n){if(t.eventType==e.Gestures.EVENT_END){if(n.options.swipe_max_touches>0&&t.touches.length>n.options.swipe_max_touches)return;(t.velocityX>n.options.swipe_velocity||t.velocityY>n.options.swipe_velocity)&&(n.trigger(this.name,t),n.trigger(this.name+t.direction,t))}}},e.Gestures.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!0,drag_block_vertical:!0,drag_lock_to_axis:!1,drag_lock_min_distance:25,prevent_default_directions:[]},triggered:!1,handler:function(t,n){if("touchstart"==t.srcEvent.type||"touchend"==t.srcEvent.type?this.preventedFirstMove=!1:this.preventedFirstMove||"touchmove"!=t.srcEvent.type||(n.options.prevent_default_directions.length>0&&-1!=n.options.prevent_default_directions.indexOf(t.direction)&&t.srcEvent.preventDefault(),this.preventedFirstMove=!0),e.Gestures.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),void(this.triggered=!1);if(!(n.options.drag_max_touches>0&&t.touches.length>n.options.drag_max_touches))switch(t.eventType){case e.Gestures.EVENT_START:this.triggered=!1;break;case e.Gestures.EVENT_MOVE:if(t.distance<n.options.drag_min_distance&&e.Gestures.detection.current.name!=this.name)return;if(e.Gestures.detection.current.name!=this.name&&(e.Gestures.detection.current.name=this.name,n.options.correct_for_drag_min_distance)){var r=Math.abs(n.options.drag_min_distance/t.distance);e.Gestures.detection.current.startEvent.center.pageX+=t.deltaX*r,e.Gestures.detection.current.startEvent.center.pageY+=t.deltaY*r,t=e.Gestures.detection.extendEventData(t)}(e.Gestures.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var i=e.Gestures.detection.current.lastEvent.direction;t.drag_locked_to_axis&&i!==t.direction&&(e.Gestures.utils.isVertical(i)?t.direction=t.deltaY<0?e.Gestures.DIRECTION_UP:e.Gestures.DIRECTION_DOWN:t.direction=t.deltaX<0?e.Gestures.DIRECTION_LEFT:e.Gestures.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),n.trigger(this.name+t.direction,t),(n.options.drag_block_vertical&&e.Gestures.utils.isVertical(t.direction)||n.options.drag_block_horizontal&&!e.Gestures.utils.isVertical(t.direction))&&t.preventDefault();break;case e.Gestures.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},e.Gestures.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,n){if(e.Gestures.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),void(this.triggered=!1);if(!(t.touches.length<2))switch(n.options.transform_always_block&&t.preventDefault(),t.eventType){case e.Gestures.EVENT_START:this.triggered=!1;break;case e.Gestures.EVENT_MOVE:var r=Math.abs(1-t.scale),i=Math.abs(t.rotation);if(r<n.options.transform_min_scale&&i<n.options.transform_min_rotation)return;e.Gestures.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),i>n.options.transform_min_rotation&&n.trigger("rotate",t),r>n.options.transform_min_scale&&(n.trigger("pinch",t),n.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case e.Gestures.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},e.Gestures.gestures.Touch={name:"touch",index:-(1/0),defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,n){return n.options.prevent_mouseevents&&t.pointerType==e.Gestures.POINTER_MOUSE?void t.stopDetect():(n.options.prevent_default&&t.preventDefault(),void(t.eventType==e.Gestures.EVENT_START&&n.trigger(this.name,t)))}},e.Gestures.gestures.Release={name:"release",index:1/0,handler:function(t,n){t.eventType==e.Gestures.EVENT_END&&n.trigger(this.name,t)}}}(window.ionic),function(e,t,n){function r(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function i(){f.isWebView()?t.addEventListener("deviceready",o,!1):o(),a&&e.removeEventListener("load",i,!1)}function o(){f.isReady=!0,f.detect();for(var e=0;e<h.length;e++)h[e]();h=[],n.trigger("platformready",{target:t}),l(function(){t.body.classList.add("platform-ready")})}var a,s="ios",c="android",u="windowsphone",l=n.requestAnimationFrame,f=n.Platform={navigator:e.navigator,isReady:!1,isFullScreen:!1,platforms:null,grade:null,ua:navigator.userAgent,ready:function(e){f.isReady?e():h.push(e)},detect:function(){f._checkPlatforms(),l(function(){for(var e=0;e<f.platforms.length;e++)t.body.classList.add("platform-"+f.platforms[e])})},setGrade:function(e){var n=f.grade;f.grade=e,l(function(){n&&t.body.classList.remove("grade-"+n),t.body.classList.add("grade-"+e)})},device:function(){return e.device||{}},_checkPlatforms:function(){f.platforms=[];var t="a";f.isWebView()?(f.platforms.push("webview"),e.cordova||e.PhoneGap||e.phonegap?f.platforms.push("cordova"):e.forge&&f.platforms.push("trigger")):f.platforms.push("browser"),f.isIPad()&&f.platforms.push("ipad");var n=f.platform();if(n){f.platforms.push(n);var r=f.version();if(r){var i=r.toString();i.indexOf(".")>0?i=i.replace(".","_"):i+="_0",f.platforms.push(n+i.split("_")[0]),f.platforms.push(n+i),f.isAndroid()&&4.4>r?t=4>r?"c":"b":f.isWindowsPhone()&&(t="b")}}f.setGrade(t)},isWebView:function(){return!!(e.cordova||e.PhoneGap||e.phonegap||e.forge)},isIPad:function(){return/iPad/i.test(f.navigator.platform)?!0:/iPad/i.test(f.ua)},isIOS:function(){return f.is(s)},isAndroid:function(){return f.is(c)},isWindowsPhone:function(){return f.is(u)},platform:function(){return null===d&&f.setPlatform(f.device().platform),d},setPlatform:function(e){d="undefined"!=typeof e&&null!==e&&e.length?e.toLowerCase():r("ionicplatform")?r("ionicplatform"):f.ua.indexOf("Android")>0?c:/iPhone|iPad|iPod/.test(f.ua)?s:f.ua.indexOf("Windows Phone")>-1?u:f.navigator.platform&&navigator.platform.toLowerCase().split(" ")[0]||""},version:function(){return null===p&&f.setVersion(f.device().version),p},setVersion:function(e){if("undefined"!=typeof e&&null!==e&&(e=e.split("."),e=parseFloat(e[0]+"."+(e.length>1?e[1]:0)),!isNaN(e)))return void(p=e);p=0;var t=f.platform(),n={android:/Android (\d+).(\d+)?/,ios:/OS (\d+)_(\d+)?/,windowsphone:/Windows Phone (\d+).(\d+)?/};n[t]&&(e=f.ua.match(n[t]),e&&e.length>2&&(p=parseFloat(e[1]+"."+e[2])))},is:function(e){if(e=e.toLowerCase(),f.platforms)for(var t=0;t<f.platforms.length;t++)if(f.platforms[t]===e)return!0;var n=f.platform();return n?n===e.toLowerCase():f.ua.toLowerCase().indexOf(e)>=0},exitApp:function(){f.ready(function(){navigator.app&&navigator.app.exitApp&&navigator.app.exitApp()})},showStatusBar:function(n){f._showStatusBar=n,f.ready(function(){l(function(){f._showStatusBar?(e.StatusBar&&e.StatusBar.show(),t.body.classList.remove("status-bar-hide")):(e.StatusBar&&e.StatusBar.hide(),t.body.classList.add("status-bar-hide"))})})},fullScreen:function(e,r){f.isFullScreen=e!==!1,n.DomUtil.ready(function(){l(function(){f.isFullScreen?t.body.classList.add("fullscreen"):t.body.classList.remove("fullscreen")}),f.showStatusBar(r===!0)})}},d=null,p=null,h=[];"complete"===t.readyState?i():(a=!0,e.addEventListener("load",i,!1))}(this,document,ionic),function(e,t){"use strict";t.CSS={},function(){var n,r=["webkitTransform","transform","-webkit-transform","webkit-transform","-moz-transform","moz-transform","MozTransform","mozTransform","msTransform"];for(n=0;n<r.length;n++)if(void 0!==e.documentElement.style[r[n]]){t.CSS.TRANSFORM=r[n];break}for(r=["webkitTransition","mozTransition","msTransition","transition"],n=0;n<r.length;n++)if(void 0!==e.documentElement.style[r[n]]){t.CSS.TRANSITION=r[n];break}var i=t.CSS.TRANSITION.indexOf("webkit")>-1;t.CSS.TRANSITION_DURATION=(i?"-webkit-":"")+"transition-duration",t.CSS.TRANSITIONEND=(i?"webkitTransitionEnd ":"")+"transitionend"}(),"classList"in e.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function e(e){return function(){var n,r=t.className.split(/\s+/);for(n=0;n<arguments.length;n++)e(r,r.indexOf(arguments[n]),arguments[n]);t.className=r.join(" ")}}var t=this;return{add:e(function(e,t,n){~t||e.push(n)}),remove:e(function(e,t){~t&&e.splice(t,1)}),toggle:e(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)},item:function(e){return t.className.split(/\s+/)[e]||null}}}})}(document,ionic);var F,V,z,q,H,G,K,W,Y="touchmove",X=12,Z=50,Q={click:r,mousedown:i,mouseup:o,mousemove:a,touchstart:s,touchend:c,touchcancel:l,touchmove:u,pointerdown:s,pointerup:c,pointercancel:l,pointermove:u,MSPointerDown:s,MSPointerUp:c,MSPointerCancel:l,MSPointerMove:u,focusin:g,focusout:m};ionic.tap={register:function(t){return F=t,e("click",!0,!0),e("mouseup"),e("mousedown"),window.navigator.pointerEnabled?(e("pointerdown"),e("pointerup"),e("pointcancel"),Y="pointermove"):window.navigator.msPointerEnabled?(e("MSPointerDown"),e("MSPointerUp"),e("MSPointerCancel"),Y="MSPointerMove"):(e("touchstart"),e("touchend"),e("touchcancel")),e("focusin"),e("focusout"),function(){for(var t in Q)e(t,!1);F=null,V=null,z=!1,H=!1,G=null}},ignoreScrollStart:function(e){return e.defaultPrevented||/^(file|range)$/i.test(e.target.type)||"true"==(e.target.dataset?e.target.dataset.preventScroll:e.target.getAttribute("data-prevent-scroll"))||!!/^(object|embed)$/i.test(e.target.tagName)||ionic.tap.isElementTapDisabled(e.target)},isTextInput:function(e){return!!e&&("TEXTAREA"==e.tagName||"true"===e.contentEditable||"INPUT"==e.tagName&&!/^(radio|checkbox|range|file|submit|reset|color|image|button)$/i.test(e.type))},isDateInput:function(e){return!!e&&"INPUT"==e.tagName&&/^(date|time|datetime-local|month|week)$/i.test(e.type)},isKeyboardElement:function(e){return!ionic.Platform.isIOS()||ionic.Platform.isIPad()?ionic.tap.isTextInput(e)&&!ionic.tap.isDateInput(e):ionic.tap.isTextInput(e)||!!e&&"SELECT"==e.tagName},isLabelWithTextInput:function(e){var t=b(e,!1);return!!t&&ionic.tap.isTextInput(w(t))},containsOrIsTextInput:function(e){return ionic.tap.isTextInput(e)||ionic.tap.isLabelWithTextInput(e)},cloneFocusedInput:function(e){ionic.tap.hasCheckedClone||(ionic.tap.hasCheckedClone=!0,ionic.requestAnimationFrame(function(){var t=e.querySelector(":focus");if(ionic.tap.isTextInput(t)&&!ionic.tap.isDateInput(t)){var n=t.cloneNode(!0);n.value=t.value,n.classList.add("cloned-text-input"),n.readOnly=!0,t.isContentEditable&&(n.contentEditable=t.contentEditable,n.innerHTML=t.innerHTML),t.parentElement.insertBefore(n,t),t.classList.add("previous-input-focus"),n.scrollTop=t.scrollTop}}))},hasCheckedClone:!1,removeClonedInputs:function(e){ionic.tap.hasCheckedClone=!1,ionic.requestAnimationFrame(function(){var t,n=e.querySelectorAll(".cloned-text-input"),r=e.querySelectorAll(".previous-input-focus");for(t=0;t<n.length;t++)n[t].parentElement.removeChild(n[t]);for(t=0;t<r.length;t++)r[t].classList.remove("previous-input-focus"),r[t].style.top="",ionic.keyboard.isOpen&&!ionic.keyboard.isClosing&&r[t].focus()})},requiresNativeClick:function(e){return!e||e.disabled||/^(file|range)$/i.test(e.type)||/^(object|video)$/i.test(e.tagName)||ionic.tap.isLabelContainingFileInput(e)?!0:ionic.tap.isElementTapDisabled(e)},isLabelContainingFileInput:function(e){var t=b(e);if("LABEL"!==t.tagName)return!1;var n=t.querySelector("input[type=file]");return n&&n.disabled===!1?!0:!1},isElementTapDisabled:function(e){if(e&&1===e.nodeType)for(var t=e;t;){if("true"==(t.dataset?t.dataset.tapDisabled:t.getAttribute("data-tap-disabled")))return!0;t=t.parentElement}return!1},setTolerance:function(e,t){X=e,Z=t},cancelClick:function(){H=!0},pointerCoord:function(e){var t={x:0,y:0};if(e){var n=e.touches&&e.touches.length?e.touches:[e],r=e.changedTouches&&e.changedTouches[0]||n[0];r&&(t.x=r.clientX||r.pageX||0,t.y=r.clientY||r.pageY||0)}return t}},ionic.DomUtil.ready(function(){var e="undefined"!=typeof angular?angular:null;(!e||e&&!e.scenario)&&ionic.tap.register(document)}),function(e,t){"use strict";function n(){o={},t.requestAnimationFrame(i)}function r(){for(var e in o)o[e]&&(o[e].classList.add(c),a[e]=o[e]);o={}}function i(){if(t.transition&&t.transition.isActive)return void setTimeout(i,400);for(var e in a)a[e]&&(a[e].classList.remove(c),delete a[e])}var o={},a={},s=0,c="activated";t.activator={start:function(e){var n=t.tap.pointerCoord(e).x;n>0&&30>n||t.requestAnimationFrame(function(){if(!(t.scroll&&t.scroll.isScrolling||t.tap.requiresNativeClick(e.target))){for(var n,i=e.target,a=0;6>a&&(i&&1===i.nodeType);a++){if(n&&i.classList&&i.classList.contains("item")){n=i;break}if("A"==i.tagName||"BUTTON"==i.tagName||i.hasAttribute("ng-click")){n=i;break}if(i.classList.contains("button")){n=i;break}if("ION-CONTENT"==i.tagName||i.classList&&i.classList.contains("pane")||"BODY"==i.tagName)break;i=i.parentElement}n&&(o[s]=n,t.requestAnimationFrame(r),s=s>29?0:s+1)}})},end:function(){setTimeout(n,200)}}}(document,ionic),function(e){var t=0;e.Utils={arrayMove:function(e,t,n){if(n>=e.length)for(var r=n-e.length;r--+1;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e},proxy:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}},debounce:function(e,t,n){var r,i,o,a,s;return function(){o=this,i=arguments,a=new Date;var c=function(){var u=new Date-a;t>u?r=setTimeout(c,t-u):(r=null,n||(s=e.apply(o,i)))},u=n&&!r;return r||(r=setTimeout(c,t)),u&&(s=e.apply(o,i)),s}},throttle:function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:Date.now(),a=null,o=e.apply(r,i)};return function(){var u=Date.now();s||n.leading!==!1||(s=u);var l=t-(u-s);return r=this,i=arguments,0>=l?(clearTimeout(a),a=null,s=u,o=e.apply(r,i)):a||n.trailing===!1||(a=setTimeout(c,l)),o}},inherit:function(t,n){var r,i=this;r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},e.extend(r,i,n);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,t&&e.extend(r.prototype,t),r.__super__=i.prototype,r},extend:function(e){for(var t=Array.prototype.slice.call(arguments,1),n=0;n<t.length;n++){var r=t[n];if(r)for(var i in r)e[i]=r[i]}return e},nextUid:function(){return"ion"+t++},disconnectScope:function(e){if(e&&e.$root!==e){var t=e.$parent;e.$$disconnected=!0,e.$broadcast("$ionic.disconnectScope",e),t.$$childHead===e&&(t.$$childHead=e.$$nextSibling),t.$$childTail===e&&(t.$$childTail=e.$$prevSibling),e.$$prevSibling&&(e.$$prevSibling.$$nextSibling=e.$$nextSibling),e.$$nextSibling&&(e.$$nextSibling.$$prevSibling=e.$$prevSibling),e.$$nextSibling=e.$$prevSibling=null}},reconnectScope:function(e){if(e&&e.$root!==e&&e.$$disconnected){var t=e.$parent;e.$$disconnected=!1,e.$broadcast("$ionic.reconnectScope",e),e.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=e,t.$$childTail=e):t.$$childHead=t.$$childTail=e}},isScopeDisconnected:function(e){for(var t=e;t;){if(t.$$disconnected)return!0;t=t.$parent}return!1}},e.inherit=e.Utils.inherit,e.extend=e.Utils.extend,e.throttle=e.Utils.throttle,e.proxy=e.Utils.proxy,e.debounce=e.Utils.debounce}(window.ionic);var J,ee,te,ne,re=0,ie=0,oe=0,ae=!1,se="keyboard-open",ce="scroll-content",ue=ionic.debounce(_,200,!0),le=ionic.debounce(C,100,!0);ionic.keyboard={isOpen:!1,isClosing:!1,isOpening:!1,height:0,isLandscape:!1,isInitialized:!1,hide:function(){M()&&cordova.plugins.Keyboard.close(),J&&J.blur()},show:function(){M()&&cordova.plugins.Keyboard.show()},disable:function(){M()?(window.removeEventListener("native.keyboardshow",le),window.removeEventListener("native.keyboardhide",E)):document.body.removeEventListener("focusout",E),document.body.removeEventListener("ionic.focusin",ue),document.body.removeEventListener("focusin",ue),window.removeEventListener("orientationchange",T),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerDown",S):document.removeEventListener("touchstart",S),ionic.keyboard.isInitialized=!1},enable:function(){S()}},re=L(),ionic.Platform.ready(function(){$(),window.addEventListener("orientationchange",T),setTimeout($,999),window.navigator.msPointerEnabled?document.addEventListener("MSPointerDown",S,!1):document.addEventListener("touchstart",S,!1)});var fe,de={};ionic.viewport={orientation:function(){return window.innerWidth>window.innerHeight?90:0}},ionic.Platform.ready(function(){O(),window.addEventListener("orientationchange",function(){setTimeout(P,1e3)},!1)}),function(e){"use strict";e.views.View=function(){this.initialize.apply(this,arguments)},e.views.View.inherit=e.inherit,e.extend(e.views.View.prototype,{initialize:function(){}})}(window.ionic);var pe={effect:{}};!function(e){var t=Date.now||function(){return+new Date},n=60,r=1e3,i={},o=1;pe.effect.Animate={requestAnimationFrame:function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame,n=!!t;if(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString())&&(n=!1),n)return function(e,n){t(e,n)};var r=60,i={},o=0,a=1,s=null,c=+new Date;return function(e){var t=a++;return i[t]=e,o++,null===s&&(s=setInterval(function(){var e=+new Date,t=i;i={},o=0;for(var n in t)t.hasOwnProperty(n)&&(t[n](e),c=e);e-c>2500&&(clearInterval(s),s=null)},1e3/r)),t}}(),stop:function(e){var t=null!=i[e];return t&&(i[e]=null),t},isRunning:function(e){return null!=i[e]},start:function(e,a,s,c,u,l){var f=t(),d=f,p=0,h=0,g=o++;if(l||(l=document.body),g%20===0){var m={};for(var v in i)m[v]=!0;i=m}var y=function(o){var m=o!==!0,v=t();if(!i[g]||a&&!a(g))return i[g]=null,void(s&&s(n-h/((v-f)/r),g,!1));if(m)for(var b=Math.round((v-d)/(r/n))-1,w=0;w<Math.min(b,4);w++)y(!0),h++;c&&(p=(v-f)/c,p>1&&(p=1));var S=u?u(p):p;e(S,v,m)!==!1&&1!==p||!m?m&&(d=v,pe.effect.Animate.requestAnimationFrame(y,l)):(i[g]=null,s&&s(n-h/((v-f)/r),g,1===p||null==c))};return i[g]=!0,pe.effect.Animate.requestAnimationFrame(y,l),g}}}(this),function(e){var t=function(){},n=function(e){return Math.pow(e-1,3)+1},r=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)};e.views.Scroll=e.views.View.inherit({initialize:function(n){var r=this;r.__container=n.el,r.__content=n.el.firstElementChild,setTimeout(function(){r.__container&&r.__content&&(r.__container.scrollTop=0,r.__content.scrollTop=0)}),r.options={scrollingX:!1,scrollbarX:!0,scrollingY:!0,scrollbarY:!0,startX:0,startY:0,wheelDampen:6,minScrollbarSizeX:5,minScrollbarSizeY:5,scrollbarsFade:!0,scrollbarFadeDelay:300,scrollbarResizeFadeDelay:1e3,animating:!0,animationDuration:250,decelVelocityThreshold:4,decelVelocityThresholdPaging:4,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,deceleration:.97,preventDefault:!1,scrollingComplete:t,penetrationDeceleration:.03,penetrationAcceleration:.08,scrollEventInterval:10,freeze:!1,getContentWidth:function(){return Math.max(r.__content.scrollWidth,r.__content.offsetWidth)},getContentHeight:function(){return Math.max(r.__content.scrollHeight,r.__content.offsetHeight+2*r.__content.offsetTop)}};for(var i in n)r.options[i]=n[i];r.hintResize=e.debounce(function(){r.resize()},1e3,!0),r.onScroll=function(){e.scroll.isScrolling?(clearTimeout(r.scrollTimer),r.scrollTimer=setTimeout(r.setScrollStop,80)):setTimeout(r.setScrollStart,50)},r.freeze=function(e){return arguments.length&&(r.options.freeze=e),r.options.freeze},r.setScrollStart=function(){e.scroll.isScrolling=Math.abs(e.scroll.lastTop-r.__scrollTop)>1,clearTimeout(r.scrollTimer),r.scrollTimer=setTimeout(r.setScrollStop,80)},r.setScrollStop=function(){e.scroll.isScrolling=!1,e.scroll.lastTop=r.__scrollTop},r.triggerScrollEvent=e.throttle(function(){r.onScroll(),e.trigger("scroll",{scrollTop:r.__scrollTop,scrollLeft:r.__scrollLeft,target:r.__container})},r.options.scrollEventInterval),r.triggerScrollEndEvent=function(){e.trigger("scrollend",{scrollTop:r.__scrollTop,scrollLeft:r.__scrollLeft,target:r.__container})},r.__scrollLeft=r.options.startX,r.__scrollTop=r.options.startY,r.__callback=r.getRenderFn(),r.__initEventHandlers(),r.__createScrollbars()},run:function(){this.resize(),this.__fadeScrollbars("out",this.options.scrollbarResizeFadeDelay)},__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,__transformProperty:null,__perspectiveProperty:null,__indicatorX:null,__indicatorY:null,__scrollbarFadeTimeout:null,__didWaitForSize:null,__sizerTimeout:null,__initEventHandlers:function(){function t(e){return e.touches&&e.touches.length?e.touches:[{pageX:e.pageX,pageY:e.pageY}]}var n,r=this,i=r.__container;if(r.scrollChildIntoView=function(t){var o=i.getBoundingClientRect().bottom;n=i.offsetHeight;var a=r.isShrunkForKeyboard,s=i.parentNode.classList.contains("modal"),c=s&&window.innerWidth>=680;if(!a){if(e.Platform.isIOS()||e.Platform.isFullScreen||c){var u=t.detail.viewportHeight-o,l=Math.max(0,t.detail.keyboardHeight-u);e.requestAnimationFrame(function(){n-=l,i.style.height=n+"px",i.style.overflow="visible",r.resize()})}r.isShrunkForKeyboard=!0}t.detail.isElementUnderKeyboard&&e.requestAnimationFrame(function(){i.scrollTop=0,r.isShrunkForKeyboard&&!a&&(o=i.getBoundingClientRect().bottom);var s=.5*n,c=(t.detail.elementBottom+t.detail.elementTop)/2,u=c-o,l=u+s;l>0&&(e.Platform.isIOS()&&e.tap.cloneFocusedInput(i,r),r.scrollBy(0,l,!0),r.onScroll())}),t.stopPropagation()},r.resetScrollView=function(){r.isShrunkForKeyboard&&(r.isShrunkForKeyboard=!1,i.style.height="",i.style.overflow=""),r.resize()},i.addEventListener("scrollChildIntoView",r.scrollChildIntoView),document.addEventListener("resetScrollView",r.resetScrollView),r.touchStart=function(n){if(r.startCoordinates=e.tap.pointerCoord(n),!e.tap.ignoreScrollStart(n)){if(r.__isDown=!0,e.tap.containsOrIsTextInput(n.target)||"SELECT"===n.target.tagName)return void(r.__hasStarted=!1);r.__isSelectable=!0,r.__enableScrollY=!0,r.__hasStarted=!0,r.doTouchStart(t(n),n.timeStamp),n.preventDefault()}},r.touchMove=function(n){if(!(r.options.freeze||!r.__isDown||!r.__isDown&&n.defaultPrevented||"TEXTAREA"===n.target.tagName&&n.target.parentElement.querySelector(":focus"))){if(!r.__hasStarted&&(e.tap.containsOrIsTextInput(n.target)||"SELECT"===n.target.tagName))return r.__hasStarted=!0,r.doTouchStart(t(n),n.timeStamp),void n.preventDefault();if(r.startCoordinates){var o=e.tap.pointerCoord(n);r.__isSelectable&&e.tap.isTextInput(n.target)&&Math.abs(r.startCoordinates.x-o.x)>20&&(r.__enableScrollY=!1,r.__isSelectable=!0),r.__enableScrollY&&Math.abs(r.startCoordinates.y-o.y)>10&&(r.__isSelectable=!1,e.tap.cloneFocusedInput(i,r))}r.doTouchMove(t(n),n.timeStamp,n.scale),r.__isDown=!0}},r.touchMoveBubble=function(e){r.__isDown&&r.options.preventDefault&&e.preventDefault()},r.touchEnd=function(t){r.__isDown&&(r.doTouchEnd(t,t.timeStamp),r.__isDown=!1,r.__hasStarted=!1,r.__isSelectable=!0,r.__enableScrollY=!0,r.__isDragging||r.__isDecelerating||r.__isAnimating||e.tap.removeClonedInputs(i,r))},r.mouseWheel=e.animationFrameThrottle(function(t){var n=e.DomUtil.getParentOrSelfWithClass(t.target,"ionic-scroll");r.options.freeze||n!==r.__container||(r.hintResize(),r.scrollBy((t.wheelDeltaX||t.deltaX||0)/r.options.wheelDampen,(-t.wheelDeltaY||t.deltaY||0)/r.options.wheelDampen),r.__fadeScrollbars("in"),clearTimeout(r.__wheelHideBarTimeout),r.__wheelHideBarTimeout=setTimeout(function(){r.__fadeScrollbars("out")},100))}),"ontouchstart"in window)i.addEventListener("touchstart",r.touchStart,!1),r.options.preventDefault&&i.addEventListener("touchmove",r.touchMoveBubble,!1),
document.addEventListener("touchmove",r.touchMove,!1),document.addEventListener("touchend",r.touchEnd,!1),document.addEventListener("touchcancel",r.touchEnd,!1),document.addEventListener("wheel",r.mouseWheel,!1);else if(window.navigator.pointerEnabled)i.addEventListener("pointerdown",r.touchStart,!1),r.options.preventDefault&&i.addEventListener("pointermove",r.touchMoveBubble,!1),document.addEventListener("pointermove",r.touchMove,!1),document.addEventListener("pointerup",r.touchEnd,!1),document.addEventListener("pointercancel",r.touchEnd,!1),document.addEventListener("wheel",r.mouseWheel,!1);else if(window.navigator.msPointerEnabled)i.addEventListener("MSPointerDown",r.touchStart,!1),r.options.preventDefault&&i.addEventListener("MSPointerMove",r.touchMoveBubble,!1),document.addEventListener("MSPointerMove",r.touchMove,!1),document.addEventListener("MSPointerUp",r.touchEnd,!1),document.addEventListener("MSPointerCancel",r.touchEnd,!1),document.addEventListener("wheel",r.mouseWheel,!1);else{var o=!1;r.mouseDown=function(n){e.tap.ignoreScrollStart(n)||"SELECT"===n.target.tagName||(r.doTouchStart(t(n),n.timeStamp),e.tap.isTextInput(n.target)||n.preventDefault(),o=!0)},r.mouseMove=function(e){r.options.freeze||!o||!o&&e.defaultPrevented||(r.doTouchMove(t(e),e.timeStamp),o=!0)},r.mouseMoveBubble=function(e){o&&r.options.preventDefault&&e.preventDefault()},r.mouseUp=function(e){o&&(r.doTouchEnd(e,e.timeStamp),o=!1)},i.addEventListener("mousedown",r.mouseDown,!1),r.options.preventDefault&&i.addEventListener("mousemove",r.mouseMoveBubble,!1),document.addEventListener("mousemove",r.mouseMove,!1),document.addEventListener("mouseup",r.mouseUp,!1),document.addEventListener("mousewheel",r.mouseWheel,!1),document.addEventListener("wheel",r.mouseWheel,!1)}},__cleanup:function(){var n=this,r=n.__container;r.removeEventListener("touchstart",n.touchStart),r.removeEventListener("touchmove",n.touchMoveBubble),document.removeEventListener("touchmove",n.touchMove),document.removeEventListener("touchend",n.touchEnd),document.removeEventListener("touchcancel",n.touchEnd),r.removeEventListener("pointerdown",n.touchStart),r.removeEventListener("pointermove",n.touchMoveBubble),document.removeEventListener("pointermove",n.touchMove),document.removeEventListener("pointerup",n.touchEnd),document.removeEventListener("pointercancel",n.touchEnd),r.removeEventListener("MSPointerDown",n.touchStart),r.removeEventListener("MSPointerMove",n.touchMoveBubble),document.removeEventListener("MSPointerMove",n.touchMove),document.removeEventListener("MSPointerUp",n.touchEnd),document.removeEventListener("MSPointerCancel",n.touchEnd),r.removeEventListener("mousedown",n.mouseDown),r.removeEventListener("mousemove",n.mouseMoveBubble),document.removeEventListener("mousemove",n.mouseMove),document.removeEventListener("mouseup",n.mouseUp),document.removeEventListener("mousewheel",n.mouseWheel),document.removeEventListener("wheel",n.mouseWheel),r.removeEventListener("scrollChildIntoView",n.scrollChildIntoView),document.removeEventListener("resetScrollView",n.resetScrollView),e.tap.removeClonedInputs(r,n),delete n.__container,delete n.__content,delete n.__indicatorX,delete n.__indicatorY,delete n.options.el,n.__callback=n.scrollChildIntoView=n.resetScrollView=t,n.mouseMove=n.mouseDown=n.mouseUp=n.mouseWheel=n.touchStart=n.touchMove=n.touchEnd=n.touchCancel=t,n.resize=n.scrollTo=n.zoomTo=n.__scrollingComplete=t,r=null},__createScrollbar:function(e){var t=document.createElement("div"),n=document.createElement("div");return n.className="scroll-bar-indicator scroll-bar-fade-out","h"==e?t.className="scroll-bar scroll-bar-h":t.className="scroll-bar scroll-bar-v",t.appendChild(n),t},__createScrollbars:function(){var e,t,n=this;n.options.scrollingX&&(e={el:n.__createScrollbar("h"),sizeRatio:1},e.indicator=e.el.children[0],n.options.scrollbarX&&n.__container.appendChild(e.el),n.__indicatorX=e),n.options.scrollingY&&(t={el:n.__createScrollbar("v"),sizeRatio:1},t.indicator=t.el.children[0],n.options.scrollbarY&&n.__container.appendChild(t.el),n.__indicatorY=t)},__resizeScrollbars:function(){var t=this;if(t.__indicatorX){var n=Math.max(Math.round(t.__clientWidth*t.__clientWidth/t.__contentWidth),20);n>t.__contentWidth&&(n=0),n!==t.__indicatorX.size&&e.requestAnimationFrame(function(){t.__indicatorX.indicator.style.width=n+"px"}),t.__indicatorX.size=n,t.__indicatorX.minScale=t.options.minScrollbarSizeX/n,t.__indicatorX.maxPos=t.__clientWidth-n,t.__indicatorX.sizeRatio=t.__maxScrollLeft?t.__indicatorX.maxPos/t.__maxScrollLeft:1}if(t.__indicatorY){var r=Math.max(Math.round(t.__clientHeight*t.__clientHeight/t.__contentHeight),20);r>t.__contentHeight&&(r=0),r!==t.__indicatorY.size&&e.requestAnimationFrame(function(){t.__indicatorY&&(t.__indicatorY.indicator.style.height=r+"px")}),t.__indicatorY.size=r,t.__indicatorY.minScale=t.options.minScrollbarSizeY/r,t.__indicatorY.maxPos=t.__clientHeight-r,t.__indicatorY.sizeRatio=t.__maxScrollTop?t.__indicatorY.maxPos/t.__maxScrollTop:1}},__repositionScrollbars:function(){var e,t,n,r,i,o,a=this,s=0,c=0;if(a.__indicatorX){a.__indicatorY&&(s=10),i=Math.round(a.__indicatorX.sizeRatio*a.__scrollLeft)||0,n=a.__scrollLeft-(a.__maxScrollLeft-s),a.__scrollLeft<0?(t=Math.max(a.__indicatorX.minScale,(a.__indicatorX.size-Math.abs(a.__scrollLeft))/a.__indicatorX.size),i=0,a.__indicatorX.indicator.style[a.__transformOriginProperty]="left center"):n>0?(t=Math.max(a.__indicatorX.minScale,(a.__indicatorX.size-n)/a.__indicatorX.size),i=a.__indicatorX.maxPos-s,a.__indicatorX.indicator.style[a.__transformOriginProperty]="right center"):(i=Math.min(a.__maxScrollLeft,Math.max(0,i)),t=1);var u="translate3d("+i+"px, 0, 0) scaleX("+t+")";a.__indicatorX.transformProp!==u&&(a.__indicatorX.indicator.style[a.__transformProperty]=u,a.__indicatorX.transformProp=u)}if(a.__indicatorY){o=Math.round(a.__indicatorY.sizeRatio*a.__scrollTop)||0,a.__indicatorX&&(c=10),r=a.__scrollTop-(a.__maxScrollTop-c),a.__scrollTop<0?(e=Math.max(a.__indicatorY.minScale,(a.__indicatorY.size-Math.abs(a.__scrollTop))/a.__indicatorY.size),o=0,"center top"!==a.__indicatorY.originProp&&(a.__indicatorY.indicator.style[a.__transformOriginProperty]="center top",a.__indicatorY.originProp="center top")):r>0?(e=Math.max(a.__indicatorY.minScale,(a.__indicatorY.size-r)/a.__indicatorY.size),o=a.__indicatorY.maxPos-c,"center bottom"!==a.__indicatorY.originProp&&(a.__indicatorY.indicator.style[a.__transformOriginProperty]="center bottom",a.__indicatorY.originProp="center bottom")):(o=Math.min(a.__maxScrollTop,Math.max(0,o)),e=1);var l="translate3d(0,"+o+"px, 0) scaleY("+e+")";a.__indicatorY.transformProp!==l&&(a.__indicatorY.indicator.style[a.__transformProperty]=l,a.__indicatorY.transformProp=l)}},__fadeScrollbars:function(e,t){var n=this;if(n.options.scrollbarsFade){var r="scroll-bar-fade-out";n.options.scrollbarsFade===!0&&(clearTimeout(n.__scrollbarFadeTimeout),"in"==e?(n.__indicatorX&&n.__indicatorX.indicator.classList.remove(r),n.__indicatorY&&n.__indicatorY.indicator.classList.remove(r)):n.__scrollbarFadeTimeout=setTimeout(function(){n.__indicatorX&&n.__indicatorX.indicator.classList.add(r),n.__indicatorY&&n.__indicatorY.indicator.classList.add(r)},t||n.options.scrollbarFadeDelay))}},__scrollingComplete:function(){this.options.scrollingComplete(),e.tap.removeClonedInputs(this.__container,this),this.__fadeScrollbars("out")},resize:function(e){var t=this;t.__container&&t.options&&t.setDimensions(t.__container.clientWidth,t.__container.clientHeight,t.options.getContentWidth(),t.options.getContentHeight(),e)},getRenderFn:function(){var e,t=this,n=t.__content,r=document.documentElement.style;"MozAppearance"in r?e="gecko":"WebkitAppearance"in r?e="webkit":"string"==typeof navigator.cpuClass&&(e="trident");var i,o={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[e],a=document.createElement("div"),s=o+"Perspective",c=o+"Transform",u=o+"TransformOrigin";return t.__perspectiveProperty=c,t.__transformProperty=c,t.__transformOriginProperty=u,a.style[s]!==i?function(e,r,i,o){var a="translate3d("+-e+"px,"+-r+"px,0) scale("+i+")";a!==t.contentTransform&&(n.style[c]=a,t.contentTransform=a),t.__repositionScrollbars(),o||t.triggerScrollEvent()}:a.style[c]!==i?function(e,r,i,o){n.style[c]="translate("+-e+"px,"+-r+"px) scale("+i+")",t.__repositionScrollbars(),o||t.triggerScrollEvent()}:function(e,r,i,o){n.style.marginLeft=e?-e/i+"px":"",n.style.marginTop=r?-r/i+"px":"",n.style.zoom=i||"",t.__repositionScrollbars(),o||t.triggerScrollEvent()}},setDimensions:function(e,t,n,r,i){var o=this;(e||t||n||r)&&(e===+e&&(o.__clientWidth=e),t===+t&&(o.__clientHeight=t),n===+n&&(o.__contentWidth=n),r===+r&&(o.__contentHeight=r),o.__computeScrollMax(),o.__resizeScrollbars(),i||o.scrollTo(o.__scrollLeft,o.__scrollTop,!0,null,!0))},setPosition:function(e,t){this.__clientLeft=e||0,this.__clientTop=t||0},setSnapSize:function(e,t){this.__snapWidth=e,this.__snapHeight=t},activatePullToRefresh:function(t,n){var r=this;r.__refreshHeight=t,r.__refreshActivate=function(){e.requestAnimationFrame(n.activate)},r.__refreshDeactivate=function(){e.requestAnimationFrame(n.deactivate)},r.__refreshStart=function(){e.requestAnimationFrame(n.start)},r.__refreshShow=function(){e.requestAnimationFrame(n.show)},r.__refreshHide=function(){e.requestAnimationFrame(n.hide)},r.__refreshTail=function(){e.requestAnimationFrame(n.tail)},r.__refreshTailTime=100,r.__minSpinTime=600},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0);var e=new Date;this.refreshStartTime=e.getTime(),this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){var e=this,t=new Date,n=0;e.refreshStartTime+e.__minSpinTime>t.getTime()&&(n=e.refreshStartTime+e.__minSpinTime-t.getTime()),setTimeout(function(){e.__refreshTail&&e.__refreshTail(),setTimeout(function(){e.__refreshActive=!1,e.__refreshDeactivate&&e.__refreshDeactivate(),e.__refreshHide&&e.__refreshHide(),e.scrollTo(e.__scrollLeft,e.__scrollTop,!0)},e.__refreshTailTime)},n)},getValues:function(){return{left:this.__scrollLeft,top:this.__scrollTop,zoom:this.__zoomLevel}},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo:function(e,t,n,r){var i=this;if(!i.options.zooming)throw new Error("Zooming is not enabled!");i.__isDecelerating&&(pe.effect.Animate.stop(i.__isDecelerating),i.__isDecelerating=!1);var o=i.__zoomLevel;null==n&&(n=i.__clientWidth/2),null==r&&(r=i.__clientHeight/2),e=Math.max(Math.min(e,i.options.maxZoom),i.options.minZoom),i.__computeScrollMax(e);var a=(n+i.__scrollLeft)*e/o-n,s=(r+i.__scrollTop)*e/o-r;a>i.__maxScrollLeft?a=i.__maxScrollLeft:0>a&&(a=0),s>i.__maxScrollTop?s=i.__maxScrollTop:0>s&&(s=0),i.__publish(a,s,e,t)},zoomBy:function(e,t,n,r){this.zoomTo(this.__zoomLevel*e,t,n,r)},scrollTo:function(e,t,n,r,i){var o=this;if(o.__isDecelerating&&(pe.effect.Animate.stop(o.__isDecelerating),o.__isDecelerating=!1),null!=r&&r!==o.__zoomLevel){if(!o.options.zooming)throw new Error("Zooming is not enabled!");e*=r,t*=r,o.__computeScrollMax(r)}else r=o.__zoomLevel;o.options.scrollingX?o.options.paging?e=Math.round(e/o.__clientWidth)*o.__clientWidth:o.options.snapping&&(e=Math.round(e/o.__snapWidth)*o.__snapWidth):e=o.__scrollLeft,o.options.scrollingY?o.options.paging?t=Math.round(t/o.__clientHeight)*o.__clientHeight:o.options.snapping&&(t=Math.round(t/o.__snapHeight)*o.__snapHeight):t=o.__scrollTop,e=Math.max(Math.min(o.__maxScrollLeft,e),0),t=Math.max(Math.min(o.__maxScrollTop,t),0),e===o.__scrollLeft&&t===o.__scrollTop&&(n=!1),o.__publish(e,t,r,n,i)},scrollBy:function(e,t,n){var r=this,i=r.__isAnimating?r.__scheduledLeft:r.__scrollLeft,o=r.__isAnimating?r.__scheduledTop:r.__scrollTop;r.scrollTo(i+(e||0),o+(t||0),n)},doMouseZoom:function(e,t,n,r){var i=e>0?.97:1.03;return this.zoomTo(this.__zoomLevel*i,!1,n-this.__clientLeft,r-this.__clientTop)},doTouchStart:function(e,t){var n=this;n.__decStopped=!(!n.__isDecelerating&&!n.__isAnimating),n.hintResize(),t instanceof Date&&(t=t.valueOf()),"number"!=typeof t&&(t=Date.now()),n.__interruptedAnimation=!0,n.__isDecelerating&&(pe.effect.Animate.stop(n.__isDecelerating),n.__isDecelerating=!1,n.__interruptedAnimation=!0),n.__isAnimating&&(pe.effect.Animate.stop(n.__isAnimating),n.__isAnimating=!1,n.__interruptedAnimation=!0);var r,i,o=1===e.length;o?(r=e[0].pageX,i=e[0].pageY):(r=Math.abs(e[0].pageX+e[1].pageX)/2,i=Math.abs(e[0].pageY+e[1].pageY)/2),n.__initialTouchLeft=r,n.__initialTouchTop=i,n.__initialTouches=e,n.__zoomLevelStart=n.__zoomLevel,n.__lastTouchLeft=r,n.__lastTouchTop=i,n.__lastTouchMove=t,n.__lastScale=1,n.__enableScrollX=!o&&n.options.scrollingX,n.__enableScrollY=!o&&n.options.scrollingY,n.__isTracking=!0,n.__didDecelerationComplete=!1,n.__isDragging=!o,n.__isSingleTouch=o,n.__positions=[]},doTouchMove:function(e,t,n){t instanceof Date&&(t=t.valueOf()),"number"!=typeof t&&(t=Date.now());var r=this;if(r.__isTracking){var i,o;2===e.length?(i=Math.abs(e[0].pageX+e[1].pageX)/2,o=Math.abs(e[0].pageY+e[1].pageY)/2,!n&&r.options.zooming&&(n=r.__getScale(r.__initialTouches,e))):(i=e[0].pageX,o=e[0].pageY);var a=r.__positions;if(r.__isDragging){r.__decStopped=!1;var s=i-r.__lastTouchLeft,c=o-r.__lastTouchTop,u=r.__scrollLeft,l=r.__scrollTop,f=r.__zoomLevel;if(null!=n&&r.options.zooming){var d=f;if(f=f/r.__lastScale*n,f=Math.max(Math.min(f,r.options.maxZoom),r.options.minZoom),d!==f){var p=i-r.__clientLeft,h=o-r.__clientTop;u=(p+u)*f/d-p,l=(h+l)*f/d-h,r.__computeScrollMax(f)}}if(r.__enableScrollX){u-=s*r.options.speedMultiplier;var g=r.__maxScrollLeft;(u>g||0>u)&&(r.options.bouncing?u+=s/2*r.options.speedMultiplier:u=u>g?g:0)}if(r.__enableScrollY){l-=c*r.options.speedMultiplier;var m=r.__maxScrollTop;l>m||0>l?r.options.bouncing||r.__refreshHeight&&0>l?(l+=c/2*r.options.speedMultiplier,r.__enableScrollX||null==r.__refreshHeight||(0>l?(r.__refreshHidden=!1,r.__refreshShow()):(r.__refreshHide(),r.__refreshHidden=!0),!r.__refreshActive&&l<=-r.__refreshHeight?(r.__refreshActive=!0,r.__refreshActivate&&r.__refreshActivate()):r.__refreshActive&&l>-r.__refreshHeight&&(r.__refreshActive=!1,r.__refreshDeactivate&&r.__refreshDeactivate()))):l=l>m?m:0:r.__refreshHeight&&!r.__refreshHidden&&(r.__refreshHide(),r.__refreshHidden=!0)}a.length>60&&a.splice(0,30),a.push(u,l,t),r.__publish(u,l,f)}else{var v=r.options.locking?3:0,y=5,b=Math.abs(i-r.__initialTouchLeft),w=Math.abs(o-r.__initialTouchTop);r.__enableScrollX=r.options.scrollingX&&b>=v,r.__enableScrollY=r.options.scrollingY&&w>=v,a.push(r.__scrollLeft,r.__scrollTop,t),r.__isDragging=(r.__enableScrollX||r.__enableScrollY)&&(b>=y||w>=y),r.__isDragging&&(r.__interruptedAnimation=!1,r.__fadeScrollbars("in"))}r.__lastTouchLeft=i,r.__lastTouchTop=o,r.__lastTouchMove=t,r.__lastScale=n}},doTouchEnd:function(t,n){n instanceof Date&&(n=n.valueOf()),"number"!=typeof n&&(n=Date.now());var r=this;if(r.__isTracking){if(r.__isTracking=!1,r.__isDragging)if(r.__isDragging=!1,r.__isSingleTouch&&r.options.animating&&n-r.__lastTouchMove<=100){for(var i=r.__positions,o=i.length-1,a=o,s=o;s>0&&i[s]>r.__lastTouchMove-100;s-=3)a=s;if(a!==o){var c=i[o]-i[a],u=r.__scrollLeft-i[a-2],l=r.__scrollTop-i[a-1];r.__decelerationVelocityX=u/c*(1e3/60),r.__decelerationVelocityY=l/c*(1e3/60);var f=r.options.paging||r.options.snapping?r.options.decelVelocityThresholdPaging:r.options.decelVelocityThreshold;(Math.abs(r.__decelerationVelocityX)>f||Math.abs(r.__decelerationVelocityY)>f)&&(r.__refreshActive||r.__startDeceleration(n))}else r.__scrollingComplete()}else n-r.__lastTouchMove>100&&r.__scrollingComplete();else r.__decStopped&&(t.isTapHandled=!0,r.__decStopped=!1);if(!r.__isDecelerating)if(r.__refreshActive&&r.__refreshStart){r.__publish(r.__scrollLeft,-r.__refreshHeight,r.__zoomLevel,!0);var d=new Date;r.refreshStartTime=d.getTime(),r.__refreshStart&&r.__refreshStart(),e.Platform.isAndroid()||r.__startDeceleration()}else(r.__interruptedAnimation||r.__isDragging)&&r.__scrollingComplete(),r.scrollTo(r.__scrollLeft,r.__scrollTop,!0,r.__zoomLevel),r.__refreshActive&&(r.__refreshActive=!1,r.__refreshDeactivate&&r.__refreshDeactivate());r.__positions.length=0}},__publish:function(e,t,i,o,a){var s=this,c=s.__isAnimating;if(c&&(pe.effect.Animate.stop(c),s.__isAnimating=!1),o&&s.options.animating){s.__scheduledLeft=e,s.__scheduledTop=t,s.__scheduledZoom=i;var u=s.__scrollLeft,l=s.__scrollTop,f=s.__zoomLevel,d=e-u,p=t-l,h=i-f,g=function(e,t,n){n&&(s.__scrollLeft=u+d*e,s.__scrollTop=l+p*e,s.__zoomLevel=f+h*e,s.__callback&&s.__callback(s.__scrollLeft,s.__scrollTop,s.__zoomLevel,a))},m=function(e){return s.__isAnimating===e},v=function(e,t,n){t===s.__isAnimating&&(s.__isAnimating=!1),(s.__didDecelerationComplete||n)&&s.__scrollingComplete(),s.options.zooming&&s.__computeScrollMax()};s.__isAnimating=pe.effect.Animate.start(g,m,v,s.options.animationDuration,c?n:r)}else s.__scheduledLeft=s.__scrollLeft=e,s.__scheduledTop=s.__scrollTop=t,s.__scheduledZoom=s.__zoomLevel=i,s.__callback&&s.__callback(e,t,i,a),s.options.zooming&&s.__computeScrollMax()},__computeScrollMax:function(e){var t=this;null==e&&(e=t.__zoomLevel),t.__maxScrollLeft=Math.max(t.__contentWidth*e-t.__clientWidth,0),t.__maxScrollTop=Math.max(t.__contentHeight*e-t.__clientHeight,0),t.__didWaitForSize||t.__maxScrollLeft||t.__maxScrollTop||(t.__didWaitForSize=!0,t.__waitForSize())},__waitForSize:function(){var e=this;clearTimeout(e.__sizerTimeout);var t=function(){e.resize(!0)};t(),e.__sizerTimeout=setTimeout(t,500)},__startDeceleration:function(){var e=this;if(e.options.paging){var t=Math.max(Math.min(e.__scrollLeft,e.__maxScrollLeft),0),n=Math.max(Math.min(e.__scrollTop,e.__maxScrollTop),0),r=e.__clientWidth,i=e.__clientHeight;e.__minDecelerationScrollLeft=Math.floor(t/r)*r,e.__minDecelerationScrollTop=Math.floor(n/i)*i,e.__maxDecelerationScrollLeft=Math.ceil(t/r)*r,e.__maxDecelerationScrollTop=Math.ceil(n/i)*i}else e.__minDecelerationScrollLeft=0,e.__minDecelerationScrollTop=0,e.__maxDecelerationScrollLeft=e.__maxScrollLeft,e.__maxDecelerationScrollTop=e.__maxScrollTop,e.__refreshActive&&(e.__minDecelerationScrollTop=-1*e.__refreshHeight);var o=function(t,n,r){e.__stepThroughDeceleration(r)};e.__minVelocityToKeepDecelerating=e.options.snapping?4:.1;var a=function(){var t=Math.abs(e.__decelerationVelocityX)>=e.__minVelocityToKeepDecelerating||Math.abs(e.__decelerationVelocityY)>=e.__minVelocityToKeepDecelerating;return t||(e.__didDecelerationComplete=!0,e.options.bouncing&&!e.__refreshActive&&e.scrollTo(Math.min(Math.max(e.__scrollLeft,0),e.__maxScrollLeft),Math.min(Math.max(e.__scrollTop,0),e.__maxScrollTop),e.__refreshActive)),t},s=function(){e.__isDecelerating=!1,e.__didDecelerationComplete&&e.__scrollingComplete(),e.options.paging&&e.scrollTo(e.__scrollLeft,e.__scrollTop,e.options.snapping)};e.__isDecelerating=pe.effect.Animate.start(o,a,s)},__stepThroughDeceleration:function(e){var t=this,n=t.__scrollLeft+t.__decelerationVelocityX,r=t.__scrollTop+t.__decelerationVelocityY;if(!t.options.bouncing){var i=Math.max(Math.min(t.__maxDecelerationScrollLeft,n),t.__minDecelerationScrollLeft);i!==n&&(n=i,t.__decelerationVelocityX=0);var o=Math.max(Math.min(t.__maxDecelerationScrollTop,r),t.__minDecelerationScrollTop);o!==r&&(r=o,t.__decelerationVelocityY=0)}if(e?t.__publish(n,r,t.__zoomLevel):(t.__scrollLeft=n,t.__scrollTop=r),!t.options.paging){var a=t.options.deceleration;t.__decelerationVelocityX*=a,t.__decelerationVelocityY*=a}if(t.options.bouncing){var s=0,c=0,u=t.options.penetrationDeceleration,l=t.options.penetrationAcceleration;if(n<t.__minDecelerationScrollLeft?s=t.__minDecelerationScrollLeft-n:n>t.__maxDecelerationScrollLeft&&(s=t.__maxDecelerationScrollLeft-n),r<t.__minDecelerationScrollTop?c=t.__minDecelerationScrollTop-r:r>t.__maxDecelerationScrollTop&&(c=t.__maxDecelerationScrollTop-r),0!==s){var f=s*t.__decelerationVelocityX<=t.__minDecelerationScrollLeft;f&&(t.__decelerationVelocityX+=s*u);var d=Math.abs(t.__decelerationVelocityX)<=t.__minVelocityToKeepDecelerating;(!f||d)&&(t.__decelerationVelocityX=s*l)}if(0!==c){var p=c*t.__decelerationVelocityY<=t.__minDecelerationScrollTop;p&&(t.__decelerationVelocityY+=c*u);var h=Math.abs(t.__decelerationVelocityY)<=t.__minVelocityToKeepDecelerating;(!p||h)&&(t.__decelerationVelocityY=c*l)}}},__getDistance:function(e,t){var n=t.pageX-e.pageX,r=t.pageY-e.pageY;return Math.sqrt(n*n+r*r)},__getScale:function(e,t){return e.length>=2&&t.length>=2?this.__getDistance(t[0],t[1])/this.__getDistance(e[0],e[1]):1}}),e.scroll={isScrolling:!1,lastTop:0}}(ionic),function(e){var t=function(){},n=function(e){};e.views.ScrollNative=e.views.View.inherit({initialize:function(n){var r=this;r.__container=r.el=n.el,r.__content=n.el.firstElementChild,r.isNative=!0,r.__scrollTop=r.el.scrollTop,r.__scrollLeft=r.el.scrollLeft,r.__clientHeight=r.__content.clientHeight,r.__clientWidth=r.__content.clientWidth,r.__maxScrollTop=Math.max(r.__contentHeight-r.__clientHeight,0),r.__maxScrollLeft=Math.max(r.__contentWidth-r.__clientWidth,0),r.options={freeze:!1,getContentWidth:function(){return Math.max(r.__content.scrollWidth,r.__content.offsetWidth)},getContentHeight:function(){return Math.max(r.__content.scrollHeight,r.__content.offsetHeight+2*r.__content.offsetTop)}};for(var i in n)r.options[i]=n[i];r.onScroll=function(){e.scroll.isScrolling||(e.scroll.isScrolling=!0),clearTimeout(r.scrollTimer),r.scrollTimer=setTimeout(function(){e.scroll.isScrolling=!1},80)},r.freeze=t,r.__initEventHandlers()},__callback:function(){n("__callback")},zoomTo:function(){n("zoomTo")},zoomBy:function(){n("zoomBy")},activatePullToRefresh:function(){n("activatePullToRefresh")},resize:function(e){var t=this;t.__container&&t.options&&t.setDimensions(t.__container.clientWidth,t.__container.clientHeight,t.options.getContentWidth(),t.options.getContentHeight(),e)},run:function(){this.resize()},getValues:function(){var e=this;return e.update(),{left:e.__scrollLeft,top:e.__scrollTop,zoom:1}},update:function(){var e=this;e.__scrollLeft=e.el.scrollLeft,e.__scrollTop=e.el.scrollTop},setDimensions:function(e,t,n,r){var i=this;(e||t||n||r)&&(e===+e&&(i.__clientWidth=e),t===+t&&(i.__clientHeight=t),n===+n&&(i.__contentWidth=n),r===+r&&(i.__contentHeight=r),i.__computeScrollMax())},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},scrollBy:function(e,t,n){var r=this;r.update();var i=r.__isAnimating?r.__scheduledLeft:r.__scrollLeft,o=r.__isAnimating?r.__scheduledTop:r.__scrollTop;r.scrollTo(i+(e||0),o+(t||0),n)},scrollTo:function(t,n,r){function i(t,n){function r(e){return--e*e*e+1}function i(){var l=Date.now(),f=Math.min(1,(l-a)/s),d=r(f);c!=t&&(o.el.scrollTop=parseInt(d*(t-c)+c,10)),u!=n&&(o.el.scrollLeft=parseInt(d*(n-u)+u,10)),1>f?e.requestAnimationFrame(i):(e.tap.removeClonedInputs(o.__container,o),o.resize())}var a=Date.now(),s=250,c=o.el.scrollTop,u=o.el.scrollLeft;return c===t&&u===n?void o.resize():void e.requestAnimationFrame(i)}var o=this;return r?void i(n,t):(o.el.scrollTop=n,o.el.scrollLeft=t,void o.resize())},__waitForSize:function(){var e=this;clearTimeout(e.__sizerTimeout);var t=function(){e.resize(!0)};t(),e.__sizerTimeout=setTimeout(t,500)},__computeScrollMax:function(){var e=this;e.__maxScrollLeft=Math.max(e.__contentWidth-e.__clientWidth,0),e.__maxScrollTop=Math.max(e.__contentHeight-e.__clientHeight,0),e.__didWaitForSize||e.__maxScrollLeft||e.__maxScrollTop||(e.__didWaitForSize=!0,e.__waitForSize())},__initEventHandlers:function(){var t,n=this,r=n.__container;n.scrollChildIntoView=function(i){var o=r.getBoundingClientRect().bottom;t=r.offsetHeight;var a=n.isShrunkForKeyboard,s=r.parentNode.classList.contains("modal"),c=s&&window.innerWidth>=680;if(!a){if(e.Platform.isIOS()||e.Platform.isFullScreen||c){var u=i.detail.viewportHeight-o,l=Math.max(0,i.detail.keyboardHeight-u);e.requestAnimationFrame(function(){t-=l,r.style.height=t+"px",n.resize()})}n.isShrunkForKeyboard=!0}i.detail.isElementUnderKeyboard&&e.requestAnimationFrame(function(){n.isShrunkForKeyboard&&!a&&(o=r.getBoundingClientRect().bottom);var s=.5*t,c=(i.detail.elementBottom+i.detail.elementTop)/2,u=c-o,l=u+s;l>0&&(e.Platform.isIOS()?setTimeout(function(){e.tap.cloneFocusedInput(r,n),n.scrollBy(0,l,!0),n.onScroll()},32):(n.scrollBy(0,l,!0),n.onScroll()))}),i.stopPropagation()},n.resetScrollView=function(){n.isShrunkForKeyboard&&(n.isShrunkForKeyboard=!1,r.style.height=""),n.resize()},r.addEventListener("scroll",n.onScroll),r.addEventListener("scrollChildIntoView",n.scrollChildIntoView),document.addEventListener("resetScrollView",n.resetScrollView)},__cleanup:function(){var n=this,r=n.__container;r.removeEventListener("resetScrollView",n.resetScrollView),r.removeEventListener("scroll",n.onScroll),r.removeEventListener("scrollChildIntoView",n.scrollChildIntoView),r.removeEventListener("resetScrollView",n.resetScrollView),e.tap.removeClonedInputs(r,n),delete n.__container,delete n.__content,delete n.__indicatorX,delete n.__indicatorY,delete n.options.el,n.resize=n.scrollTo=n.onScroll=n.resetScrollView=t,n.scrollChildIntoView=t,r=null}})}(ionic),function(e){"use strict";var t="item",n="item-content",r="item-sliding",i="item-options",o="item-placeholder",a="item-reordering",s="item-reorder",c=function(){};c.prototype={start:function(){},drag:function(){},end:function(){},isSameItem:function(){return!1}};var u=function(e){this.dragThresholdX=e.dragThresholdX||10,this.el=e.el,this.item=e.item,this.canSwipe=e.canSwipe};u.prototype=new c,u.prototype.start=function(o){var a,s,c,u;this.canSwipe()&&(a=o.target.classList.contains(n)?o.target:o.target.classList.contains(t)?o.target.querySelector("."+n):e.DomUtil.getParentWithClass(o.target,n),a&&(a.classList.remove(r),c=parseFloat(a.style[e.CSS.TRANSFORM].replace("translate3d(","").split(",")[0])||0,s=a.parentNode.querySelector("."+i),s&&(s.classList.remove("invisible"),u=s.offsetWidth,this._currentDrag={buttons:s,buttonsWidth:u,content:a,startOffsetX:c})))},u.prototype.isSameItem=function(e){return e._lastDrag&&this._currentDrag?this._currentDrag.content==e._lastDrag.content:!1},u.prototype.clean=function(t){function n(){r.buttons&&r.buttons.classList.add("invisible")}var r=this._lastDrag;r&&r.content&&(r.content.style[e.CSS.TRANSITION]="",r.content.style[e.CSS.TRANSFORM]="",t?(r.content.style[e.CSS.TRANSITION]="none",n(),e.requestAnimationFrame(function(){r.content.style[e.CSS.TRANSITION]=""})):e.requestAnimationFrame(function(){setTimeout(n,250)}))},u.prototype.drag=e.animationFrameThrottle(function(t){var n;if(this._currentDrag&&(!this._isDragging&&(Math.abs(t.gesture.deltaX)>this.dragThresholdX||Math.abs(this._currentDrag.startOffsetX)>0)&&(this._isDragging=!0),this._isDragging)){n=this._currentDrag.buttonsWidth;var r=Math.min(0,this._currentDrag.startOffsetX+t.gesture.deltaX);-n>r&&(r=Math.min(-n,-n+.4*(t.gesture.deltaX+n))),this._currentDrag.content.$$ionicOptionsOpen=0!==r,this._currentDrag.content.style[e.CSS.TRANSFORM]="translate3d("+r+"px, 0, 0)",this._currentDrag.content.style[e.CSS.TRANSITION]="none"}}),u.prototype.end=function(t,n){var r=this;if(!r._currentDrag)return void(n&&n());var i=-r._currentDrag.buttonsWidth;t.gesture.deltaX>-(r._currentDrag.buttonsWidth/2)&&("left"==t.gesture.direction&&Math.abs(t.gesture.velocityX)<.3?i=0:"right"==t.gesture.direction&&(i=0)),e.requestAnimationFrame(function(){if(0===i){r._currentDrag.content.style[e.CSS.TRANSFORM]="";var t=r._currentDrag.buttons;setTimeout(function(){t&&t.classList.add("invisible")},250)}else r._currentDrag.content.style[e.CSS.TRANSFORM]="translate3d("+i+"px,0,0)";r._currentDrag.content.style[e.CSS.TRANSITION]="",r._lastDrag||(r._lastDrag={}),e.extend(r._lastDrag,r._currentDrag),r._currentDrag&&(r._currentDrag.buttons=null,r._currentDrag.content=null),r._currentDrag=null,n&&n()})};var l=function(e){var t=this;if(t.dragThresholdY=e.dragThresholdY||0,t.onReorder=e.onReorder,t.listEl=e.listEl,t.el=t.item=e.el,t.scrollEl=e.scrollEl,t.scrollView=e.scrollView,t.listElTrueTop=0,t.listEl.offsetParent){var n=t.listEl;do t.listElTrueTop+=n.offsetTop,n=n.offsetParent;while(n)}};l.prototype=new c,l.prototype._moveElement=function(t){var n=t.gesture.center.pageY+this.scrollView.getValues().top-this._currentDrag.elementHeight/2-this.listElTrueTop;this.el.style[e.CSS.TRANSFORM]="translate3d(0, "+n+"px, 0)"},l.prototype.deregister=function(){this.listEl=this.el=this.scrollEl=this.scrollView=null},l.prototype.start=function(t){var n=e.DomUtil.getChildIndex(this.el,this.el.nodeName.toLowerCase()),r=this.el.scrollHeight,i=this.el.cloneNode(!0);i.classList.add(o),this.el.parentNode.insertBefore(i,this.el),this.el.classList.add(a),this._currentDrag={elementHeight:r,startIndex:n,placeholder:i,scrollHeight:scroll,list:i.parentNode},this._moveElement(t)},l.prototype.drag=e.animationFrameThrottle(function(t){var n=this;if(this._currentDrag){var r=0,i=t.gesture.center.pageY,o=this.listElTrueTop;if(this.scrollView){var a=this.scrollView.__container;r=this.scrollView.getValues().top;var s=a.offsetTop,c=s-i+this._currentDrag.elementHeight/2,u=i+this._currentDrag.elementHeight/2-s-a.offsetHeight;t.gesture.deltaY<0&&c>0&&r>0&&(this.scrollView.scrollBy(null,-c),e.requestAnimationFrame(function(){n.drag(t)})),t.gesture.deltaY>0&&u>0&&r<this.scrollView.getScrollMax().top&&(this.scrollView.scrollBy(null,u),e.requestAnimationFrame(function(){n.drag(t)}))}!this._isDragging&&Math.abs(t.gesture.deltaY)>this.dragThresholdY&&(this._isDragging=!0),this._isDragging&&(this._moveElement(t),this._currentDrag.currentY=r+i-o)}}),l.prototype._getReorderIndex=function(){for(var e,t=this,n=Array.prototype.slice.call(t._currentDrag.placeholder.parentNode.children).filter(function(e){return e.nodeName===t.el.nodeName&&e!==t.el}),r=t._currentDrag.currentY,i=0,o=n.length;o>i;i++)if(e=n[i],i===o-1){if(r>e.offsetTop)return i}else if(0===i){if(r<e.offsetTop+e.offsetHeight)return i}else if(r>e.offsetTop-e.offsetHeight/2&&r<e.offsetTop+e.offsetHeight)return i;return t._currentDrag.startIndex},l.prototype.end=function(t,n){if(!this._currentDrag)return void(n&&n());var r=this._currentDrag.placeholder,i=this._getReorderIndex();this.el.classList.remove(a),this.el.style[e.CSS.TRANSFORM]="",r.parentNode.insertBefore(this.el,r),r.parentNode.removeChild(r),this.onReorder&&this.onReorder(this.el,this._currentDrag.startIndex,i),this._currentDrag={placeholder:null,content:null},this._currentDrag=null,n&&n()},e.views.ListView=e.views.View.inherit({initialize:function(t){var n=this;t=e.extend({onReorder:function(){},virtualRemoveThreshold:-200,virtualAddThreshold:200,canSwipe:function(){return!0}},t),e.extend(n,t),!n.itemHeight&&n.listEl&&(n.itemHeight=n.listEl.children[0]&&parseInt(n.listEl.children[0].style.height,10)),n.onRefresh=t.onRefresh||function(){},n.onRefreshOpening=t.onRefreshOpening||function(){},n.onRefreshHolding=t.onRefreshHolding||function(){};var r={};e.DomUtil.getParentOrSelfWithClass(n.el,"overflow-scroll")&&(r.prevent_default_directions=["left","right"]),window.ionic.onGesture("release",function(e){n._handleEndDrag(e)},n.el,r),window.ionic.onGesture("drag",function(e){n._handleDrag(e)},n.el,r),n._initDrag()},deregister:function(){this.el=this.listEl=this.scrollEl=this.scrollView=null,this.isScrollFreeze&&self.scrollView.freeze(!1)},stopRefreshing:function(){var e=this.el.querySelector(".list-refresher");e.style.height="0"},didScroll:function(e){var t=this;if(t.isVirtual){var n=t.itemHeight,r=e.target.scrollHeight,i=t.el.parentNode.offsetHeight,o=Math.max(0,e.scrollTop+t.virtualRemoveThreshold),a=Math.min(r,Math.abs(e.scrollTop)+i+t.virtualAddThreshold),s=parseInt(Math.abs(o/n),10),c=parseInt(Math.abs(a/n),10);t._virtualItemsToRemove=Array.prototype.slice.call(t.listEl.children,0,s),t.renderViewport&&t.renderViewport(o,a,s,c)}},didStopScrolling:function(){if(this.isVirtual)for(var e=0;e<this._virtualItemsToRemove.length;e++)this.didHideItem&&this.didHideItem(e)},clearDragEffects:function(e){this._lastDragOp&&(this._lastDragOp.clean&&this._lastDragOp.clean(e),this._lastDragOp.deregister&&this._lastDragOp.deregister(),this._lastDragOp=null);
},_initDrag:function(){this._lastDragOp&&this._lastDragOp.deregister&&this._lastDragOp.deregister(),this._lastDragOp=this._dragOp,this._dragOp=null},_getItem:function(e){for(;e;){if(e.classList&&e.classList.contains(t))return e;e=e.parentNode}return null},_startDrag:function(t){var n=this;n._isDragging=!1;var r,i=n._lastDragOp;n._didDragUpOrDown&&i instanceof u&&i.clean&&i.clean(),!e.DomUtil.getParentOrSelfWithClass(t.target,s)||"up"!=t.gesture.direction&&"down"!=t.gesture.direction?!n._didDragUpOrDown&&("left"==t.gesture.direction||"right"==t.gesture.direction)&&Math.abs(t.gesture.deltaX)>5&&(r=n._getItem(t.target),r&&r.querySelector(".item-options")&&(n._dragOp=new u({el:n.el,item:r,canSwipe:n.canSwipe}),n._dragOp.start(t),t.preventDefault(),n.isScrollFreeze=n.scrollView.freeze(!0))):(r=n._getItem(t.target),r&&(n._dragOp=new l({listEl:n.el,el:r,scrollEl:n.scrollEl,scrollView:n.scrollView,onReorder:function(e,t,r){n.onReorder&&n.onReorder(e,t,r)}}),n._dragOp.start(t),t.preventDefault())),i&&n._dragOp&&!n._dragOp.isSameItem(i)&&t.defaultPrevented&&i.clean&&i.clean()},_handleEndDrag:function(e){var t=this;t.scrollView&&(t.isScrollFreeze=t.scrollView.freeze(!1)),t._didDragUpOrDown=!1,t._dragOp&&t._dragOp.end(e,function(){t._initDrag()})},_handleDrag:function(e){var t=this;Math.abs(e.gesture.deltaY)>5&&(t._didDragUpOrDown=!0),t.isDragging||t._dragOp||t._startDrag(e),t._dragOp&&(e.gesture.srcEvent.preventDefault(),t._dragOp.drag(e))}})}(ionic),function(e){"use strict";e.views.Modal=e.views.View.inherit({initialize:function(t){t=e.extend({focusFirstInput:!1,unfocusOnHide:!0,focusFirstDelay:600,backdropClickToClose:!0,hardwareBackButtonClose:!0},t),e.extend(this,t),this.el=t.el},show:function(){var e=this;e.focusFirstInput&&window.setTimeout(function(){var t=e.el.querySelector("input, textarea");t&&t.focus&&t.focus()},e.focusFirstDelay)},hide:function(){if(this.unfocusOnHide){var e=this.el.querySelectorAll("input, textarea");window.setTimeout(function(){for(var t=0;t<e.length;t++)e[t].blur&&e[t].blur()})}}})}(ionic),function(e){"use strict";e.views.SideMenu=e.views.View.inherit({initialize:function(e){this.el=e.el,this.isEnabled="undefined"==typeof e.isEnabled?!0:e.isEnabled,this.setWidth(e.width)},getFullWidth:function(){return this.width},setWidth:function(e){this.width=e,this.el.style.width=e+"px"},setIsEnabled:function(e){this.isEnabled=e},bringUp:function(){"0"!==this.el.style.zIndex&&(this.el.style.zIndex="0")},pushDown:function(){"-1"!==this.el.style.zIndex&&(this.el.style.zIndex="-1")}}),e.views.SideMenuContent=e.views.View.inherit({initialize:function(t){e.extend(this,{animationClass:"menu-animated",onDrag:function(){},onEndDrag:function(){}},t),e.onGesture("drag",e.proxy(this._onDrag,this),this.el),e.onGesture("release",e.proxy(this._onEndDrag,this),this.el)},_onDrag:function(e){this.onDrag&&this.onDrag(e)},_onEndDrag:function(e){this.onEndDrag&&this.onEndDrag(e)},disableAnimation:function(){this.el.classList.remove(this.animationClass)},enableAnimation:function(){this.el.classList.add(this.animationClass)},getTranslateX:function(){return parseFloat(this.el.style[e.CSS.TRANSFORM].replace("translate3d(","").split(",")[0])},setTranslateX:e.animationFrameThrottle(function(t){this.el.style[e.CSS.TRANSFORM]="translate3d("+t+"px, 0, 0)"})})}(ionic),function(e){"use strict";e.views.Slider=e.views.View.inherit({initialize:function(e){function t(){if(g.offsetWidth){m=w.children,b=m.length,m.length<2&&(e.continuous=!1),h.transitions&&e.continuous&&m.length<3&&(w.appendChild(m[0].cloneNode(!0)),w.appendChild(w.children[1].cloneNode(!0)),m=w.children),v=new Array(m.length),y=g.offsetWidth||g.getBoundingClientRect().width,w.style.width=m.length*y+"px";for(var t=m.length;t--;){var n=m[t];n.style.width=y+"px",n.setAttribute("data-index",t),h.transitions&&(n.style.left=t*-y+"px",a(t,S>t?-y:t>S?y:0,0))}e.continuous&&h.transitions&&(a(i(S-1),-y,0),a(i(S+1),y,0)),h.transitions||(w.style.left=S*-y+"px"),g.style.visibility="visible",e.slidesChanged&&e.slidesChanged()}}function n(t){e.continuous?o(S-1,t):S&&o(S-1,t)}function r(t){e.continuous?o(S+1,t):S<m.length-1&&o(S+1,t)}function i(e){return(m.length+e%m.length)%m.length}function o(t,n){if(S!=t){if(h.transitions){var r=Math.abs(S-t)/(S-t);if(e.continuous){var o=r;r=-v[i(t)]/y,r!==o&&(t=-r*m.length+t)}for(var s=Math.abs(S-t)-1;s--;)a(i((t>S?t:S)-s-1),y*r,0);t=i(t),a(S,y*r,n||C),a(t,0,n||C),e.continuous&&a(i(t-r),-(y*r),0)}else t=i(t),c(S*-y,t*-y,n||C);S=t,p(e.callback&&e.callback(S,m[S]))}}function a(e,t,n){s(e,t,n),v[e]=t}function s(e,t,n){var r=m[e],i=r&&r.style;i&&(i.webkitTransitionDuration=i.MozTransitionDuration=i.msTransitionDuration=i.OTransitionDuration=i.transitionDuration=n+"ms",i.webkitTransform="translate("+t+"px,0)translateZ(0)",i.msTransform=i.MozTransform=i.OTransform="translateX("+t+"px)")}function c(t,n,r){if(!r)return void(w.style.left=n+"px");var i=+new Date,o=setInterval(function(){var a=+new Date-i;return a>r?(w.style.left=n+"px",T&&u(),e.transitionEnd&&e.transitionEnd.call(event,S,m[S]),void clearInterval(o)):void(w.style.left=(n-t)*(Math.floor(a/r*100)/100)+t+"px")},4)}function u(){_=setTimeout(r,T)}function l(){T=e.auto||0,clearTimeout(_)}var f=this,d=function(){},p=function(e){setTimeout(e||d,0)},h={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in t)if(void 0!==e.style[t[n]])return!0;return!1}(document.createElement("swipe"))},g=e.el;if(g){var m,v,y,b,w=g.children[0];e=e||{};var S=parseInt(e.startSlide,10)||0,C=e.speed||300;e.continuous=void 0!==e.continuous?e.continuous:!0;var _,E,T=e.auto||0,A={},I={},k={handleEvent:function(n){switch(("mousedown"==n.type||"mouseup"==n.type||"mousemove"==n.type)&&(n.touches=[{pageX:n.pageX,pageY:n.pageY}]),n.type){case"mousedown":this.start(n);break;case"touchstart":this.start(n);break;case"touchmove":this.touchmove(n);break;case"mousemove":this.touchmove(n);break;case"touchend":p(this.end(n));break;case"mouseup":p(this.end(n));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":p(this.transitionEnd(n));break;case"resize":p(t)}e.stopPropagation&&n.stopPropagation()},start:function(e){var t=e.touches[0];A={x:t.pageX,y:t.pageY,time:+new Date},E=void 0,I={},h.touch?(w.addEventListener("touchmove",this,!1),w.addEventListener("touchend",this,!1)):(w.addEventListener("mousemove",this,!1),w.addEventListener("mouseup",this,!1),document.addEventListener("mouseup",this,!1))},touchmove:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale||f.slideIsDisabled)){e.disableScroll&&t.preventDefault();var n=t.touches[0];I={x:n.pageX-A.x,y:n.pageY-A.y},"undefined"==typeof E&&(E=!!(E||Math.abs(I.x)<Math.abs(I.y))),E||(t.preventDefault(),l(),e.continuous?(s(i(S-1),I.x+v[i(S-1)],0),s(S,I.x+v[S],0),s(i(S+1),I.x+v[i(S+1)],0)):(I.x=I.x/(!S&&I.x>0||S==m.length-1&&I.x<0?Math.abs(I.x)/y+1:1),s(S-1,I.x+v[S-1],0),s(S,I.x+v[S],0),s(S+1,I.x+v[S+1],0)),e.onDrag&&e.onDrag())}},end:function(){var t=+new Date-A.time,n=Number(t)<250&&Math.abs(I.x)>20||Math.abs(I.x)>y/2,r=!S&&I.x>0||S==m.length-1&&I.x<0;e.continuous&&(r=!1);var o=I.x<0;E||(n&&!r?(o?(e.continuous?(a(i(S-1),-y,0),a(i(S+2),y,0)):a(S-1,-y,0),a(S,v[S]-y,C),a(i(S+1),v[i(S+1)]-y,C),S=i(S+1)):(e.continuous?(a(i(S+1),y,0),a(i(S-2),-y,0)):a(S+1,y,0),a(S,v[S]+y,C),a(i(S-1),v[i(S-1)]+y,C),S=i(S-1)),e.callback&&e.callback(S,m[S])):e.continuous?(a(i(S-1),-y,C),a(S,0,C),a(i(S+1),y,C)):(a(S-1,-y,C),a(S,0,C),a(S+1,y,C))),h.touch?(w.removeEventListener("touchmove",k,!1),w.removeEventListener("touchend",k,!1)):(w.removeEventListener("mousemove",k,!1),w.removeEventListener("mouseup",k,!1),document.removeEventListener("mouseup",k,!1)),e.onDragEnd&&e.onDragEnd()},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==S&&(T&&u(),e.transitionEnd&&e.transitionEnd.call(t,S,m[S]))}};this.update=function(){setTimeout(t)},this.setup=function(){t()},this.loop=function(t){return arguments.length&&(e.continuous=!!t),e.continuous},this.enableSlide=function(e){return arguments.length&&(this.slideIsDisabled=!e),!this.slideIsDisabled},this.slide=this.select=function(e,t){l(),o(e,t)},this.prev=this.previous=function(){l(),n()},this.next=function(){l(),r()},this.stop=function(){l()},this.start=function(){u()},this.autoPlay=function(e){!T||0>T?l():(T=e,u())},this.currentIndex=this.selected=function(){return S},this.slidesCount=this.count=function(){return b},this.kill=function(){l(),w.style.width="",w.style.left="",m&&(m=[]),h.addEventListener?(w.removeEventListener("touchstart",k,!1),w.removeEventListener("webkitTransitionEnd",k,!1),w.removeEventListener("msTransitionEnd",k,!1),w.removeEventListener("oTransitionEnd",k,!1),w.removeEventListener("otransitionend",k,!1),w.removeEventListener("transitionend",k,!1),window.removeEventListener("resize",k,!1)):window.onresize=null},this.load=function(){t(),T&&u(),h.addEventListener?(h.touch?w.addEventListener("touchstart",k,!1):w.addEventListener("mousedown",k,!1),h.transitions&&(w.addEventListener("webkitTransitionEnd",k,!1),w.addEventListener("msTransitionEnd",k,!1),w.addEventListener("oTransitionEnd",k,!1),w.addEventListener("otransitionend",k,!1),w.addEventListener("transitionend",k,!1)),window.addEventListener("resize",k,!1)):window.onresize=function(){t()}}}}})}(ionic),function(e){"use strict";e.views.Toggle=e.views.View.inherit({initialize:function(t){var n=this;this.el=t.el,this.checkbox=t.checkbox,this.track=t.track,this.handle=t.handle,this.openPercent=-1,this.onChange=t.onChange||function(){},this.triggerThreshold=t.triggerThreshold||20,this.dragStartHandler=function(e){n.dragStart(e)},this.dragHandler=function(e){n.drag(e)},this.holdHandler=function(e){n.hold(e)},this.releaseHandler=function(e){n.release(e)},this.dragStartGesture=e.onGesture("dragstart",this.dragStartHandler,this.el),this.dragGesture=e.onGesture("drag",this.dragHandler,this.el),this.dragHoldGesture=e.onGesture("hold",this.holdHandler,this.el),this.dragReleaseGesture=e.onGesture("release",this.releaseHandler,this.el)},destroy:function(){e.offGesture(this.dragStartGesture,"dragstart",this.dragStartGesture),e.offGesture(this.dragGesture,"drag",this.dragGesture),e.offGesture(this.dragHoldGesture,"hold",this.holdHandler),e.offGesture(this.dragReleaseGesture,"release",this.releaseHandler)},tap:function(){"disabled"!==this.el.getAttribute("disabled")&&this.val(!this.checkbox.checked)},dragStart:function(e){this.checkbox.disabled||(this._dragInfo={width:this.el.offsetWidth,left:this.el.offsetLeft,right:this.el.offsetLeft+this.el.offsetWidth,triggerX:this.el.offsetWidth/2,initialState:this.checkbox.checked},e.gesture.srcEvent.preventDefault(),this.hold(e))},drag:function(t){var n=this;this._dragInfo&&(t.gesture.srcEvent.preventDefault(),e.requestAnimationFrame(function(){if(n._dragInfo){var e=t.gesture.touches[0].pageX-n._dragInfo.left,r=n._dragInfo.width-n.triggerThreshold;n._dragInfo.initialState?e<n.triggerThreshold?n.setOpenPercent(0):e>n._dragInfo.triggerX&&n.setOpenPercent(100):e<n._dragInfo.triggerX?n.setOpenPercent(0):e>r&&n.setOpenPercent(100)}}))},endDrag:function(){this._dragInfo=null},hold:function(){this.el.classList.add("dragging")},release:function(e){this.el.classList.remove("dragging"),this.endDrag(e)},setOpenPercent:function(t){if(this.openPercent<0||t<this.openPercent-3||t>this.openPercent+3)if(this.openPercent=t,0===t)this.val(!1);else if(100===t)this.val(!0);else{var n=Math.round(t/100*this.track.offsetWidth-this.handle.offsetWidth);n=1>n?0:n,this.handle.style[e.CSS.TRANSFORM]="translate3d("+n+"px,0,0)"}},val:function(t){return(t===!0||t===!1)&&(""!==this.handle.style[e.CSS.TRANSFORM]&&(this.handle.style[e.CSS.TRANSFORM]=""),this.checkbox.checked=t,this.openPercent=t?100:0,this.onChange&&this.onChange()),this.checkbox.checked}})}(ionic)}()}(),r()}),System.registerDynamic("github:jspm/nodelibs-stream@0.1.0",["github:jspm/nodelibs-stream@0.1.0/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("github:jspm/nodelibs-stream@0.1.0/index"),r.define=i,n.exports}),System.registerDynamic("npm:qr-image@3.1.0/lib/qr-base",["npm:qr-image@3.1.0/lib/encode","npm:qr-image@3.1.0/lib/errorcode","npm:qr-image@3.1.0/lib/matrix","github:jspm/nodelibs-buffer@0.1.0"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(t){"use strict";function r(e){return JSON.parse(JSON.stringify(e))}function i(e,t){var n,i=1;for(e.data1?n=Math.ceil(e.data1.length/8):i=10;10>i;i++){var o=f[i][t];if(o.data_len>=n)return r(o)}for(e.data10?n=Math.ceil(e.data10.length/8):i=27;27>i;i++){var o=f[i][t];if(o.data_len>=n)return r(o)}for(n=Math.ceil(e.data27.length/8);41>i;i++){var o=f[i][t];if(o.data_len>=n)return r(o)}throw new Error("Too much data")}function o(e,n){var r=t(n.data_len);r.fill(0),e=n.version<10?e.data1:n.version<27?e.data10:e.data27;for(var i=e.length,o=0;i>o;o+=8){for(var a=0,s=0;8>s;s++)a=a<<1|(e[o+s]?1:0);r[o/8]=a}for(var u=236,o=Math.ceil((i+4)/8);o<r.length;o++)r[o]=u,u=236==u?17:236;var l=0;return n.blocks=n.blocks.map(function(e){var t=r.slice(l,l+e);return l+=e,n.ec.push(c(t,n.ec_len)),t}),n}function a(e,t,n){t=l.indexOf(t)>-1?t:"M";var r=s(e,n),a=o(r,i(r,t));return u.getMatrix(a)}var s=e("npm:qr-image@3.1.0/lib/encode"),c=e("npm:qr-image@3.1.0/lib/errorcode"),u=e("npm:qr-image@3.1.0/lib/matrix"),l=["L","M","Q","H"],f=[[],[26,7,1,10,1,13,1,17,1],[44,10,1,16,1,22,1,28,1],[70,15,1,26,1,36,2,44,2],[100,20,1,36,2,52,2,64,4],[134,26,1,48,2,72,4,88,4],[172,36,2,64,4,96,4,112,4],[196,40,2,72,4,108,6,130,5],[242,48,2,88,4,132,6,156,6],[292,60,2,110,5,160,8,192,8],[346,72,4,130,5,192,8,224,8],[404,80,4,150,5,224,8,264,11],[466,96,4,176,8,260,10,308,11],[532,104,4,198,9,288,12,352,16],[581,120,4,216,9,320,16,384,16],[655,132,6,240,10,360,12,432,18],[733,144,6,280,10,408,17,480,16],[815,168,6,308,11,448,16,532,19],[901,180,6,338,13,504,18,588,21],[991,196,7,364,14,546,21,650,25],[1085,224,8,416,16,600,20,700,25],[1156,224,8,442,17,644,23,750,25],[1258,252,9,476,17,690,23,816,34],[1364,270,9,504,18,750,25,900,30],[1474,300,10,560,20,810,27,960,32],[1588,312,12,588,21,870,29,1050,35],[1706,336,12,644,23,952,34,1110,37],[1828,360,12,700,25,1020,34,1200,40],[1921,390,13,728,26,1050,35,1260,42],[2051,420,14,784,28,1140,38,1350,45],[2185,450,15,812,29,1200,40,1440,48],[2323,480,16,868,31,1290,43,1530,51],[2465,510,17,924,33,1350,45,1620,54],[2611,540,18,980,35,1440,48,1710,57],[2761,570,19,1036,37,1530,51,1800,60],[2876,570,19,1064,38,1590,53,1890,63],[3034,600,20,1120,40,1680,56,1980,66],[3196,630,21,1204,43,1770,59,2100,70],[3362,660,22,1260,45,1860,62,2220,74],[3532,720,24,1316,47,1950,65,2310,77],[3706,750,25,1372,49,2040,68,2430,81]];f=f.map(function(e,t){if(!t)return{};for(var n={},r=1;8>r;r+=2){for(var i=e[0]-e[r],o=e[r+1],a=l[r/2|0],s={version:t,ec_level:a,data_len:i,ec_len:e[r]/o,blocks:[],ec:[]},c=o,u=i;c>0;c--){var f=u/c|0;s.blocks.push(f),u-=f}n[a]=s}return n}),n.exports={QR:a,getTemplate:i,fillTemplate:o}}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer),r.define=i,n.exports}),System.registerDynamic("npm:qr-image@3.1.0/lib/vector",[],!0,function(e,t,n){function r(e){function t(t,n){return 0>t||0>n||t>=r||n>=r?!1:!!e[t][n]}function n(e,n,r){i[e][n]=1;var o=[];o.push(["M",n,e]);var a=e,s=n,c=0;do switch(r){case"right":i[a][s]=1,t(a,s)?(i[a-1][s]=1,t(a-1,s)?(o.push(["h",c]),c=0,r="up"):(c++,s++)):(o.push(["h",c]),c=0,r="down");break;case"left":i[a-1][s-1]=1,t(a-1,s-1)?(i[a][s-1]=1,t(a,s-1)?(o.push(["h",-c]),c=0,r="down"):(c++,s--)):(o.push(["h",-c]),c=0,r="up");break;case"down":i[a][s-1]=1,t(a,s-1)?(i[a][s]=1,t(a,s)?(o.push(["v",c]),c=0,r="right"):(c++,a++)):(o.push(["v",c]),c=0,r="left");break;case"up":i[a-1][s]=1,t(a-1,s)?(i[a-1][s-1]=1,t(a-1,s-1)?(o.push(["v",-c]),c=0,r="left"):(c++,a--)):(o.push(["v",-c]),c=0,r="right")}while(a!=e||s!=n);return o}for(var r=e.length,i=[],o=-1;r>=o;o++)i[o]=[];for(var a=[],o=0;r>o;o++)for(var s=0;r>s;s++)i[o][s]||(i[o][s]=1,t(o,s)?t(o-1,s)||a.push(n(o,s,"right")):t(o,s-1)&&a.push(n(o,s,"down")));return a}function i(e,t,n){r(e).forEach(function(e){for(var r="",i=0;i<e.length;i++){var o=e[i];switch(o[0]){case"M":r+="M"+(o[1]+n)+" "+(o[2]+n);break;default:r+=o.join("")}}r+="z",t.push(r)})}function o(e,t){var n=[];i(e,n,t);var r={size:e.length+2*t,path:n.filter(Boolean).join("")};return r}function a(e,t,n,r){var o=e.length+2*n;if(t.push('<svg xmlns="http://www.w3.org/2000/svg" '),r>0){var a=o*r;t.push('width="'+a+'" height="'+a+'" ')}t.push('viewBox="0 0 '+o+" "+o+'">'),t.push('<path d="'),i(e,t,n),t.push('"/></svg>'),t.push(null)}function s(e,t,n){var i=e.length,o=9,a=(i+2*n)*o;t.push(["%!PS-Adobe-3.0 EPSF-3.0","%%BoundingBox: 0 0 "+a+" "+a,"/h { 0 rlineto } bind def","/v { 0 exch neg rlineto } bind def","/M { neg "+(i+n)+" add moveto } bind def","/z { closepath } bind def",o+" "+o+" scale",""].join("\n")),r(e).forEach(function(e){for(var r="",i=0;i<e.length;i++){var o=e[i];switch(o[0]){case"M":r+=o[1]+n+" "+o[2]+" M ";break;default:r+=o[1]+" "+o[0]+" "}}r+="z\n",t.push(r)}),t.push("fill\n%%EOF\n"),t.push(null)}function c(e,t,n){var i=e.length,o=9,a=(i+2*n)*o,s=["%PDF-1.0\n\n","1 0 obj << /Type /Catalog /Pages 2 0 R >> endobj\n","2 0 obj << /Type /Pages /Count 1 /Kids [ 3 0 R ] >> endobj\n"];s.push("3 0 obj << /Type /Page /Parent 2 0 R /Resources <<>> /Contents 4 0 R /MediaBox [ 0 0 "+a+" "+a+" ] >> endobj\n");var c=o+" 0 0 "+o+" 0 0 cm\n";c+=r(e).map(function(e){for(var t,r,o="",a=0;a<e.length;a++){var s=e[a];switch(s[0]){case"M":t=s[1]+n,r=i-s[2]+n,o+=t+" "+r+" m ";break;case"h":t+=s[1],o+=t+" "+r+" l ";break;case"v":r-=s[1],o+=t+" "+r+" l "}}return o+="h"}).join("\n"),c+="\nf\n",s.push("4 0 obj << /Length "+c.length+" >> stream\n"+c+"endstream\nendobj\n");for(var u="xref\n0 5\n0000000000 65535 f \n",l=1,f=s[0].length;5>l;l++)u+=("0000000000"+f).substr(-10)+" 00000 n \n",f+=s[l].length;s.push(u,"trailer << /Root 1 0 R /Size 5 >>\n","startxref\n"+f+"\n%%EOF\n"),t.push(s.join("")),t.push(null)}var u=this,l=u.define;return u.define=void 0,n.exports={svg:a,eps:s,pdf:c,svg_object:o},u.define=l,n.exports}),System.registerDynamic("npm:emmett@3.1.1",["npm:emmett@3.1.1/emmett"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:emmett@3.1.1/emmett"),r.define=i,n.exports}),System.registerDynamic("npm:baobab@2.0.0-rc1/dist/type",[],!0,function(e,t,n){function r(e,t){return t.some(function(t){return a[t](e)})}var i=this,o=i.define;i.define=void 0,Object.defineProperty(t,"__esModule",{value:!0});var a={};a.array=function(e){return Array.isArray(e)},a.object=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Date)&&!(e instanceof RegExp)},a.string=function(e){return"string"==typeof e},a.number=function(e){return"number"==typeof e},a["function"]=function(e){return"function"==typeof e},a.primitive=function(e){return e!==Object(e)},a.splicer=function(e){return!a.array(e)||e.length<2?!1:r(e[0],["number","function","object"])&&a.number(e[1])};var s=["string","number","function","object"];a.path=function(e){return e||0===e||""===e?[].concat(e).every(function(e){return r(e,s)}):!1},a.dynamicPath=function(e){return e.some(function(e){return a["function"](e)||a.object(e)})},a.facetPath=function(e){var t=[],n=void 0,r=void 0;for(n=0,r=e.length;r>n;n++)if(t.push(e[n]),"$"===e[n][0])return t;return null},a.readOnlyPath=function(e){return e.some(function(e){return"$"===e[0]})},a.facetDefinition=function(e){return a.object(e)?!a["function"](e.get)||e.cursors&&!Object.keys(e).every(function(t){return a.path(e[t])})?null:"object":a.array(e)&&a["function"](e[e.length-1])&&e.slice(0,-1).every(function(e){return a.path(e)})?"array":null},a.watcherMapping=function(e){return a.object(e)&&Object.keys(e).every(function(t){return a.path(e[t])})};var c=["set","apply","push","unshift","concat","merge","splice","unset"];return a.operationType=function(e){return"string"==typeof e&&!!~c.indexOf(e)},t["default"]=a,n.exports=t["default"],i.define=o,n.exports}),System.registerDynamic("npm:baobab@2.0.0-rc1/dist/cursor",["npm:emmett@3.1.1","npm:baobab@2.0.0-rc1/dist/type","npm:baobab@2.0.0-rc1/dist/helpers"],!0,function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!t)throw m.makeError("Baobab.Cursor."+e+": "+("cannot use "+e+" on an unresolved dynamic path."),{path:t})}function s(e,t){v.prototype[e]=function(n,r){if(arguments.length>2)throw m.makeError("Baobab.Cursor."+e+": too many arguments.");if(1===arguments.length&&"unset"!==e&&(r=n,n=[]),n=m.coercePath(n),!g["default"].path(n))throw m.makeError("Baobab.Cursor."+e+": invalid path.",{path:n});if(t&&!t(r))throw m.makeError("Baobab.Cursor."+e+": invalid value.",{path:n,value:r});var i=this.solvedPath.concat(n);if(g["default"].readOnlyPath(i))throw m.makeError("Baobab.Cursor."+e+": trying to update a read-only path.",{path:i});return this.tree.update(i,{type:e,value:r})}}var c=this,u=c.define;c.define=void 0,Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;s=u=c=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return void 0;e=u,t=o,n=a,r=!0}},d=e("npm:emmett@3.1.1"),p=r(d),h=e("npm:baobab@2.0.0-rc1/dist/type"),g=r(h),m=e("npm:baobab@2.0.0-rc1/dist/helpers"),v=function(e){function t(e,n,r){var o=this;i(this,t),f(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),n=n||[],this._identity="[object Cursor]",this._archive=null,this.tree=e,this.path=n,this.hash=r,this.state={killed:!1,recording:!1,undoing:!1},this._dynamicPath=g["default"].dynamicPath(this.path),this._facetPath=g["default"].facetPath(this.path),this._dynamicPath?this.solvedPath=this._getIn(this.path).solvedPath:this.solvedPath=this.path,this._writeHandler=function(e){var t=e.data;!o.state.killed&&m.solveUpdate([t.path],o._getComparedPaths())&&(o.solvedPath=o._getIn(o.path).solvedPath)};var a=function(e){var t=o,n=Object.defineProperties({},{previousData:{get:function(){return m.getIn(e,t.solvedPath).data},configurable:!0,enumerable:!0},currentData:{get:function(){return t.get()},configurable:!0,enumerable:!0}});return o.state.recording&&!o.state.undoing&&o.archive.add(n.previousData),o.state.undoing=!1,o.emit("update",n)};this._updateHandler=function(e){if(!o.state.killed){var t=e.data,n=t.paths,r=t.previousData,i=a.bind(o,r),s=o._getComparedPaths();return m.solveUpdate(n,s)?i():void 0}};var s=!1;this._lazyBind=function(){return s?void 0:(s=!0,o._dynamicPath&&o.tree.on("write",o._writeHandler),o.tree.on("update",o._updateHandler))},this._dynamicPath?this._lazyBind():(this.on=m.before(this._lazyBind,this.on.bind(this)),this.once=m.before(this._lazyBind,this.once.bind(this)))}return o(t,e),l(t,[{key:"_getIn",value:function(e){return m.getIn(this.tree._data,e)}},{key:"_getComparedPaths",value:function(){var e=this._facetPath?m.getIn(this.tree._facets,this._facetPath).data.relatedPaths():[];return[this.solvedPath].concat(e)}},{key:"isRoot",value:function(){return!this.path.length}},{key:"isLeaf",value:function(){return g["default"].primitive(this._get().data)}},{key:"isBranch",value:function(){return!this.isRoot()&&!this.isLeaf()}},{key:"root",value:function(){return this.tree.root}},{key:"select",value:function(e){return arguments.length>1&&(e=m.arrayFrom(arguments)),this.tree.select(this.path.concat(e))}},{key:"up",value:function(){return this.isRoot()?null:this.tree.select(this.path.slice(0,-1))}},{key:"down",value:function(){if(a("down",this.solvedPath),!(this._get().data instanceof Array))throw Error("Baobab.Cursor.down: cannot go down on a non-list type.");return this.tree.select(this.solvedPath.concat(0))}},{key:"left",value:function(){a("left",this.solvedPath);var e=+this.solvedPath[this.solvedPath.length-1];if(isNaN(e))throw Error("Baobab.Cursor.left: cannot go left on a non-list type.");return e?this.tree.select(this.solvedPath.slice(0,-1).concat(e-1)):null}},{key:"right",value:function(){a("right",this.solvedPath);var e=+this.solvedPath[this.solvedPath.length-1];if(isNaN(e))throw Error("Baobab.Cursor.right: cannot go right on a non-list type.");return e+1===this.up()._get().data.length?null:this.tree.select(this.solvedPath.slice(0,-1).concat(e+1))}},{key:"leftmost",value:function(){a("leftmost",this.solvedPath);var e=+this.solvedPath[this.solvedPath.length-1];if(isNaN(e))throw Error("Baobab.Cursor.leftmost: cannot go left on a non-list type.");return this.tree.select(this.solvedPath.slice(0,-1).concat(0))}},{key:"rightmost",value:function(){a("rightmost",this.solvedPath);var e=+this.solvedPath[this.solvedPath.length-1];if(isNaN(e))throw Error("Baobab.Cursor.rightmost: cannot go right on a non-list type.");var t=this.up()._get().data;return this.tree.select(this.solvedPath.slice(0,-1).concat(t.length-1))}},{key:"map",value:function(e,t){a("map",this.solvedPath);var n=this._get().data,r=arguments.length;if(!g["default"].array(n))throw Error("baobab.Cursor.map: cannot map a non-list type.");return n.map(function(i,o){return e.call(r>1?t:this,this.select(o),o,n)},this)}},{key:"_get",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];if(!g["default"].path(e))throw m.makeError("Baobab.Cursor.getters: invalid path.",{path:e});return this.solvedPath?this._getIn(this.solvedPath.concat(e)):{data:void 0,solvedPath:null,exists:!1}}},{key:"exists",value:function(e){return e=m.coercePath(e),arguments.length>1&&(e=m.arrayFrom(arguments)),this._get(e).exists}},{key:"get",value:function(e){e=m.coercePath(e),arguments.length>1&&(e=m.arrayFrom(arguments));var t=this._get(e),n=t.data,r=t.solvedPath;return this.tree.emit("get",{data:n,solvedPath:r,path:this.path.concat(e)}),n}},{key:"serialize",value:function(){var e=m.deepClone(this.get.apply(this,arguments)),t=function n(e){if(g["default"].object(e))for(var t in e)"$"===t[0]?delete e[t]:n(e[t])};return t(e),e}},{key:"project",value:function(e){if(g["default"].object(e)){var t={};for(var n in e)t[n]=this.get(e[n]);return t}if(g["default"].array(e)){for(var t=[],r=0,i=e.length;i>r;r++)t.push(this.get(e[r]));return t}throw m.makeError("Baobab.Cursor.project: wrong projection.",{projection:e})}},{key:"startRecording",value:function(e){if(e=e||1/0,1>e)throw m.makeError("Baobab.Cursor.startRecording: invalid max records.",{value:e});return this.archive?this:(this._lazyBind(),this.archive=new m.Archive(e),this.state.recording=!0,this)}},{key:"stopRecording",value:function(){return this.state.recording=!1,this}},{key:"undo",value:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];if(!this.state.recording)throw new Error("Baobab.Cursor.undo: cursor is not recording.");var t=this.archive.back(e);if(!t)throw Error("Baobab.Cursor.undo: cannot find a relevant record.");return this.state.undoing=!0,this.set(t),this}},{key:"hasHistory",value:function(){return!(!this.archive||!this.archive.get().length)}},{key:"getHistory",value:function(){return this.archive?this.archive.get():[]}},{key:"clearHistory",value:function(){return this.archive&&this.archive.clear(),this}},{key:"release",value:function(){this._dynamicPath&&this.tree.off("write",this._writeHandler),this.tree.off("update",this._updateHandler),this.hash&&delete this.tree._cursors[this.hash],delete this.tree,delete this.path,delete this.solvedPath,delete this.archive,this.kill(),this.state.killed=!0}},{key:"toJSON",value:function(){return this.serialize()}},{key:"toString",value:function(){return this._identity}}]),t}(p["default"]);return t["default"]=v,s("set"),s("unset"),s("apply",g["default"]["function"]),s("push"),s("concat",g["default"].array),s("unshift"),s("splice",g["default"].splicer),s("merge",g["default"].object),n.exports=t["default"],c.define=u,n.exports}),System.registerDynamic("npm:baobab@2.0.0-rc1/dist/facet",["npm:baobab@2.0.0-rc1/dist/type","npm:baobab@2.0.0-rc1/dist/update","npm:baobab@2.0.0-rc1/dist/helpers"],!0,function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=this,a=o.define;o.define=void 0,Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("npm:baobab@2.0.0-rc1/dist/type"),u=r(c),l=e("npm:baobab@2.0.0-rc1/dist/update"),f=r(l),d=e("npm:baobab@2.0.0-rc1/dist/helpers"),p=function(){function e(t,n,r){var o=this;i(this,e);var a=u["default"].facetDefinition(r);if(!a)throw d.makeError("Baobab.Facet: attempting to create a computed data node with a "+("wrong definition (path: /"+n.join("/")+")."),{path:n,definition:r});this.tree=t,this.path=n,this.computedData=null,this.type=a,"object"===a?(this.getter=r.get,this.projection=r.cursors||{},this.paths=Object.keys(this.projection).map(function(e){return o.projection[e]})):(this.getter=r[r.length-1],this.projection=r.slice(0,-1),this.paths=this.projection),this._hasDynamicPaths=this.paths.some(function(e){return u["default"].dynamicPath(e)}),this.isRecursive=this.paths.some(function(e){return!!u["default"].facetPath(e)}),this.state={computed:!1,killed:!1},this.listener=function(e){var t=e.data.path;if(!o.state.killed){var n=d.solveUpdate([t],o.relatedPaths());n&&(o.computedData=null,o.state.computed=!1,o.update())}},t.on("write",this.listener),this.update()}return s(e,[{key:"relatedPaths",value:function(){var e=this,t=void 0;return t=this._hasDynamicPaths?this.paths.map(function(t){return d.getIn(e.tree._data,t,e.tree._facets).solvedPath}):this.paths,this.isRecursive?t.reduce(function(t,n){var r=u["default"].facetPath(n);if(!r)return t.concat([n]);var i=d.getIn(e.tree._facets,r).data;return t.concat(i.relatedPaths())},[]):t}},{key:"update",value:function(){return this.tree._data=f["default"](this.tree._data,this.path,{type:"set",value:this.get()},this.tree.options).data,this}},{key:"get",value:function(){if(this.state.computed)return this.computedData;var e=this.tree.project(this.projection),t=this.getter.apply(this.tree,"object"===this.type?[e]:e);return this.state.computed=!0,this.computedData=t,this.tree.options.immutable&&d.deepFreeze(this.computedData),t}},{key:"release",value:function(){delete this.getter,delete this.projection,delete this.paths,this.tree.off("write",this.listener),this.state.killed=!0}}]),e}();return t["default"]=p,n.exports=t["default"],o.define=a,n.exports}),System.registerDynamic("npm:baobab@2.0.0-rc1/dist/watcher",["npm:emmett@3.1.1","npm:baobab@2.0.0-rc1/dist/cursor","npm:baobab@2.0.0-rc1/dist/type","npm:baobab@2.0.0-rc1/dist/helpers"],!0,function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,
enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=this,s=a.define;a.define=void 0,Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;s=u=c=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return void 0;e=u,t=o,n=a,r=!0}},l=e("npm:emmett@3.1.1"),f=r(l),d=e("npm:baobab@2.0.0-rc1/dist/cursor"),p=r(d),h=e("npm:baobab@2.0.0-rc1/dist/type"),g=r(h),m=e("npm:baobab@2.0.0-rc1/dist/helpers"),v=function(e){function t(e,n){var r=this;i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.tree=e,this.mapping=null,this.state={killed:!1},this.refresh(n),this.handler=function(e){if(!r.state.killed){var t=r.getWatchedPaths();return m.solveUpdate(e.data.paths,t)?r.emit("update"):void 0}},this.tree.on("update",this.handler)}return o(t,e),c(t,[{key:"getWatchedPaths",value:function(){var e=this,t=Object.keys(this.mapping).map(function(t){var n=e.mapping[t];return n instanceof p["default"]?n.solvedPath:e.mapping[t]});return t.reduce(function(t,n){if(g["default"].dynamicPath(n)&&(n=m.getIn(e.tree._data,n,e.tree._facets).solvedPath),!n)return t;var r=g["default"].facetPath(n);return r?t.concat(m.getIn(e.tree._facets,n).data.relatedPaths()):t.concat([n])},[])}},{key:"refresh",value:function(e){if(!g["default"].watcherMapping(e))throw m.makeError("Baobab.watch: invalid mapping.",{mapping:e});this.mapping=e;var t={};for(var n in e)t[n]=e[n]instanceof p["default"]?e[n].path:e[n];this.get=this.tree.project.bind(this.tree,t)}},{key:"release",value:function(){this.tree.off("update",this.handler),this.state.killed=!0,this.kill()}}]),t}(f["default"]);return t["default"]=v,n.exports=t["default"],a.define=s,n.exports}),System.registerDynamic("npm:baobab@2.0.0-rc1/dist/update",["npm:baobab@2.0.0-rc1/dist/type","npm:baobab@2.0.0-rc1/dist/helpers"],!0,function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){return f.makeError('Baobab.update: cannot apply the "'+e+'" on '+("a non "+t+" (path: /"+n.join("/")+")."),{path:n})}function a(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],a=n.type,s=n.value,c={root:e},u=["root"].concat(i(t)),d=c,p=[],h=void 0,g=void 0,m=void 0;for(h=0,g=u.length;g>h;h++){if(m=u[h],h>0&&p.push(m),h===g-1){if("set"===a)d[m]=r.persistent?f.shallowClone(s):s;else if("apply"===a){var v=s(d[m]);d[m]=r.persistent?f.shallowClone(v):v}else if("push"===a){if(!l["default"].array(d[m]))throw o("push","array",p);r.persistent?d[m]=d[m].concat([s]):d[m].push(s)}else if("unshift"===a){if(!l["default"].array(d[m]))throw o("unshift","array",p);r.persistent?d[m]=[s].concat(d[m]):d[m].unshift(s)}else if("concat"===a){if(!l["default"].array(d[m]))throw o("concat","array",p);r.persistent?d[m]=d[m].concat(s):d[m].push.apply(d[m],s)}else if("splice"===a){if(!l["default"].array(d[m]))throw o("splice","array",p);r.persistent?d[m]=f.splice.apply(null,[d[m]].concat(s)):d[m].splice.apply(d[m],s)}else if("unset"===a)l["default"].object(d)?delete d[m]:l["default"].array(d)&&d.splice(m,1);else if("merge"===a){if(!l["default"].object(d[m]))throw o("merge","object",p);r.persistent?d[m]=f.shallowMerge({},d[m],s):d[m]=f.shallowMerge(d[m],s)}r.immutable&&f.deepFreeze(d);break}l["default"].primitive(d[m])?d[m]={}:r.persistent&&(d[m]=f.shallowClone(d[m])),r.immutable&&g>0&&f.freeze(d),d=d[m]}return{data:c.root,node:d[m]}}var s=this,c=s.define;s.define=void 0,Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var u=e("npm:baobab@2.0.0-rc1/dist/type"),l=r(u),f=e("npm:baobab@2.0.0-rc1/dist/helpers");return n.exports=t["default"],s.define=c,n.exports}),System.registerDynamic("npm:baobab@2.0.0-rc1/dist/helpers",["npm:baobab@2.0.0-rc1/dist/type"],!0,function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return v(e)}function a(e,t){return function(){e.apply(null,arguments),t.apply(null,arguments)}}function s(e){var t=e.source,n="";return e.global&&(n+="g"),e.multiline&&(n+="m"),e.ignoreCase&&(n+="i"),e.sticky&&(n+="y"),e.unicode&&(n+="u"),new RegExp(t,n)}function c(e,t){if(!t||"object"!=typeof t||t instanceof Error||"ArrayBuffer"in w&&t instanceof ArrayBuffer)return t;if(E["default"].array(t)){if(e){var n=void 0,r=void 0,i=[];for(n=0,r=t.length;r>n;n++)i.push(c(!0,t[n]));return i}return v(t)}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return s(t);if(E["default"].object(t)){var o=void 0,a={};for(o in t)t.hasOwnProperty(o)&&(a[o]=e&&"$"!==o[0]?c(!0,t[o]):t[o]);return a}return t}function u(e){return e||0===e||""===e?e:[]}function l(e,t){var n=!0,r=void 0;if(!e)return!1;for(r in t)if(E["default"].object(t[r]))n=n&&l(e[r],t[r]);else if(E["default"].array(t[r]))n=n&&!!~t[r].indexOf(e[r]);else if(e[r]!==t[r])return!1;return n}function f(e,t){if("object"==typeof t&&null!==t&&(Object.freeze(t),e))if(Array.isArray(t)){var n=void 0,r=void 0;for(n=0,r=t.length;r>n;n++)f(!0,t[n])}else{var i=void 0,o=void 0;for(o in t)i=t[o],i&&t.hasOwnProperty(o)&&"object"==typeof i&&!Object.isFrozen(i)&&f(!0,i)}}function d(e,t){if(!t)return D;var n=[],r=e,i=void 0,o=void 0,a=void 0;for(o=0,a=t.length;a>o;o++){if(!r)return{data:void 0,solvedPath:t,exists:!1};if("function"==typeof t[o]){if(!E["default"].array(r))return D;if(i=p(r,t[o]),!~i)return D;n.push(i),r=r[i]}else if("object"==typeof t[o]){if(!E["default"].array(r))return D;if(i=p(r,function(e){return l(e,t[o])}),!~i)return D;n.push(i),r=r[i]}else n.push(t[o]),r=r[t[o]]}return{data:r,solvedPath:n,exists:void 0!==r}}function p(e,t){var n=void 0,r=void 0;for(n=0,r=e.length;r>n;n++)if(t(e[n]))return n;return-1}function h(e,t){var n=new Error(e);for(var r in t)n[r]=t[r];return n}function g(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];var i=n[0],o=void 0,a=void 0,s=void 0,c=void 0;for(a=1,s=n.length;s>a;a++){o=n[a];for(c in o)e&&"object"==typeof o[c]&&"$"!==c[0]?i[c]=g(!0,i[c]||{},o[c]):i[c]=o[c]}return i}function m(e,t){var n=e.length,r={},i=r,o=void 0;for(n||(r=t),o=0;n>o;o++)i[e[o]]=o+1===n?t:{},i=i[e[o]];return r}function v(e){var t=new Array(e.length),n=void 0,r=void 0;for(n=0,r=e.length;r>n;n++)t[n]=e[n];return t}function y(e,t){var n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,c=void 0,u=void 0,l=void 0;for(n=0,o=e.length;o>n;n++){if(c=e[n],!c.length)return!0;for(r=0,a=t.length;a>r;r++){if(u=t[r],!u||!u.length)return!0;for(i=0,s=u.length;s>i&&(l=u[i],l==c[i]);i++)if(i+1===s||i+1===c.length)return!0}}return!1}function b(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;r>o;o++)i[o-3]=arguments[o];return e.slice(0,t).concat(i).concat(e.slice(t+n))}var w=this,S=w.define;w.define=void 0,Object.defineProperty(t,"__esModule",{value:!0});var C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.arrayFrom=o,t.before=a,t.coercePath=u,t.getIn=d,t.makeError=h,t.merger=g,t.pathObject=m,t.solveUpdate=y,t.splice=b;var _=e("npm:baobab@2.0.0-rc1/dist/type"),E=r(_),T=Function.prototype,A=function(){function e(t){i(this,e),this.size=t,this.records=[]}return C(e,[{key:"get",value:function(){return this.records}},{key:"add",value:function(e){return this.records.unshift(e),this.records.length>this.size&&(this.records.length=this.size),this}},{key:"clear",value:function(){return this.records=[],this}},{key:"back",value:function(e){var t=this.records[e-1];return t&&(this.records=this.records.slice(e)),t}}]),e}();t.Archive=A;var I=c.bind(null,!1),k=c.bind(null,!0);t.shallowClone=I,t.deepClone=k;var x="function"==typeof Object.freeze,B=x?f.bind(null,!1):T,N=x?f.bind(null,!0):T;t.freeze=B,t.deepFreeze=N;var D={data:void 0,solvedPath:null,exists:!1},R=g.bind(null,!1),j=g.bind(null,!0);t.shallowMerge=R,t.deepMerge=j;var $=function(){var e=0;return function(){return e++}}();return t.uniqid=$,w.define=S,n.exports}),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(t,r,i){var a=r.entity===e.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:e.cipher.createDecipher("AES-CBC",a?i.keys.server_write_key:i.keys.client_write_key),iv:a?i.keys.server_write_IV:i.keys.client_write_IV},t.write.cipherState={init:!1,cipher:e.cipher.createCipher("AES-CBC",a?i.keys.client_write_key:i.keys.server_write_key),iv:a?i.keys.client_write_IV:i.keys.server_write_IV},t.read.cipherFunction=o,t.write.cipherFunction=n,t.read.macLength=t.write.macLength=i.mac_length,t.read.macFunction=t.write.macFunction=s.hmac_sha1}function n(t,n){var i=!1,o=n.macFunction(n.macKey,n.sequenceNumber,t);t.fragment.putBytes(o),n.updateSequenceNumber();var a;a=t.version.minor===s.Versions.TLS_1_0.minor?n.cipherState.init?null:n.cipherState.iv:e.random.getBytesSync(16),n.cipherState.init=!0;var c=n.cipherState.cipher;return c.start({iv:a}),t.version.minor>=s.Versions.TLS_1_1.minor&&c.output.putBytes(a),c.update(t.fragment),c.finish(r)&&(t.fragment=c.output,t.length=t.fragment.length(),i=!0),i}function r(e,t,n){if(!n){var r=e-t.length()%e;t.fillWithByte(r-1,r)}return!0}function i(e,t,n){var r=!0;if(n){for(var i=t.length(),o=t.last(),a=i-1-o;i-1>a;++a)r=r&&t.at(a)==o;r&&t.truncate(o+1)}return r}function o(t,n){var r=!1;++c;var o;o=t.version.minor===s.Versions.TLS_1_0.minor?n.cipherState.init?null:n.cipherState.iv:t.fragment.getBytes(16),n.cipherState.init=!0;var u=n.cipherState.cipher;u.start({iv:o}),u.update(t.fragment),r=u.finish(i);var l=n.macLength,f=e.random.getBytesSync(l),d=u.output.length();d>=l?(t.fragment=u.output.getBytes(d-l),f=u.output.getBytes(l)):t.fragment=u.output.getBytes(),t.fragment=e.util.createBuffer(t.fragment),t.length=t.fragment.length();var p=n.macFunction(n.macKey,n.sequenceNumber,t);return n.updateSequenceNumber(),r=a(n.macKey,f,p)&&r}function a(t,n,r){var i=e.hmac.create();return i.start("SHA1",t),i.update(n),n=i.digest().getBytes(),i.start(null,null),i.update(r),r=i.digest().getBytes(),n===r}var s=e.tls;s.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=s.BulkCipherAlgorithm.aes,e.cipher_type=s.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=s.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:t},s.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=s.BulkCipherAlgorithm.aes,e.cipher_type=s.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=s.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:t};var c=0}var t="aesCipherSuites";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/aesCipherSuites",["require","module","npm:node-forge@0.6.34/js/aes","npm:node-forge@0.6.34/js/tls"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){e.cipher=e.cipher||{},e.cipher.algorithms=e.cipher.algorithms||{},e.cipher.createCipher=function(t,n){var r=t;if("string"==typeof r&&(r=e.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new e.cipher.BlockCipher({algorithm:r,key:n,decrypt:!1})},e.cipher.createDecipher=function(t,n){var r=t;if("string"==typeof r&&(r=e.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new e.cipher.BlockCipher({algorithm:r,key:n,decrypt:!0})},e.cipher.registerAlgorithm=function(t,n){t=t.toUpperCase(),e.cipher.algorithms[t]=n},e.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in e.cipher.algorithms?e.cipher.algorithms[t]:null};var t=e.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};t.prototype.start=function(t){t=t||{};var n={};for(var r in t)n[r]=t[r];n.decrypt=this._decrypt,this._finish=!1,this._input=e.util.createBuffer(),this.output=t.output||e.util.createBuffer(),this.mode.start(n)},t.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},t.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,this._decrypt||!this.mode.pad||this.mode.pad(this._input,t)?(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t)?!1:this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)?!1:!0):!1}}var t="cipher";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/cipher",["require","module","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(t,n){var r=function(){return new e.aes.Algorithm(t,n)};e.cipher.registerAlgorithm(t,r)}function n(){f=!0,c=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;128>t;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;a=new Array(256),s=new Array(256),u=new Array(4),l=new Array(4);for(var t=0;4>t;++t)u[t]=new Array(256),l[t]=new Array(256);for(var n,r,i,o,d,p,h,g=0,m=0,t=0;256>t;++t){o=m^m<<1^m<<2^m<<3^m<<4,o=o>>8^255&o^99,a[g]=o,s[o]=g,d=e[o],n=e[g],r=e[n],i=e[r],p=d<<24^o<<16^o<<8^(o^d),h=(n^r^i)<<24^(g^i)<<16^(g^r^i)<<8^(g^n^i);for(var v=0;4>v;++v)u[v][g]=p,l[v][o]=h,p=p<<24|p>>>8,h=h<<24|h>>>8;0===g?g=m=1:(g=n^e[e[e[n^i]]],m^=e[e[m]])}}function r(e,t){for(var n,r=e.slice(0),i=1,o=r.length,s=o+6+1,u=d*s,f=o;u>f;++f)n=r[f-1],f%o===0?(n=a[n>>>16&255]<<24^a[n>>>8&255]<<16^a[255&n]<<8^a[n>>>24]^c[i]<<24,i++):o>6&&f%o===4&&(n=a[n>>>24]<<24^a[n>>>16&255]<<16^a[n>>>8&255]<<8^a[255&n]),r[f]=r[f-o]^n;if(t){var p,h=l[0],g=l[1],m=l[2],v=l[3],y=r.slice(0);u=r.length;for(var f=0,b=u-d;u>f;f+=d,b-=d)if(0===f||f===u-d)y[f]=r[b],y[f+1]=r[b+3],y[f+2]=r[b+2],y[f+3]=r[b+1];else for(var w=0;d>w;++w)p=r[b+w],y[f+(3&-w)]=h[a[p>>>24]]^g[a[p>>>16&255]]^m[a[p>>>8&255]]^v[a[255&p]];r=y}return r}function i(e,t,n,r){var i,o,c,f,d,p=e.length/4-1;r?(i=l[0],o=l[1],c=l[2],f=l[3],d=s):(i=u[0],o=u[1],c=u[2],f=u[3],d=a);var h,g,m,v,y,b,w;h=t[0]^e[0],g=t[r?3:1]^e[1],m=t[2]^e[2],v=t[r?1:3]^e[3];for(var S=3,C=1;p>C;++C)y=i[h>>>24]^o[g>>>16&255]^c[m>>>8&255]^f[255&v]^e[++S],b=i[g>>>24]^o[m>>>16&255]^c[v>>>8&255]^f[255&h]^e[++S],w=i[m>>>24]^o[v>>>16&255]^c[h>>>8&255]^f[255&g]^e[++S],v=i[v>>>24]^o[h>>>16&255]^c[g>>>8&255]^f[255&m]^e[++S],h=y,g=b,m=w;n[0]=d[h>>>24]<<24^d[g>>>16&255]<<16^d[m>>>8&255]<<8^d[255&v]^e[++S],n[r?3:1]=d[g>>>24]<<24^d[m>>>16&255]<<16^d[v>>>8&255]<<8^d[255&h]^e[++S],n[2]=d[m>>>24]<<24^d[v>>>16&255]<<16^d[h>>>8&255]<<8^d[255&g]^e[++S],n[r?1:3]=d[v>>>24]<<24^d[h>>>16&255]<<16^d[g>>>8&255]<<8^d[255&m]^e[++S]}function o(t){t=t||{};var n,r=(t.mode||"CBC").toUpperCase(),i="AES-"+r;n=t.decrypt?e.cipher.createDecipher(i,t.key):e.cipher.createCipher(i,t.key);var o=n.start;return n.start=function(t,r){var i=null;r instanceof e.util.ByteBuffer&&(i=r,r={}),r=r||{},r.output=i,r.iv=t,o.call(n,r)},n}e.aes=e.aes||{},e.aes.startEncrypting=function(e,t,n,r){var i=o({key:e,output:n,decrypt:!1,mode:r});return i.start(t),i},e.aes.createEncryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!1,mode:t})},e.aes.startDecrypting=function(e,t,n,r){var i=o({key:e,output:n,decrypt:!0,mode:r});return i.start(t),i},e.aes.createDecryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!0,mode:t})},e.aes.Algorithm=function(e,t){f||n();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return i(r._w,e,t,!1)},decrypt:function(e,t){return i(r._w,e,t,!0)}}}),r._init=!1},e.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var n,i=t.key;if("string"!=typeof i||16!==i.length&&24!==i.length&&32!==i.length){if(e.util.isArray(i)&&(16===i.length||24===i.length||32===i.length)){n=i,i=e.util.createBuffer();for(var o=0;o<n.length;++o)i.putByte(n[o])}}else i=e.util.createBuffer(i);if(!e.util.isArray(i)){n=i,i=[];var a=n.length();if(16===a||24===a||32===a){a>>>=2;for(var o=0;a>o;++o)i.push(n.getInt32())}}if(!e.util.isArray(i)||4!==i.length&&6!==i.length&&8!==i.length)throw new Error("Invalid key parameter.");var s=this.mode.name,c=-1!==["CFB","OFB","CTR","GCM"].indexOf(s);this._w=r(i,t.decrypt&&!c),this._init=!0}},e.aes._expandKey=function(e,t){return f||n(),r(e,t)},e.aes._updateBlock=i,t("AES-ECB",e.cipher.modes.ecb),t("AES-CBC",e.cipher.modes.cbc),t("AES-CFB",e.cipher.modes.cfb),t("AES-OFB",e.cipher.modes.ofb),t("AES-CTR",e.cipher.modes.ctr),t("AES-GCM",e.cipher.modes.gcm);var a,s,c,u,l,f=!1,d=4}var t="aes";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/aes",["require","module","npm:node-forge@0.6.34/js/cipher","npm:node-forge@0.6.34/js/cipherModes","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){var t=e.asn1=e.asn1||{};t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(t,n,r,i){if(e.util.isArray(i)){for(var o=[],a=0;a<i.length;++a)void 0!==i[a]&&o.push(i[a]);i=o}return{tagClass:t,type:n,constructed:r,composed:r||e.util.isArray(i),value:i}};var n=t.getBerValueLength=function(e){var t=e.getByte();if(128===t)return void 0;var n,r=128&t;return n=r?e.getInt((127&t)<<3):t};t.fromDer=function(r,i){if(void 0===i&&(i=!0),"string"==typeof r&&(r=e.util.createBuffer(r)),r.length()<2){var o=new Error("Too few bytes to parse DER.");throw o.bytes=r.length(),o}var a=r.getByte(),s=192&a,c=31&a,u=n(r);if(r.length()<u){if(i){var o=new Error("Too few bytes to read ASN.1 value.");throw o.detail=r.length()+" < "+u,o}u=r.length()}var l,f=32===(32&a),d=f;if(!d&&s===t.Class.UNIVERSAL&&c===t.Type.BITSTRING&&u>1){var p=r.read,h=r.getByte();if(0===h){a=r.getByte();var g=192&a;if(g===t.Class.UNIVERSAL||g===t.Class.CONTEXT_SPECIFIC)try{var m=n(r);d=m===u-(r.read-p),d&&(++p,--u)}catch(v){}}r.read=p}if(d)if(l=[],void 0===u)for(;;){if(r.bytes(2)===String.fromCharCode(0,0)){r.getBytes(2);break}l.push(t.fromDer(r,i))}else for(var y=r.length();u>0;)l.push(t.fromDer(r,i)),u-=y-r.length(),y=r.length();else{if(void 0===u){if(i)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=r.length()}if(c===t.Type.BMPSTRING){l="";for(var b=0;u>b;b+=2)l+=String.fromCharCode(r.getInt16())}else l=r.getBytes(u)}return t.create(s,c,f,l)},t.toDer=function(n){var r=e.util.createBuffer(),i=n.tagClass|n.type,o=e.util.createBuffer();if(n.composed){n.constructed?i|=32:o.putByte(0);for(var a=0;a<n.value.length;++a)void 0!==n.value[a]&&o.putBuffer(t.toDer(n.value[a]))}else if(n.type===t.Type.BMPSTRING)for(var a=0;a<n.value.length;++a)o.putInt16(n.value.charCodeAt(a));else o.putBytes(n.value);if(r.putByte(i),o.length()<=127)r.putByte(127&o.length());else{var s=o.length(),c="";do c+=String.fromCharCode(255&s),s>>>=8;while(s>0);r.putByte(128|c.length);for(var a=c.length-1;a>=0;--a)r.putByte(c.charCodeAt(a))}return r.putBuffer(o),r},t.oidToDer=function(t){var n=t.split("."),r=e.util.createBuffer();r.putByte(40*parseInt(n[0],10)+parseInt(n[1],10));for(var i,o,a,s,c=2;c<n.length;++c){i=!0,o=[],a=parseInt(n[c],10);do s=127&a,a>>>=7,i||(s|=128),o.push(s),i=!1;while(a>0);for(var u=o.length-1;u>=0;--u)r.putByte(o[u])}return r},t.derToOid=function(t){var n;"string"==typeof t&&(t=e.util.createBuffer(t));var r=t.getByte();n=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)r=t.getByte(),i<<=7,128&r?i+=127&r:(n+="."+(i+r),i=0);return n},t.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),o=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var c=e.charAt(10),u=10;"+"!==c&&"-"!==c&&(s=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(n,r,i),t.setUTCHours(o,a,s,0),u&&(c=e.charAt(u),"+"===c||"-"===c)){var l=parseInt(e.substr(u+1,2),10),f=parseInt(e.substr(u+4,2),10),d=60*l+f;d*=6e4,"+"===c?t.setTime(+t-d):t.setTime(+t+d)}return t},t.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),c=0,u=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var f=e.length-5,d=e.charAt(f);if("+"===d||"-"===d){var p=parseInt(e.substr(f+1,2),10),h=parseInt(e.substr(f+4,2),10);u=60*p+h,u*=6e4,"+"===d&&(u*=-1),l=!0}return"."===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(n,r,i),t.setUTCHours(o,a,s,c),t.setTime(+t+u)):(t.setFullYear(n,r,i),t.setHours(o,a,s,c)),t},t.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z"},t.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z"},t.integerToDer=function(t){var n=e.util.createBuffer();if(t>=-128&&128>t)return n.putSignedInt(t,8);if(t>=-32768&&32768>t)return n.putSignedInt(t,16);if(t>=-8388608&&8388608>t)return n.putSignedInt(t,24);if(t>=-2147483648&&2147483648>t)return n.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},t.derToInteger=function(t){"string"==typeof t&&(t=e.util.createBuffer(t));var n=8*t.length();if(n>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(n)},t.validate=function(n,r,i,o){var a=!1;if(n.tagClass!==r.tagClass&&"undefined"!=typeof r.tagClass||n.type!==r.type&&"undefined"!=typeof r.type)o&&(n.tagClass!==r.tagClass&&o.push("["+r.name+'] Expected tag class "'+r.tagClass+'", got "'+n.tagClass+'"'),n.type!==r.type&&o.push("["+r.name+'] Expected type "'+r.type+'", got "'+n.type+'"'));else if(n.constructed===r.constructed||"undefined"==typeof r.constructed){if(a=!0,r.value&&e.util.isArray(r.value))for(var s=0,c=0;a&&c<r.value.length;++c)a=r.value[c].optional||!1,n.value[s]&&(a=t.validate(n.value[s],r.value[c],i,o),a?++s:r.value[c].optional&&(a=!0)),!a&&o&&o.push("["+r.name+'] Tag class "'+r.tagClass+'", type "'+r.type+'" expected value length "'+r.value.length+'", got "'+n.value.length+'"');a&&i&&(r.capture&&(i[r.capture]=n.value),r.captureAsn1&&(i[r.captureAsn1]=n))}else o&&o.push("["+r.name+'] Expected constructed "'+r.constructed+'", got "'+n.constructed+'"');return a};var r=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(n,i,o){var a="";i=i||0,o=o||2,i>0&&(a+="\n");for(var s="",c=0;i*o>c;++c)s+=" ";switch(a+=s+"Tag: ",n.tagClass){case t.Class.UNIVERSAL:a+="Universal:";break;case t.Class.APPLICATION:a+="Application:";break;case t.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case t.Class.PRIVATE:a+="Private:"}if(n.tagClass===t.Class.UNIVERSAL)switch(a+=n.type,n.type){case t.Type.NONE:a+=" (None)";break;case t.Type.BOOLEAN:a+=" (Boolean)";break;case t.Type.BITSTRING:a+=" (Bit string)";break;case t.Type.INTEGER:a+=" (Integer)";break;case t.Type.OCTETSTRING:a+=" (Octet string)";break;case t.Type.NULL:a+=" (Null)";break;case t.Type.OID:a+=" (Object Identifier)";break;case t.Type.ODESC:a+=" (Object Descriptor)";break;case t.Type.EXTERNAL:a+=" (External or Instance of)";break;case t.Type.REAL:a+=" (Real)";break;case t.Type.ENUMERATED:a+=" (Enumerated)";break;case t.Type.EMBEDDED:a+=" (Embedded PDV)";break;case t.Type.UTF8:a+=" (UTF8)";break;case t.Type.ROID:a+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:a+=" (Sequence)";break;case t.Type.SET:a+=" (Set)";break;case t.Type.PRINTABLESTRING:a+=" (Printable String)";break;case t.Type.IA5String:a+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:a+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case t.Type.BMPSTRING:a+=" (BMP String)"}else a+=n.type;if(a+="\n",a+=s+"Constructed: "+n.constructed+"\n",n.composed){for(var u=0,l="",c=0;c<n.value.length;++c)void 0!==n.value[c]&&(u+=1,l+=t.prettyPrint(n.value[c],i+1,o),c+1<n.value.length&&(l+=","));a+=s+"Sub values: "+u+l}else{if(a+=s+"Value: ",n.type===t.Type.OID){var f=t.derToOid(n.value);a+=f,e.pki&&e.pki.oids&&f in e.pki.oids&&(a+=" ("+e.pki.oids[f]+") ")}if(n.type===t.Type.INTEGER)try{a+=t.derToInteger(n.value)}catch(d){a+="0x"+e.util.bytesToHex(n.value)}else n.type===t.Type.OCTETSTRING?(r.test(n.value)||(a+="("+n.value+") "),a+="0x"+e.util.bytesToHex(n.value)):a+=n.type===t.Type.UTF8?e.util.decodeUtf8(n.value):n.type===t.Type.PRINTABLESTRING||n.type===t.Type.IA5String?n.value:r.test(n.value)?"0x"+e.util.bytesToHex(n.value):0===n.value.length?"[null]":n.value}return a}}var t="asn1";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/asn1",["require","module","npm:node-forge@0.6.34/js/util","npm:node-forge@0.6.34/js/oids"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){e.debug=e.debug||{},e.debug.storage={},e.debug.get=function(t,n){var r;return"undefined"==typeof t?r=e.debug.storage:t in e.debug.storage&&(r="undefined"==typeof n?e.debug.storage[t]:e.debug.storage[t][n]),r},e.debug.set=function(t,n,r){t in e.debug.storage||(e.debug.storage[t]={}),e.debug.storage[t][n]=r},e.debug.clear=function(t,n){"undefined"==typeof t?e.debug.storage={}:t in e.debug.storage&&("undefined"==typeof n?delete e.debug.storage[t]:delete e.debug.storage[t][n])}}var t="debug";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/debug",["require","module"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){var t=e.hmac=e.hmac||{};t.create=function(){var t=null,n=null,r=null,i=null,o={};return o.start=function(o,a){if(null!==o)if("string"==typeof o){if(o=o.toLowerCase(),!(o in e.md.algorithms))throw new Error('Unknown hash algorithm "'+o+'"');n=e.md.algorithms[o].create()}else n=o;if(null===a)a=t;else{if("string"==typeof a)a=e.util.createBuffer(a);else if(e.util.isArray(a)){var s=a;a=e.util.createBuffer();for(var c=0;c<s.length;++c)a.putByte(s[c])}var u=a.length();u>n.blockLength&&(n.start(),n.update(a.bytes()),a=n.digest()),r=e.util.createBuffer(),i=e.util.createBuffer(),u=a.length();for(var c=0;u>c;++c){var s=a.at(c);r.putByte(54^s),i.putByte(92^s)}if(u<n.blockLength)for(var s=n.blockLength-u,c=0;s>c;++c)r.putByte(54),i.putByte(92);t=a,r=r.bytes(),i=i.bytes()}n.start(),n.update(r)},o.update=function(e){n.update(e)},o.getMac=function(){var e=n.digest().bytes();return n.start(),n.update(i),n.update(e),n.digest()},o.digest=o.getMac,o}}var t="hmac";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/hmac",["require","module","npm:node-forge@0.6.34/js/md","npm:node-forge@0.6.34/js/util"],function(){
i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(t,n){var r=function(){return new e.des.Algorithm(t,n)};e.cipher.registerAlgorithm(t,r)}function n(e){for(var t,n=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,v=[],y=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w=0;m>w;w++){var S=e.getInt32(),C=e.getInt32();t=252645135&(S>>>4^C),C^=t,S^=t<<4,t=65535&(C>>>-16^S),S^=t,C^=t<<-16,t=858993459&(S>>>2^C),C^=t,S^=t<<2,t=65535&(C>>>-16^S),S^=t,C^=t<<-16,t=1431655765&(S>>>1^C),C^=t,S^=t<<1,t=16711935&(C>>>8^S),S^=t,C^=t<<8,t=1431655765&(S>>>1^C),C^=t,S^=t<<1,t=S<<8|C>>>20&240,S=C<<24|C<<8&16711680|C>>>8&65280|C>>>24&240,C=t;for(var _=0;_<y.length;++_){y[_]?(S=S<<2|S>>>26,C=C<<2|C>>>26):(S=S<<1|S>>>27,C=C<<1|C>>>27),S&=-15,C&=-15;var E=n[S>>>28]|r[S>>>24&15]|i[S>>>20&15]|o[S>>>16&15]|a[S>>>12&15]|s[S>>>8&15]|c[S>>>4&15],T=u[C>>>28]|l[C>>>24&15]|f[C>>>20&15]|d[C>>>16&15]|p[C>>>12&15]|h[C>>>8&15]|g[C>>>4&15];t=65535&(T>>>16^E),v[b++]=E^t,v[b++]=T^t<<16}}return v}function r(e,t,n,r){var i,p=32===e.length?3:9;i=3===p?r?[30,-2,-2]:[0,32,2]:r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var h,g=t[0],m=t[1];h=252645135&(g>>>4^m),m^=h,g^=h<<4,h=65535&(g>>>16^m),m^=h,g^=h<<16,h=858993459&(m>>>2^g),g^=h,m^=h<<2,h=16711935&(m>>>8^g),g^=h,m^=h<<8,h=1431655765&(g>>>1^m),m^=h,g^=h<<1,g=g<<1|g>>>31,m=m<<1|m>>>31;for(var v=0;p>v;v+=3){for(var y=i[v+1],b=i[v+2],w=i[v];w!=y;w+=b){var S=m^e[w],C=(m>>>4|m<<28)^e[w+1];h=g,g=m,m=h^(a[S>>>24&63]|c[S>>>16&63]|l[S>>>8&63]|d[63&S]|o[C>>>24&63]|s[C>>>16&63]|u[C>>>8&63]|f[63&C])}h=g,g=m,m=h}g=g>>>1|g<<31,m=m>>>1|m<<31,h=1431655765&(g>>>1^m),m^=h,g^=h<<1,h=16711935&(m>>>8^g),g^=h,m^=h<<8,h=858993459&(m>>>2^g),g^=h,m^=h<<2,h=65535&(g>>>16^m),m^=h,g^=h<<16,h=252645135&(g>>>4^m),m^=h,g^=h<<4,n[0]=g,n[1]=m}function i(t){t=t||{};var n,r=(t.mode||"CBC").toUpperCase(),i="DES-"+r;n=t.decrypt?e.cipher.createDecipher(i,t.key):e.cipher.createCipher(i,t.key);var o=n.start;return n.start=function(t,r){var i=null;r instanceof e.util.ByteBuffer&&(i=r,r={}),r=r||{},r.output=i,r.iv=t,o.call(n,r)},n}e.des=e.des||{},e.des.startEncrypting=function(e,t,n,r){var o=i({key:e,output:n,decrypt:!1,mode:r||(null===t?"ECB":"CBC")});return o.start(t),o},e.des.createEncryptionCipher=function(e,t){return i({key:e,output:null,decrypt:!1,mode:t})},e.des.startDecrypting=function(e,t,n,r){var o=i({key:e,output:n,decrypt:!0,mode:r||(null===t?"ECB":"CBC")});return o.start(t),o},e.des.createDecryptionCipher=function(e,t){return i({key:e,output:null,decrypt:!0,mode:t})},e.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return r(n._keys,e,t,!1)},decrypt:function(e,t){return r(n._keys,e,t,!0)}}}),n._init=!1},e.des.Algorithm.prototype.initialize=function(t){if(!this._init){var r=e.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==r.length())throw new Error("Invalid Triple-DES key size: "+8*r.length());this._keys=n(r),this._init=!0}},t("DES-ECB",e.cipher.modes.ecb),t("DES-CBC",e.cipher.modes.cbc),t("DES-CFB",e.cipher.modes.cfb),t("DES-OFB",e.cipher.modes.ofb),t("DES-CTR",e.cipher.modes.ctr),t("3DES-ECB",e.cipher.modes.ecb),t("3DES-CBC",e.cipher.modes.cbc),t("3DES-CFB",e.cipher.modes.cfb),t("3DES-OFB",e.cipher.modes.ofb),t("3DES-CTR",e.cipher.modes.ctr);var o=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],a=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],s=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],f=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],d=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]}var t="des";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/des",["require","module","npm:node-forge@0.6.34/js/cipher","npm:node-forge@0.6.34/js/cipherModes","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(t,n,r,i){t.generate=function(t,o){for(var a=new e.util.ByteBuffer,s=Math.ceil(o/i)+r,c=new e.util.ByteBuffer,u=r;s>u;++u){c.putInt32(u),n.start(),n.update(t+c.getBytes());var l=n.digest();a.putBytes(l.getBytes(i))}return a.truncate(a.length()-o),a.getBytes()}}e.kem=e.kem||{};var n=e.jsbn.BigInteger;e.kem.rsa={},e.kem.rsa.create=function(t,r){r=r||{};var i=r.prng||e.random,o={};return o.encrypt=function(r,o){var a,s=Math.ceil(r.n.bitLength()/8);do a=new n(e.util.bytesToHex(i.getBytesSync(s)),16).mod(r.n);while(a.equals(n.ZERO));a=e.util.hexToBytes(a.toString(16));var c=s-a.length;c>0&&(a=e.util.fillString(String.fromCharCode(0),c)+a);var u=r.encrypt(a,"NONE"),l=t.generate(a,o);return{encapsulation:u,key:l}},o.decrypt=function(e,n,r){var i=e.decrypt(n,"NONE");return t.generate(i,r)},o},e.kem.kdf1=function(e,n){t(this,e,0,n||e.digestLength)},e.kem.kdf2=function(e,n){t(this,e,1,n||e.digestLength)}}var t="kem";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/kem",["require","module","npm:node-forge@0.6.34/js/util","npm:node-forge@0.6.34/js/random","npm:node-forge@0.6.34/js/jsbn"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(t){if("string"==typeof t&&(t=e.util.createBuffer(t)),e.util.isArray(t)&&t.length>4){var n=t;t=e.util.createBuffer();for(var r=0;r<n.length;++r)t.putByte(n[r])}return e.util.isArray(t)||(t=[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]),t}function n(e){e[e.length-1]=e[e.length-1]+1&4294967295}function r(e){return[e/4294967296|0,4294967295&e]}e.cipher=e.cipher||{};var i=e.cipher.modes=e.cipher.modes||{};i.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(e){},i.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},i.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},i.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},i.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)},i.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},i.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)},i.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(o>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(e,t,r){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var o=0;o<this._ints;++o)t.putInt32(e.getInt32()^this._outBlock[o]);else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}n(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var i=e.util.createBuffer(t.iv);this._cipherLength=0;var o;if(o="additionalData"in t?e.util.createBuffer(t.additionalData):e.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=e.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=i.length();if(12===a)this._j0=[i.getInt32(),i.getInt32(),i.getInt32(),1];else{for(this._j0=[0,0,0,0];i.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[i.getInt32(),i.getInt32(),i.getInt32(),i.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(r(8*a)))}this._inBlock=this._j0.slice(0),n(this._inBlock),this._partialBytes=0,o=e.util.createBuffer(o),this._aDataLength=r(8*o.length());var s=o.length()%this.blockSize;for(s&&o.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];o.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[o.getInt32(),o.getInt32(),o.getInt32(),o.getInt32()])},i.gcm.prototype.encrypt=function(e,t,r){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize){for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(0===a||r){if(r){var s=i%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),n(this._inBlock)},i.gcm.prototype.decrypt=function(e,t,r){var i=e.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),n(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^this._hashBlock[o]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(t,n){var i=!0;n.decrypt&&n.overflow&&t.truncate(this.blockSize-n.overflow),this.tag=e.util.createBuffer();var o=this._aDataLength.concat(r(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var a=[];this.cipher.encrypt(this._j0,a);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^a[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),n.decrypt&&this.tag.bytes()!==this._tag&&(i=!1),i},i.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],r=t.slice(0),i=0;128>i;++i){var o=e[i/32|0]&1<<31-i%32;o&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n},i.gcm.prototype.pow=function(e,t){for(var n=1&e[3],r=3;r>0;--r)t[r]=e[r]>>>1|(1&e[r-1])<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)},i.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;32>n;++n){var r=n/8|0,i=e[r]>>>4*(7-n%8)&15,o=this._m[n][i];t[0]^=o[0],t[1]^=o[1],t[2]^=o[2],t[3]^=o[3]}return t},i.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)},i.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,r=4*n,i=16*n,o=new Array(i),a=0;i>a;++a){var s=[0,0,0,0],c=a/r|0,u=(r-1-a%r)*t;s[c]=1<<t-1<<u,o[a]=this.generateSubHashTable(this.multiply(s,e),t)}return o},i.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,i=new Array(n);i[r]=e.slice(0);for(var o=r>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;r>o;){for(var a=1;o>a;++a){var s=i[o],c=i[a];i[o+a]=[s[0]^c[0],s[1]^c[1],s[2]^c[2],s[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=r+1;n>o;++o){var u=i[o^r];i[o]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i}}var t="cipherModes";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/cipherModes",["require","module","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){e.log=e.log||{},e.log.levels=["none","error","warning","info","debug","verbose","max"];var t={},n=[],r=null;e.log.LEVEL_LOCKED=2,e.log.NO_LEVEL_CHECK=4,e.log.INTERPOLATE=8;for(var i=0;i<e.log.levels.length;++i){var o=e.log.levels[i];t[o]={index:i,name:o.toUpperCase()}}e.log.logMessage=function(r){for(var i=t[r.level].index,o=0;o<n.length;++o){var a=n[o];if(a.flags&e.log.NO_LEVEL_CHECK)a.f(r);else{var s=t[a.level].index;s>=i&&a.f(a,r)}}},e.log.prepareStandard=function(e){"standard"in e||(e.standard=t[e.level].name+" ["+e.category+"] "+e.message)},e.log.prepareFull=function(t){if(!("full"in t)){var n=[t.message];n=n.concat([]||t.arguments),t.full=e.util.format.apply(this,n)}},e.log.prepareStandardFull=function(t){"standardFull"in t||(e.log.prepareStandard(t),t.standardFull=t.standard)};for(var a=["error","warning","info","debug","verbose"],i=0;i<a.length;++i)!function(t){e.log[t]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:t,category:n,message:r,arguments:i};e.log.logMessage(o)}}(a[i]);if(e.log.makeLogger=function(t){var n={flags:0,f:t};return e.log.setLevel(n,"none"),n},e.log.setLevel=function(t,n){var r=!1;if(t&&!(t.flags&e.log.LEVEL_LOCKED))for(var i=0;i<e.log.levels.length;++i){var o=e.log.levels[i];if(n==o){t.level=n,r=!0;break}}return r},e.log.lock=function(t,n){"undefined"==typeof n||n?t.flags|=e.log.LEVEL_LOCKED:t.flags&=~e.log.LEVEL_LOCKED},e.log.addLogger=function(e){n.push(e)},"undefined"!=typeof console&&"log"in console){var s;if(console.error&&console.warn&&console.info&&console.debug){var c={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},u=function(t,n){e.log.prepareStandard(n);var r=c[n.level],i=[n.standard];i=i.concat(n.arguments.slice()),r.apply(console,i)};s=e.log.makeLogger(u)}else{var u=function(t,n){e.log.prepareStandardFull(n),console.log(n.standardFull)};s=e.log.makeLogger(u)}e.log.setLevel(s,"debug"),e.log.addLogger(s),r=s}else console={log:function(){}};if(null!==r){var l=e.util.getQueryVariables();if("console.level"in l&&e.log.setLevel(r,l["console.level"].slice(-1)[0]),"console.lock"in l){var f=l["console.lock"].slice(-1)[0];"true"==f&&e.log.lock(r)}}e.log.consoleLogger=r}var t="log";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/log",["require","module","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){e.md=e.md||{},e.md.algorithms={md5:e.md5,sha1:e.sha1,sha256:e.sha256},e.md.md5=e.md5,e.md.sha1=e.sha1,e.md.sha256=e.sha256}var t="md";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/md",["require","module","npm:node-forge@0.6.34/js/md5","npm:node-forge@0.6.34/js/sha1","npm:node-forge@0.6.34/js/sha256","npm:node-forge@0.6.34/js/sha512"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){e.mgf=e.mgf||{};var t=e.mgf.mgf1=e.mgf1=e.mgf1||{};t.create=function(t){var n={generate:function(n,r){for(var i=new e.util.ByteBuffer,o=Math.ceil(r/t.digestLength),a=0;o>a;a++){var s=new e.util.ByteBuffer;s.putInt32(a),t.start(),t.update(n+s.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()}};return n}}var t="mgf1";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/mgf1",["require","module","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){var t,n=e.pkcs5=e.pkcs5||{},r="undefined"!=typeof process&&process.versions&&process.versions.node;r&&!e.disableNativeCode&&(t=require("crypto")),e.pbkdf2=n.pbkdf2=function(n,i,o,a,s,c){function u(){return w>p?c(null,b):(g.start(null,null),g.update(i),g.update(e.util.int32ToBytes(w)),m=y=g.digest().getBytes(),S=2,void l())}function l(){return o>=S?(g.start(null,null),g.update(y),v=g.digest().getBytes(),m=e.util.xorBytes(m,v,f),y=v,++S,e.util.setImmediate(l)):(b+=p>w?m:m.substr(0,h),++w,void u())}if("function"==typeof s&&(c=s,s=null),r&&!e.disableNativeCode&&t.pbkdf2&&(null===s||"object"!=typeof s)&&(t.pbkdf2Sync.length>4||!s||"sha1"===s))return"string"!=typeof s&&(s="sha1"),i=new Buffer(i,"binary"),c?4===t.pbkdf2Sync.length?t.pbkdf2(n,i,o,a,function(e,t){return e?c(e):void c(null,t.toString("binary"))}):t.pbkdf2(n,i,o,a,s,function(e,t){return e?c(e):void c(null,t.toString("binary"))}):4===t.pbkdf2Sync.length?t.pbkdf2Sync(n,i,o,a).toString("binary"):t.pbkdf2Sync(n,i,o,a,s).toString("binary");if(("undefined"==typeof s||null===s)&&(s=e.md.sha1.create()),"string"==typeof s){if(!(s in e.md.algorithms))throw new Error("Unknown hash algorithm: "+s);s=e.md[s].create()}var f=s.digestLength;if(a>4294967295*f){var d=new Error("Derived key is too long.");if(c)return c(d);throw d}var p=Math.ceil(a/f),h=a-(p-1)*f,g=e.hmac.create();g.start(s,n);var m,v,y,b="";if(!c){for(var w=1;p>=w;++w){g.start(null,null),g.update(i),g.update(e.util.int32ToBytes(w)),m=y=g.digest().getBytes();for(var S=2;o>=S;++S)g.start(null,null),g.update(y),v=g.digest().getBytes(),m=e.util.xorBytes(m,v,f),y=v;b+=p>w?m:m.substr(0,h);
}return b}var S,w=1;u()}}var t="pbkdf2";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/pbkdf2",["require","module","npm:node-forge@0.6.34/js/hmac","npm:node-forge@0.6.34/js/md","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(t,n,r){r||(r=e.md.sha1.create());for(var i="",o=Math.ceil(n/r.digestLength),a=0;o>a;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);r.start(),r.update(t+s),i+=r.digest().getBytes()}return i.substring(0,n)}var n=e.pkcs1=e.pkcs1||{};n.encode_rsa_oaep=function(n,r,i){var o,a,s,c;"string"==typeof i?(o=i,a=arguments[3]||void 0,s=arguments[4]||void 0):i&&(o=i.label||void 0,a=i.seed||void 0,s=i.md||void 0,i.mgf1&&i.mgf1.md&&(c=i.mgf1.md)),s?s.start():s=e.md.sha1.create(),c||(c=s);var u=Math.ceil(n.n.bitLength()/8),l=u-2*s.digestLength-2;if(r.length>l){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=r.length,f.maxLength=l,f}o||(o=""),s.update(o,"raw");for(var d=s.digest(),p="",h=l-r.length,g=0;h>g;g++)p+="\x00";var m=d.getBytes()+p+""+r;if(a){if(a.length!==s.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=a.length,f.digestLength=s.digestLength,f}}else a=e.random.getBytes(s.digestLength);var v=t(a,u-s.digestLength-1,c),y=e.util.xorBytes(m,v,m.length),b=t(y,s.digestLength,c),w=e.util.xorBytes(a,b,a.length);return"\x00"+w+y},n.decode_rsa_oaep=function(n,r,i){var o,a,s;"string"==typeof i?(o=i,a=arguments[3]||void 0):i&&(o=i.label||void 0,a=i.md||void 0,i.mgf1&&i.mgf1.md&&(s=i.mgf1.md));var c=Math.ceil(n.n.bitLength()/8);if(r.length!==c){var u=new Error("RSAES-OAEP encoded message length is invalid.");throw u.length=r.length,u.expectedLength=c,u}if(void 0===a?a=e.md.sha1.create():a.start(),s||(s=a),c<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),a.update(o,"raw");for(var l=a.digest().getBytes(),f=r.charAt(0),d=r.substring(1,a.digestLength+1),p=r.substring(1+a.digestLength),h=t(p,a.digestLength,s),g=e.util.xorBytes(d,h,d.length),m=t(g,c-a.digestLength-1,s),v=e.util.xorBytes(p,m,p.length),y=v.substring(0,a.digestLength),u="\x00"!==f,b=0;b<a.digestLength;++b)u|=l.charAt(b)!==y.charAt(b);for(var w=1,S=a.digestLength,C=a.digestLength;C<v.length;C++){var _=v.charCodeAt(C),E=1&_^1,T=w?65534:0;u|=_&T,w&=E,S+=w}if(u||1!==v.charCodeAt(S))throw new Error("Invalid RSAES-OAEP padding.");return v.substring(S+1)}}var t="pkcs1";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/pkcs1",["require","module","npm:node-forge@0.6.34/js/util","npm:node-forge@0.6.34/js/random","npm:node-forge@0.6.34/js/sha1"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(e){for(var t=e.name+": ",n=[],r=function(e,t){return" "+t},i=0;i<e.values.length;++i)n.push(e.values[i].replace(/^(\S+\r\n)/,r));t+=n.join(",")+"\r\n";for(var o=0,a=-1,i=0;i<t.length;++i,++o)if(o>65&&-1!==a){var s=t[a];","===s?(++a,t=t.substr(0,a)+"\r\n "+t.substr(a)):t=t.substr(0,a)+"\r\n"+s+t.substr(a+1),o=i-a-1,a=-1,++i}else(" "===t[i]||"	"===t[i]||","===t[i])&&(a=i);return t}function n(e){return e.replace(/^\s+/,"")}var r=e.pem=e.pem||{};r.encode=function(n,r){r=r||{};var i,o="-----BEGIN "+n.type+"-----\r\n";if(n.procType&&(i={name:"Proc-Type",values:[String(n.procType.version),n.procType.type]},o+=t(i)),n.contentDomain&&(i={name:"Content-Domain",values:[n.contentDomain]},o+=t(i)),n.dekInfo&&(i={name:"DEK-Info",values:[n.dekInfo.algorithm]},n.dekInfo.parameters&&i.values.push(n.dekInfo.parameters),o+=t(i)),n.headers)for(var a=0;a<n.headers.length;++a)o+=t(n.headers[a]);return n.procType&&(o+="\r\n"),o+=e.util.encode64(n.body,r.maxline||64)+"\r\n",o+="-----END "+n.type+"-----\r\n"},r.decode=function(t){for(var r,i=[],o=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;;){if(r=o.exec(t),!r)break;var c={type:r[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:e.util.decode64(r[3])};if(i.push(c),r[2]){for(var u=r[2].split(s),l=0;r&&l<u.length;){for(var f=u[l].replace(/\s+$/,""),d=l+1;d<u.length;++d){var p=u[d];if(!/\s/.test(p[0]))break;f+=p,l=d}if(r=f.match(a)){for(var h={name:r[1],values:[]},g=r[2].split(","),m=0;m<g.length;++m)h.values.push(n(g[m]));if(c.procType)if(c.contentDomain||"Content-Domain"!==h.name)if(c.dekInfo||"DEK-Info"!==h.name)c.headers.push(h);else{if(0===h.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.contentDomain=g[0]||"";else{if("Proc-Type"!==h.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==h.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++l}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===i.length)throw new Error("Invalid PEM formatted message.");return i}}var t="pem";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/pem",["require","module","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(t){var n={},r=[];if(!f.validate(t,d.asn1.recipientInfoValidator,n,r)){var i=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw i.errors=r,i}return{version:n.version.charCodeAt(0),issuer:e.pki.RDNAttributesAsArray(n.issuer),serialNumber:e.util.createBuffer(n.serial).toHex(),encryptedContent:{algorithm:f.derToOid(n.encAlgorithm),parameter:n.encParameter.value,content:n.encKey}}}function n(t){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(t.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:t.issuer}),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber))]),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.encryptedContent.algorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")]),f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function r(e){for(var n=[],r=0;r<e.length;++r)n.push(t(e[r]));return n}function i(e){for(var t=[],r=0;r<e.length;++r)t.push(n(e[r]));return t}function o(t){var n=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(t.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:t.issuer}),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber))]),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.digestAlgorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&n.value.push(t.authenticatedAttributesAsn1),n.value.push(f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.signatureAlgorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")])),n.value.push(f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=f.create(f.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<t.unauthenticatedAttributes.length;++i){var o=t.unauthenticatedAttributes[i];r.values.push(s(o))}n.value.push(r)}return n}function a(e){for(var t=[],n=0;n<e.length;++n)t.push(o(e[n]));return t}function s(t){var n;if(t.type===e.pki.oids.contentType)n=f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.value).getBytes());else if(t.type===e.pki.oids.messageDigest)n=f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===e.pki.oids.signingTime){var r=new Date("Jan 1, 1950 00:00:00Z"),i=new Date("Jan 1, 2050 00:00:00Z"),o=t.value;if("string"==typeof o){var a=Date.parse(o);o=isNaN(a)?13===o.length?f.utcTimeToDate(o):f.generalizedTimeToDate(o):new Date(a)}n=o>=r&&i>o?f.create(f.Class.UNIVERSAL,f.Type.UTCTIME,!1,f.dateToUtcTime(o)):f.create(f.Class.UNIVERSAL,f.Type.GENERALIZEDTIME,!1,f.dateToGeneralizedTime(o))}return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.type).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SET,!0,[n])])}function c(t){return[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.pki.oids.data).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.algorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t.parameter.getBytes())]),f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t.content.getBytes())])]}function u(t,n,r){var i={},o=[];if(!f.validate(n,r,i,o)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=f.derToOid(i.contentType);if(s!==e.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var c="";if(e.util.isArray(i.encryptedContent))for(var u=0;u<i.encryptedContent.length;++u){if(i.encryptedContent[u].type!==f.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");c+=i.encryptedContent[u].value}else c=i.encryptedContent;t.encryptedContent={algorithm:f.derToOid(i.encAlgorithm),parameter:e.util.createBuffer(i.encParameter.value),content:e.util.createBuffer(c)}}if(i.content){var c="";if(e.util.isArray(i.content))for(var u=0;u<i.content.length;++u){if(i.content[u].type!==f.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");c+=i.content[u].value}else c=i.content;t.content=e.util.createBuffer(c)}return t.version=i.version.charCodeAt(0),t.rawCapture=i,i}function l(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var n;switch(t.encryptedContent.algorithm){case e.pki.oids["aes128-CBC"]:case e.pki.oids["aes192-CBC"]:case e.pki.oids["aes256-CBC"]:n=e.aes.createDecryptionCipher(t.encryptedContent.key);break;case e.pki.oids.desCBC:case e.pki.oids["des-EDE3-CBC"]:n=e.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(n.start(t.encryptedContent.parameter),n.update(t.encryptedContent.content),!n.finish())throw new Error("Symmetric decryption failed.");t.content=n.output}}var f=e.asn1,d=e.pkcs7=e.pkcs7||{};d.messageFromPem=function(t){var n=e.pem.decode(t)[0];if("PKCS7"!==n.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=n.type,r}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var i=f.fromDer(n.body);return d.messageFromAsn1(i)},d.messageToPem=function(t,n){var r={type:"PKCS7",body:f.toDer(t.toAsn1()).getBytes()};return e.pem.encode(r,{maxline:n})},d.messageFromAsn1=function(t){var n={},r=[];if(!f.validate(t,d.asn1.contentInfoValidator,n,r)){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw i.errors=r,i}var o,a=f.derToOid(n.contentType);switch(a){case e.pki.oids.envelopedData:o=d.createEnvelopedData();break;case e.pki.oids.encryptedData:o=d.createEncryptedData();break;case e.pki.oids.signedData:o=d.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+a+" is not (yet) supported.")}return o.fromAsn1(n.content.value[0]),o},d.createSignedData=function(){function t(){for(var t={},n=0;n<r.signers.length;++n){var i=r.signers[n],o=i.digestAlgorithm;o in t||(t[o]=e.md[e.pki.oids[o]].create()),0===i.authenticatedAttributes.length?i.md=t[o]:i.md=e.md[e.pki.oids[o]].create()}r.digestAlgorithmIdentifiers=[];for(var o in t)r.digestAlgorithmIdentifiers.push(f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(o).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")]));return t}function n(t){if(r.contentInfo.value.length<2)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var n=f.derToOid(r.contentInfo.value[0].value),i=r.contentInfo.value[1];i=i.value[0];var o=f.toDer(i);o.getByte(),f.getBerValueLength(o),o=o.getBytes();for(var c in t)t[c].start().update(o);for(var u=new Date,l=0;l<r.signers.length;++l){var d=r.signers[l];if(0===d.authenticatedAttributes.length){if(n!==e.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=f.create(f.Class.UNIVERSAL,f.Type.SET,!0,[]),h=0;h<d.authenticatedAttributes.length;++h){var g=d.authenticatedAttributes[h];g.type===e.pki.oids.messageDigest?g.value=t[d.digestAlgorithm].digest():g.type===e.pki.oids.signingTime&&(g.value||(g.value=u)),p.value.push(s(g)),d.authenticatedAttributesAsn1.value.push(s(g))}o=f.toDer(p).getBytes(),d.md.start().update(o)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}r.signerInfos=a(r.signers)}var r=null;return r={type:e.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){u(r,t,d.asn1.signedDataValidator),r.certificates=[],r.crls=[],r.digestAlgorithmIdentifiers=[],r.contentInfo=null,r.signerInfos=[];for(var n=r.rawCapture.certificates.value,i=0;i<n.length;++i)r.certificates.push(e.pki.certificateFromAsn1(n[i]))},toAsn1:function(){r.contentInfo||r.sign();for(var t=[],n=0;n<r.certificates.length;++n)t.push(e.pki.certificateToAsn1(r.certificates[n]));var i=[],o=f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(r.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SET,!0,r.digestAlgorithmIdentifiers),r.contentInfo])]);return t.length>0&&o.value[0].value.push(f.create(f.Class.CONTEXT_SPECIFIC,0,!0,t)),i.length>0&&o.value[0].value.push(f.create(f.Class.CONTEXT_SPECIFIC,1,!0,i)),o.value[0].value.push(f.create(f.Class.UNIVERSAL,f.Type.SET,!0,r.signerInfos)),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(r.type).getBytes()),o])},addSigner:function(t){var n=t.issuer,i=t.serialNumber;if(t.certificate){var o=t.certificate;"string"==typeof o&&(o=e.pki.certificateFromPem(o)),n=o.issuer.attributes,i=o.serialNumber}var a=t.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof a&&(a=e.pki.privateKeyFromPem(a));var s=t.digestAlgorithm||e.pki.oids.sha1;switch(s){case e.pki.oids.sha1:case e.pki.oids.sha256:case e.pki.oids.sha384:case e.pki.oids.sha512:case e.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+s)}var c=t.authenticatedAttributes||[];if(c.length>0){for(var u=!1,l=!1,f=0;f<c.length;++f){var d=c[f];if(u||d.type!==e.pki.oids.contentType){if(l||d.type!==e.pki.oids.messageDigest);else if(l=!0,u)break}else if(u=!0,l)break}if(!u||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}r.signers.push({key:a,version:1,issuer:n,serialNumber:i,digestAlgorithm:s,signatureAlgorithm:e.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(){if(("object"!=typeof r.content||null===r.contentInfo)&&(r.contentInfo=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.pki.oids.data).getBytes())]),"content"in r)){var i;r.content instanceof e.util.ByteBuffer?i=r.content.bytes():"string"==typeof r.content&&(i=e.util.encodeUtf8(r.content)),r.contentInfo.value.push(f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,i)]))}if(0!==r.signers.length){var o=t();n(o)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=e.pki.certificateFromPem(t)),r.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},d.createEncryptedData=function(){var t=null;return t={type:e.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(e){u(t,e,d.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),l(t)}}},d.createEnvelopedData=function(){var t=null;return t={type:e.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(e){var n=u(t,e,d.asn1.envelopedDataValidator);t.recipients=r(n.recipientInfos.value)},toAsn1:function(){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.type).getBytes()),f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(t.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SET,!0,i(t.recipients)),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,c(t.encryptedContent))])])])},findRecipient:function(e){for(var n=e.issuer.attributes,r=0;r<t.recipients.length;++r){var i=t.recipients[r],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===n.length){for(var a=!0,s=0;s<n.length;++s)if(o[s].type!==n[s].type||o[s].value!==n[s].value){a=!1;break}if(a)return i}}return null},decrypt:function(n,r){if(void 0===t.encryptedContent.key&&void 0!==n&&void 0!==r)switch(n.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:case e.pki.oids.desCBC:var i=r.decrypt(n.encryptedContent.content);t.encryptedContent.key=e.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+n.encryptedContent.algorithm)}l(t)},addRecipient:function(n){t.recipients.push({version:0,issuer:n.issuer.attributes,serialNumber:n.serialNumber,encryptedContent:{algorithm:e.pki.oids.rsaEncryption,key:n.publicKey}})},encrypt:function(n,r){if(void 0===t.encryptedContent.content){r=r||t.encryptedContent.algorithm,n=n||t.encryptedContent.key;var i,o,a;switch(r){case e.pki.oids["aes128-CBC"]:i=16,o=16,a=e.aes.createEncryptionCipher;break;case e.pki.oids["aes192-CBC"]:i=24,o=16,a=e.aes.createEncryptionCipher;break;case e.pki.oids["aes256-CBC"]:i=32,o=16,a=e.aes.createEncryptionCipher;break;case e.pki.oids["des-EDE3-CBC"]:i=24,o=8,a=e.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===n)n=e.util.createBuffer(e.random.getBytes(i));else if(n.length()!=i)throw new Error("Symmetric key has wrong length; got "+n.length()+" bytes, expected "+i+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=n,t.encryptedContent.parameter=e.util.createBuffer(e.random.getBytes(o));var s=a(n);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var c=0;c<t.recipients.length;++c){var u=t.recipients[c];if(void 0===u.encryptedContent.content)switch(u.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}}}}var t="pkcs7";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/pkcs7",["require","module","npm:node-forge@0.6.34/js/aes","npm:node-forge@0.6.34/js/asn1","npm:node-forge@0.6.34/js/des","npm:node-forge@0.6.34/js/oids","npm:node-forge@0.6.34/js/pem","npm:node-forge@0.6.34/js/pkcs7asn1","npm:node-forge@0.6.34/js/random","npm:node-forge@0.6.34/js/util","npm:node-forge@0.6.34/js/x509"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){var t=e.asn1,n=e.pki=e.pki||{};n.pemToDer=function(t){var n=e.pem.decode(t)[0];if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return e.util.createBuffer(n.body)},n.privateKeyFromPem=function(r){var i=e.pem.decode(r)[0];if("PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type){var o=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw o.headerType=i.type,o}if(i.procType&&"ENCRYPTED"===i.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var a=t.fromDer(i.body);return n.privateKeyFromAsn1(a)},n.privateKeyToPem=function(r,i){var o={type:"RSA PRIVATE KEY",body:t.toDer(n.privateKeyToAsn1(r)).getBytes()};return e.pem.encode(o,{maxline:i})},n.privateKeyInfoToPem=function(n,r){var i={type:"PRIVATE KEY",body:t.toDer(n).getBytes()};return e.pem.encode(i,{maxline:r})}}var t="pki";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/pki",["require","module","npm:node-forge@0.6.34/js/asn1","npm:node-forge@0.6.34/js/oids","npm:node-forge@0.6.34/js/pbe","npm:node-forge@0.6.34/js/pem","npm:node-forge@0.6.34/js/pbkdf2","npm:node-forge@0.6.34/js/pkcs12","npm:node-forge@0.6.34/js/pss","npm:node-forge@0.6.34/js/rsa","npm:node-forge@0.6.34/js/util","npm:node-forge@0.6.34/js/x509"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(e,t,n,r){for(var i=[],o=0;o<e.length;o++)for(var a=0;a<e[o].safeBags.length;a++){var s=e[o].safeBags[a];(void 0===r||s.type===r)&&(null!==t?void 0!==s.attributes[t]&&s.attributes[t].indexOf(n)>=0&&i.push(s):i.push(s))}return i}function n(t){if(t.composed||t.constructed){for(var n=e.util.createBuffer(),r=0;r<t.value.length;++r)n.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=n.getBytes()}return t}function r(e,t,r,a){if(t=s.fromDer(t,r),t.tagClass!==s.Class.UNIVERSAL||t.type!==s.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var u=0;u<t.value.length;u++){var f=t.value[u],d={},p=[];if(!s.validate(f,l,d,p)){var h=new Error("Cannot read ContentInfo.");throw h.errors=p,h}var g={encrypted:!1},m=null,v=d.content.value[0];switch(s.derToOid(d.contentType)){case c.oids.data:if(v.tagClass!==s.Class.UNIVERSAL||v.type!==s.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");m=n(v).value;break;case c.oids.encryptedData:m=i(v,a),g.encrypted=!0;break;default:var h=new Error("Unsupported PKCS#12 contentType.");throw h.contentType=s.derToOid(d.contentType),h}g.safeBags=o(m,r,a),e.safeContents.push(g)}}function i(t,r){var i={},o=[];if(!s.validate(t,e.pkcs7.asn1.encryptedDataValidator,i,o)){var a=new Error("Cannot read EncryptedContentInfo.");throw a.errors=o,a}var u=s.derToOid(i.contentType);if(u!==c.oids.data){var a=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw a.oid=u,a}u=s.derToOid(i.encAlgorithm);var l=c.pbe.getCipher(u,i.encParameter,r),f=n(i.encryptedContentAsn1),d=e.util.createBuffer(f.value);if(l.update(d),!l.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return l.output.getBytes()}function o(e,t,n){if(!t&&0===e.length)return[];if(e=s.fromDer(e,t),e.tagClass!==s.Class.UNIVERSAL||e.type!==s.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var r=[],i=0;i<e.value.length;i++){var o=e.value[i],u={},l=[];if(!s.validate(o,d,u,l)){var f=new Error("Cannot read SafeBag.");throw f.errors=l,f}var p={type:s.derToOid(u.bagId),attributes:a(u.bagAttributes)};r.push(p);var g,m,v=u.bagValue.value[0];switch(p.type){case c.oids.pkcs8ShroudedKeyBag:if(v=c.decryptPrivateKeyInfo(v,n),null===v)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case c.oids.keyBag:try{p.key=c.privateKeyFromAsn1(v)}catch(y){p.key=null,p.asn1=v}continue;case c.oids.certBag:g=h,m=function(){if(s.derToOid(u.certId)!==c.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=s.derToOid(u.certId),e}var n=s.fromDer(u.cert,t);try{p.cert=c.certificateFromAsn1(n,!0)}catch(r){p.cert=null,p.asn1=n}};break;default:var f=new Error("Unsupported PKCS#12 SafeBag type.");throw f.oid=p.type,f}if(void 0!==g&&!s.validate(v,g,u,l)){var f=new Error("Cannot read PKCS#12 "+g.name);throw f.errors=l,f}m()}return r}function a(e){var t={};if(void 0!==e)for(var n=0;n<e.length;++n){var r={},i=[];if(!s.validate(e[n],p,r,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=s.derToOid(r.oid);if(void 0!==c.oids[a]){t[c.oids[a]]=[];for(var u=0;u<r.values.length;++u)t[c.oids[a]].push(r.values[u].value)}}return t}var s=e.asn1,c=e.pki,u=e.pkcs12=e.pkcs12||{},l={name:"ContentInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:s.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},f={name:"PFX",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"version"},l,{name:"PFX.macData",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},d={name:"SafeBag",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:s.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:s.Class.UNIVERSAL,type:s.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},p={name:"Attribute",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:s.Class.UNIVERSAL,type:s.Type.SET,constructed:!0,capture:"values"}]},h={name:"CertBag",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:s.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:s.Class.UNIVERSAL,type:s.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};u.pkcs12FromAsn1=function(i,o,a){"string"==typeof o?(a=o,o=!0):void 0===o&&(o=!0);var l={},d=[];if(!s.validate(i,f,l,d)){var p=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw p.errors=p,p}var h={version:l.version.charCodeAt(0),safeContents:[],getBags:function(n){var r,i={};return"localKeyId"in n?r=n.localKeyId:"localKeyIdHex"in n&&(r=e.util.hexToBytes(n.localKeyIdHex)),void 0===r&&!("friendlyName"in n)&&"bagType"in n&&(i[n.bagType]=t(h.safeContents,null,null,n.bagType)),void 0!==r&&(i.localKeyId=t(h.safeContents,"localKeyId",r,n.bagType)),"friendlyName"in n&&(i.friendlyName=t(h.safeContents,"friendlyName",n.friendlyName,n.bagType)),i},getBagsByFriendlyName:function(e,n){return t(h.safeContents,"friendlyName",e,n)},getBagsByLocalKeyId:function(e,n){return t(h.safeContents,"localKeyId",e,n)}};if(3!==l.version.charCodeAt(0)){
var p=new Error("PKCS#12 PFX of version other than 3 not supported.");throw p.version=l.version.charCodeAt(0),p}if(s.derToOid(l.contentType)!==c.oids.data){var p=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw p.oid=s.derToOid(l.contentType),p}var g=l.content.value[0];if(g.tagClass!==s.Class.UNIVERSAL||g.type!==s.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(g=n(g),l.mac){var m=null,v=0,y=s.derToOid(l.macAlgorithm);switch(y){case c.oids.sha1:m=e.md.sha1.create(),v=20;break;case c.oids.sha256:m=e.md.sha256.create(),v=32;break;case c.oids.sha384:m=e.md.sha384.create(),v=48;break;case c.oids.sha512:m=e.md.sha512.create(),v=64;break;case c.oids.md5:m=e.md.md5.create(),v=16}if(null===m)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+y);var b=new e.util.ByteBuffer(l.macSalt),w="macIterations"in l?parseInt(e.util.bytesToHex(l.macIterations),16):1,S=u.generateKey(a,b,3,w,v,m),C=e.hmac.create();C.start(m,S),C.update(g.value);var _=C.getMac();if(_.getBytes()!==l.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return r(h,g.value,o,a),h},u.toPkcs12Asn1=function(t,n,r,i){i=i||{},i.saltSize=i.saltSize||8,i.count=i.count||2048,i.algorithm=i.algorithm||i.encAlgorithm||"aes128","useMac"in i||(i.useMac=!0),"localKeyId"in i||(i.localKeyId=null),"generateLocalKeyId"in i||(i.generateLocalKeyId=!0);var o,a=i.localKeyId;if(null!==a)a=e.util.hexToBytes(a);else if(i.generateLocalKeyId)if(n){var l=e.util.isArray(n)?n[0]:n;"string"==typeof l&&(l=c.certificateFromPem(l));var f=e.md.sha1.create();f.update(s.toDer(c.certificateToAsn1(l)).getBytes()),a=f.digest().getBytes()}else a=e.random.getBytes(20);var d=[];null!==a&&d.push(s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.localKeyId).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,a)])])),"friendlyName"in i&&d.push(s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.friendlyName).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,s.Type.BMPSTRING,!1,i.friendlyName)])])),d.length>0&&(o=s.create(s.Class.UNIVERSAL,s.Type.SET,!0,d));var p=[],h=[];null!==n&&(h=e.util.isArray(n)?n:[n]);for(var g=[],m=0;m<h.length;++m){n=h[m],"string"==typeof n&&(n=c.certificateFromPem(n));var v=0===m?o:void 0,y=c.certificateToAsn1(n),b=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.certBag).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.x509Certificate).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(y).getBytes())])])]),v]);g.push(b)}if(g.length>0){var w=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,g),S=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.data).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(w).getBytes())])]);p.push(S)}var C=null;if(null!==t){var _=c.wrapRsaPrivateKey(c.privateKeyToAsn1(t));C=null===r?s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.keyBag).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.pkcs8ShroudedKeyBag).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[c.encryptPrivateKeyInfo(_,r,i)]),o]);var E=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[C]),T=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.data).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(E).getBytes())])]);p.push(T)}var A,I=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,p);if(i.useMac){var f=e.md.sha1.create(),k=new e.util.ByteBuffer(e.random.getBytes(i.saltSize)),x=i.count,t=u.generateKey(r,k,3,x,20),B=e.hmac.create();B.start(f,t),B.update(s.toDer(I).getBytes());var N=B.getMac();A=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.sha1).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,N.getBytes())]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,k.getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(x).getBytes())])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(3).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.data).getBytes()),s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(I).getBytes())])]),A])},u.generateKey=e.pbe.generatePkcs12Key}var t="pkcs12";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/pkcs12",["require","module","npm:node-forge@0.6.34/js/asn1","npm:node-forge@0.6.34/js/hmac","npm:node-forge@0.6.34/js/oids","npm:node-forge@0.6.34/js/pkcs7asn1","npm:node-forge@0.6.34/js/pbe","npm:node-forge@0.6.34/js/random","npm:node-forge@0.6.34/js/rsa","npm:node-forge@0.6.34/js/sha1","npm:node-forge@0.6.34/js/util","npm:node-forge@0.6.34/js/x509"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(e,t,i,o){return"workers"in i?r(e,t,i,o):n(e,t,i,o)}function n(t,r,a,s){var u=i(t,r),l=0,f=o(u.bitLength());"millerRabinTests"in a&&(f=a.millerRabinTests);var d=10;"maxBlockTime"in a&&(d=a.maxBlockTime);var p=+new Date;do{if(u.bitLength()>t&&(u=i(t,r)),u.isProbablePrime(f))return s(null,u);u.dAddOffset(c[l++%8],0)}while(0>d||+new Date-p<d);e.util.setImmediate(function(){n(t,r,a,s)})}function r(t,r,o,a){function c(){function e(e){if(!h){--c;var o=e.data;if(o.found){for(var l=0;l<n.length;++l)n[l].terminate();return h=!0,a(null,new s(o.prime,16))}u.bitLength()>t&&(u=i(t,r));var p=u.toString(16);e.target.postMessage({hex:p,workLoad:f}),u.dAddOffset(d,0)}}l=Math.max(1,l);for(var n=[],o=0;l>o;++o)n[o]=new Worker(p);for(var c=l,o=0;l>o;++o)n[o].addEventListener("message",e);var h=!1}if("undefined"==typeof Worker)return n(t,r,o,a);var u=i(t,r),l=o.workers,f=o.workLoad||100,d=30*f/8,p=o.workerScript||"forge/prime.worker.js";return-1===l?e.util.estimateCores(function(e,t){e&&(t=2),l=t-1,c()}):void c()}function i(e,t){var n=new s(e,t),r=e-1;return n.testBit(r)||n.bitwiseTo(s.ONE.shiftLeft(r),l,n),n.dAddOffset(31-n.mod(u).byteValue(),0),n}function o(e){return 100>=e?27:150>=e?18:200>=e?15:250>=e?12:300>=e?9:350>=e?8:400>=e?7:500>=e?6:600>=e?5:800>=e?4:1250>=e?3:2}if(!e.prime){var a=e.prime=e.prime||{},s=e.jsbn.BigInteger,c=[6,4,2,4,2,4,6,2],u=new s(null);u.fromInt(30);var l=function(e,t){return e|t};a.generateProbablePrime=function(n,r,i){"function"==typeof r&&(i=r,r={}),r=r||{};var o=r.algorithm||"PRIMEINC";"string"==typeof o&&(o={name:o}),o.options=o.options||{};var a=r.prng||e.random,s={nextBytes:function(e){for(var t=a.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}};if("PRIMEINC"===o.name)return t(n,s,o.options,i);throw new Error("Invalid prime generation algorithm: "+o.name)}}}var t="prime";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/prime",["require","module","npm:node-forge@0.6.34/js/util","npm:node-forge@0.6.34/js/jsbn","npm:node-forge@0.6.34/js/random"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){var t=e.pss=e.pss||{};t.create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var n=t.md,r=t.mgf,i=n.digestLength,o=t.salt||null;"string"==typeof o&&(o=e.util.createBuffer(o));var a;if("saltLength"in t)a=t.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");a=o.length()}if(null!==o&&o.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||e.random,c={};return c.encode=function(t,c){var u,l=c-1,f=Math.ceil(l/8),d=t.digest().getBytes();if(i+a+2>f)throw new Error("Message is too long to encrypt.");var p;p=null===o?s.getBytesSync(a):o.bytes();var h=new e.util.ByteBuffer;h.fillWithByte(0,8),h.putBytes(d),h.putBytes(p),n.start(),n.update(h.getBytes());var g=n.digest().getBytes(),m=new e.util.ByteBuffer;m.fillWithByte(0,f-a-i-2),m.putByte(1),m.putBytes(p);var v=m.getBytes(),y=f-i-1,b=r.generate(g,y),w="";for(u=0;y>u;u++)w+=String.fromCharCode(v.charCodeAt(u)^b.charCodeAt(u));var S=65280>>8*f-l&255;return w=String.fromCharCode(w.charCodeAt(0)&~S)+w.substr(1),w+g+String.fromCharCode(188)},c.verify=function(t,o,s){var c,u=s-1,l=Math.ceil(u/8);if(o=o.substr(-l),i+a+2>l)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var f=l-i-1,d=o.substr(0,f),p=o.substr(f,i),h=65280>>8*l-u&255;if(0!==(d.charCodeAt(0)&h))throw new Error("Bits beyond keysize not zero as expected.");var g=r.generate(p,f),m="";for(c=0;f>c;c++)m+=String.fromCharCode(d.charCodeAt(c)^g.charCodeAt(c));m=String.fromCharCode(m.charCodeAt(0)&~h)+m.substr(1);var v=l-i-a-2;for(c=0;v>c;c++)if(0!==m.charCodeAt(c))throw new Error("Leftmost octets not zero as expected");if(1!==m.charCodeAt(v))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var y=m.substr(-a),b=new e.util.ByteBuffer;b.fillWithByte(0,8),b.putBytes(t),b.putBytes(y),n.start(),n.update(b.getBytes());var w=n.digest().getBytes();return p===w},c}}var t="pss";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/pss",["require","module","npm:node-forge@0.6.34/js/random","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){var t="undefined"!=typeof process&&process.versions&&process.versions.node,n=null;e.disableNativeCode||!t||process.versions["node-webkit"]||(n=require("crypto"));var r=e.prng=e.prng||{};r.create=function(t){function r(e){if(s.pools[0].messageLength>=32)return o(),e();var t=32-s.pools[0].messageLength<<5;s.seedFile(t,function(t,n){return t?e(t):(s.collect(n),o(),void e())})}function i(){if(s.pools[0].messageLength>=32)return o();var e=32-s.pools[0].messageLength<<5;s.collect(s.seedFileSync(e)),o()}function o(){var e=s.plugin.md.create();e.update(s.pools[0].digest().getBytes()),s.pools[0].start();for(var t=1,n=1;32>n;++n)t=31===t?2147483648:t<<2,t%s.reseeds===0&&(e.update(s.pools[n].digest().getBytes()),s.pools[n].start());var r=e.digest().getBytes();e.start(),e.update(r);var i=e.digest().getBytes();s.key=s.plugin.formatKey(r),s.seed=s.plugin.formatSeed(i),s.reseeds=4294967295===s.reseeds?0:s.reseeds+1,s.generated=0}function a(t){var n=null;if("undefined"!=typeof window){var r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(n=function(e){return r.getRandomValues(e)})}var i=e.util.createBuffer();if(n)for(;i.length()<t;){var o=Math.max(1,Math.min(t-i.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{n(a);for(var s=0;s<a.length;++s)i.putInt32(a[s])}catch(c){if(!("undefined"!=typeof QuotaExceededError&&c instanceof QuotaExceededError))throw c}}if(i.length()<t)for(var u,l,f,d=Math.floor(65536*Math.random());i.length()<t;){l=16807*(65535&d),u=16807*(d>>16),l+=(32767&u)<<16,l+=u>>15,l=(2147483647&l)+(l>>31),d=4294967295&l;for(var s=0;3>s;++s)f=d>>>(s<<3),f^=Math.floor(256*Math.random()),i.putByte(String.fromCharCode(255&f))}return i.getBytes(t)}for(var s={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0},c=t.md,u=new Array(32),l=0;32>l;++l)u[l]=c.create();return s.pools=u,s.pool=0,s.generate=function(t,n){function i(f){if(f)return n(f);if(l.length()>=t)return n(null,l.getBytes(t));if(s.generated>1048575&&(s.key=null),null===s.key)return e.util.nextTick(function(){r(i)});var d=o(s.key,s.seed);s.generated+=d.length,l.putBytes(d),s.key=c(o(s.key,a(s.seed))),s.seed=u(o(s.key,s.seed)),e.util.setImmediate(i)}if(!n)return s.generateSync(t);var o=s.plugin.cipher,a=s.plugin.increment,c=s.plugin.formatKey,u=s.plugin.formatSeed,l=e.util.createBuffer();s.key=null,i()},s.generateSync=function(t){var n=s.plugin.cipher,r=s.plugin.increment,o=s.plugin.formatKey,a=s.plugin.formatSeed;s.key=null;for(var c=e.util.createBuffer();c.length()<t;){s.generated>1048575&&(s.key=null),null===s.key&&i();var u=n(s.key,s.seed);s.generated+=u.length,c.putBytes(u),s.key=o(n(s.key,r(s.seed))),s.seed=a(n(s.key,s.seed))}return c.getBytes(t)},n?(s.seedFile=function(e,t){n.randomBytes(e,function(e,n){return e?t(e):void t(null,n.toString())})},s.seedFileSync=function(e){return n.randomBytes(e).toString()}):(s.seedFile=function(e,t){try{t(null,a(e))}catch(n){t(n)}},s.seedFileSync=a),s.collect=function(e){for(var t=e.length,n=0;t>n;++n)s.pools[s.pool].update(e.substr(n,1)),s.pool=31===s.pool?0:s.pool+1},s.collectInt=function(e,t){for(var n="",r=0;t>r;r+=8)n+=String.fromCharCode(e>>r&255);s.collect(n)},s.registerWorker=function(e){if(e===self)s.seedFile=function(e,t){function n(e){var r=e.data;r.forge&&r.forge.prng&&(self.removeEventListener("message",n),t(r.forge.prng.err,r.forge.prng.bytes))}self.addEventListener("message",n),self.postMessage({forge:{prng:{needed:e}}})};else{var t=function(t){var n=t.data;n.forge&&n.forge.prng&&s.seedFile(n.forge.prng.needed,function(t,n){e.postMessage({forge:{prng:{err:t,bytes:n}}})})};e.addEventListener("message",t)}},s}}var t="prng";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/prng",["require","module","npm:node-forge@0.6.34/js/md","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),System.registerDynamic("npm:qr-image@3.1.0/lib/png",["npm:qr-image@3.1.0/lib/crc32","github:jspm/nodelibs-zlib@0.1.0","npm:pako@0.2.7","github:jspm/nodelibs-buffer@0.1.0"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(t){"use strict";function r(n,r){var i=e("github:jspm/nodelibs-zlib@0.1.0"),o=t(25);c.copy(o),o.writeUInt32BE(n.size,8),o.writeUInt32BE(n.size,12),o.writeUInt32BE(a(o.slice(4,-4)),21),r.push(s),r.push(o);var l=[t([0,0,0,0,73,68,65,84])];i.createDeflate({level:9}).on("data",function(e){l.push(e)}).on("end",function(){l.push(t(4)),l=t.concat(l),l.writeUInt32BE(l.length-12,0),l.writeUInt32BE(a(l.slice(4,-4)),l.length-4),r.push(l),r.push(u),r.push(null)}).end(n.data)}function i(n){var r=e("npm:pako@0.2.7"),i=[],o=t(25);c.copy(o),o.writeUInt32BE(n.size,8),o.writeUInt32BE(n.size,12),o.writeUInt32BE(a(o.slice(4,-4)),21),i.push(s),i.push(o);var l=t.concat([t([0,0,0,0,73,68,65,84]),t(r.deflate(n.data,{level:9})),t(4)]);return l.writeUInt32BE(l.length-12,0),l.writeUInt32BE(a(l.slice(4,-4)),l.length-4),i.push(l),i.push(u),t.concat(i)}function o(e,n,r){var i=e.length,o=(i+2*r)*n,a=t((o+1)*o);a.fill(255);for(var s=0;o>s;s++)a[s*(o+1)]=0;for(var s=0;i>s;s++)for(var c=0;i>c;c++)if(e[s][c]){var u=((r+s)*(o+1)+(r+c))*n+1;a.fill(0,u,u+n);for(var l=1;n>l;l++)a.copy(a,u+l*(o+1),u,u+n)}return{data:a,size:o}}var a=e("npm:qr-image@3.1.0/lib/crc32"),s=t([137,80,78,71,13,10,26,10]),c=t([0,0,0,13,73,72,68,82,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0]),u=t([0,0,0,0,73,69,78,68,174,66,96,130]);n.exports={bitmap:o,png:r,png_sync:i}}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer),r.define=i,n.exports}),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){e.random&&e.random.getBytes||!function(t){function n(){var t=e.prng.create(r);return t.getBytes=function(e,n){return t.generate(e,n)},t.getBytesSync=function(e){return t.generate(e)},t}var r={},i=new Array(4),o=e.util.createBuffer();r.formatKey=function(t){var n=e.util.createBuffer(t);return t=new Array(4),t[0]=n.getInt32(),t[1]=n.getInt32(),t[2]=n.getInt32(),t[3]=n.getInt32(),e.aes._expandKey(t,!1)},r.formatSeed=function(t){var n=e.util.createBuffer(t);return t=new Array(4),t[0]=n.getInt32(),t[1]=n.getInt32(),t[2]=n.getInt32(),t[3]=n.getInt32(),t},r.cipher=function(t,n){return e.aes._updateBlock(t,n,i,!1),o.putInt32(i[0]),o.putInt32(i[1]),o.putInt32(i[2]),o.putInt32(i[3]),o.getBytes()},r.increment=function(e){return++e[3],e},r.md=e.md.sha256;var a=n(),s="undefined"!=typeof process&&process.versions&&process.versions.node,c=null;if("undefined"!=typeof window){var u=window.crypto||window.msCrypto;u&&u.getRandomValues&&(c=function(e){return u.getRandomValues(e)})}if(e.disableNativeCode||!s&&!c){if("undefined"==typeof window||void 0===window.document,a.collectInt(+new Date,32),"undefined"!=typeof navigator){var l="";for(var f in navigator)try{"string"==typeof navigator[f]&&(l+=navigator[f])}catch(d){}a.collect(l),l=null}t&&(t().mousemove(function(e){a.collectInt(e.clientX,16),a.collectInt(e.clientY,16)}),t().keypress(function(e){a.collectInt(e.charCode,8)}))}if(e.random)for(var f in a)e.random[f]=a[f];else e.random=a;e.random.createInstance=n}("undefined"!=typeof jQuery?jQuery:null)}var t="random";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/random",["require","module","npm:node-forge@0.6.34/js/aes","npm:node-forge@0.6.34/js/md","npm:node-forge@0.6.34/js/prng","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(t,n){var r=n.toString(16);r[0]>="8"&&(r="00"+r);var i=e.util.hexToBytes(r);t.putInt32(i.length),t.putBytes(i)}function n(e,t){e.putInt32(t.length),e.putString(t)}function r(){for(var t=e.md.sha1.create(),n=arguments.length,r=0;n>r;++r)t.update(arguments[r]);return t.digest()}var i=e.ssh=e.ssh||{};i.privateKeyToPutty=function(i,o,a){a=a||"",o=o||"";var s="ssh-rsa",c=""===o?"none":"aes256-cbc",u="PuTTY-User-Key-File-2: "+s+"\r\n";u+="Encryption: "+c+"\r\n",u+="Comment: "+a+"\r\n";var l=e.util.createBuffer();n(l,s),t(l,i.e),t(l,i.n);var f=e.util.encode64(l.bytes(),64),d=Math.floor(f.length/66)+1;u+="Public-Lines: "+d+"\r\n",u+=f;var p=e.util.createBuffer();t(p,i.d),t(p,i.p),t(p,i.q),t(p,i.qInv);var h;if(o){var g=p.length()+16-1;g-=g%16;var m=r(p.bytes());m.truncate(m.length()-g+p.length()),p.putBuffer(m);var v=e.util.createBuffer();v.putBuffer(r("\x00\x00\x00\x00",o)),v.putBuffer(r("\x00\x00\x00",o));var y=e.aes.createEncryptionCipher(v.truncate(8),"CBC");y.start(e.util.createBuffer().fillWithByte(0,16)),y.update(p.copy()),y.finish();var b=y.output;b.truncate(16),h=e.util.encode64(b.bytes(),64)}else h=e.util.encode64(p.bytes(),64);d=Math.floor(h.length/66)+1,u+="\r\nPrivate-Lines: "+d+"\r\n",u+=h;var w=r("putty-private-key-file-mac-key",o),S=e.util.createBuffer();n(S,s),n(S,c),n(S,a),S.putInt32(l.length()),S.putBuffer(l),S.putInt32(p.length()),S.putBuffer(p);var C=e.hmac.create();return C.start("sha1",w),C.update(S.bytes()),u+="\r\nPrivate-MAC: "+C.digest().toHex()+"\r\n"},i.publicKeyToOpenSSH=function(r,i){var o="ssh-rsa";i=i||"";var a=e.util.createBuffer();return n(a,o),t(a,r.e),t(a,r.n),o+" "+e.util.encode64(a.bytes())+" "+i},i.privateKeyToOpenSSH=function(t,n){return n?e.pki.encryptRsaPrivateKey(t,n,{legacy:!0,algorithm:"aes128"}):e.pki.privateKeyToPem(t)},i.getPublicKeyFingerprint=function(r,i){i=i||{};var o=i.md||e.md.md5.create(),a="ssh-rsa",s=e.util.createBuffer();n(s,a),t(s,r.e),t(s,r.n),o.start(),o.update(s.getBytes());var c=o.digest();if("hex"===i.encoding){var u=c.toHex();return i.delimiter?u.match(/.{2}/g).join(i.delimiter):u}if("binary"===i.encoding)return c.getBytes();if(i.encoding)throw new Error('Unknown encoding "'+i.encoding+'".');return c}}var t="ssh";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/ssh",["require","module","npm:node-forge@0.6.34/js/aes","npm:node-forge@0.6.34/js/hmac","npm:node-forge@0.6.34/js/md5","npm:node-forge@0.6.34/js/sha1","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){var t=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],n=[1,2,3,5],r=function(e,t){return e<<t&65535|(65535&e)>>16-t},i=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.rc2=e.rc2||{},e.rc2.expandKey=function(n,r){"string"==typeof n&&(n=e.util.createBuffer(n)),r=r||128;var i,o=n,a=n.length(),s=r,c=Math.ceil(s/8),u=255>>(7&s);for(i=a;128>i;i++)o.putByte(t[o.at(i-1)+o.at(i-a)&255]);for(o.setAt(128-c,t[o.at(128-c)&u]),i=127-c;i>=0;i--)o.setAt(i,t[o.at(i+1)^o.at(i+c)]);return o};var o=function(t,o,a){var s,c,u,l,f=!1,d=null,p=null,h=null,g=[];for(t=e.rc2.expandKey(t,o),u=0;64>u;u++)g.push(t.getInt16Le());a?(s=function(e){for(u=0;4>u;u++)e[u]+=g[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),e[u]=r(e[u],n[u]),l++},c=function(e){for(u=0;4>u;u++)e[u]+=g[63&e[(u+3)%4]]}):(s=function(e){for(u=3;u>=0;u--)e[u]=i(e[u],n[u]),e[u]-=g[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),l--},c=function(e){for(u=3;u>=0;u--)e[u]-=g[63&e[(u+3)%4]]});var m=function(e){var t=[];for(u=0;4>u;u++){var n=d.getInt16Le();null!==h&&(a?n^=h.getInt16Le():h.putInt16Le(n)),t.push(65535&n)}l=a?0:63;for(var r=0;r<e.length;r++)for(var i=0;i<e[r][0];i++)e[r][1](t);for(u=0;4>u;u++)null!==h&&(a?h.putInt16Le(t[u]):t[u]^=h.getInt16Le()),p.putInt16Le(t[u])},v=null;return v={start:function(t,n){t&&"string"==typeof t&&(t=e.util.createBuffer(t)),f=!1,d=e.util.createBuffer(),p=n||new e.util.createBuffer,h=t,v.output=p},update:function(e){for(f||d.putBuffer(e);d.length()>=8;)m([[5,s],[1,c],[6,s],[1,c],[5,s]])},finish:function(e){var t=!0;if(a)if(e)t=e(8,d,!a);else{var n=8===d.length()?8:8-d.length();d.fillWithByte(n,n)}if(t&&(f=!0,v.update()),!a&&(t=0===d.length()))if(e)t=e(8,p,!a);else{var r=p.length(),i=p.at(r-1);i>r?t=!1:p.truncate(i)}return t}}};e.rc2.startEncrypting=function(t,n,r){var i=e.rc2.createEncryptionCipher(t,128);return i.start(n,r),i},e.rc2.createEncryptionCipher=function(e,t){return o(e,t,!0)},e.rc2.startDecrypting=function(t,n,r){var i=e.rc2.createDecryptionCipher(t,128);return i.start(n,r),i},e.rc2.createDecryptionCipher=function(e,t){return o(e,t,!1)}}var t="rc2";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/rc2",["require","module","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){var t="forge.task",n=0,r={},i=0;e.debug.set(t,"tasks",r);var o={};e.debug.set(t,"queues",o);var a="?",s=30,c=20,u="ready",l="running",f="blocked",d="sleeping",p="done",h="error",g="stop",m="start",v="block",y="unblock",b="sleep",w="wakeup",S="cancel",C="fail",_={};_[u]={},_[u][g]=u,_[u][m]=l,_[u][S]=p,_[u][C]=h,_[l]={},_[l][g]=u,_[l][m]=l,_[l][v]=f,_[l][y]=l,_[l][b]=d,_[l][w]=l,_[l][S]=p,_[l][C]=h,_[f]={},_[f][g]=f,_[f][m]=f,_[f][v]=f,_[f][y]=f,_[f][b]=f,_[f][w]=f,_[f][S]=p,_[f][C]=h,_[d]={},_[d][g]=d,_[d][m]=d,_[d][v]=d,_[d][y]=d,_[d][b]=d,_[d][w]=d,_[d][S]=p,_[d][C]=h,_[p]={},_[p][g]=p,_[p][m]=p,_[p][v]=p,_[p][y]=p,_[p][b]=p,_[p][w]=p,_[p][S]=p,_[p][C]=h,_[h]={},_[h][g]=h,_[h][m]=h,_[h][v]=h,_[h][y]=h,_[h][b]=h,_[h][w]=h,_[h][S]=h,_[h][C]=h;var E=function(o){this.id=-1,this.name=o.name||a,this.parent=o.parent||null,this.run=o.run,this.subtasks=[],this.error=!1,this.state=u,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=i++,r[this.id]=this,n>=1&&e.log.verbose(t,"[%s][%s] init",this.id,this.name,this)};E.prototype.debug=function(n){n=n||"",e.log.debug(t,n,"[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",o)},E.prototype.next=function(e,t){"function"==typeof e&&(t=e,e=this.name);var n=new E({run:t,name:e,parent:this});return n.state=l,n.type=this.type,n.successCallback=this.successCallback||null,n.failureCallback=this.failureCallback||null,this.subtasks.push(n),this},E.prototype.parallel=function(t,n){return e.util.isArray(t)&&(n=t,t=this.name),this.next(t,function(r){var i=r;i.block(n.length);for(var o=function(t,r){e.task.start({type:t,run:function(e){n[r](e)},success:function(e){i.unblock()},failure:function(e){i.unblock()}})},a=0;a<n.length;a++){var s=t+"__parallel-"+r.id+"-"+a,c=a;o(s,c)}})},E.prototype.stop=function(){this.state=_[this.state][g]},E.prototype.start=function(){this.error=!1,this.state=_[this.state][m],this.state===l&&(this.start=new Date,this.run(this),A(this,0))},E.prototype.block=function(e){e="undefined"==typeof e?1:e,this.blocks+=e,this.blocks>0&&(this.state=_[this.state][v])},E.prototype.unblock=function(e){return e="undefined"==typeof e?1:e,this.blocks-=e,0===this.blocks&&this.state!==p&&(this.state=l,A(this,0)),this.blocks},E.prototype.sleep=function(e){e="undefined"==typeof e?0:e,this.state=_[this.state][b];var t=this;this.timeoutId=setTimeout(function(){t.timeoutId=null,t.state=l,A(t,0)},e)},E.prototype.wait=function(e){e.wait(this)},E.prototype.wakeup=function(){this.state===d&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=l,A(this,0))},E.prototype.cancel=function(){this.state=_[this.state][S],this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},E.prototype.fail=function(e){if(this.error=!0,I(this,!0),e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,A(e,0);else{if(null!==this.parent){for(var t=this.parent;null!==t.parent;)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,t=t.parent;I(t,!0)}this.failureCallback&&this.failureCallback(this)}};var T=function(e){e.error=!1,e.state=_[e.state][m],setTimeout(function(){e.state===l&&(e.swapTime=+new Date,e.run(e),A(e,0))},0)},A=function(e,t){var n=t>s||+new Date-e.swapTime>c,r=function(t){if(t++,e.state===l)if(n&&(e.swapTime=+new Date),e.subtasks.length>0){var r=e.subtasks.shift();r.error=e.error,r.swapTime=e.swapTime,r.userData=e.userData,r.run(r),r.error||A(r,t)}else I(e),e.error||null!==e.parent&&(e.parent.error=e.error,e.parent.swapTime=e.swapTime,e.parent.userData=e.userData,A(e.parent,t))};n?setTimeout(r,0):r(t)},I=function(i,a){i.state=p,delete r[i.id],n>=1&&e.log.verbose(t,"[%s][%s] finish",i.id,i.name,i),null===i.parent&&(i.type in o?0===o[i.type].length?e.log.error(t,"[%s][%s] task queue empty [%s]",i.id,i.name,i.type):o[i.type][0]!==i?e.log.error(t,"[%s][%s] task not first in queue [%s]",i.id,i.name,i.type):(o[i.type].shift(),0===o[i.type].length?(n>=1&&e.log.verbose(t,"[%s][%s] delete queue [%s]",i.id,i.name,i.type),delete o[i.type]):(n>=1&&e.log.verbose(t,"[%s][%s] queue start next [%s] remain:%s",i.id,i.name,i.type,o[i.type].length),o[i.type][0].start())):e.log.error(t,"[%s][%s] task queue missing [%s]",i.id,i.name,i.type),
a||(i.error&&i.failureCallback?i.failureCallback(i):!i.error&&i.successCallback&&i.successCallback(i)))};e.task=e.task||{},e.task.start=function(r){var i=new E({run:r.run,name:r.name||a});i.type=r.type,i.successCallback=r.success||null,i.failureCallback=r.failure||null,i.type in o?o[r.type].push(i):(n>=1&&e.log.verbose(t,"[%s][%s] create queue [%s]",i.id,i.name,i.type),o[i.type]=[i],T(i))},e.task.cancel=function(e){e in o&&(o[e]=[o[e][0]])},e.task.createCondition=function(){var e={tasks:{}};return e.wait=function(t){t.id in e.tasks||(t.block(),e.tasks[t.id]=t)},e.notify=function(){var t=e.tasks;e.tasks={};for(var n in t)t[n].unblock()},e}}var t="task";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/task",["require","module","npm:node-forge@0.6.34/js/debug","npm:node-forge@0.6.34/js/log","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),System.registerDynamic("github:jspm/nodelibs-process@0.1.1",["github:jspm/nodelibs-process@0.1.1/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("github:jspm/nodelibs-process@0.1.1/index"),r.define=i,n.exports}),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(r.isArrayBuffer(e)||r.isArrayBufferView(e)){var n=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,n)}catch(i){for(var o=0;o<n.length;++o)this.putByte(n[o])}}else(e instanceof t||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}function n(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=r.isArrayBuffer(e),i=r.isArrayBufferView(e);return n||i?(n?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength)):(this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),void("writeOffset"in t&&(this.write=t.writeOffset)))}var r=e.util=e.util||{};!function(){function e(e){if(e.source===window&&e.data===t){e.stopPropagation();var r=n.slice();n.length=0,r.forEach(function(e){e()})}}if("undefined"!=typeof process&&process.nextTick)return r.nextTick=process.nextTick,void("function"==typeof setImmediate?r.setImmediate=setImmediate:r.setImmediate=r.nextTick);if("function"==typeof setImmediate)return r.setImmediate=setImmediate,void(r.nextTick=function(e){return setImmediate(e)});if(r.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",n=[];r.setImmediate=function(e){n.push(e),1===n.length&&window.postMessage(t,"*")},window.addEventListener("message",e,!0)}if("undefined"!=typeof MutationObserver){var i=Date.now(),o=!0,a=document.createElement("div"),n=[];new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})}).observe(a,{attributes:!0});var s=r.setImmediate;r.setImmediate=function(e){Date.now()-i>15?(i=Date.now(),s(e)):(n.push(e),1===n.length&&a.setAttribute("a",o=!o))}}r.nextTick=r.setImmediate}(),r.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},r.isArrayBufferView=function(e){return e&&r.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},r.ByteBuffer=t,r.ByteStringBuffer=t;var i=4096;r.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>i&&(this.data.substr(0,1),this._constructedStringLength=0)},r.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},r.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},r.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},r.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)1&t&&(n+=e),t>>>=1,t>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this},r.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},r.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(r.encodeUtf8(e))},r.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},r.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},r.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},r.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},r.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},r.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},r.ByteStringBuffer.prototype.putInt=function(e,t){var n="";do t-=8,n+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(n)},r.ByteStringBuffer.prototype.putSignedInt=function(e,t){return 0>e&&(e+=2<<t-1),this.putInt(e,t)},r.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},r.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},r.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},r.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},r.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},r.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},r.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},r.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},r.ByteStringBuffer.prototype.getInt=function(e){var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t},r.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},r.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},r.ByteStringBuffer.prototype.bytes=function(e){return"undefined"==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},r.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},r.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},r.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},r.ByteStringBuffer.prototype.copy=function(){var e=r.createBuffer(this.data);return e.read=this.read,e},r.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},r.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},r.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},r.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);16>n&&(e+="0"),e+=n.toString(16)}return e},r.ByteStringBuffer.prototype.toString=function(){return r.decodeUtf8(this.bytes())},r.DataBuffer=n,r.DataBuffer.prototype.length=function(){return this.write-this.read},r.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},r.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this},r.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},r.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;t>n;++n)this.data.setUint8(e);return this},r.DataBuffer.prototype.putBytes=function(e,t){if(r.isArrayBufferView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),i=n.byteLength-n.byteOffset;this.accommodate(i);var o=new Uint8Array(this.data.buffer,this.write);return o.set(n),this.write+=i,this}if(r.isArrayBuffer(e)){var n=new Uint8Array(e);this.accommodate(n.byteLength);var o=new Uint8Array(this.data.buffer);return o.set(n,this.write),this.write+=n.byteLength,this}if(e instanceof r.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&r.isArrayBufferView(e.data)){var n=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(n.byteLength);var o=new Uint8Array(e.data.byteLength,this.write);return o.set(n),this.write+=n.byteLength,this}if(e instanceof r.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var a;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.hex.decode(e,a,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.base64.decode(e,a,this.write),this;if("utf8"===t&&(e=r.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.raw.decode(a),this;if("utf16"===t)return this.accommodate(2*e.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=r.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},r.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},r.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},r.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},r.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},r.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},r.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},r.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},r.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},r.DataBuffer.prototype.putInt=function(e,t){this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this},r.DataBuffer.prototype.putSignedInt=function(e,t){return this.accommodate(t/8),0>e&&(e+=2<<t-1),this.putInt(e,t)},r.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},r.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},r.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},r.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},r.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},r.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},r.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},r.DataBuffer.prototype.getInt=function(e){var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t},r.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},r.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},r.DataBuffer.prototype.bytes=function(e){return"undefined"==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},r.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},r.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},r.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},r.DataBuffer.prototype.copy=function(){return new r.DataBuffer(this)},r.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},r.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},r.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},r.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);16>n&&(e+="0"),e+=n.toString(16)}return e},r.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8","binary"===e||"raw"===e)return r.binary.raw.encode(t);if("hex"===e)return r.binary.hex.encode(t);if("base64"===e)return r.binary.base64.encode(t);if("utf8"===e)return r.text.utf8.decode(t);if("utf16"===e)return r.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},r.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=r.encodeUtf8(e)),new r.ByteBuffer(e)},r.fillString=function(e,t){for(var n="";t>0;)1&t&&(n+=e),t>>>=1,t>0&&(e+=e);return n},r.xorBytes=function(e,t,n){for(var r="",i="",o="",a=0,s=0;n>0;--n,++a)i=e.charCodeAt(a)^t.charCodeAt(a),s>=10&&(r+=o,o="",s=0),o+=String.fromCharCode(i),++s;return r+=o},r.hexToBytes=function(e){var t="",n=0;for(e.length&!0&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},r.bytesToHex=function(e){return r.createBuffer(e).toHex()},r.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];r.encode64=function(e,t){for(var n,r,i,a="",s="",c=0;c<e.length;)n=e.charCodeAt(c++),r=e.charCodeAt(c++),i=e.charCodeAt(c++),a+=o.charAt(n>>2),a+=o.charAt((3&n)<<4|r>>4),isNaN(r)?a+="==":(a+=o.charAt((15&r)<<2|i>>6),a+=isNaN(i)?"=":o.charAt(63&i)),t&&a.length>t&&(s+=a.substr(0,t)+"\r\n",a=a.substr(t));return s+=a},r.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,n,r,i,o="",s=0;s<e.length;)t=a[e.charCodeAt(s++)-43],n=a[e.charCodeAt(s++)-43],r=a[e.charCodeAt(s++)-43],i=a[e.charCodeAt(s++)-43],o+=String.fromCharCode(t<<2|n>>4),64!==r&&(o+=String.fromCharCode((15&n)<<4|r>>2),64!==i&&(o+=String.fromCharCode((3&r)<<6|i)));return o},r.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},r.decodeUtf8=function(e){return decodeURIComponent(escape(e))},r.binary={raw:{},hex:{},base64:{}},r.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},r.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var i=n,o=0;o<e.length;++o)r[i++]=e.charCodeAt(o);return t?i-n:r},r.binary.hex.encode=r.bytesToHex,r.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2))),n=n||0;var i=0,o=n;for(1&e.length&&(i=1,r[o++]=parseInt(e[0],16));i<e.length;i+=2)r[o++]=parseInt(e.substr(i,2),16);return t?o-n:r},r.binary.base64.encode=function(e,t){for(var n,r,i,a="",s="",c=0;c<e.byteLength;)n=e[c++],r=e[c++],i=e[c++],a+=o.charAt(n>>2),a+=o.charAt((3&n)<<4|r>>4),isNaN(r)?a+="==":(a+=o.charAt((15&r)<<2|i>>6),a+=isNaN(i)?"=":o.charAt(63&i)),t&&a.length>t&&(s+=a.substr(0,t)+"\r\n",a=a.substr(t));return s+=a},r.binary.base64.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,o,s,c,u=0,l=n;u<e.length;)i=a[e.charCodeAt(u++)-43],o=a[e.charCodeAt(u++)-43],s=a[e.charCodeAt(u++)-43],c=a[e.charCodeAt(u++)-43],r[l++]=i<<2|o>>4,64!==s&&(r[l++]=(15&o)<<4|s>>2,64!==c&&(r[l++]=(3&s)<<6|c));return t?l-n:r.subarray(0,l)},r.text={utf8:{},utf16:{}},r.text.utf8.encode=function(e,t,n){e=r.encodeUtf8(e);var i=t;i||(i=new Uint8Array(e.length)),n=n||0;for(var o=n,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a);return t?o-n:i},r.text.utf8.decode=function(e){return r.decodeUtf8(String.fromCharCode.apply(null,e))},r.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length));var i=new Uint16Array(r);n=n||0;for(var o=n,a=n,s=0;s<e.length;++s)i[a++]=e.charCodeAt(s),o+=2;return t?o-n:r},r.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e))},r.deflate=function(e,t,n){if(t=r.decode64(e.deflate(r.encode64(t)).rval),n){var i=2,o=t.charCodeAt(1);32&o&&(i=6),t=t.substring(i,t.length-4)}return t},r.inflate=function(e,t,n){var i=e.inflate(r.encode64(t)).rval;return null===i?null:r.decode64(i)};var s=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var i;if(null===n?i=e.removeItem(t):(n=r.encode64(JSON.stringify(n)),i=e.setItem(t,n)),"undefined"!=typeof i&&i.rval!==!0){var o=new Error(i.error.message);throw o.id=i.error.id,o.name=i.error.name,o}},c=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(null===n.rval){if(n.error){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(r.decode64(n))),n},u=function(e,t,n,r){var i=c(e,t);null===i&&(i={}),i[n]=r,s(e,t,i)},l=function(e,t,n){var r=c(e,t);return null!==r&&(r=n in r?r[n]:null),r},f=function(e,t,n){var r=c(e,t);if(null!==r&&n in r){delete r[n];var i=!0;for(var o in r){i=!1;break}i&&(r=null),s(e,t,r)}},d=function(e,t){s(e,t,null)},p=function(e,t,n){var r=null;"undefined"==typeof n&&(n=["web","flash"]);var i,o=!1,a=null;for(var s in n){i=n[s];try{if("flash"===i||"both"===i){if(null===t[0])throw new Error("Flash local storage not available.");r=e.apply(this,t),o="flash"===i}("web"===i||"both"===i)&&(t[0]=localStorage,r=e.apply(this,t),o=!0)}catch(c){a=c}if(o)break}if(!o)throw a;return r};r.setItem=function(e,t,n,r,i){p(u,arguments,i)},r.getItem=function(e,t,n,r){return p(l,arguments,r)},r.removeItem=function(e,t,n,r){p(f,arguments,r)},r.clearItems=function(e,t,n){p(d,arguments,n)},r.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var n=t.exec(e),r=null===n?null:{full:e,scheme:n[1],host:n[2],port:n[3],path:n[4]};return r&&(r.fullHost=r.host,r.port?80!==r.port&&"http"===r.scheme?r.fullHost+=":"+r.port:443!==r.port&&"https"===r.scheme&&(r.fullHost+=":"+r.port):"http"===r.scheme?r.port=80:"https"===r.scheme&&(r.port=443),r.full=r.scheme+"://"+r.fullHost),r};var h=null;r.getQueryVariables=function(e){var t,n=function(e){for(var t={},n=e.split("&"),r=0;r<n.length;r++){var i,o,a=n[r].indexOf("=");a>0?(i=n[r].substring(0,a),o=n[r].substring(a+1)):(i=n[r],o=null),i in t||(t[i]=[]),i in Object.prototype||null===o||t[i].push(unescape(o))}return t};return"undefined"==typeof e?(null===h&&(h="undefined"!=typeof window&&window.location&&window.location.search?n(window.location.search.substring(1)):{}),t=h):t=n(e),t},r.parseFragment=function(e){var t=e,n="",i=e.indexOf("?");i>0&&(t=e.substring(0,i),n=e.substring(i+1));var o=t.split("/");o.length>0&&""===o[0]&&o.shift();var a=""===n?{}:r.getQueryVariables(n);return{pathString:t,queryString:n,path:o,query:a}},r.makeRequest=function(e){var t=r.parseFragment(e),n={path:t.pathString,query:t.queryString,getPath:function(e){return"undefined"==typeof e?t.path:t.path[e]},getQuery:function(e,n){var r;return"undefined"==typeof e?r=t.query:(r=t.query[e],r&&"undefined"!=typeof n&&(r=r[n])),r},getQueryLast:function(e,t){var r,i=n.getQuery(e);return r=i?i[i.length-1]:t}};return n},r.makeLink=function(e,t,n){e=jQuery.isArray(e)?e.join("/"):e;var r=jQuery.param(t||{});return n=n||"",e+(r.length>0?"?"+r:"")+(n.length>0?"#"+n:"")},r.setPath=function(e,t,n){if("object"==typeof e&&null!==e)for(var r=0,i=t.length;i>r;){var o=t[r++];if(r==i)e[o]=n;else{var a=o in e;(!a||a&&"object"!=typeof e[o]||a&&null===e[o])&&(e[o]={}),e=e[o]}}},r.getPath=function(e,t,n){for(var r=0,i=t.length,o=!0;o&&i>r&&"object"==typeof e&&null!==e;){var a=t[r++];o=a in e,o&&(e=e[a])}return o?e:n},r.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var n=0,r=t.length;r>n;){var i=t[n++];if(n==r)delete e[i];else{if(!(i in e)||"object"!=typeof e[i]||null===e[i])break;e=e[i]}}},r.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},r.format=function(e){for(var t,n,r=/%./g,i=0,o=[],a=0;t=r.exec(e);){n=e.substring(a,r.lastIndex-2),n.length>0&&o.push(n),a=r.lastIndex;var s=t[0][1];switch(s){case"s":case"o":i<arguments.length?o.push(arguments[i++ +1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+s+"?>")}}return o.push(e.substring(a)),o.join("")},r.formatNumber=function(e,t,n,r){var i=e,o=isNaN(t=Math.abs(t))?2:t,a=void 0===n?",":n,s=void 0===r?".":r,c=0>i?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+s:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")},r.formatSize=function(e){return e=e>=1073741824?r.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?r.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?r.formatNumber(e/1024,0)+" KiB":r.formatNumber(e,0)+" bytes"},r.bytesFromIP=function(e){return-1!==e.indexOf(".")?r.bytesFromIPv4(e):-1!==e.indexOf(":")?r.bytesFromIPv6(e):null},r.bytesFromIPv4=function(e){if(e=e.split("."),4!==e.length)return null;for(var t=r.createBuffer(),n=0;n<e.length;++n){var i=parseInt(e[n],10);if(isNaN(i))return null;t.putByte(i)}return t.getBytes()},r.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(e){return 0===e.length&&++t,!0});for(var n=2*(8-e.length+t),i=r.createBuffer(),o=0;8>o;++o)if(e[o]&&0!==e[o].length){var a=r.hexToBytes(e[o]);a.length<2&&i.putByte(0),i.putBytes(a)}else i.fillWithByte(0,n),n=0;return i.getBytes()},r.bytesToIP=function(e){return 4===e.length?r.bytesToIPv4(e):16===e.length?r.bytesToIPv6(e):null},r.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")},r.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],n=[],i=0,o=0;o<e.length;o+=2){for(var a=r.bytesToHex(e[o]+e[o+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var s=n[n.length-1],c=t.length;s&&c===s.end+1?(s.end=c,s.end-s.start>n[i].end-n[i].start&&(i=n.length-1)):n.push({start:c,end:c})}t.push(a)}if(n.length>0){var u=n[i];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),0===u.start&&t.unshift(""),7===u.end&&t.push(""))}return t.join(":")},r.estimateCores=function(e,t){function n(e,s,c){if(0===s){var u=Math.floor(e.reduce(function(e,t){return e+t},0)/e.length);return r.cores=Math.max(1,u),URL.revokeObjectURL(a),t(null,r.cores)}i(c,function(t,r){e.push(o(c,r)),n(e,s-1,c)})}function i(e,t){for(var n=[],r=[],i=0;e>i;++i){var o=new Worker(a);o.addEventListener("message",function(i){if(r.push(i.data),r.length===e){for(var o=0;e>o;++o)n[o].terminate();t(null,r)}}),n.push(o)}for(var i=0;e>i;++i)n[i].postMessage(i)}function o(e,t){for(var n=[],r=0;e>r;++r)for(var i=t[r],o=n[r]=[],a=0;e>a;++a)if(r!==a){var s=t[a];(i.st>s.st&&i.st<s.et||s.st>i.st&&s.st<i.et)&&o.push(a)}return n.reduce(function(e,t){return Math.max(e,t.length)},0)}if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in r&&!e.update)return t(null,r.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return r.cores=navigator.hardwareConcurrency,t(null,r.cores);if("undefined"==typeof Worker)return r.cores=1,t(null,r.cores);if("undefined"==typeof Blob)return r.cores=2,t(null,r.cores);var a=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){for(var t=Date.now(),n=t+4;Date.now()<n;);self.postMessage({st:t,et:n})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16)}}var t="util";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/util",["require","module"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){var t=function(t,n,r,i){var o=e.util.createBuffer(),a=t.length>>1,s=a+(1&t.length),c=t.substr(0,s),u=t.substr(a,s),l=e.util.createBuffer(),f=e.hmac.create();r=n+r;var d=Math.ceil(i/16),p=Math.ceil(i/20);f.start("MD5",c);var h=e.util.createBuffer();l.putBytes(r);for(var g=0;d>g;++g)f.start(null,null),f.update(l.getBytes()),l.putBuffer(f.digest()),f.start(null,null),f.update(l.bytes()+r),h.putBuffer(f.digest());f.start("SHA1",u);var m=e.util.createBuffer();l.clear(),l.putBytes(r);for(var g=0;p>g;++g)f.start(null,null),f.update(l.getBytes()),l.putBuffer(f.digest()),f.start(null,null),f.update(l.bytes()+r),m.putBuffer(f.digest());return o.putBytes(e.util.xorBytes(h.getBytes(),m.getBytes(),i)),o},n=function(t,n,r){var i=e.hmac.create();i.start("SHA1",t);var o=e.util.createBuffer();return o.putInt32(n[0]),o.putInt32(n[1]),o.putByte(r.type),o.putByte(r.version.major),o.putByte(r.version.minor),o.putInt16(r.length),o.putBytes(r.fragment.bytes()),i.update(o.getBytes()),i.digest().getBytes()},r=function(t,n,r){var i=!1;try{var o=t.deflate(n.fragment.getBytes());n.fragment=e.util.createBuffer(o),n.length=o.length,i=!0}catch(a){}return i},i=function(t,n,r){var i=!1;try{var o=t.inflate(n.fragment.getBytes());n.fragment=e.util.createBuffer(o),n.length=o.length,i=!0}catch(a){}return i},o=function(t,n){var r=0;switch(n){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32()}return e.util.createBuffer(t.getBytes(r))},a=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},s={};s.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},s.SupportedVersions=[s.Versions.TLS_1_1,s.Versions.TLS_1_0],s.Version=s.SupportedVersions[0],s.MaxFragment=15360,s.ConnectionEnd={server:0,client:1},s.PRFAlgorithm={tls_prf_sha256:0},s.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},s.CipherType={stream:0,block:1,aead:2},s.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},s.CompressionMethod={none:0,deflate:1},s.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},s.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},s.Alert={},s.Alert.Level={warning:1,fatal:2},s.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},s.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},s.CipherSuites={},s.getCipherSuite=function(e){var t=null;for(var n in s.CipherSuites){var r=s.CipherSuites[n];if(r.id[0]===e.charCodeAt(0)&&r.id[1]===e.charCodeAt(1)){t=r;break}}return t},s.handleUnexpected=function(e,t){var n=!e.open&&e.entity===s.ConnectionEnd.client;n||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unexpected_message}})},s.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(s.queue(e,s.createAlert(e,{level:s.Alert.Level.warning,description:s.Alert.Description.no_renegotiation})),s.flush(e)),e.process()},s.parseHelloMessage=function(t,n,r){var i=null,a=t.entity===s.ConnectionEnd.client;if(38>r)t.error(t,{message:a?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});else{var c=n.fragment,u=c.length();if(i={version:{major:c.getByte(),minor:c.getByte()},random:e.util.createBuffer(c.getBytes(32)),session_id:o(c,1),extensions:[]},a?(i.cipher_suite=c.getBytes(2),i.compression_method=c.getByte()):(i.cipher_suites=o(c,2),i.compression_methods=o(c,1)),u=r-(u-c.length()),u>0){for(var l=o(c,2);l.length()>0;)i.extensions.push({type:[l.getByte(),l.getByte()],data:o(l,2)});if(!a)for(var f=0;f<i.extensions.length;++f){var d=i.extensions[f];if(0===d.type[0]&&0===d.type[1])for(var p=o(d.data,2);p.length()>0;){var h=p.getByte();if(0!==h)break;t.session.extensions.server_name.serverNameList.push(o(p,2).getBytes())}}}if(t.session.version&&(i.version.major!==t.session.version.major||i.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.protocol_version
}});if(a)t.session.cipherSuite=s.getCipherSuite(i.cipher_suite);else for(var g=e.util.createBuffer(i.cipher_suites.bytes());g.length()>0&&(t.session.cipherSuite=s.getCipherSuite(g.getBytes(2)),null===t.session.cipherSuite););if(null===t.session.cipherSuite)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.handshake_failure},cipherSuite:e.util.bytesToHex(i.cipher_suite)});a?t.session.compressionMethod=i.compression_method:t.session.compressionMethod=s.CompressionMethod.none}return i},s.createSecurityParameters=function(e,t){var n=e.entity===s.ConnectionEnd.client,r=t.random.bytes(),i=n?e.session.sp.client_random:r,o=n?r:s.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:s.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}},s.handleServerHello=function(e,t,n){var r=s.parseHelloMessage(e,t,n);if(!e.fail){if(!(r.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.protocol_version}});e.version.minor=r.version.minor,e.session.version=e.version;var i=r.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=p,e.session.resuming=!0,e.session.sp.server_random=r.random.bytes()):(e.expect=u,e.session.resuming=!1,s.createSecurityParameters(e,r)),e.session.id=i,e.process()}},s.handleClientHello=function(t,n,r){var i=s.parseHelloMessage(t,n,r);if(!t.fail){var o=i.session_id.bytes(),a=null;if(t.sessionCache&&(a=t.sessionCache.getSession(o),null===a?o="":(a.version.major!==i.version.major||a.version.minor>i.version.minor)&&(a=null,o="")),0===o.length&&(o=e.random.getBytes(32)),t.session.id=o,t.session.clientHelloVersion=i.version,t.session.sp={},a)t.version=t.session.version=a.version,t.session.sp=a.sp;else{for(var c,u=1;u<s.SupportedVersions.length&&(c=s.SupportedVersions[u],!(c.minor<=i.version.minor));++u);t.version={major:c.major,minor:c.minor},t.session.version=t.version}null!==a?(t.expect=S,t.session.resuming=!0,t.session.sp.client_random=i.random.bytes()):(t.expect=t.verifyClient!==!1?y:b,t.session.resuming=!1,s.createSecurityParameters(t,i)),t.open=!0,s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createServerHello(t)})),t.session.resuming?(s.queue(t,s.createRecord(t,{type:s.ContentType.change_cipher_spec,data:s.createChangeCipherSpec()})),t.state.pending=s.createConnectionState(t),t.state.current.write=t.state.pending.write,s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createFinished(t)}))):(s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createCertificate(t)})),t.fail||(s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createServerKeyExchange(t)})),t.verifyClient!==!1&&s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createCertificateRequest(t)})),s.queue(t,s.createRecord(t,{type:s.ContentType.handshake,data:s.createServerHelloDone(t)})))),s.flush(t),t.process()}},s.handleCertificate=function(t,n,r){if(3>r)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});var i,a,c=n.fragment,u={certificate_list:o(c,3)},f=[];try{for(;u.certificate_list.length()>0;)i=o(u.certificate_list,3),a=e.asn1.fromDer(i),i=e.pki.certificateFromAsn1(a,!0),f.push(i)}catch(d){return t.error(t,{message:"Could not parse certificate list.",cause:d,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.bad_certificate}})}var p=t.entity===s.ConnectionEnd.client;!p&&t.verifyClient!==!0||0!==f.length?0===f.length?t.expect=p?l:b:(p?t.session.serverCertificate=f[0]:t.session.clientCertificate=f[0],s.verifyCertificateChain(t,f)&&(t.expect=p?l:b)):t.error(t,{message:p?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}}),t.process()},s.handleServerKeyExchange=function(e,t,n){return n>0?e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unsupported_certificate}}):(e.expect=f,void e.process())},s.handleClientKeyExchange=function(t,n,r){if(48>r)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unsupported_certificate}});var i=n.fragment,a={enc_pre_master_secret:o(i,2).getBytes()},c=null;if(t.getPrivateKey)try{c=t.getPrivateKey(t,t.session.serverCertificate),c=e.pki.privateKeyFromPem(c)}catch(u){t.error(t,{message:"Could not get private key.",cause:u,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}})}if(null===c)return t.error(t,{message:"No private key set.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}});try{var l=t.session.sp;l.pre_master_secret=c.decrypt(a.enc_pre_master_secret);var f=t.session.clientHelloVersion;if(f.major!==l.pre_master_secret.charCodeAt(0)||f.minor!==l.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(u){l.pre_master_secret=e.random.getBytes(48)}t.expect=S,null!==t.session.clientCertificate&&(t.expect=w),t.process()},s.handleCertificateRequest=function(e,t,n){if(3>n)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_types:o(r,1),certificate_authorities:o(r,2)};e.session.certificateRequest=i,e.expect=d,e.process()},s.handleCertificateVerify=function(t,n,r){if(2>r)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});var i=n.fragment;i.read-=4;var a=i.bytes();i.read+=4;var c={signature:o(i,2).getBytes()},u=e.util.createBuffer();u.putBuffer(t.session.md5.digest()),u.putBuffer(t.session.sha1.digest()),u=u.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(u,c.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(a),t.session.sha1.update(a)}catch(f){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.handshake_failure}})}t.expect=S,t.process()},s.handleServerHelloDone=function(t,n,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.record_overflow}});if(null===t.serverCertificate){var i={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.insufficient_security}},o=0,a=t.verify(t,i.alert.description,o,[]);if(a!==!0)return(a||0===a)&&("object"!=typeof a||e.util.isArray(a)?"number"==typeof a&&(i.alert.description=a):(a.message&&(i.message=a.message),a.alert&&(i.alert.description=a.alert))),t.error(t,i)}null!==t.session.certificateRequest&&(n=s.createRecord(t,{type:s.ContentType.handshake,data:s.createCertificate(t)}),s.queue(t,n)),n=s.createRecord(t,{type:s.ContentType.handshake,data:s.createClientKeyExchange(t)}),s.queue(t,n),t.expect=m;var c=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&s.queue(e,s.createRecord(e,{type:s.ContentType.handshake,data:s.createCertificateVerify(e,t)})),s.queue(e,s.createRecord(e,{type:s.ContentType.change_cipher_spec,data:s.createChangeCipherSpec()})),e.state.pending=s.createConnectionState(e),e.state.current.write=e.state.pending.write,s.queue(e,s.createRecord(e,{type:s.ContentType.handshake,data:s.createFinished(e)})),e.expect=p,s.flush(e),e.process()};return null===t.session.certificateRequest||null===t.session.clientCertificate?c(t,null):void s.getClientSignature(t,c)},s.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.illegal_parameter}});var n=e.entity===s.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=s.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?h:C,e.process()},s.handleFinished=function(n,r,i){var o=r.fragment;o.read-=4;var a=o.bytes();o.read+=4;var c=r.fragment.getBytes();o=e.util.createBuffer(),o.putBuffer(n.session.md5.digest()),o.putBuffer(n.session.sha1.digest());var u=n.entity===s.ConnectionEnd.client,l=u?"server finished":"client finished",f=n.session.sp,d=12,p=t;return o=p(f.master_secret,l,o.getBytes(),d),o.getBytes()!==c?n.error(n,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.decrypt_error}}):(n.session.md5.update(a),n.session.sha1.update(a),(n.session.resuming&&u||!n.session.resuming&&!u)&&(s.queue(n,s.createRecord(n,{type:s.ContentType.change_cipher_spec,data:s.createChangeCipherSpec()})),n.state.current.write=n.state.pending.write,n.state.pending=null,s.queue(n,s.createRecord(n,{type:s.ContentType.handshake,data:s.createFinished(n)}))),n.expect=u?g:_,n.handshaking=!1,++n.handshakes,n.peerCertificate=u?n.session.serverCertificate:n.session.clientCertificate,s.flush(n),n.isConnected=!0,n.connected(n),void n.process())},s.handleAlert=function(e,t){var n,r=t.fragment,i={level:r.getByte(),description:r.getByte()};switch(i.description){case s.Alert.Description.close_notify:n="Connection closed.";break;case s.Alert.Description.unexpected_message:n="Unexpected message.";break;case s.Alert.Description.bad_record_mac:n="Bad record MAC.";break;case s.Alert.Description.decryption_failed:n="Decryption failed.";break;case s.Alert.Description.record_overflow:n="Record overflow.";break;case s.Alert.Description.decompression_failure:n="Decompression failed.";break;case s.Alert.Description.handshake_failure:n="Handshake failure.";break;case s.Alert.Description.bad_certificate:n="Bad certificate.";break;case s.Alert.Description.unsupported_certificate:n="Unsupported certificate.";break;case s.Alert.Description.certificate_revoked:n="Certificate revoked.";break;case s.Alert.Description.certificate_expired:n="Certificate expired.";break;case s.Alert.Description.certificate_unknown:n="Certificate unknown.";break;case s.Alert.Description.illegal_parameter:n="Illegal parameter.";break;case s.Alert.Description.unknown_ca:n="Unknown certificate authority.";break;case s.Alert.Description.access_denied:n="Access denied.";break;case s.Alert.Description.decode_error:n="Decode error.";break;case s.Alert.Description.decrypt_error:n="Decrypt error.";break;case s.Alert.Description.export_restriction:n="Export restriction.";break;case s.Alert.Description.protocol_version:n="Unsupported protocol version.";break;case s.Alert.Description.insufficient_security:n="Insufficient security.";break;case s.Alert.Description.internal_error:n="Internal error.";break;case s.Alert.Description.user_canceled:n="User canceled.";break;case s.Alert.Description.no_renegotiation:n="Renegotiation not supported.";break;default:n="Unknown error."}return i.description===s.Alert.Description.close_notify?e.close():(e.error(e,{message:n,send:!1,origin:e.entity===s.ConnectionEnd.client?"server":"client",alert:i}),void e.process())},s.handleHandshake=function(t,n){var r=n.fragment,i=r.getByte(),o=r.getInt24();if(o>r.length())return t.fragmented=n,n.fragment=e.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var a=r.bytes(o+4);r.read+=4,i in O[t.entity][t.expect]?(t.entity!==s.ConnectionEnd.server||t.open||t.fail||(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:e.md.md5.create(),sha1:e.md.sha1.create()}),i!==s.HandshakeType.hello_request&&i!==s.HandshakeType.certificate_verify&&i!==s.HandshakeType.finished&&(t.session.md5.update(a),t.session.sha1.update(a)),O[t.entity][t.expect][i](t,n,o)):s.handleUnexpected(t,n)},s.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},s.handleHeartbeat=function(t,n){var r=n.fragment,i=r.getByte(),o=r.getInt16(),a=r.getBytes(o);if(i===s.HeartbeatMessageType.heartbeat_request){if(t.handshaking||o>a.length)return t.process();s.queue(t,s.createRecord(t,{type:s.ContentType.heartbeat,data:s.createHeartbeat(s.HeartbeatMessageType.heartbeat_response,a)})),s.flush(t)}else if(i===s.HeartbeatMessageType.heartbeat_response){if(a!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,e.util.createBuffer(a))}t.process()};var c=0,u=1,l=2,f=3,d=4,p=5,h=6,g=7,m=8,v=0,y=1,b=2,w=3,S=4,C=5,_=6,E=s.handleUnexpected,T=s.handleChangeCipherSpec,A=s.handleAlert,I=s.handleHandshake,k=s.handleApplicationData,x=s.handleHeartbeat,B=[];B[s.ConnectionEnd.client]=[[E,A,I,E,x],[E,A,I,E,x],[E,A,I,E,x],[E,A,I,E,x],[E,A,I,E,x],[T,A,E,E,x],[E,A,I,E,x],[E,A,I,k,x],[E,A,I,E,x]],B[s.ConnectionEnd.server]=[[E,A,I,E,x],[E,A,I,E,x],[E,A,I,E,x],[E,A,I,E,x],[T,A,E,E,x],[E,A,I,E,x],[E,A,I,k,x],[E,A,I,E,x]];var N=s.handleHelloRequest,D=s.handleServerHello,R=s.handleCertificate,j=s.handleServerKeyExchange,$=s.handleCertificateRequest,L=s.handleServerHelloDone,M=s.handleFinished,O=[];O[s.ConnectionEnd.client]=[[E,E,D,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[N,E,E,E,E,E,E,E,E,E,E,R,j,$,L,E,E,E,E,E,E],[N,E,E,E,E,E,E,E,E,E,E,E,j,$,L,E,E,E,E,E,E],[N,E,E,E,E,E,E,E,E,E,E,E,E,$,L,E,E,E,E,E,E],[N,E,E,E,E,E,E,E,E,E,E,E,E,E,L,E,E,E,E,E,E],[N,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[N,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,M],[N,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[N,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]];var P=s.handleClientHello,U=s.handleClientKeyExchange,F=s.handleCertificateVerify;O[s.ConnectionEnd.server]=[[E,P,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,R,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,U,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,F,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,M],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]],s.generateKeys=function(e,n){var r=t,i=n.client_random+n.server_random;e.session.resuming||(n.master_secret=r(n.pre_master_secret,"master secret",i,48).bytes(),n.pre_master_secret=null),i=n.server_random+n.client_random;var o=2*n.mac_key_length+2*n.enc_key_length,a=e.version.major===s.Versions.TLS_1_0.major&&e.version.minor===s.Versions.TLS_1_0.minor;a&&(o+=2*n.fixed_iv_length);var c=r(n.master_secret,"key expansion",i,o),u={client_write_MAC_key:c.getBytes(n.mac_key_length),server_write_MAC_key:c.getBytes(n.mac_key_length),client_write_key:c.getBytes(n.enc_key_length),server_write_key:c.getBytes(n.enc_key_length)};return a&&(u.client_write_IV=c.getBytes(n.fixed_iv_length),u.server_write_IV=c.getBytes(n.fixed_iv_length)),u},s.createConnectionState=function(e){var t=e.entity===s.ConnectionEnd.client,n=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},o={read:n(),write:n()};if(o.read.update=function(e,t){return o.read.cipherFunction(t,o.read)?o.read.compressFunction(e,t,o.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.bad_record_mac}}),!e.fail},o.write.update=function(e,t){return o.write.compressFunction(e,t,o.write)?o.write.cipherFunction(t,o.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}}),!e.fail},e.session){var a=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(a),a.keys=s.generateKeys(e,a),o.read.macKey=t?a.keys.server_write_MAC_key:a.keys.client_write_MAC_key,o.write.macKey=t?a.keys.client_write_MAC_key:a.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(o,e,a),a.compression_algorithm){case s.CompressionMethod.none:break;case s.CompressionMethod.deflate:o.read.compressFunction=i,o.write.compressFunction=r;break;default:throw new Error("Unsupported compression algorithm.")}}return o},s.createRandom=function(){var t=new Date,n=+t+6e4*t.getTimezoneOffset(),r=e.util.createBuffer();return r.putInt32(n),r.putBytes(e.random.getBytes(28)),r},s.createRecord=function(e,t){if(!t.data)return null;var n={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return n},s.createAlert=function(t,n){var r=e.util.createBuffer();return r.putByte(n.level),r.putByte(n.description),s.createRecord(t,{type:s.ContentType.alert,data:r})},s.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var n=e.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var i=t.cipherSuites[r];n.putByte(i.id[0]),n.putByte(i.id[1])}var o=n.length(),c=e.util.createBuffer();c.putByte(s.CompressionMethod.none);var u=c.length(),l=e.util.createBuffer();if(t.virtualHost){var f=e.util.createBuffer();f.putByte(0),f.putByte(0);var d=e.util.createBuffer();d.putByte(0),a(d,2,e.util.createBuffer(t.virtualHost));var p=e.util.createBuffer();a(p,2,d),a(f,2,p),l.putBuffer(f)}var h=l.length();h>0&&(h+=2);var g=t.session.id,m=g.length+1+2+4+28+2+o+1+u+h,v=e.util.createBuffer();return v.putByte(s.HandshakeType.client_hello),v.putInt24(m),v.putByte(t.version.major),v.putByte(t.version.minor),v.putBytes(t.session.sp.client_random),a(v,1,e.util.createBuffer(g)),a(v,2,n),a(v,1,c),h>0&&a(v,2,l),v},s.createServerHello=function(t){var n=t.session.id,r=n.length+1+2+4+28+2+1,i=e.util.createBuffer();return i.putByte(s.HandshakeType.server_hello),i.putInt24(r),i.putByte(t.version.major),i.putByte(t.version.minor),i.putBytes(t.session.sp.server_random),a(i,1,e.util.createBuffer(n)),i.putByte(t.session.cipherSuite.id[0]),i.putByte(t.session.cipherSuite.id[1]),i.putByte(t.session.compressionMethod),i},s.createCertificate=function(t){var n=t.entity===s.ConnectionEnd.client,r=null;if(t.getCertificate){var i;i=n?t.session.certificateRequest:t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,i)}var o=e.util.createBuffer();if(null!==r)try{e.util.isArray(r)||(r=[r]);for(var c=null,u=0;u<r.length;++u){var l=e.pem.decode(r[u])[0];if("CERTIFICATE"!==l.type&&"X509 CERTIFICATE"!==l.type&&"TRUSTED CERTIFICATE"!==l.type){var f=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw f.headerType=l.type,f}if(l.procType&&"ENCRYPTED"===l.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var d=e.util.createBuffer(l.body);null===c&&(c=e.asn1.fromDer(d.bytes(),!1));var p=e.util.createBuffer();a(p,3,d),o.putBuffer(p)}r=e.pki.certificateFromAsn1(c),n?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.bad_certificate}})}var g=3+o.length(),m=e.util.createBuffer();return m.putByte(s.HandshakeType.certificate),m.putInt24(g),a(m,3,o),m},s.createClientKeyExchange=function(t){var n=e.util.createBuffer();n.putByte(t.session.clientHelloVersion.major),n.putByte(t.session.clientHelloVersion.minor),n.putBytes(e.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=n.getBytes();var i=t.session.serverCertificate.publicKey;n=i.encrypt(r.pre_master_secret);var o=n.length+2,a=e.util.createBuffer();return a.putByte(s.HandshakeType.client_key_exchange),a.putInt24(o),a.putInt16(n.length),a.putBytes(n),a},s.createServerKeyExchange=function(t){var n=0,r=e.util.createBuffer();return n>0&&(r.putByte(s.HandshakeType.server_key_exchange),r.putInt24(n)),r},s.getClientSignature=function(t,n){var r=e.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(t,n,r){var i=null;if(t.getPrivateKey)try{i=t.getPrivateKey(t,t.session.clientCertificate),i=e.pki.privateKeyFromPem(i)}catch(o){t.error(t,{message:"Could not get private key.",cause:o,send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}})}null===i?t.error(t,{message:"No private key set.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.internal_error}}):n=i.sign(n,null),r(t,n)},t.getSignature(t,r,n)},s.createCertificateVerify=function(t,n){var r=n.length+2,i=e.util.createBuffer();return i.putByte(s.HandshakeType.certificate_verify),i.putInt24(r),i.putInt16(n.length),i.putBytes(n),i},s.createCertificateRequest=function(t){var n=e.util.createBuffer();n.putByte(1);var r=e.util.createBuffer();for(var i in t.caStore.certs){var o=t.caStore.certs[i],c=e.pki.distinguishedNameToAsn1(o.subject);r.putBuffer(e.asn1.toDer(c))}var u=1+n.length()+2+r.length(),l=e.util.createBuffer();return l.putByte(s.HandshakeType.certificate_request),l.putInt24(u),a(l,1,n),a(l,2,r),l},s.createServerHelloDone=function(t){var n=e.util.createBuffer();return n.putByte(s.HandshakeType.server_hello_done),n.putInt24(0),n},s.createChangeCipherSpec=function(){var t=e.util.createBuffer();return t.putByte(1),t},s.createFinished=function(n){var r=e.util.createBuffer();r.putBuffer(n.session.md5.digest()),r.putBuffer(n.session.sha1.digest());var i=n.entity===s.ConnectionEnd.client,o=n.session.sp,a=12,c=t,u=i?"client finished":"server finished";r=c(o.master_secret,u,r.getBytes(),a);var l=e.util.createBuffer();return l.putByte(s.HandshakeType.finished),l.putInt24(r.length()),l.putBuffer(r),l},s.createHeartbeat=function(t,n,r){"undefined"==typeof r&&(r=n.length);var i=e.util.createBuffer();i.putByte(t),i.putInt16(r),i.putBytes(n);var o=i.length(),a=Math.max(16,o-r-3);return i.putBytes(e.random.getBytes(a)),i},s.queue=function(t,n){if(n){if(n.type===s.ContentType.handshake){var r=n.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var i;if(n.fragment.length()<=s.MaxFragment)i=[n];else{i=[];for(var o=n.fragment.bytes();o.length>s.MaxFragment;)i.push(s.createRecord(t,{type:n.type,data:e.util.createBuffer(o.slice(0,s.MaxFragment))})),o=o.slice(s.MaxFragment);o.length>0&&i.push(s.createRecord(t,{type:n.type,data:e.util.createBuffer(o)}))}for(var a=0;a<i.length&&!t.fail;++a){var c=i[a],u=t.state.current.write;u.update(t,c)&&t.records.push(c)}}},s.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var V=function(t){switch(t){case!0:return!0;case e.pki.certificateError.bad_certificate:return s.Alert.Description.bad_certificate;case e.pki.certificateError.unsupported_certificate:return s.Alert.Description.unsupported_certificate;case e.pki.certificateError.certificate_revoked:return s.Alert.Description.certificate_revoked;case e.pki.certificateError.certificate_expired:return s.Alert.Description.certificate_expired;case e.pki.certificateError.certificate_unknown:return s.Alert.Description.certificate_unknown;case e.pki.certificateError.unknown_ca:return s.Alert.Description.unknown_ca;default:return s.Alert.Description.bad_certificate}},z=function(t){switch(t){case!0:return!0;case s.Alert.Description.bad_certificate:return e.pki.certificateError.bad_certificate;case s.Alert.Description.unsupported_certificate:return e.pki.certificateError.unsupported_certificate;case s.Alert.Description.certificate_revoked:return e.pki.certificateError.certificate_revoked;case s.Alert.Description.certificate_expired:return e.pki.certificateError.certificate_expired;case s.Alert.Description.certificate_unknown:return e.pki.certificateError.certificate_unknown;case s.Alert.Description.unknown_ca:return e.pki.certificateError.unknown_ca;default:return e.pki.certificateError.bad_certificate}};s.verifyCertificateChain=function(t,n){try{e.pki.verifyCertificateChain(t.caStore,n,function(n,r,i){var o=(V(n),t.verify(t,n,r,i));if(o!==!0){if("object"==typeof o&&!e.util.isArray(o)){var a=new Error("The application rejected the certificate.");throw a.send=!0,a.alert={level:s.Alert.Level.fatal,description:s.Alert.Description.bad_certificate},o.message&&(a.message=o.message),o.alert&&(a.alert.description=o.alert),a}o!==n&&(o=z(o))}return o})}catch(r){var i=r;("object"!=typeof i||e.util.isArray(i))&&(i={send:!0,alert:{level:s.Alert.Level.fatal,description:V(r)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:s.Alert.Level.fatal,description:V(i.error)}),t.error(t,i)}return!t.fail},s.createSessionCache=function(t,n){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(n||100,1),r.order=[];for(var i in t)r.order.length<=n?r.order.push(i):delete t[i];r.getSession=function(t){var n=null,i=null;if(t?i=e.util.bytesToHex(t):r.order.length>0&&(i=r.order[0]),null!==i&&i in r.cache){n=r.cache[i],delete r.cache[i];for(var o in r.order)if(r.order[o]===i){r.order.splice(o,1);break}}return n},r.setSession=function(t,n){if(r.order.length===r.capacity){var i=r.order.shift();delete r.cache[i]}var i=e.util.bytesToHex(t);r.order.push(i),r.cache[i]=n}}return r},s.createConnection=function(t){var n=null;n=t.caStore?e.util.isArray(t.caStore)?e.pki.createCaStore(t.caStore):t.caStore:e.pki.createCaStore();var r=t.cipherSuites||null;if(null===r){r=[];for(var i in s.CipherSuites)r.push(s.CipherSuites[i])}var o=t.server?s.ConnectionEnd.server:s.ConnectionEnd.client,a=t.sessionCache?s.createSessionCache(t.sessionCache):null,u={version:{major:s.Version.major,minor:s.Version.minor},entity:o,sessionId:t.sessionId,caStore:n,sessionCache:a,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(e,t,n,r){return t},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:e.util.createBuffer(),tlsData:e.util.createBuffer(),data:e.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(e,n){n.origin=n.origin||(e.entity===s.ConnectionEnd.client?"client":"server"),n.send&&(s.queue(e,s.createAlert(e,n.alert)),s.flush(e));var r=n.fatal!==!1;r&&(e.fail=!0),t.error(e,n),r&&e.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};u.reset=function(e){u.version={major:s.Version.major,minor:s.Version.minor},u.record=null,u.session=null,u.peerCertificate=null,u.state={pending:null,current:null},u.expect=u.entity===s.ConnectionEnd.client?c:v,u.fragmented=null,u.records=[],u.open=!1,u.handshakes=0,u.handshaking=!1,u.isConnected=!1,u.fail=!(e||"undefined"==typeof e),u.input.clear(),u.tlsData.clear(),u.data.clear(),u.state.current=s.createConnectionState(u)},u.reset();var l=function(e,t){var n=t.type-s.ContentType.change_cipher_spec,r=B[e.entity][e.expect];n in r?r[n](e,t):s.handleUnexpected(e,t)},f=function(t){var n=0,r=t.input,i=r.length();if(5>i)n=5-i;else{t.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:e.util.createBuffer(),ready:!1};var o=t.record.version.major===t.version.major;o&&t.session&&t.session.version&&(o=t.record.version.minor===t.version.minor),o||t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.protocol_version}})}return n},d=function(e){var t=0,n=e.input,r=n.length();if(r<e.record.length)t=e.record.length-r;else{e.record.fragment.putBytes(n.getBytes(e.record.length)),n.compact();var i=e.state.current.read;i.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:"Invalid fragmented record.",send:!0,alert:{level:s.Alert.Level.fatal,description:s.Alert.Description.unexpected_message}})),e.record.ready=!0)}return t};return u.handshake=function(t){if(u.entity!==s.ConnectionEnd.client)u.error(u,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(u.handshaking)u.error(u,{message:"Handshake already in progress.",fatal:!1});else{u.fail&&!u.open&&0===u.handshakes&&(u.fail=!1),u.handshaking=!0,t=t||"";var n=null;t.length>0&&(u.sessionCache&&(n=u.sessionCache.getSession(t)),null===n&&(t="")),0===t.length&&u.sessionCache&&(n=u.sessionCache.getSession(),null!==n&&(t=n.id)),u.session={id:t,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:e.md.md5.create(),sha1:e.md.sha1.create()},n&&(u.version=n.version,u.session.sp=n.sp),u.session.sp.client_random=s.createRandom().getBytes(),u.open=!0,s.queue(u,s.createRecord(u,{type:s.ContentType.handshake,data:s.createClientHello(u)})),s.flush(u)}},u.process=function(e){var t=0;return e&&u.input.putBytes(e),u.fail||(null!==u.record&&u.record.ready&&u.record.fragment.isEmpty()&&(u.record=null),null===u.record&&(t=f(u)),u.fail||null===u.record||u.record.ready||(t=d(u)),!u.fail&&null!==u.record&&u.record.ready&&l(u,u.record)),t},u.prepare=function(t){return s.queue(u,s.createRecord(u,{type:s.ContentType.application_data,data:e.util.createBuffer(t)})),s.flush(u)},u.prepareHeartbeatRequest=function(t,n){return t instanceof e.util.ByteBuffer&&(t=t.bytes()),"undefined"==typeof n&&(n=t.length),u.expectedHeartbeatPayload=t,s.queue(u,s.createRecord(u,{type:s.ContentType.heartbeat,data:s.createHeartbeat(s.HeartbeatMessageType.heartbeat_request,t,n)})),s.flush(u)},u.close=function(e){if(!u.fail&&u.sessionCache&&u.session){var t={id:u.session.id,version:u.session.version,sp:u.session.sp};t.sp.keys=null,u.sessionCache.setSession(t.id,t)}u.open&&(u.open=!1,u.input.clear(),(u.isConnected||u.handshaking)&&(u.isConnected=u.handshaking=!1,s.queue(u,s.createAlert(u,{level:s.Alert.Level.warning,description:s.Alert.Description.close_notify})),s.flush(u)),u.closed(u)),u.reset(e)},u},e.tls=e.tls||{};for(var q in s)"function"!=typeof s[q]&&(e.tls[q]=s[q]);e.tls.prf_tls1=t,e.tls.hmac_sha1=n,e.tls.createSessionCache=s.createSessionCache,e.tls.createConnection=s.createConnection}var t="tls";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/tls",["require","module","npm:node-forge@0.6.34/js/asn1","npm:node-forge@0.6.34/js/hmac","npm:node-forge@0.6.34/js/md","npm:node-forge@0.6.34/js/pem","npm:node-forge@0.6.34/js/pki","npm:node-forge@0.6.34/js/random","npm:node-forge@0.6.34/js/util"],function(){
i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),System.registerDynamic("github:angular-ui/ui-router@0.2.15/angular-ui-router",["github:angular/bower-angular@1.4.5"],!1,function(e,t,n){var r=System.get("@@global-helpers").prepareGlobal(n.id,null,null);return function(){"format global";"deps angular";"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,n){"use strict";function r(e,t){return P(new(P(function(){},{prototype:e})),t)}function i(e){return O(arguments,function(t){t!==e&&O(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function o(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}function a(e){if(Object.keys)return Object.keys(e);var t=[];return O(e,function(e,n){t.push(n)}),t}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,r=Number(arguments[2])||0;for(r=0>r?Math.ceil(r):Math.floor(r),0>r&&(r+=n);n>r;r++)if(r in e&&e[r]===t)return r;return-1}function c(e,t,n,r){var i,c=o(n,r),u={},l=[];for(var f in c)if(c[f].params&&(i=a(c[f].params),i.length))for(var d in i)s(l,i[d])>=0||(l.push(i[d]),u[i[d]]=e[i[d]]);return P({},u,t)}function u(e,t,n){if(!n){n=[];for(var r in e)n.push(r)}for(var i=0;i<n.length;i++){var o=n[i];if(e[o]!=t[o])return!1}return!0}function l(e,t){var n={};return O(e,function(e){n[e]=t[e]}),n}function f(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return O(n,function(n){n in e&&(t[n]=e[n])}),t}function d(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in e)-1==s(n,r)&&(t[r]=e[r]);return t}function p(e,t){var n=M(e),r=n?[]:{};return O(e,function(e,i){t(e,i)&&(r[n?r.length:i]=e)}),r}function h(e,t){var n=M(e)?[]:{};return O(e,function(e,r){n[r]=t(e,r)}),n}function g(e,t){var r=1,o=2,c={},u=[],l=c,f=P(e.when(c),{$$promises:c,$$values:c});this.study=function(c){function p(e,n){if(y[n]!==o){if(v.push(n),y[n]===r)throw v.splice(0,s(v,n)),new Error("Cyclic dependency: "+v.join(" -> "));if(y[n]=r,$(e))m.push(n,[function(){return t.get(e)}],u);else{var i=t.annotate(e);O(i,function(e){e!==n&&c.hasOwnProperty(e)&&p(c[e],e)}),m.push(n,e,i)}v.pop(),y[n]=o}}function h(e){return L(e)&&e.then&&e.$$promises}if(!L(c))throw new Error("'invocables' must be an object");var g=a(c||{}),m=[],v=[],y={};return O(c,p),c=v=y=null,function(r,o,a){function s(){--w||(S||i(b,o.$$values),v.$$values=b,v.$$promises=v.$$promises||!0,delete v.$$inheritedValues,p.resolve(b))}function c(e){v.$$failure=e,p.reject(e)}function u(n,i,o){function u(e){f.reject(e),c(e)}function l(){if(!R(v.$$failure))try{f.resolve(t.invoke(i,a,b)),f.promise.then(function(e){b[n]=e,s()},u)}catch(e){u(e)}}var f=e.defer(),d=0;O(o,function(e){y.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(d++,y[e].then(function(t){b[e]=t,--d||l()},u))}),d||l(),y[n]=f.promise}if(h(r)&&a===n&&(a=o,o=r,r=null),r){if(!L(r))throw new Error("'locals' must be an object")}else r=l;if(o){if(!h(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=f;var p=e.defer(),v=p.promise,y=v.$$promises={},b=P({},r),w=1+m.length/3,S=!1;if(R(o.$$failure))return c(o.$$failure),v;o.$$inheritedValues&&i(b,d(o.$$inheritedValues,g)),P(y,o.$$promises),o.$$values?(S=i(b,d(o.$$values,g)),v.$$inheritedValues=d(o.$$values,g),s()):(o.$$inheritedValues&&(v.$$inheritedValues=d(o.$$inheritedValues,g)),o.then(s,c));for(var C=0,_=m.length;_>C;C+=3)r.hasOwnProperty(m[C])?s():u(m[C],m[C+1],m[C+2]);return v}},this.resolve=function(e,t,n,r){return this.study(e)(t,n,r)}}function m(e,t,n){this.fromConfig=function(e,t,n){return R(e.template)?this.fromString(e.template,t):R(e.templateUrl)?this.fromUrl(e.templateUrl,t):R(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return j(e)?e(t):e},this.fromUrl=function(n,r){return j(n)&&(n=n(r)),null==n?null:e.get(n,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,r){return n.invoke(e,null,r||{params:t})}}function v(e,t,i){function o(t,n,r,i){if(m.push(t),h[t])return h[t];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(g[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return g[t]=new F.Param(t,n,r,i),g[t]}function a(e,t,n,r){var i=["",""],o=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return o;switch(n){case!1:i=["(",")"+(r?"?":"")];break;case!0:i=["?(",")?"];break;default:i=["("+n+"|",")?"]}return o+i[0]+t+i[1]}function s(i,o){var a,s,c,u,l;return a=i[2]||i[3],l=t.params[a],c=e.substring(d,i.index),s=o?i[4]:i[4]||("*"==i[1]?".*":null),u=F.type(s||"string")||r(F.type("string"),{pattern:new RegExp(s,t.caseInsensitive?"i":n)}),{id:a,regexp:s,segment:c,type:u,cfg:l}}t=P({params:{}},L(t)?t:{});var c,u=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f="^",d=0,p=this.segments=[],h=i?i.params:{},g=this.params=i?i.params.$$new():new F.ParamSet,m=[];this.source=e;for(var v,y,b;(c=u.exec(e))&&(v=s(c,!1),!(v.segment.indexOf("?")>=0));)y=o(v.id,v.type,v.cfg,"path"),f+=a(v.segment,y.type.pattern.source,y.squash,y.isOptional),p.push(v.segment),d=u.lastIndex;b=e.substring(d);var w=b.indexOf("?");if(w>=0){var S=this.sourceSearch=b.substring(w);if(b=b.substring(0,w),this.sourcePath=e.substring(0,d+w),S.length>0)for(d=0;c=l.exec(S);)v=s(c,!0),y=o(v.id,v.type,v.cfg,"search"),d=u.lastIndex}else this.sourcePath=e,this.sourceSearch="";f+=a(b)+(t.strict===!1?"/?":"")+"$",p.push(b),this.regexp=new RegExp(f,t.caseInsensitive?"i":n),this.prefix=p[0],this.$$paramNames=m}function y(e){P(this,e)}function b(){function e(e){return null!=e?e.toString().replace(/\//g,"%2F"):e}function i(e){return null!=e?e.toString().replace(/%2F/g,"/"):e}function o(){return{strict:g,caseInsensitive:d}}function c(e){return j(e)||M(e)&&j(e[e.length-1])}function u(){for(;C.length;){var e=C.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(w[e.name],f.invoke(e.def))}}function l(e){P(this,e||{})}F=this;var f,d=!1,g=!0,m=!1,w={},S=!0,C=[],_={string:{encode:e,decode:i,is:function(e){return null==e||!R(e)||"string"==typeof e},pattern:/[^\/]*/},"int":{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return R(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};b.$$getDefaultValue=function(e){if(!c(e.value))return e.value;if(!f)throw new Error("Injectable functions cannot be called at configuration time");return f.invoke(e.value)},this.caseInsensitive=function(e){return R(e)&&(d=e),d},this.strictMode=function(e){return R(e)&&(g=e),g},this.defaultSquashPolicy=function(e){if(!R(e))return m;if(e!==!0&&e!==!1&&!$(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return m=e,e},this.compile=function(e,t){return new v(e,P(o(),t))},this.isMatcher=function(e){if(!L(e))return!1;var t=!0;return O(v.prototype,function(n,r){j(n)&&(t=t&&R(e[r])&&j(e[r]))}),t},this.type=function(e,t,n){if(!R(t))return w[e];if(w.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return w[e]=new y(P({name:e},t)),n&&(C.push({name:e,def:n}),S||u()),this},O(_,function(e,t){w[t]=new y(P({name:t},e))}),w=r(w,{}),this.$get=["$injector",function(e){return f=e,S=!1,u(),O(_,function(e,t){w[t]||(w[t]=new y(e))}),this}],this.Param=function(e,t,r,i){function o(e){var t=L(e)?a(e):[],n=-1===s(t,"value")&&-1===s(t,"type")&&-1===s(t,"squash")&&-1===s(t,"array");return n&&(e={value:e}),e.$$fn=c(e.value)?e.value:function(){return e.value},e}function u(t,n,r){if(t.type&&n)throw new Error("Param '"+e+"' has two type configurations.");return n?n:t.type?t.type instanceof y?t.type:new y(t.type):"config"===r?w.any:w.string}function l(){var t={array:"search"===i?"auto":!1},n=e.match(/\[\]$/)?{array:!0}:{};return P(t,n,r).array}function d(e,t){var n=e.squash;if(!t||n===!1)return!1;if(!R(n)||null==n)return m;if(n===!0||$(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function g(e,t,r,i){var o,a,c=[{from:"",to:r||t?n:""},{from:null,to:r||t?n:""}];return o=M(e.replace)?e.replace:[],$(i)&&o.push({from:i,to:n}),a=h(o,function(e){return e.from}),p(c,function(e){return-1===s(a,e.from)}).concat(o)}function v(){if(!f)throw new Error("Injectable functions cannot be called at configuration time");var e=f.invoke(r.$$fn);if(null!==e&&e!==n&&!C.type.is(e))throw new Error("Default value ("+e+") for parameter '"+C.id+"' is not an instance of Type ("+C.type.name+")");return e}function b(e){function t(e){return function(t){return t.from===e}}function n(e){var n=h(p(C.replace,t(e)),function(e){return e.to});return n.length?n[0]:e}return e=n(e),R(e)?C.type.$normalize(e):v()}function S(){return"{Param:"+e+" "+t+" squash: '"+T+"' optional: "+E+"}"}var C=this;r=o(r),t=u(r,t,i);var _=l();t=_?t.$asArray(_,"search"===i):t,"string"!==t.name||_||"path"!==i||r.value!==n||(r.value="");var E=r.value!==n,T=d(r,E),A=g(r,_,E,T);P(this,{id:e,type:t,location:i,array:_,squash:T,replace:A,isOptional:E,value:b,dynamic:n,config:r,toString:S})},l.prototype={$$new:function(){return r(this,P(new l,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,r=a(l.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),O(t,function(t){O(a(t),function(t){-1===s(e,t)&&-1===s(r,t)&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return O(n.$$keys(),function(r){t[r]=n[r].value(e&&e[r])}),t},$$equals:function(e,t){var n=!0,r=this;return O(r.$$keys(),function(i){var o=e&&e[i],a=t&&t[i];r[i].type.equals(o,a)||(n=!1)}),n},$$validates:function(e){var r,i,o,a,s,c=this.$$keys();for(r=0;r<c.length&&(i=this[c[r]],o=e[c[r]],o!==n&&null!==o||!i.isOptional);r++){if(a=i.type.$normalize(o),!i.type.is(a))return!1;if(s=i.type.encode(a),t.isString(s)&&!i.type.pattern.exec(s))return!1}return!0},$$parent:n},this.ParamSet=l}function w(e,r){function i(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function o(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}function a(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return R(r)?r:!0}function s(r,i,o,a){function s(e,t,n){return"/"===g?e:t?g.slice(0,-1)+e:n?g.slice(1)+e:e}function d(e){function t(e){var t=e(o,r);return t?($(t)&&r.replace().url(t),!0):!1}if(!e||!e.defaultPrevented){h&&r.url()===h;h=n;var i,a=u.length;for(i=0;a>i;i++)if(t(u[i]))return;l&&t(l)}}function p(){return c=c||i.$on("$locationChangeSuccess",d)}var h,g=a.baseHref(),m=r.url();return f||p(),{sync:function(){d()},listen:function(){return p()},update:function(e){return e?void(m=r.url()):void(r.url()!==m&&(r.url(m),r.replace()))},push:function(e,t,i){var o=e.format(t||{});null!==o&&t&&t["#"]&&(o+="#"+t["#"]),r.url(o),h=i&&i.$$avoidResync?r.url():n,i&&i.replace&&r.replace()},href:function(n,i,o){if(!n.validates(i))return null;var a=e.html5Mode();t.isObject(a)&&(a=a.enabled);var c=n.format(i);if(o=o||{},a||null===c||(c="#"+e.hashPrefix()+c),null!==c&&i&&i["#"]&&(c+="#"+i["#"]),c=s(c,a,o.absolute),!o.absolute||!c)return c;var u=!a&&c?"/":"",l=r.port();return l=80===l||443===l?"":":"+l,[r.protocol(),"://",r.host(),l,u,c].join("")}}}var c,u=[],l=null,f=!1;this.rule=function(e){if(!j(e))throw new Error("'rule' must be a function");return u.push(e),this},this.otherwise=function(e){if($(e)){var t=e;e=function(){return t}}else if(!j(e))throw new Error("'rule' must be a function");return l=e,this},this.when=function(e,t){var n,s=$(t);if($(e)&&(e=r.compile(e)),!s&&!j(t)&&!M(t))throw new Error("invalid 'handler' in when()");var c={matcher:function(e,t){return s&&(n=r.compile(t),t=["$match",function(e){return n.format(e)}]),P(function(n,r){return a(n,t,e.exec(r.path(),r.search()))},{prefix:$(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(n=t,t=["$match",function(e){return o(n,e)}]),P(function(n,r){return a(n,t,e.exec(r.path()))},{prefix:i(e)})}},u={matcher:r.isMatcher(e),regex:e instanceof RegExp};for(var l in u)if(u[l])return this.rule(c[l](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),f=e},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser"]}function S(e,i){function o(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function d(e,t){if(!e)return n;var r=$(e),i=r?e:e.name,a=o(i);if(a){if(!t)throw new Error("No reference point given for path '"+i+"'");t=d(t);for(var s=i.split("."),c=0,u=s.length,l=t;u>c;c++)if(""!==s[c]||0!==c){if("^"!==s[c])break;if(!l.parent)throw new Error("Path '"+i+"' not valid for state '"+t.name+"'");l=l.parent}else l=t;s=s.slice(c).join("."),i=l.name+(l.name&&s?".":"")+s}var f=T[i];return!f||!r&&(r||f!==e&&f.self!==e)?n:f}function p(e,t){A[e]||(A[e]=[]),A[e].push(t)}function g(e){for(var t=A[e]||[];t.length;)m(t.shift())}function m(t){t=r(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!$(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(T.hasOwnProperty(n))throw new Error("State '"+n+"'' is already defined");var i=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):$(t.parent)?t.parent:L(t.parent)&&$(t.parent.name)?t.parent.name:"";if(i&&!T[i])return p(i,t.self);for(var o in k)j(k[o])&&(t[o]=k[o](t,k.$delegates[o]));return T[n]=t,!t[I]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){E.$current.navigable==t&&u(e,n)||E.transitionTo(t,e,{inherit:!0,location:!1})}]),g(n),t}function v(e){return e.indexOf("*")>-1}function y(e){for(var t=e.split("."),n=E.$current.name.split("."),r=0,i=t.length;i>r;r++)"*"===t[r]&&(n[r]="*");return"**"===t[0]&&(n=n.slice(s(n,t[1])),n.unshift("**")),"**"===t[t.length-1]&&(n.splice(s(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length!=n.length?!1:n.join("")===t.join("")}function b(e,t){return $(e)&&!R(t)?k[e]:j(t)&&$(e)?(k[e]&&!k.$delegates[e]&&(k.$delegates[e]=k[e]),k[e]=t,this):this}function w(e,t){return L(e)?t=e:t.name=e,m(t),this}function S(e,i,o,s,f,p,g,m,b){function w(t,n,r,o){var a=e.$broadcast("$stateNotFound",t,n,r);if(a.defaultPrevented)return g.update(),x;if(!a.retry)return null;if(o.$retry)return g.update(),B;var s=E.transition=i.when(a.retry);return s.then(function(){return s!==E.transition?A:(t.options.$retry=!0,E.transitionTo(t.to,t.toParams,t.options))},function(){return x}),g.update(),s}function S(e,n,r,a,c,u){function d(){var n=[];return O(e.views,function(r,i){var a=r.resolve&&r.resolve!==e.resolve?r.resolve:{};a.$template=[function(){return o.load(i,{view:r,locals:c.globals,params:p,notify:u.notify})||""}],n.push(f.resolve(a,c.globals,c.resolve,e).then(function(n){if(j(r.controllerProvider)||M(r.controllerProvider)){var o=t.extend({},a,c.globals);n.$$controller=s.invoke(r.controllerProvider,null,o)}else n.$$controller=r.controller;n.$$state=e,n.$$controllerAs=r.controllerAs,c[i]=n}))}),i.all(n).then(function(){return c.globals})}var p=r?n:l(e.params.$$keys(),n),h={$stateParams:p};c.resolve=f.resolve(e.resolve,h,c.resolve,e);var g=[c.resolve.then(function(e){c.globals=e})];return a&&g.push(a),i.all(g).then(d).then(function(e){return c})}var A=i.reject(new Error("transition superseded")),k=i.reject(new Error("transition prevented")),x=i.reject(new Error("transition aborted")),B=i.reject(new Error("transition failed"));return _.locals={resolve:null,globals:{$stateParams:{}}},E={params:{},current:_.self,$current:_,transition:null},E.reload=function(e){return E.transitionTo(E.current,p,{reload:e||!0,inherit:!1,notify:!0})},E.go=function(e,t,n){return E.transitionTo(e,t,P({inherit:!0,relative:E.$current},n))},E.transitionTo=function(t,n,o){n=n||{},o=P({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var a,u=E.$current,f=E.params,h=u.path,m=d(t,o.relative),v=n["#"];if(!R(m)){var y={to:t,toParams:n,options:o},b=w(y,u.self,f,o);if(b)return b;if(t=y.to,n=y.toParams,o=y.options,m=d(t,o.relative),!R(m)){if(!o.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'")}}if(m[I])throw new Error("Cannot transition to abstract state '"+t+"'");if(o.inherit&&(n=c(p,n||{},E.$current,m)),!m.params.$$validates(n))return B;n=m.params.$$values(n),t=m;var T=t.path,x=0,N=T[x],D=_.locals,j=[];if(o.reload){if($(o.reload)||L(o.reload)){if(L(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var M=o.reload===!0?h[0]:d(o.reload);if(o.reload&&!M)throw new Error("No such reload state '"+($(o.reload)?o.reload:o.reload.name)+"'");for(;N&&N===h[x]&&N!==M;)D=j[x]=N.locals,x++,N=T[x]}}else for(;N&&N===h[x]&&N.ownParams.$$equals(n,f);)D=j[x]=N.locals,x++,N=T[x];if(C(t,n,u,f,D,o))return v&&(n["#"]=v),E.params=n,U(E.params,p),o.location&&t.navigable&&t.navigable.url&&(g.push(t.navigable.url,n,{$$avoidResync:!0,replace:"replace"===o.location}),g.update(!0)),E.transition=null,i.when(E.current);if(n=l(t.params.$$keys(),n||{}),o.notify&&e.$broadcast("$stateChangeStart",t.self,n,u.self,f).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,n,u.self,f),g.update(),k;for(var O=i.when(D),F=x;F<T.length;F++,N=T[F])D=j[F]=r(D),O=S(N,n,N===t,O,D,o);var V=E.transition=O.then(function(){var r,i,a;if(E.transition!==V)return A;for(r=h.length-1;r>=x;r--)a=h[r],a.self.onExit&&s.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(r=x;r<T.length;r++)i=T[r],i.locals=j[r],i.self.onEnter&&s.invoke(i.self.onEnter,i.self,i.locals.globals);return v&&(n["#"]=v),E.transition!==V?A:(E.$current=t,E.current=t.self,E.params=n,U(E.params,p),E.transition=null,o.location&&t.navigable&&g.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&e.$broadcast("$stateChangeSuccess",t.self,n,u.self,f),g.update(!0),E.current)},function(r){return E.transition!==V?A:(E.transition=null,a=e.$broadcast("$stateChangeError",t.self,n,u.self,f,r),a.defaultPrevented||g.update(),i.reject(r))});return V},E.is=function(e,t,r){r=P({relative:E.$current},r||{});var i=d(e,r.relative);return R(i)?E.$current!==i?!1:t?u(i.params.$$values(t),p):!0:n},E.includes=function(e,t,r){if(r=P({relative:E.$current},r||{}),$(e)&&v(e)){if(!y(e))return!1;e=E.$current.name}var i=d(e,r.relative);return R(i)?R(E.$current.includes[i.name])?t?u(i.params.$$values(t),p,a(t)):!0:!1:n},E.href=function(e,t,r){r=P({lossy:!0,inherit:!0,absolute:!1,relative:E.$current},r||{});var i=d(e,r.relative);if(!R(i))return null;r.inherit&&(t=c(p,t||{},E.$current,i));var o=i&&r.lossy?i.navigable:i;return o&&o.url!==n&&null!==o.url?g.href(o.url,l(i.params.$$keys().concat("#"),t||{}),{absolute:r.absolute}):null},E.get=function(e,t){if(0===arguments.length)return h(a(T),function(e){return T[e].self});var n=d(e,t||E.$current);return n&&n.self?n.self:null},E}function C(e,t,n,r,i,o){function a(e,t,n){function r(t){return"search"!=e.params[t].location}var i=e.params.$$keys().filter(r),o=f.apply({},[e.params].concat(i)),a=new F.ParamSet(o);return a.$$equals(t,n)}return!o.reload&&e===n&&(i===n.locals||e.self.reloadOnSearch===!1&&a(n,r,t))?!0:void 0}var _,E,T={},A={},I="abstract",k={parent:function(e){if(R(e.parent)&&e.parent)return d(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?d(t[1]):_},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=P({},e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if($(t))return"^"==t.charAt(0)?i.compile(t.substring(1),n):(e.parent.navigable||_).url.concat(t,n);if(!t||i.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new F.ParamSet;return O(e.params||{},function(e,n){t[n]||(t[n]=new F.Param(n,null,e,"config"))}),t},params:function(e){return e.parent&&e.parent.params?P(e.parent.params.$$new(),e.ownParams):new F.ParamSet},views:function(e){var t={};return O(R(e.views)?e.views:{"":e},function(n,r){r.indexOf("@")<0&&(r+="@"+e.parent.name),t[r]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?P({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};_=m({name:"",url:"^",views:null,"abstract":!0}),_.navigable=null,this.decorator=b,this.state=w,this.$get=S,S.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function C(){function e(e,t){return{load:function(n,r){var i,o={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return r=P(o,r),r.view&&(i=t.fromConfig(r.view,r.params,r.locals)),i&&r.notify&&e.$broadcast("$viewContentLoading",r),i}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function _(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){return n(function(){e[0].scrollIntoView()},0,!1)}}]}function E(e,n,r,i){function o(){return n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(t){return null}}}function a(e,t){var n=function(){return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}};if(u)return{enter:function(e,t,n){var r=u.enter(e,null,t,n);r&&r.then&&r.then(n)},leave:function(e,t){var n=u.leave(e,t);n&&n.then&&n.then(t)}};if(c){var r=c&&c(t,e);return{enter:function(e,t,n){r.enter(e,null,t),n()},leave:function(e,t){r.leave(e),t()}}}return n()}var s=o(),c=s("$animator"),u=s("$animate"),l={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,o,s){return function(n,o,c){function u(){f&&(f.remove(),f=null),p&&(p.$destroy(),p=null),d&&(v.leave(d,function(){f=null}),f=d,d=null)}function l(a){var l,f=A(n,c,o,i),y=f&&e.$current&&e.$current.locals[f];if(a||y!==h){l=n.$new(),h=e.$current.locals[f];var b=s(l,function(e){v.enter(e,o,function(){p&&p.$emit("$viewContentAnimationEnded"),(t.isDefined(m)&&!m||n.$eval(m))&&r(e)}),u()});d=b,p=l,p.$emit("$viewContentLoaded"),p.$eval(g)}}var f,d,p,h,g=c.onload||"",m=c.autoscroll,v=a(c,n);n.$on("$stateChangeSuccess",function(){l(!1)}),n.$on("$viewContentLoading",function(){l(!1)}),l(!0)}}};return l}function T(e,t,n,r){return{restrict:"ECA",priority:-400,compile:function(i){var o=i.html();return function(i,a,s){var c=n.$current,u=A(i,s,a,r),l=c&&c.locals[u];if(l){a.data("$uiView",{name:u,state:l.$$state}),a.html(l.$template?l.$template:o);var f=e(a.contents());if(l.$$controller){l.$scope=i,l.$element=a;var d=t(l.$$controller,l);l.$$controllerAs&&(i[l.$$controllerAs]=d),a.data("$ngControllerController",d),a.children().data("$ngControllerController",d)}f(i)}}}}}function A(e,t,n,r){var i=r(t.uiView||t.name||"")(e),o=n.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(o?o.state.name:"")}function I(e,t){var n,r=e.match(/^\s*({[^}]*})\s*$/);if(r&&(e=t+"("+r[1]+")"),n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function k(e){var t=e.parent().inheritedData("$uiView");return t&&t.state&&t.state.name?t.state:void 0}function x(e,n){var r=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,a,s){var c=I(a.uiSref,e.current.name),u=null,l=k(o)||e.$current,f="[object SVGAnimatedString]"===Object.prototype.toString.call(o.prop("href"))?"xlink:href":"href",d=null,p="A"===o.prop("tagName").toUpperCase(),h="FORM"===o[0].nodeName,g=h?"action":f,m=!0,v={relative:l,inherit:!0},y=i.$eval(a.uiSrefOpts)||{};t.forEach(r,function(e){e in y&&(v[e]=y[e])});var b=function(n){if(n&&(u=t.copy(n)),m){d=e.href(c.state,u,v);var r=s[1]||s[0];return r&&r.$$addStateInfo(c.state,u),null===d?(m=!1,!1):void a.$set(g,d)}};c.paramExpr&&(i.$watch(c.paramExpr,function(e,t){e!==u&&b(e)},!0),u=t.copy(i.$eval(c.paramExpr))),b(),h||o.bind("click",function(t){var r=t.which||t.button;if(!(r>1||t.ctrlKey||t.metaKey||t.shiftKey||o.attr("target"))){var i=n(function(){e.go(c.state,u,v)});t.preventDefault();var a=p&&!d?1:0;t.preventDefault=function(){a--<=0&&n.cancel(i)}}})}}}function B(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,r,i){function o(){a()?r.addClass(c):r.removeClass(c)}function a(){for(var e=0;e<u.length;e++)if(s(u[e].state,u[e].params))return!0;return!1}function s(t,n){return"undefined"!=typeof i.uiSrefActiveEq?e.is(t.name,n):e.includes(t.name,n)}var c,u=[];c=n(i.uiSrefActiveEq||i.uiSrefActive||"",!1)(t),this.$$addStateInfo=function(t,n){var i=e.get(t,k(r));u.push({state:i||{name:t},params:n}),o()},t.$on("$stateChangeSuccess",o)}]}}function N(e){var t=function(t){return e.is(t)};return t.$stateful=!0,t}function D(e){var t=function(t){return e.includes(t)};return t.$stateful=!0,t}var R=t.isDefined,j=t.isFunction,$=t.isString,L=t.isObject,M=t.isArray,O=t.forEach,P=t.extend,U=t.copy;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),g.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",g),m.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",m);var F;v.prototype.concat=function(e,t){var n={caseInsensitive:F.caseInsensitive(),strict:F.strictMode(),squash:F.defaultSquashPolicy()};return new v(this.sourcePath+e+this.sourceSearch,P(n,t),this)},v.prototype.toString=function(){return this.source},v.prototype.exec=function(e,t){function n(e){function t(e){return e.split("").reverse().join("")}function n(e){return e.replace(/\\-/g,"-")}var r=t(e).split(/-(?!\\)/),i=h(r,t);return h(i,n).reverse()}var r=this.regexp.exec(e);if(!r)return null;t=t||{};var i,o,a,s=this.parameters(),c=s.length,u=this.segments.length-1,l={};if(u!==r.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;u>i;i++){a=s[i];var f=this.params[a],d=r[i+1];for(o=0;o<f.replace;o++)f.replace[o].from===d&&(d=f.replace[o].to);d&&f.array===!0&&(d=n(d)),l[a]=f.value(d)}for(;c>i;i++)a=s[i],l[a]=this.params[a].value(t[a]);return l},v.prototype.parameters=function(e){return R(e)?this.params[e]||null:this.$$paramNames},v.prototype.validates=function(e){return this.params.$$validates(e)},v.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var n=this.segments,r=this.parameters(),i=this.params;if(!this.validates(e))return null;var o,a=!1,s=n.length-1,c=r.length,u=n[0];for(o=0;c>o;o++){var l=s>o,f=r[o],d=i[f],p=d.value(e[f]),g=d.isOptional&&d.type.equals(d.value(),p),m=g?d.squash:!1,v=d.type.encode(p);if(l){var y=n[o+1];if(m===!1)null!=v&&(u+=M(v)?h(v,t).join("-"):encodeURIComponent(v)),u+=y;else if(m===!0){var b=u.match(/\/$/)?/\/?(.*)/:/(.*)/;u+=y.match(b)[1]}else $(m)&&(u+=m+y)}else{if(null==v||g&&m!==!1)continue;M(v)||(v=[v]),v=h(v,encodeURIComponent).join("&"+f+"="),u+=(a?"&":"?")+(f+"="+v),a=!0}}return u},y.prototype.is=function(e,t){return!0},y.prototype.encode=function(e,t){return e},y.prototype.decode=function(e,t){return e},y.prototype.equals=function(e,t){return e==t},y.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},y.prototype.pattern=/.*/,y.prototype.toString=function(){return"{Type:"+this.name+"}"},y.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},y.prototype.$asArray=function(e,t){function r(e,t){function r(e,t){return function(){return e[t].apply(e,arguments)}}function i(e){return M(e)?e:R(e)?[e]:[]}function o(e){switch(e.length){case 0:return n;case 1:return"auto"===t?e[0]:e;default:return e}}function a(e){return!e}function s(e,t){return function(n){n=i(n);var r=h(n,e);return t===!0?0===p(r,a).length:o(r)}}function c(e){return function(t,n){var r=i(t),o=i(n);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!e(r[a],o[a]))return!1;return!0}}this.encode=s(r(e,"encode")),this.decode=s(r(e,"decode")),this.is=s(r(e,"is"),!0),this.equals=c(r(e,"equals")),this.pattern=e.pattern,this.$normalize=s(r(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new r(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",b),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),w.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",w),S.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").value("$stateParams",{}).provider("$state",S),C.$inject=[],t.module("ui.router.state").provider("$view",C),t.module("ui.router.state").provider("$uiViewScroll",_),E.$inject=["$state","$injector","$uiViewScroll","$interpolate"],T.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",E),t.module("ui.router.state").directive("uiView",T),x.$inject=["$state","$timeout"],B.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",x).directive("uiSrefActive",B).directive("uiSrefActiveEq",B),N.$inject=["$state"],D.$inject=["$state"],t.module("ui.router.state").filter("isState",N).filter("includedByState",D)}(window,window.angular)}(),r()}),System.registerDynamic("github:angular/bower-angular-sanitize@1.4.5/angular-sanitize",["github:angular/bower-angular@1.4.5"],!1,function(e,t,n){var r=System.get("@@global-helpers").prepareGlobal(n.id,null,null);return function(){"format global";"deps angular";!function(e,t,n){"use strict";function r(){this.$get=["$$sanitizeUri",function(e){return function(t){var n=[];return a(t,u(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function i(e){var n=[],r=u(n,t.noop);return r.chars(e),n.join("")}function o(e,n){var r,i={},o=e.split(",");for(r=0;r<o.length;r++)i[n?t.lowercase(o[r]):o[r]]=!0;return i}function a(e,n){function r(e,r,o,a){if(r=t.lowercase(r),T[r])for(;b.last()&&A[b.last()];)i("",b.last());E[r]&&b.last()==r&&i("",r),a=S[r]||!!a,a||b.push(r);var c={};o.replace(p,function(e,t,n,r,i){var o=n||r||i||"";c[t]=s(o)}),n.start&&n.start(r,c,a)}function i(e,r){var i,o=0;if(r=t.lowercase(r))for(o=b.length-1;o>=0&&b[o]!=r;o--);if(o>=0){for(i=b.length-1;i>=o;i--)n.end&&n.end(b[i]);b.length=o}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var o,a,c,u,b=[],w=e;for(b.last=function(){return b[b.length-1]};e;){if(u="",a=!0,b.last()&&k[b.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+b.last()+"[^>]*>","i"),function(e,t){return t=t.replace(m,"$1").replace(y,"$1"),n.chars&&n.chars(s(t)),""}),i("",b.last())):(0===e.indexOf("<!--")?(o=e.indexOf("--",4),
o>=0&&e.lastIndexOf("-->",o)===o&&(n.comment&&n.comment(e.substring(4,o)),e=e.substring(o+3),a=!1)):v.test(e)?(c=e.match(v),c&&(e=e.replace(c[0],""),a=!1)):g.test(e)?(c=e.match(d),c&&(e=e.substring(c[0].length),c[0].replace(d,i),a=!1)):h.test(e)&&(c=e.match(f),c?(c[4]&&(e=e.substring(c[0].length),c[0].replace(f,r)),a=!1):(u+="<",e=e.substring(1))),a&&(o=e.indexOf("<"),u+=0>o?e:e.substring(0,o),e=0>o?"":e.substring(o),n.chars&&n.chars(s(u)))),e==w)throw l("badparse","The sanitizer was unable to parse the following block of html: {0}",e);w=e}i()}function s(e){return e?(j.innerHTML=e.replace(/</g,"&lt;"),j.textContent):""}function c(e){return e.replace(/&/g,"&amp;").replace(b,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(w,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e,n){var r=!1,i=t.bind(e,e.push);return{start:function(e,o,a){e=t.lowercase(e),!r&&k[e]&&(r=e),r||x[e]!==!0||(i("<"),i(e),t.forEach(o,function(r,o){var a=t.lowercase(o),s="img"===e&&"src"===a||"background"===a;R[a]!==!0||B[a]===!0&&!n(r,s)||(i(" "),i(o),i('="'),i(c(r)),i('"'))}),i(a?"/>":">"))},end:function(e){e=t.lowercase(e),r||x[e]!==!0||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(c(e))}}}var l=t.$$minErr("$sanitize"),f=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,d=/^<\/\s*([\w:-]+)[^>]*>/,p=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,h=/^</,g=/^<\//,m=/<!--(.*?)-->/g,v=/<!DOCTYPE([^>]*?)>/i,y=/<!\[CDATA\[(.*?)]]>/g,b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w=/([^\#-~| |!])/g,S=o("area,br,col,hr,img,wbr"),C=o("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_=o("rp,rt"),E=t.extend({},_,C),T=t.extend({},C,o("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),A=t.extend({},_,o("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),I=o("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use"),k=o("script,style"),x=t.extend({},S,T,A,E,I),B=o("background,cite,href,longdesc,src,usemap,xlink:href"),N=o("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),D=o("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),R=t.extend({},B,D,N),j=document.createElement("pre");t.module("ngSanitize",[]).provider("$sanitize",r),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i;return function(o,a){function s(e){e&&p.push(i(e))}function c(e,n){p.push("<a "),t.isDefined(a)&&p.push('target="',a,'" '),p.push('href="',e.replace(/"/g,"&quot;"),'">'),s(n),p.push("</a>")}if(!o)return o;for(var u,l,f,d=o,p=[];u=d.match(n);)l=u[0],u[2]||u[4]||(l=(u[3]?"http://":"mailto:")+l),f=u.index,s(d.substr(0,f)),c(l,u[0].replace(r,"")),d=d.substring(f+u[0].length);return s(d),e(p.join(""))}}])}(window,window.angular)}(),r()}),System.registerDynamic("github:angular/bower-angular-animate@1.4.5/angular-animate",["github:angular/bower-angular@1.4.5"],!1,function(e,t,n){var r=System.get("@@global-helpers").prepareGlobal(n.id,null,null);return function(){"format global";"deps angular";!function(e,t,n){"use strict";function r(e,t,n){if(!e)throw ngMinErr("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function i(e,t){return e||t?e?t?(V(e)&&(e=e.join(" ")),V(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function o(e){var t={};return e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from),t}function a(e,t,n){var r="";return e=V(e)?e:e&&z(e)&&e.length?e.split(/\s+/):[],F(e,function(e,i){e&&e.length>0&&(r+=i>0?" ":"",r+=n?t+e:e+t)}),r}function s(e,t){var n=e.indexOf(t);t>=0&&e.splice(n,1)}function c(e){if(e instanceof U)switch(e.length){case 0:return[];case 1:if(e[0].nodeType===Y)return e;break;default:return U(u(e))}return e.nodeType===Y?U(e):void 0}function u(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType==Y)return n}}function l(e,t,n){F(t,function(t){e.addClass(t,n)})}function f(e,t,n){F(t,function(t){e.removeClass(t,n)})}function d(e){return function(t,n){n.addClass&&(l(e,t,n.addClass),n.addClass=null),n.removeClass&&(f(e,t,n.removeClass),n.removeClass=null)}}function p(e){if(e=e||{},!e.$$prepared){var t=e.domOperation||O;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=O},e.$$prepared=!0}return e}function h(e,t){g(e,t),m(e,t)}function g(e,t){t.from&&(e.css(t.from),t.from=null)}function m(e,t){t.to&&(e.css(t.to),t.to=null)}function v(e,t,n){var r=(t.addClass||"")+" "+(n.addClass||""),i=(t.removeClass||"")+" "+(n.removeClass||""),o=y(e.attr("class"),r,i);n.preparationClasses&&(t.preparationClasses=T(n.preparationClasses,t.preparationClasses),delete n.preparationClasses);var a=t.domOperation!==O?t.domOperation:null;return P(t,n),a&&(t.domOperation=a),o.addClass?t.addClass=o.addClass:t.addClass=null,o.removeClass?t.removeClass=o.removeClass:t.removeClass=null,t}function y(e,t,n){function r(e){z(e)&&(e=e.split(" "));var t={};return F(e,function(e){e.length&&(t[e]=!0)}),t}var i=1,o=-1,a={};e=r(e),t=r(t),F(t,function(e,t){a[t]=i}),n=r(n),F(n,function(e,t){a[t]=a[t]===i?null:o});var s={addClass:"",removeClass:""};return F(a,function(t,n){var r,a;t===i?(r="addClass",a=!e[n]):t===o&&(r="removeClass",a=e[n]),a&&(s[r].length&&(s[r]+=" "),s[r]+=n)}),s}function b(e){return e instanceof t.element?e[0]:e}function w(e,t,n){var r="";t&&(r=a(t,Q,!0)),n.addClass&&(r=T(r,a(n.addClass,X))),n.removeClass&&(r=T(r,a(n.removeClass,Z))),r.length&&(n.preparationClasses=r,e.addClass(r))}function S(e,t){t.preparationClasses&&(e.removeClass(t.preparationClasses),t.preparationClasses=null),t.activeClasses&&(e.removeClass(t.activeClasses),t.activeClasses=null)}function C(e,t){var n=t?"-"+t+"s":"";return E(e,[de,n]),[de,n]}function _(e,t){var n=t?"paused":"",r=L+ce;return E(e,[r,n]),[r,n]}function E(e,t){var n=t[0],r=t[1];e.style[n]=r}function T(e,t){return e?t?e+" "+t:e:t}function A(){this.$get=["$document",function(e){return U(e[0].body)}]}function I(e){return[fe,e+"s"]}function k(e,t){var n=t?le:de;return[n,e+"s"]}function x(e,t,n){var r=Object.create(null),i=e.getComputedStyle(t)||{};return F(n,function(e,t){var n=i[e];if(n){var o=n.charAt(0);("-"===o||"+"===o||o>=0)&&(n=B(n)),0===n&&(n=null),r[t]=n}}),r}function B(e){var t=0,n=e.split(/\s*,\s*/);return F(n,function(e){"s"==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function N(e){return 0===e||null!=e}function D(e,t){var n=j,r=e+"s";return t?n+=re:r+=" linear all",[n,r]}function R(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){var n=e[t];return n?n.total:0},get:function(t){var n=e[t];return n&&n.value},put:function(t,n){e[t]?e[t].total++:e[t]={total:1,value:n}}}}var j,$,L,M,O=t.noop,P=t.extend,U=t.element,F=t.forEach,V=t.isArray,z=t.isString,q=t.isObject,H=t.isUndefined,G=t.isDefined,K=t.isFunction,W=t.isElement,Y=1,X="-add",Z="-remove",Q="ng-",J="-active",ee="ng-animate",te="$$ngAnimateChildren",ne="";e.ontransitionend===n&&e.onwebkittransitionend!==n?(ne="-webkit-",j="WebkitTransition",$="webkitTransitionEnd transitionend"):(j="transition",$="transitionend"),e.onanimationend===n&&e.onwebkitanimationend!==n?(ne="-webkit-",L="WebkitAnimation",M="webkitAnimationEnd animationend"):(L="animation",M="animationend");var re="Duration",ie="Property",oe="Delay",ae="TimingFunction",se="IterationCount",ce="PlayState",ue=9999,le=L+oe,fe=L+re,de=j+oe,pe=j+re,he=["$$rAF",function(e){function t(e){r=r.concat(e),n()}function n(){if(r.length){for(var t=r.shift(),o=0;o<t.length;o++)t[o]();i||e(function(){i||n()})}}var r,i;return r=t.queue=[],t.waitUntilQuiet=function(t){i&&i(),i=e(function(){i=null,t(),n()})},t}],ge=[function(){return function(e,n,r){var i=r.ngAnimateChildren;t.isString(i)&&0===i.length?n.data(te,!0):r.$observe("ngAnimateChildren",function(e){e="on"===e||"true"===e,n.data(te,e)})}}],me="$$animateCss",ve=1e3,ye=3,be=1.5,we={transitionDuration:pe,transitionDelay:de,transitionProperty:j+ie,animationDuration:fe,animationDelay:le,animationIterationCount:L+se},Se={transitionDuration:pe,transitionDelay:de,animationDuration:fe,animationDelay:le},Ce=["$animateProvider",function(e){var t=R(),n=R();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$animate",function(e,r,i,c,u,l,f,v){function y(e,t){var n="$$ngAnimateParentKey",r=e.parentNode,i=r[n]||(r[n]=++R);return i+"-"+e.getAttribute("class")+"-"+t}function w(n,r,i,o){var a=t.get(i);return a||(a=x(e,n,o),"infinite"===a.animationIterationCount&&(a.animationIterationCount=1)),t.put(i,a),a}function S(i,o,s,c){var u;if(t.count(s)>0&&(u=n.get(s),!u)){var l=a(o,"-stagger");r.addClass(i,l),u=x(e,i,c),u.animationDuration=Math.max(u.animationDuration,0),u.transitionDuration=Math.max(u.transitionDuration,0),r.removeClass(i,l),n.put(s,u)}return u||{}}function T(e){P.push(e),f.waitUntilQuiet(function(){t.flush(),n.flush();for(var e=u(),r=0;r<P.length;r++)P[r](e);P.length=0})}function A(e,t,n){var r=w(e,t,n,we),i=r.animationDelay,o=r.transitionDelay;return r.maxDelay=i&&o?Math.max(i,o):i||o,r.maxDuration=Math.max(r.animationDuration*r.animationIterationCount,r.transitionDuration),r}var B=d(r),R=0,P=[];return function(e,n){function u(){d()}function f(){d(!0)}function d(t){U||q&&z||(U=!0,z=!1,n.$$skipPreparationClasses||r.removeClass(e,fe),r.removeClass(e,pe),_(P,!1),C(P,!1),F(te,function(e){P.style[e[0]]=""}),B(e,n),h(e,n),n.onDone&&n.onDone(),H&&H.complete(!t))}function w(e){De.blockTransition&&C(P,e),De.blockKeyframeAnimation&&_(P,!!e)}function x(){return H=new i({end:u,cancel:f}),T(O),d(),{$$willAnimate:!1,start:function(){return H},end:u}}function R(){function t(){if(!U){if(w(!1),F(te,function(e){var t=e[0],n=e[1];P.style[t]=n}),B(e,n),r.addClass(e,pe),De.recalculateTimingStyles){if(de=P.className+" "+fe,we=y(P,de),Be=A(P,de,we),Ne=Be.maxDelay,K=Math.max(Ne,0),Y=Be.maxDuration,0===Y)return void d();De.hasTransitions=Be.transitionDuration>0,De.hasAnimations=Be.animationDuration>0}if(De.applyAnimationDelay&&(Ne="boolean"!=typeof n.delay&&N(n.delay)?parseFloat(n.delay):Ne,K=Math.max(Ne,0),Be.animationDelay=Ne,Re=k(Ne,!0),te.push(Re),P.style[Re[0]]=Re[1]),W=K*ve,ee=Y*ve,n.easing){var t,s=n.easing;De.hasTransitions&&(t=j+ae,te.push([t,s]),P.style[t]=s),De.hasAnimations&&(t=L+ae,te.push([t,s]),P.style[t]=s)}Be.transitionDuration&&u.push($),Be.animationDuration&&u.push(M),a=Date.now();var l=W+be*ee,f=a+l,p=e.data(me)||[],h=!0;if(p.length){var g=p[0];h=f>g.expectedEndTime,h?c.cancel(g.timer):p.push(d)}if(h){var v=c(i,l,!1);p[0]={timer:v,expectedEndTime:f},p.push(d),e.data(me,p)}e.on(u.join(" "),o),m(e,n)}}function i(){var t=e.data(me);if(t){for(var n=1;n<t.length;n++)t[n]();e.removeData(me)}}function o(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||t.timeStamp||Date.now(),r=parseFloat(t.elapsedTime.toFixed(ye));Math.max(n-a,0)>=W&&r>=Y&&(q=!0,d())}if(!U){if(!P.parentNode)return void d();var a,u=[],l=function(e){if(q)z&&e&&(z=!1,d());else if(z=!e,Be.animationDuration){var t=_(P,z);z?te.push(t):s(te,t)}},f=ke>0&&(Be.transitionDuration&&0===Ce.transitionDuration||Be.animationDuration&&0===Ce.animationDuration)&&Math.max(Ce.animationDelay,Ce.transitionDelay);f?c(t,Math.floor(f*ke*ve),!1):t(),G.resume=function(){l(!0)},G.pause=function(){l(!1)}}}var P=b(e);if(!P||!P.parentNode||!v.enabled())return x();n=p(n);var U,z,q,H,G,K,W,Y,ee,te=[],ne=e.attr("class"),re=o(n);if(0===n.duration||!l.animations&&!l.transitions)return x();var oe=n.event&&V(n.event)?n.event.join(" "):n.event,se=oe&&n.structural,ce="",le="";se?ce=a(oe,Q,!0):oe&&(ce=oe),n.addClass&&(le+=a(n.addClass,X)),n.removeClass&&(le.length&&(le+=" "),le+=a(n.removeClass,Z)),n.applyClassesEarly&&le.length&&B(e,n);var fe=[ce,le].join(" ").trim(),de=ne+" "+fe,pe=a(fe,J),he=re.to&&Object.keys(re.to).length>0,ge=(n.keyframeStyle||"").length>0;if(!ge&&!he&&!fe)return x();var we,Ce;if(n.stagger>0){var _e=parseFloat(n.stagger);Ce={transitionDelay:_e,animationDelay:_e,transitionDuration:0,animationDuration:0}}else we=y(P,de),Ce=S(P,fe,we,Se);n.$$skipPreparationClasses||r.addClass(e,fe);var Ee;if(n.transitionStyle){var Te=[j,n.transitionStyle];E(P,Te),te.push(Te)}if(n.duration>=0){Ee=P.style[j].length>0;var Ae=D(n.duration,Ee);E(P,Ae),te.push(Ae)}if(n.keyframeStyle){var Ie=[L,n.keyframeStyle];E(P,Ie),te.push(Ie)}var ke=Ce?n.staggerIndex>=0?n.staggerIndex:t.count(we):0,xe=0===ke;xe&&!n.skipBlocking&&C(P,ue);var Be=A(P,de,we),Ne=Be.maxDelay;K=Math.max(Ne,0),Y=Be.maxDuration;var De={};if(De.hasTransitions=Be.transitionDuration>0,De.hasAnimations=Be.animationDuration>0,De.hasTransitionAll=De.hasTransitions&&"all"==Be.transitionProperty,De.applyTransitionDuration=he&&(De.hasTransitions&&!De.hasTransitionAll||De.hasAnimations&&!De.hasTransitions),De.applyAnimationDuration=n.duration&&De.hasAnimations,De.applyTransitionDelay=N(n.delay)&&(De.applyTransitionDuration||De.hasTransitions),De.applyAnimationDelay=N(n.delay)&&De.hasAnimations,De.recalculateTimingStyles=le.length>0,(De.applyTransitionDuration||De.applyAnimationDuration)&&(Y=n.duration?parseFloat(n.duration):Y,De.applyTransitionDuration&&(De.hasTransitions=!0,Be.transitionDuration=Y,Ee=P.style[j+ie].length>0,te.push(D(Y,Ee))),De.applyAnimationDuration&&(De.hasAnimations=!0,Be.animationDuration=Y,te.push(I(Y)))),0===Y&&!De.recalculateTimingStyles)return x();if(null!=n.delay){var Re=parseFloat(n.delay);De.applyTransitionDelay&&te.push(k(Re)),De.applyAnimationDelay&&te.push(k(Re,!0))}return null==n.duration&&Be.transitionDuration>0&&(De.recalculateTimingStyles=De.recalculateTimingStyles||xe),W=K*ve,ee=Y*ve,n.skipBlocking||(De.blockTransition=Be.transitionDuration>0,De.blockKeyframeAnimation=Be.animationDuration>0&&Ce.animationDelay>0&&0===Ce.animationDuration),g(e,n),De.blockTransition||De.blockKeyframeAnimation?w(Y):n.skipBlocking||C(P,!1),{$$willAnimate:!0,end:u,start:function(){return U?void 0:(G={end:u,cancel:f,resume:null,pause:null},H=new i(G),T(R),H)}}}}]}],_e=["$$animationProvider",function(e){e.drivers.push("$$animateCssDriver");var t="ng-animate-shim",n="ng-anchor",r="ng-anchor-out",i="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$$body","$sniffer","$$jqLite",function(e,o,a,s,c,u,l){function f(e){return e.replace(/\bng-\S+\b/g,"")}function p(e,t){return z(e)&&(e=e.split(" ")),z(t)&&(t=t.split(" ")),e.filter(function(e){return-1===t.indexOf(e)}).join(" ")}function h(o,s,c){function u(e){var t={},n=b(e).getBoundingClientRect();return F(["width","height","top","left"],function(e){var r=n[e];switch(e){case"top":r+=v.scrollTop;break;case"left":r+=v.scrollLeft}t[e]=Math.floor(r)+"px"}),t}function l(){var t=e(m,{addClass:r,delay:!0,from:u(s)});return t.$$willAnimate?t:null}function d(e){return e.attr("class")||""}function h(){var t=f(d(c)),n=p(t,y),o=p(y,t),a=e(m,{to:u(c),addClass:i+" "+n,removeClass:r+" "+o,delay:!0});return a.$$willAnimate?a:null}function g(){m.remove(),s.removeClass(t),c.removeClass(t)}var m=U(b(s).cloneNode(!0)),y=f(d(m));s.addClass(t),c.addClass(t),m.addClass(n),w.append(m);var S,C=l();if(!C&&(S=h(),!S))return g();var _=C||S;return{start:function(){function e(){n&&n.end()}var t,n=_.start();return n.done(function(){return n=null,!S&&(S=h())?(n=S.start(),n.done(function(){n=null,g(),t.complete()}),n):(g(),void t.complete())}),t=new a({end:e,cancel:e})}}}function g(e,t,n,r){var i=m(e,O),o=m(t,O),s=[];return F(r,function(e){var t=e.out,r=e["in"],i=h(n,t,r);i&&s.push(i)}),i||o||0!==s.length?{start:function(){function e(){F(t,function(e){e.end()})}var t=[];i&&t.push(i.start()),o&&t.push(o.start()),F(s,function(e){t.push(e.start())});var n=new a({end:e,cancel:e});return a.all(t,function(e){n.complete(e)}),n}}:void 0}function m(t){var n=t.element,r=t.options||{};t.structural&&(r.event=t.event,r.structural=!0,r.applyClassesEarly=!0,"leave"===t.event&&(r.onDone=r.domOperation)),r.preparationClasses&&(r.event=T(r.event,r.preparationClasses));var i=e(n,r);return i.$$willAnimate?i:null}if(!u.animations&&!u.transitions)return O;var v=b(c),y=b(s),w=U(v.parentNode===y?v:y);d(l);return function(e){return e.from&&e.to?g(e.from,e.to,e.classes,e.anchors):m(e)}}]}],Ee=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,n,r){function i(n){n=V(n)?n:n.split(" ");for(var r=[],i={},o=0;o<n.length;o++){var a=n[o],s=e.$$registeredAnimations[a];s&&!i[a]&&(r.push(t.get(s)),i[a]=!0)}return r}var o=d(r);return function(e,t,r,a){function s(){a.domOperation(),o(e,a)}function c(e,t,r,i,o){var a;switch(r){case"animate":a=[t,i.from,i.to,o];break;case"setClass":a=[t,g,m,o];break;case"addClass":a=[t,g,o];break;case"removeClass":a=[t,m,o];break;default:a=[t,o]}a.push(i);var s=e.apply(e,a);if(s)if(K(s.start)&&(s=s.start()),s instanceof n)s.done(o);else if(K(s))return s;return O}function u(e,t,r,i,o){var a=[];return F(i,function(i){var s=i[o];s&&a.push(function(){var i,o,a=!1,u=function(e){a||(a=!0,(o||O)(e),i.complete(!e))};return i=new n({end:function(){u()},cancel:function(){u(!0)}}),o=c(s,e,t,r,function(e){var t=e===!1;u(t)}),i})}),a}function l(e,t,r,i,o){var a=u(e,t,r,i,o);if(0===a.length){var s,c;"beforeSetClass"===o?(s=u(e,"removeClass",r,i,"beforeRemoveClass"),c=u(e,"addClass",r,i,"beforeAddClass")):"setClass"===o&&(s=u(e,"removeClass",r,i,"removeClass"),c=u(e,"addClass",r,i,"addClass")),s&&(a=a.concat(s)),c&&(a=a.concat(c))}if(0!==a.length)return function(e){var t=[];return a.length&&F(a,function(e){t.push(e())}),t.length?n.all(t,e):e(),function(e){F(t,function(t){e?t.cancel():t.end()})}}}3===arguments.length&&q(r)&&(a=r,r=null),a=p(a),r||(r=e.attr("class")||"",a.addClass&&(r+=" "+a.addClass),a.removeClass&&(r+=" "+a.removeClass));var f,d,g=a.addClass,m=a.removeClass,v=i(r);if(v.length){var y,b;"leave"==t?(b="leave",y="afterLeave"):(b="before"+t.charAt(0).toUpperCase()+t.substr(1),y=t),"enter"!==t&&"move"!==t&&(f=l(e,t,a,v,b)),d=l(e,t,a,v,y)}return f||d?{start:function(){function t(t){c=!0,s(),h(e,a),u.complete(t)}function r(e){c||((i||O)(e),t(e))}var i,o=[];f&&o.push(function(e){i=f(e)}),o.length?o.push(function(e){s(),e(!0)}):s(),d&&o.push(function(e){i=d(e)});var c=!1,u=new n({end:function(){r()},cancel:function(){r(!0)}});return n.chain(o,t),u}}:void 0}}]}],Te=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(e,t){function n(t){var n=t.element,r=t.event,i=t.options,o=t.classes;return e(n,r,o,i)}return function(e){if(e.from&&e.to){var r=n(e.from),i=n(e.to);if(!r&&!i)return;return{start:function(){function e(){return function(){F(o,function(e){e.end()})}}function n(e){a.complete(e)}var o=[];r&&o.push(r.start()),i&&o.push(i.start()),t.all(o,n);var a=new t({end:e(),cancel:e()});return a}}}return n(e)}}]}],Ae="data-ng-animate",Ie="$ngAnimatePin",ke=["$animateProvider",function(e){function t(e,t,n,r){return a[e].some(function(e){return e(t,n,r)})}function n(e,t){e=e||{};var n=(e.addClass||"").length>0,r=(e.removeClass||"").length>0;return t?n&&r:n||r}var i=1,o=2,a=this.rules={skip:[],cancel:[],join:[]};a.join.push(function(e,t,r){return!t.structural&&n(t.options)}),a.skip.push(function(e,t,r){return!t.structural&&!n(t.options)}),a.skip.push(function(e,t,n){return"leave"==n.event&&t.structural}),a.skip.push(function(e,t,n){return n.structural&&n.state===o&&!t.structural}),a.cancel.push(function(e,t,n){return n.structural&&t.structural}),a.cancel.push(function(e,t,n){return n.state===o&&t.structural}),a.cancel.push(function(e,t,n){var r=t.options,i=n.options;return r.addClass&&r.addClass===i.removeClass||r.removeClass&&r.removeClass===i.addClass}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$body","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(a,s,l,f,g,m,y,C,_,E,T){function A(e,t){return v(e,t,{})}function I(e,t){var n=b(e),r=[],i=U[t];return i&&F(i,function(e){e.node.contains(n)&&r.push(e.callback)}),r}function k(e,t,n,r){a(function(){F(I(t,e),function(e){e(t,n,r)})})}function x(e,r,a){function u(t,n,r,i){k(n,e,r,i),t.progress(n,r,i)}function l(t){S(e,a),Z(e,a),h(e,a),a.domOperation(),g.complete(!t)}var f,d;e=c(e),e&&(f=b(e),d=e.parent()),a=p(a);var g=new C;if(V(a.addClass)&&(a.addClass=a.addClass.join(" ")),a.addClass&&!z(a.addClass)&&(a.addClass=null),V(a.removeClass)&&(a.removeClass=a.removeClass.join(" ")),a.removeClass&&!z(a.removeClass)&&(a.removeClass=null),a.from&&!q(a.from)&&(a.from=null),a.to&&!q(a.to)&&(a.to=null),!f)return l(),g;var m=[f.className,a.addClass,a.removeClass].join(" ");if(!X(m))return l(),g;var _=["enter","move","leave"].indexOf(r)>=0,E=!M||L.get(f),T=!E&&$.get(f)||{},I=!!T.state;if(E||I&&T.state==i||(E=!R(e,d,r)),E)return l(),g;_&&B(e);var x={structural:_,element:e,event:r,close:l,options:a,runner:g};if(I){var D=t("skip",e,x,T);if(D)return T.state===o?(l(),g):(v(e,T.options,a),T.runner);var O=t("cancel",e,x,T);if(O)if(T.state===o)T.runner.end();else{if(!T.structural)return v(e,T.options,x.options),T.runner;T.close()}else{var P=t("join",e,x,T);if(P){if(T.state!==o)return w(e,_?r:null,a),r=x.event=T.event,a=v(e,T.options,x.options),T.runner;A(e,a)}}}else A(e,a);var U=x.structural;if(U||(U="animate"===x.event&&Object.keys(x.options.to||{}).length>0||n(x.options)),!U)return l(),N(e),g;var F=(T.counter||0)+1;return x.counter=F,j(e,i,x),s.$$postDigest(function(){var t=$.get(f),i=!t;t=t||{};var s=e.parent()||[],c=s.length>0&&("animate"===t.event||t.structural||n(t.options));if(i||t.counter!==F||!c)return i&&(Z(e,a),h(e,a)),(i||_&&t.event!==r)&&(a.domOperation(),g.end()),void(c||N(e));r=!t.structural&&n(t.options,!0)?"setClass":t.event,j(e,o);var d=y(e,r,t.options);d.done(function(t){l(!t);var n=$.get(f);n&&n.counter===F&&N(b(e)),u(g,r,"close",{})}),g.setHost(d),u(g,r,"start",{})}),g}function B(e){var t=b(e),n=t.querySelectorAll("["+Ae+"]");F(n,function(e){var t=parseInt(e.getAttribute(Ae)),n=$.get(e);switch(t){case o:n.runner.end();case i:n&&$.remove(e)}})}function N(e){var t=b(e);t.removeAttribute(Ae),$.remove(t)}function D(e,t){return b(e)===b(t)}function R(e,t,n){var r,i=D(e,g)||"HTML"===e[0].nodeName,o=D(e,l),a=!1,s=e.data(Ie);for(s&&(t=s);t&&t.length;){o||(o=D(t,l));var c=t[0];if(c.nodeType!==Y)break;var u=$.get(c)||{};if(a||(a=u.structural||L.get(c)),H(r)||r===!0){var f=t.data(te);G(f)&&(r=f)}if(a&&r===!1)break;o||(o=D(t,l),o||(s=t.data(Ie),s&&(t=s))),i||(i=D(t,g)),t=t.parent()}var d=!a||r;return d&&o&&i}function j(e,t,n){n=n||{},n.state=t;var r=b(e);r.setAttribute(Ae,t);var i=$.get(r),o=i?P(i,n):n;$.put(r,o)}var $=new m,L=new m,M=null,O=s.$watch(function(){return 0===_.totalPendingRequests},function(e){e&&(O(),s.$$postDigest(function(){s.$$postDigest(function(){null===M&&(M=!0)})}))}),U={},K=e.classNameFilter(),X=K?function(e){return K.test(e)}:function(){return!0},Z=d(E);return{on:function(e,t,n){var r=u(t);U[e]=U[e]||[],U[e].push({node:r,callback:n})},off:function(e,t,n){function r(e,t,n){var r=u(t);return e.filter(function(e){var t=e.node===r&&(!n||e.callback===n);return!t})}var i=U[e];i&&(U[e]=1===arguments.length?null:r(i,t,n))},pin:function(e,t){r(W(e),"element","not an element"),r(W(t),"parentElement","not an element"),e.data(Ie,t)},push:function(e,t,n,r){return n=n||{},n.domOperation=r,x(e,t,n)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!M;else{var r=W(e);if(r){var i=b(e),o=L.get(i);1===n?t=!o:(t=!!t,t?o&&L.remove(i):L.put(i,!0))}else t=M=!!e}return t}}}]}],xe=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}],Be=["$q","$sniffer","$$animateAsyncRun",function(e,t,n){function r(e){this.setHost(e),this._doneCallbacks=[],this._runInAnimationFrame=n(),this._state=0}var i=0,o=1,a=2;return r.chain=function(e,t){function n(){return r===e.length?void t(!0):void e[r](function(e){return e===!1?void t(!1):(r++,void n())})}var r=0;n()},r.all=function(e,t){function n(n){i=i&&n,++r===e.length&&t(i)}var r=0,i=!0;F(e,function(e){e.done(n)})},r.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===a?e():this._doneCallbacks.push(e)},progress:O,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){t===!1?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===i&&(t._state=o,t._runInAnimationFrame(function(){t._resolve(e)}))},_resolve:function(e){this._state!==a&&(F(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=a)}},r}],Ne=["$animateProvider",function(e){function t(e,t){e.data(s,t)}function n(e){e.removeData(s)}function r(e){return e.data(s)}var o="ng-animate-ref",a=this.drivers=[],s="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(e,s,c,u,l,f){function g(e){function t(e){if(e.processed)return e;e.processed=!0;var n=e.domNode,r=n.parentNode;o.put(n,e);for(var a;r;){if(a=o.get(r)){a.processed||(a=t(a));break}r=r.parentNode}return(a||i).children.push(e),e}function n(e){var t,n=[],r=[];for(t=0;t<e.children.length;t++)r.push(e.children[t]);var i=r.length,o=0,a=[];for(t=0;t<r.length;t++){var s=r[t];0>=i&&(i=o,o=0,n.push(a),a=[]),a.push(s.fn),s.children.forEach(function(e){o++,r.push(e)}),i--}return a.length&&n.push(a),n}var r,i={children:[]},o=new l;for(r=0;r<e.length;r++){var a=e[r];o.put(a.domNode,e[r]={domNode:a.domNode,fn:a.fn,children:[]})}for(r=0;r<e.length;r++)t(e[r]);return n(i)}var m=[],v=d(e);return function(l,d,y){function w(e){var t="["+o+"]",n=e.hasAttribute(o)?[e]:e.querySelectorAll(t),r=[];return F(n,function(e){var t=e.getAttribute(o);t&&t.length&&r.push(e)}),r}function S(e){var t=[],n={};F(e,function(e,r){var i=e.element,a=b(i),s=e.event,c=["enter","move"].indexOf(s)>=0,u=e.structural?w(a):[];if(u.length){var l=c?"to":"from";F(u,function(e){var t=e.getAttribute(o);n[t]=n[t]||{},n[t][l]={animationID:r,element:U(e)}})}else t.push(e)});var r={},i={};return F(n,function(n,o){var a=n.from,s=n.to;if(!a||!s){var c=a?a.animationID:s.animationID,u=c.toString();return void(r[u]||(r[u]=!0,t.push(e[c])))}var l=e[a.animationID],f=e[s.animationID],d=a.animationID.toString();if(!i[d]){var p=i[d]={structural:!0,beforeStart:function(){l.beforeStart(),f.beforeStart()},close:function(){l.close(),f.close()},classes:C(l.classes,f.classes),from:l,to:f,anchors:[]};p.classes.length?t.push(p):(t.push(l),t.push(f))}i[d].anchors.push({out:a.element,"in":s.element})}),t}function C(e,t){e=e.split(" "),t=t.split(" ");for(var n=[],r=0;r<e.length;r++){var i=e[r];if("ng-"!==i.substring(0,3))for(var o=0;o<t.length;o++)if(i===t[o]){n.push(i);break}}return n.join(" ")}function _(e){for(var t=a.length-1;t>=0;t--){var n=a[t];if(c.has(n)){var r=c.get(n),i=r(e);if(i)return i}}}function E(){l.addClass(ee),N&&e.addClass(l,N)}function T(e,t){function n(e){r(e).setHost(t)}e.from&&e.to?(n(e.from.element),n(e.to.element)):n(e.element)}function A(){var e=r(l);!e||"leave"===d&&y.$$domOperationFired||e.end()}function I(t){l.off("$destroy",A),n(l),v(l,y),h(l,y),y.domOperation(),N&&e.removeClass(l,N),l.removeClass(ee),x.complete(!t)}y=p(y);var k=["enter","move","leave"].indexOf(d)>=0,x=new u({end:function(){I()},cancel:function(){I(!0)}});if(!a.length)return I(),x;t(l,x);var B=i(l.attr("class"),i(y.addClass,y.removeClass)),N=y.tempClasses;return N&&(B+=" "+N,y.tempClasses=null),m.push({element:l,classes:B,event:d,structural:k,options:y,beforeStart:E,close:I}),l.on("$destroy",A),m.length>1?x:(s.$$postDigest(function(){var e=[];F(m,function(t){r(t.element)?e.push(t):t.close()}),m.length=0;var t=S(e),n=[];F(t,function(e){n.push({domNode:b(e.from?e.from.element:e.element),fn:function(){e.beforeStart();var t,n=e.close,i=e.anchors?e.from.element||e.to.element:e.element;if(r(i)){var o=_(e);o&&(t=o.start)}if(t){var a=t();a.done(function(e){n(!e)}),T(e,a)}else n()}})}),f(g(n))}),x)}}]}];t.module("ngAnimate",[]).provider("$$body",A).directive("ngAnimateChildren",ge).factory("$$rAFScheduler",he).factory("$$AnimateRunner",Be).factory("$$animateAsyncRun",xe).provider("$$animateQueue",ke).provider("$$animation",Ne).provider("$animateCss",Ce).provider("$$animateCssDriver",_e).provider("$$animateJs",Ee).provider("$$animateJsDriver",Te)}(window,window.angular)}(),r()}),System.registerDynamic("github:jspm/nodelibs-stream@0.1.0/index",["npm:stream-browserify@1.0.0"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=System._nodeRequire?System._nodeRequire("stream"):e("npm:stream-browserify@1.0.0"),r.define=i,n.exports}),System.registerDynamic("github:jspm/nodelibs-buffer@0.1.0",["github:jspm/nodelibs-buffer@0.1.0/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("github:jspm/nodelibs-buffer@0.1.0/index"),r.define=i,n.exports}),System.registerDynamic("npm:qr-image@3.1.0/lib/encode",["github:jspm/nodelibs-buffer@0.1.0"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(e){"use strict";function t(e,t,n){for(var r=1<<t-1;r;r>>>=1)e.push(r&n?1:0)}function r(e){for(var n=e.length,r=[],i=0;n>i;i++)t(r,8,e[i]);var o={},a=[0,1,0,0];if(t(a,16,n),o.data10=o.data27=a.concat(r),256>n){var a=[0,1,0,0];t(a,8,n),o.data1=a.concat(r)}return o}function i(e){for(var n=e.length,r=[],i=0;n>i;i+=2){var o=6,a=c[e[i]];e[i+1]&&(o=11,a=45*a+c[e[i+1]]),t(r,o,a)}var s={},u=[0,0,1,0];if(t(u,13,n),s.data27=u.concat(r),2048>n){var u=[0,0,1,0];t(u,11,n),s.data10=u.concat(r)}if(512>n){var u=[0,0,1,0];t(u,9,n),s.data1=u.concat(r)}return s}function o(e){for(var n=e.length,r=[],i=0;n>i;i+=3){var o=e.substr(i,3),a=Math.ceil(10*o.length/3);t(r,a,parseInt(o,10))}var s={},c=[0,0,0,1];if(t(c,14,n),s.data27=c.concat(r),
4096>n){var c=[0,0,0,1];t(c,12,n),s.data10=c.concat(r)}if(1024>n){var c=[0,0,0,1];t(c,10,n),s.data1=c.concat(r)}return s}function a(e){var t=e.indexOf("/",8)+1||e.length,n=s(e.slice(0,t).toUpperCase(),!1);if(t>=e.length)return n;var r=s(e.slice(t),!1);return n.data27=n.data27.concat(r.data27),n.data10&&r.data10&&(n.data10=n.data10.concat(r.data10)),n.data1&&r.data1&&(n.data1=n.data1.concat(r.data1)),n}function s(t,n){var s,c=typeof t;if("string"==c||"number"==c)s=""+t,t=e(s);else if(e.isBuffer(t))s=t.toString();else{if(!Array.isArray(t))throw new Error("Bad data");t=e(t),s=t.toString()}if(/^[0-9]+$/.test(s)){if(t.length>7089)throw new Error("Too much data");return o(s)}if(/^[0-9A-Z \$%\*\+\.\/\:\-]+$/.test(s)){if(t.length>4296)throw new Error("Too much data");return i(s)}if(n&&/^https?:/i.test(s))return a(s);if(t.length>2953)throw new Error("Too much data");return r(t)}var c=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=n;return t}("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:");n.exports=s}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer),r.define=i,n.exports}),System.registerDynamic("npm:qr-image@3.1.0/lib/errorcode",["github:jspm/nodelibs-buffer@0.1.0"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(e){"use strict";function t(e){for(;0>e;)e+=255;for(;e>255;)e-=255;return a[e]}function r(e){if(1>e||e>255)throw Error("Bad log("+e+")");return s[e]}function i(e){if(l[e])return l[e];var n=i(e-1),o=[];o[0]=n[0];for(var a=1;e>=a;a++)o[a]=r(t(n[a])^t(n[a-1]+e-1));return l[e]=o,o}for(var o=285,a=[1],s=[],c=1;256>c;c++){var u=a[c-1]<<1;u>255&&(u^=o),a[c]=u}for(var c=0;255>c;c++)s[a[c]]=c;var l=[[0],[0,0],[0,25,1]];n.exports=function(n,o){n=[].slice.call(n);for(var a=i(o),s=0;o>s;s++)n.push(0);for(;n.length>o;)if(n[0]){for(var c=r(n[0]),s=0;o>=s;s++)n[s]=n[s]^t(a[s]+c);n.shift()}else n.shift();return e(n)}}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer),r.define=i,n.exports}),System.registerDynamic("npm:qr-image@3.1.0/lib/matrix",["github:jspm/nodelibs-buffer@0.1.0"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(e){"use strict";function t(t){var n=4*t+17,r=[],i=e(n);i.fill(0),i=[].slice.call(i);for(var o=0;n>o;o++)r[o]=i.slice();return r}function r(e){for(var t=e.length,n=-3;3>=n;n++)for(var r=-3;3>=r;r++){var i=Math.max(n,r),o=Math.min(n,r),a=2==i&&o>=-2||-2==o&&2>=i?128:129;e[3+n][3+r]=a,e[3+n][t-4+r]=a,e[t-4+n][3+r]=a}for(var n=0;8>n;n++)e[7][n]=e[n][7]=e[7][t-n-1]=e[n][t-8]=e[t-8][n]=e[t-1-n][7]=128}function i(e){var t=e.length;if(t>21){var n=t-13,r=Math.round(n/Math.ceil(n/28));r%2&&r++;for(var i=[],o=n+6;o>10;o-=r)i.unshift(o);i.unshift(6);for(var a=0;a<i.length;a++)for(var s=0;s<i.length;s++){var c=i[a],u=i[s];if(!e[c][u])for(var l=-2;2>=l;l++)for(var f=-2;2>=f;f++){var d=Math.max(l,f),p=Math.min(l,f),h=1==d&&p>=-1||-1==p&&1>=d?128:129;e[c+l][u+f]=h}}}for(var a=8;t-8>a;a++)e[6][a]=e[a][6]=a%2?128:129}function o(e){for(var t=e.length,n=0;8>n;n++)6!=n&&(e[8][n]=e[n][8]=128),e[8][t-1-n]=128,e[t-1-n][8]=128;if(e[8][8]=128,e[t-8][8]=129,!(45>t))for(var n=t-11;t-8>n;n++)for(var r=0;6>r;r++)e[n][r]=e[r][n]=128}function a(e){function t(t){return 1&e[o][c+t]}function n(t){return 1&e[o+t][c]}for(var r=e.length,i=0,o=0;r>o;o++){for(var a=1&e[o][0],s=1,c=1;r>c;c++){var u=1&e[o][c];u!=a?(s>=5&&(i+=s-2),a=u,s=1):s++}s>=5&&(i+=s-2)}for(var c=0;r>c;c++){for(var a=1&e[0][c],s=1,o=1;r>o;o++){var u=1&e[o][c];u!=a?(s>=5&&(i+=s-2),a=u,s=1):s++}s>=5&&(i+=s-2)}for(var o=0;r-1>o;o++)for(var c=0;r-1>c;c++){var l=e[o][c]+e[o][c+1]+e[o+1][c]+e[o+1][c+1]&7;(0==l||4==l)&&(i+=3)}for(var o=0;r>o;o++)for(var c=0;r>c;c++)r-6>c&&t(0)&&!t(1)&&t(2)&&t(3)&&t(4)&&!t(5)&&t(6)&&(c>=4&&!(t(-4)||t(-3)||t(-2)||t(-1))&&(i+=40),r-10>c&&!(t(7)||t(8)||t(9)||t(10))&&(i+=40)),r-6>o&&n(0)&&!n(1)&&n(2)&&n(3)&&n(4)&&!n(5)&&n(6)&&(o>=4&&!(n(-4)||n(-3)||n(-2)||n(-1))&&(i+=40),r-10>o&&!(n(7)||n(8)||n(9)||n(10))&&(i+=40));for(var f=0,o=0;r>o;o++)for(var c=0;r>c;c++)1&e[o][c]&&f++;return i+=10*Math.floor(Math.abs(10-20*f/(r*r)))}function s(e){var n=t(e.version);r(n),i(n),o(n);for(var s=1/0,l=0,f=0;8>f;f++){u(n,e,f),c(n,e.ec_level,f);var d=a(n);s>d&&(s=d,l=f)}return u(n,e,l),c(n,e.ec_level,l),n.map(function(e){return e.map(function(e){return 1&e})})}var c=function(){for(var e=Array(32),t=Array(40),n=1335,r=7973,i=21522,o=0;32>o;o++){for(var a=o<<10,s=5;s>0;s--)a>>>9+s&&(a^=n<<s-1);e[o]=(a|o<<10)^i}for(var c=7;40>=c;c++){for(var a=c<<12,s=6;s>0;s--)a>>>11+s&&(a^=r<<s-1);t[c]=a|c<<12}var u={L:1,M:0,Q:3,H:2};return function(n,r,i){function o(e){return c>>e&1?129:128}function a(e){return f>>e&1?129:128}for(var s=n.length,c=e[u[r]<<3|i],l=0;8>l;l++)n[8][s-1-l]=o(l),6>l&&(n[l][8]=o(l));for(var l=8;15>l;l++)n[s-15+l][8]=o(l),l>8&&(n[8][14-l]=o(l));n[7][8]=o(6),n[8][8]=o(7),n[8][7]=o(8);var f=t[(s-17)/4];if(f)for(var l=0;6>l;l++)for(var d=0;3>d;d++)n[s-11+d][l]=n[l][s-11+d]=a(3*l+d)}}(),u=function(){var e=[function(e,t){return(e+t)%2==0},function(e,t){return e%2==0},function(e,t){return t%3==0},function(e,t){return(e+t)%3==0},function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0},function(e,t){return e*t%2+e*t%3==0},function(e,t){return(e*t%2+e*t%3)%2==0},function(e,t){return(e*t%3+(e+t)%2)%2==0}];return function(t,n,r){function i(e){for(var n=128;n;n>>=1){var r=!!(n&e);l(a,s)&&(r=!r),t[a][s]=r?1:0,o()}}function o(){do if(s%2^6>s?0>u&&0==a||u>0&&a==c-1?(s--,u=-u):(s++,a+=u):s--,6==s&&s--,0>s)return!1;while(240&t[a][s]);return!0}var a,s,c=t.length,u=-1;a=s=c-1;for(var l=e[r],f=n.blocks[n.blocks.length-1].length,d=0;f>d;d++)for(var p=0;p<n.blocks.length;p++)n.blocks[p].length<=d||i(n.blocks[p][d]);f=n.ec_len;for(var d=0;f>d;d++)for(var p=0;p<n.ec.length;p++)i(n.ec[p][d]);if(s>-1)do t[a][s]=l(a,s)?1:0;while(o())}}();n.exports={getMatrix:s,init:t,fillFinders:r,fillAlignAndTiming:i,fillStub:o,fillReserved:c,fillData:u,calculatePenalty:a}}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer),r.define=i,n.exports}),System.registerDynamic("npm:emmett@3.1.1/emmett",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(){"use strict";function e(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r}function r(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Function)&&!(e instanceof RegExp)}function i(e,t,n){var r,i,o,a;for(i in e)t.call(n||null,i,e[i]);if(Object.getOwnPropertySymbols)for(r=Object.getOwnPropertySymbols(e),o=0,a=r.length;a>o;o++)t.call(n||null,r[o],e[r[o]])}function o(e,t){e=e||[];var n,r,i=[];for(r=0,n=e.length;n>r;r++)e[r].fn!==t&&i.push(e[r]);return i}var a={once:"boolean",scope:"object"},s=0,c=function(){this._enabled=!0,this.unbindAll()};c.prototype.unbindAll=function(){return this._handlers={},this._handlersAll=[],this._handlersComplex=[],this},c.prototype.on=function(e,t,n){var o,c,u,l,f,d,p;if(r(e))return i(e,function(e,n){this.on(e,n,t)},this),this;for("function"==typeof e&&(n=t,t=e,e=null),f=[].concat(e),o=0,c=f.length;c>o;o++){if(l=f[o],p={order:s++,fn:t},"string"==typeof l||"symbol"==typeof l)this._handlers[l]||(this._handlers[l]=[]),d=this._handlers[l],p.type=l;else if(l instanceof RegExp)d=this._handlersComplex,p.pattern=l;else{if(null!==l)throw Error("Emitter.on: invalid event.");d=this._handlersAll}for(u in n||{})a[u]&&(p[u]=n[u]);d.push(p)}return this},c.prototype.once=function(){var t=Array.prototype.slice.call(arguments),n=t.length-1;return r(t[n])&&t.length>1?t[n]=e(t[n],{once:!0}):t.push({once:!0}),this.on.apply(this,t)},c.prototype.off=function(e,t){var n,a,s,c;if(1===arguments.length&&"function"==typeof e){t=arguments[0];for(s in this._handlers)this._handlers[s]=o(this._handlers[s],t),0===this._handlers[s].length&&delete this._handlers[s];this._handlersAll=o(this._handlersAll,t),this._handlersComplex=o(this._handlersComplex,t)}else if(1!==arguments.length||"string"!=typeof e&&"symbol"!=typeof e)if(2===arguments.length){var u=[].concat(e);for(n=0,a=u.length;a>n;n++)c=u[n],this._handlers[c]=o(this._handlers[c],t),0===(this._handlers[c]||[]).length&&delete this._handlers[c]}else r(e)&&i(e,this.off,this);else delete this._handlers[e];return this},c.prototype.listeners=function(e){var t,n,r,i=this._handlersAll||[],o=!1;if(!e)throw Error("Emitter.listeners: no event provided.");for(i=i.concat(this._handlers[e]||[]),n=0,r=this._handlersComplex.length;r>n;n++)t=this._handlersComplex[n],~e.search(t.pattern)&&(o=!0,i.push(t));return this._handlersAll.length||o?i.sort(function(e,t){return e.order-t.order}):i.slice(0)},c.prototype.emit=function(e,t){if(!this._enabled)return this;if(r(e))return i(e,this.emit,this),this;var n,o,a,s,c,u,l,f,d=[].concat(e),p=[];for(c=0,l=d.length;l>c;c++){for(a=this.listeners(d[c]),u=0,f=a.length;f>u;u++)s=a[u],n={type:d[c],target:this},arguments.length>1&&(n.data=t),s.fn.call("scope"in s?s.scope:this,n),s.once&&p.push(s);for(u=p.length-1;u>=0;u--)o=p[u].type?this._handlers[p[u].type]:p[u].pattern?this._handlersComplex:this._handlersAll,o.splice(o.indexOf(p[u]),1)}return this},c.prototype.kill=function(){this.unbindAll(),this._handlers=null,this._handlersAll=null,this._handlersComplex=null,this._enabled=!1,this.unbindAll=this.on=this.once=this.off=this.emit=this.listeners=Function.prototype},c.prototype.disable=function(){return this._enabled=!1,this},c.prototype.enable=function(){return this._enabled=!0,this},c.version="3.1.1","undefined"!=typeof t?("undefined"!=typeof n&&n.exports&&(t=n.exports=c),t.Emitter=c):"function"==typeof define&&define.amd?define("emmett",[],function(){return c}):this.Emitter=c}.call(this),r.define=i,n.exports}),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){e.pki=e.pki||{};var t=e.pki.oids=e.oids=e.oids||{};t["1.2.840.113549.1.1.1"]="rsaEncryption",t.rsaEncryption="1.2.840.113549.1.1.1",t["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",t.md5WithRSAEncryption="1.2.840.113549.1.1.4",t["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",t.sha1WithRSAEncryption="1.2.840.113549.1.1.5",t["1.2.840.113549.1.1.7"]="RSAES-OAEP",t["RSAES-OAEP"]="1.2.840.113549.1.1.7",t["1.2.840.113549.1.1.8"]="mgf1",t.mgf1="1.2.840.113549.1.1.8",t["1.2.840.113549.1.1.9"]="pSpecified",t.pSpecified="1.2.840.113549.1.1.9",t["1.2.840.113549.1.1.10"]="RSASSA-PSS",t["RSASSA-PSS"]="1.2.840.113549.1.1.10",t["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",t.sha256WithRSAEncryption="1.2.840.113549.1.1.11",t["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",t.sha384WithRSAEncryption="1.2.840.113549.1.1.12",t["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",t.sha512WithRSAEncryption="1.2.840.113549.1.1.13",t["1.3.14.3.2.7"]="desCBC",t.desCBC="1.3.14.3.2.7",t["1.3.14.3.2.26"]="sha1",t.sha1="1.3.14.3.2.26",t["2.16.840.1.101.3.4.2.1"]="sha256",t.sha256="2.16.840.1.101.3.4.2.1",t["2.16.840.1.101.3.4.2.2"]="sha384",t.sha384="2.16.840.1.101.3.4.2.2",t["2.16.840.1.101.3.4.2.3"]="sha512",t.sha512="2.16.840.1.101.3.4.2.3",t["1.2.840.113549.2.5"]="md5",t.md5="1.2.840.113549.2.5",t["1.2.840.113549.1.7.1"]="data",t.data="1.2.840.113549.1.7.1",t["1.2.840.113549.1.7.2"]="signedData",t.signedData="1.2.840.113549.1.7.2",t["1.2.840.113549.1.7.3"]="envelopedData",t.envelopedData="1.2.840.113549.1.7.3",t["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",t.signedAndEnvelopedData="1.2.840.113549.1.7.4",t["1.2.840.113549.1.7.5"]="digestedData",t.digestedData="1.2.840.113549.1.7.5",t["1.2.840.113549.1.7.6"]="encryptedData",t.encryptedData="1.2.840.113549.1.7.6",t["1.2.840.113549.1.9.1"]="emailAddress",t.emailAddress="1.2.840.113549.1.9.1",t["1.2.840.113549.1.9.2"]="unstructuredName",t.unstructuredName="1.2.840.113549.1.9.2",t["1.2.840.113549.1.9.3"]="contentType",t.contentType="1.2.840.113549.1.9.3",t["1.2.840.113549.1.9.4"]="messageDigest",t.messageDigest="1.2.840.113549.1.9.4",t["1.2.840.113549.1.9.5"]="signingTime",t.signingTime="1.2.840.113549.1.9.5",t["1.2.840.113549.1.9.6"]="counterSignature",t.counterSignature="1.2.840.113549.1.9.6",t["1.2.840.113549.1.9.7"]="challengePassword",t.challengePassword="1.2.840.113549.1.9.7",t["1.2.840.113549.1.9.8"]="unstructuredAddress",t.unstructuredAddress="1.2.840.113549.1.9.8",t["1.2.840.113549.1.9.14"]="extensionRequest",t.extensionRequest="1.2.840.113549.1.9.14",t["1.2.840.113549.1.9.20"]="friendlyName",t.friendlyName="1.2.840.113549.1.9.20",t["1.2.840.113549.1.9.21"]="localKeyId",t.localKeyId="1.2.840.113549.1.9.21",t["1.2.840.113549.1.9.22.1"]="x509Certificate",t.x509Certificate="1.2.840.113549.1.9.22.1",t["1.2.840.113549.1.12.10.1.1"]="keyBag",t.keyBag="1.2.840.113549.1.12.10.1.1",t["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",t.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",t["1.2.840.113549.1.12.10.1.3"]="certBag",t.certBag="1.2.840.113549.1.12.10.1.3",t["1.2.840.113549.1.12.10.1.4"]="crlBag",t.crlBag="1.2.840.113549.1.12.10.1.4",t["1.2.840.113549.1.12.10.1.5"]="secretBag",t.secretBag="1.2.840.113549.1.12.10.1.5",t["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",t.safeContentsBag="1.2.840.113549.1.12.10.1.6",t["1.2.840.113549.1.5.13"]="pkcs5PBES2",t.pkcs5PBES2="1.2.840.113549.1.5.13",t["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",t.pkcs5PBKDF2="1.2.840.113549.1.5.12",t["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",t.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",t["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",t.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",t["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",t["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",t["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",t["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",t["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",t["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",t["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",t["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",t["1.2.840.113549.3.7"]="des-EDE3-CBC",t["des-EDE3-CBC"]="1.2.840.113549.3.7",t["2.16.840.1.101.3.4.1.2"]="aes128-CBC",t["aes128-CBC"]="2.16.840.1.101.3.4.1.2",t["2.16.840.1.101.3.4.1.22"]="aes192-CBC",t["aes192-CBC"]="2.16.840.1.101.3.4.1.22",t["2.16.840.1.101.3.4.1.42"]="aes256-CBC",t["aes256-CBC"]="2.16.840.1.101.3.4.1.42",t["2.5.4.3"]="commonName",t.commonName="2.5.4.3",t["2.5.4.5"]="serialName",t.serialName="2.5.4.5",t["2.5.4.6"]="countryName",t.countryName="2.5.4.6",t["2.5.4.7"]="localityName",t.localityName="2.5.4.7",t["2.5.4.8"]="stateOrProvinceName",t.stateOrProvinceName="2.5.4.8",t["2.5.4.10"]="organizationName",t.organizationName="2.5.4.10",t["2.5.4.11"]="organizationalUnitName",t.organizationalUnitName="2.5.4.11",t["2.16.840.1.113730.1.1"]="nsCertType",t.nsCertType="2.16.840.1.113730.1.1",t["2.5.29.1"]="authorityKeyIdentifier",t["2.5.29.2"]="keyAttributes",t["2.5.29.3"]="certificatePolicies",t["2.5.29.4"]="keyUsageRestriction",t["2.5.29.5"]="policyMapping",t["2.5.29.6"]="subtreesConstraint",t["2.5.29.7"]="subjectAltName",t["2.5.29.8"]="issuerAltName",t["2.5.29.9"]="subjectDirectoryAttributes",t["2.5.29.10"]="basicConstraints",t["2.5.29.11"]="nameConstraints",t["2.5.29.12"]="policyConstraints",t["2.5.29.13"]="basicConstraints",t["2.5.29.14"]="subjectKeyIdentifier",t.subjectKeyIdentifier="2.5.29.14",t["2.5.29.15"]="keyUsage",t.keyUsage="2.5.29.15",t["2.5.29.16"]="privateKeyUsagePeriod",t["2.5.29.17"]="subjectAltName",t.subjectAltName="2.5.29.17",t["2.5.29.18"]="issuerAltName",t.issuerAltName="2.5.29.18",t["2.5.29.19"]="basicConstraints",t.basicConstraints="2.5.29.19",t["2.5.29.20"]="cRLNumber",t["2.5.29.21"]="cRLReason",t["2.5.29.22"]="expirationDate",t["2.5.29.23"]="instructionCode",t["2.5.29.24"]="invalidityDate",t["2.5.29.25"]="cRLDistributionPoints",t["2.5.29.26"]="issuingDistributionPoint",t["2.5.29.27"]="deltaCRLIndicator",t["2.5.29.28"]="issuingDistributionPoint",t["2.5.29.29"]="certificateIssuer",t["2.5.29.30"]="nameConstraints",t["2.5.29.31"]="cRLDistributionPoints",t["2.5.29.32"]="certificatePolicies",t["2.5.29.33"]="policyMappings",t["2.5.29.34"]="policyConstraints",t["2.5.29.35"]="authorityKeyIdentifier",t["2.5.29.36"]="policyConstraints",t["2.5.29.37"]="extKeyUsage",t.extKeyUsage="2.5.29.37",t["2.5.29.46"]="freshestCRL",t["2.5.29.54"]="inhibitAnyPolicy",t["1.3.6.1.5.5.7.3.1"]="serverAuth",t.serverAuth="1.3.6.1.5.5.7.3.1",t["1.3.6.1.5.5.7.3.2"]="clientAuth",t.clientAuth="1.3.6.1.5.5.7.3.2",t["1.3.6.1.5.5.7.3.3"]="codeSigning",t.codeSigning="1.3.6.1.5.5.7.3.3",t["1.3.6.1.5.5.7.3.4"]="emailProtection",t.emailProtection="1.3.6.1.5.5.7.3.4",t["1.3.6.1.5.5.7.3.8"]="timeStamping",t.timeStamping="1.3.6.1.5.5.7.3.8"}var t="oids";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/oids",["require","module"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(e,t,n){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function n(){return new t(null)}function r(e,t,n,r,i,o){for(;--o>=0;){var a=t*this.data[e++]+n.data[r]+i;i=Math.floor(a/67108864),n.data[r++]=67108863&a}return i}function i(e,t,n,r,i,o){for(var a=32767&t,s=t>>15;--o>=0;){var c=32767&this.data[e],u=this.data[e++]>>15,l=s*c+u*a;c=a*c+((32767&l)<<15)+n.data[r]+(1073741823&i),i=(c>>>30)+(l>>>15)+s*u+(i>>>30),n.data[r++]=1073741823&c}return i}function o(e,t,n,r,i,o){for(var a=16383&t,s=t>>14;--o>=0;){var c=16383&this.data[e],u=this.data[e++]>>14,l=s*c+u*a;c=a*c+((16383&l)<<14)+n.data[r]+i,i=(c>>28)+(l>>14)+s*u,n.data[r++]=268435455&c}return i}function a(e){return ot.charAt(e)}function s(e,t){var n=at[e.charCodeAt(t)];return null==n?-1:n}function c(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function u(e){this.t=1,this.s=0>e?-1:0,e>0?this.data[0]=e:-1>e?this.data[0]=e+this.DV:this.t=0}function l(e){var t=n();return t.fromInt(e),t}function f(e,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(e,n);r=2}this.t=0,this.s=0;for(var i=e.length,o=!1,a=0;--i>=0;){var c=8==r?255&e[i]:s(e,i);0>c?"-"==e.charAt(i)&&(o=!0):(o=!1,0==a?this.data[this.t++]=c:a+r>this.DB?(this.data[this.t-1]|=(c&(1<<this.DB-a)-1)<<a,this.data[this.t++]=c>>this.DB-a):this.data[this.t-1]|=c<<a,a+=r,a>=this.DB&&(a-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&t.ZERO.subTo(this,this)}function d(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function p(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,c=this.DB-s*this.DB%t;if(s-->0)for(c<this.DB&&(n=this.data[s]>>c)>0&&(i=!0,o=a(n));s>=0;)t>c?(n=(this.data[s]&(1<<c)-1)<<t-c,n|=this.data[--s]>>(c+=this.DB-t)):(n=this.data[s]>>(c-=t)&r,0>=c&&(c+=this.DB,--s)),n>0&&(i=!0),i&&(o+=a(n));return i?o:"0"}function h(){var e=n();return t.ZERO.subTo(this,e),e}function g(){return this.s<0?this.negate():this}function m(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this.data[n]-e.data[n]))return t;return 0}function v(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function y(){return this.t<=0?0:this.DB*(this.t-1)+v(this.data[this.t-1]^this.s&this.DM)}function b(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s}function w(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s}function S(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t.data[n+a+1]=this.data[n]>>i|s,s=(this.data[n]&o)<<r;for(n=a-1;n>=0;--n)t.data[n]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function C(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var a=n+1;a<this.t;++a)t.data[a-n-1]|=(this.data[a]&o)<<i,t.data[a-n]=this.data[a]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}function _(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);i>n;)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=0>r?-1:0,-1>r?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()}function E(e,n){var r=this.abs(),i=e.abs(),o=r.t;for(n.t=o+i.t;--o>=0;)n.data[o]=0;for(o=0;o<i.t;++o)n.data[o+r.t]=r.am(0,i.data[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)}function T(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()}function A(e,r,i){var o=e.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=r&&r.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var s=n(),c=this.s,u=e.s,l=this.DB-v(o.data[o.t-1]);l>0?(o.lShiftTo(l,s),a.lShiftTo(l,i)):(o.copyTo(s),a.copyTo(i));var f=s.t,d=s.data[f-1];if(0!=d){var p=d*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),h=this.FV/p,g=(1<<this.F1)/p,m=1<<this.F2,y=i.t,b=y-f,w=null==r?n():r;for(s.dlShiftTo(b,w),i.compareTo(w)>=0&&(i.data[i.t++]=1,i.subTo(w,i)),t.ONE.dlShiftTo(f,w),w.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--b>=0;){var S=i.data[--y]==d?this.DM:Math.floor(i.data[y]*h+(i.data[y-1]+m)*g);if((i.data[y]+=s.am(0,S,i,b,0,f))<S)for(s.dlShiftTo(b,w),i.subTo(w,i);i.data[y]<--S;)i.subTo(w,i)}null!=r&&(i.drShiftTo(f,r),c!=u&&t.ZERO.subTo(r,r)),i.t=f,i.clamp(),l>0&&i.rShiftTo(l,i),0>c&&t.ZERO.subTo(i,i)}}}function I(e){var r=n();return this.abs().divRemTo(e,null,r),this.s<0&&r.compareTo(t.ZERO)>0&&e.subTo(r,r),r}function k(e){this.m=e}function x(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function B(e){return e}function N(e){e.divRemTo(this.m,null,e)}function D(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function R(e,t){e.squareTo(t),this.reduce(t)}function j(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function $(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function L(e){var r=n();return e.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),e.s<0&&r.compareTo(t.ZERO)>0&&this.m.subTo(r,r),r}function M(e){var t=n();return e.copyTo(t),this.reduce(t),t}function O(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e.data[t],r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function P(e,t){e.squareTo(t),this.reduce(t)}function U(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function F(){return 0==(this.t>0?1&this.data[0]:this.s)}function V(e,r){if(e>4294967295||1>e)return t.ONE;var i=n(),o=n(),a=r.convert(this),s=v(e)-1;for(a.copyTo(i);--s>=0;)if(r.sqrTo(i,o),(e&1<<s)>0)r.mulTo(o,a,i);else{var c=i;i=o,o=c}return r.revert(i)}function z(e,t){var n;return n=256>e||t.isEven()?new k(t):new $(t),this.exp(e,n)}function q(){var e=n();return this.copyTo(e),e}function H(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function G(){return 0==this.t?this.s:this.data[0]<<24>>24}function K(){return 0==this.t?this.s:this.data[0]<<16>>16}function W(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Y(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function X(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=l(r),o=n(),a=n(),s="";for(this.divRemTo(i,o,a);o.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,o.divRemTo(i,o,a);return a.intValue().toString(e)+s}function Z(e,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),i=Math.pow(n,r),o=!1,a=0,c=0,u=0;u<e.length;++u){var l=s(e,u);0>l?"-"==e.charAt(u)&&0==this.signum()&&(o=!0):(c=n*c+l,++a>=r&&(this.dMultiply(i),this.dAddOffset(c,0),a=0,c=0))}a>0&&(this.dMultiply(Math.pow(n,a)),this.dAddOffset(c,0)),o&&t.ZERO.subTo(this,this)}function Q(e,n,r){if("number"==typeof n)if(2>e)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),ae,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var i=new Array,o=7&e;i.length=(e>>3)+1,n.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function J(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-->0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)8>r?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,0>=r&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function ee(e){return 0==this.compareTo(e)}function te(e){return this.compareTo(e)<0?this:e}function ne(e){return this.compareTo(e)>0?this:e}function re(e,t,n){var r,i,o=Math.min(e.t,this.t);for(r=0;o>r;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){for(i=e.s&this.DM,r=o;r<this.t;++r)n.data[r]=t(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<e.t;++r)n.data[r]=t(i,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function ie(e,t){return e&t}function oe(e){var t=n();return this.bitwiseTo(e,ie,t),t}function ae(e,t){return e|t}function se(e){var t=n();return this.bitwiseTo(e,ae,t),t}function ce(e,t){return e^t}function ue(e){var t=n();return this.bitwiseTo(e,ce,t),t}function le(e,t){return e&~t}function fe(e){var t=n();return this.bitwiseTo(e,le,t),t}function de(){for(var e=n(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function pe(e){var t=n();return 0>e?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function he(e){var t=n();return 0>e?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function ge(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function me(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+ge(this.data[e]);return this.s<0?this.t*this.DB:-1}function ve(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function ye(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=ve(this.data[n]^t);return e}function be(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)}function we(e,n){var r=t.ONE.shiftLeft(e);return this.bitwiseTo(r,n,r),r}function Se(e){return this.changeBit(e,ae)}function Ce(e){return this.changeBit(e,le)}function _e(e){return this.changeBit(e,ce)}function Ee(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);i>n;)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=0>r?-1:0,r>0?t.data[n++]=r:-1>r&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()}function Te(e){var t=n();return this.addTo(e,t),t}function Ae(e){var t=n();return this.subTo(e,t),t}function Ie(e){var t=n();return this.multiplyTo(e,t),t}function ke(e){var t=n();return this.divRemTo(e,t,null),t}function xe(e){var t=n();return this.divRemTo(e,null,t),t}function Be(e){var t=n(),r=n();return this.divRemTo(e,t,r),new Array(t,r)}function Ne(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function De(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Re(){}function je(e){return e}function $e(e,t,n){e.multiplyTo(t,n)}function Le(e,t){e.squareTo(t)}function Me(e){return this.exp(e,new Re)}function Oe(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;i>r;++r)n.data[r+this.t]=this.am(0,e.data[r],n,r,0,this.t);for(i=Math.min(e.t,t);i>r;++r)this.am(0,e.data[r],n,r,0,t-r);n.clamp()}function Pe(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function Ue(e){this.r2=n(),this.q3=n(),t.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Fe(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t}function Ve(e){return e}function ze(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function qe(e,t){e.squareTo(t),this.reduce(t)}function He(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function Ge(e,t){var r,i,o=e.bitLength(),a=l(1);if(0>=o)return a;r=18>o?1:48>o?3:144>o?4:768>o?5:6,i=8>o?new k(t):t.isEven()?new Ue(t):new $(t);var s=new Array,c=3,u=r-1,f=(1<<r)-1;if(s[1]=i.convert(this),r>1){var d=n();for(i.sqrTo(s[1],d);f>=c;)s[c]=n(),i.mulTo(d,s[c-2],s[c]),c+=2}var p,h,g=e.t-1,m=!0,y=n();for(o=v(e.data[g])-1;g>=0;){for(o>=u?p=e.data[g]>>o-u&f:(p=(e.data[g]&(1<<o+1)-1)<<u-o,g>0&&(p|=e.data[g-1]>>this.DB+o-u)),c=r;0==(1&p);)p>>=1,--c;if((o-=c)<0&&(o+=this.DB,--g),m)s[p].copyTo(a),m=!1;else{for(;c>1;)i.sqrTo(a,y),i.sqrTo(y,a),c-=2;c>0?i.sqrTo(a,y):(h=a,a=y,y=h),i.mulTo(y,s[p],a)}for(;g>=0&&0==(e.data[g]&1<<o);)i.sqrTo(a,y),h=a,a=y,y=h,--o<0&&(o=this.DB-1,--g)}return i.revert(a)}function Ke(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),o=n.getLowestSetBit();if(0>o)return t;for(o>i&&(o=i),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function We(e){if(0>=e)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n}function Ye(e){var n=e.isEven();if(this.isEven()&&n||0==e.signum())return t.ZERO;for(var r=e.clone(),i=this.clone(),o=l(1),a=l(0),s=l(0),c=l(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),n?(s.isEven()&&c.isEven()||(s.addTo(this,s),c.subTo(e,c)),s.rShiftTo(1,s)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(i)>=0?(r.subTo(i,r),n&&o.subTo(s,o),a.subTo(c,a)):(i.subTo(r,i),n&&s.subTo(o,s),c.subTo(a,c))}return 0!=i.compareTo(t.ONE)?t.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),
c.signum()<0?c.add(e):c):c}function Xe(e){var t,n=this.abs();if(1==n.t&&n.data[0]<=st[st.length-1]){for(t=0;t<st.length;++t)if(n.data[0]==st[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<st.length;){for(var r=st[t],i=t+1;i<st.length&&ct>r;)r*=st[i++];for(r=n.modInt(r);i>t;)if(r%st[t++]==0)return!1}return n.millerRabin(e)}function Ze(e){var n=this.subtract(t.ONE),r=n.getLowestSetBit();if(0>=r)return!1;for(var i,o=n.shiftRight(r),a=Qe(),s=0;e>s;++s){do i=new t(this.bitLength(),a);while(i.compareTo(t.ONE)<=0||i.compareTo(n)>=0);var c=i.modPow(o,this);if(0!=c.compareTo(t.ONE)&&0!=c.compareTo(n)){for(var u=1;u++<r&&0!=c.compareTo(n);)if(c=c.modPowInt(2,this),0==c.compareTo(t.ONE))return!1;if(0!=c.compareTo(n))return!1}}return!0}function Qe(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}}}var Je,et=0xdeadbeefcafe,tt=15715070==(16777215&et);"undefined"==typeof navigator?(t.prototype.am=o,Je=28):tt&&"Microsoft Internet Explorer"==navigator.appName?(t.prototype.am=i,Je=30):tt&&"Netscape"!=navigator.appName?(t.prototype.am=r,Je=26):(t.prototype.am=o,Je=28),t.prototype.DB=Je,t.prototype.DM=(1<<Je)-1,t.prototype.DV=1<<Je;var nt=52;t.prototype.FV=Math.pow(2,nt),t.prototype.F1=nt-Je,t.prototype.F2=2*Je-nt;var rt,it,ot="0123456789abcdefghijklmnopqrstuvwxyz",at=new Array;for(rt="0".charCodeAt(0),it=0;9>=it;++it)at[rt++]=it;for(rt="a".charCodeAt(0),it=10;36>it;++it)at[rt++]=it;for(rt="A".charCodeAt(0),it=10;36>it;++it)at[rt++]=it;k.prototype.convert=x,k.prototype.revert=B,k.prototype.reduce=N,k.prototype.mulTo=D,k.prototype.sqrTo=R,$.prototype.convert=L,$.prototype.revert=M,$.prototype.reduce=O,$.prototype.mulTo=U,$.prototype.sqrTo=P,t.prototype.copyTo=c,t.prototype.fromInt=u,t.prototype.fromString=f,t.prototype.clamp=d,t.prototype.dlShiftTo=b,t.prototype.drShiftTo=w,t.prototype.lShiftTo=S,t.prototype.rShiftTo=C,t.prototype.subTo=_,t.prototype.multiplyTo=E,t.prototype.squareTo=T,t.prototype.divRemTo=A,t.prototype.invDigit=j,t.prototype.isEven=F,t.prototype.exp=V,t.prototype.toString=p,t.prototype.negate=h,t.prototype.abs=g,t.prototype.compareTo=m,t.prototype.bitLength=y,t.prototype.mod=I,t.prototype.modPowInt=z,t.ZERO=l(0),t.ONE=l(1),Re.prototype.convert=je,Re.prototype.revert=je,Re.prototype.mulTo=$e,Re.prototype.sqrTo=Le,Ue.prototype.convert=Fe,Ue.prototype.revert=Ve,Ue.prototype.reduce=ze,Ue.prototype.mulTo=He,Ue.prototype.sqrTo=qe;var st=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ct=(1<<26)/st[st.length-1];t.prototype.chunkSize=W,t.prototype.toRadix=X,t.prototype.fromRadix=Z,t.prototype.fromNumber=Q,t.prototype.bitwiseTo=re,t.prototype.changeBit=we,t.prototype.addTo=Ee,t.prototype.dMultiply=Ne,t.prototype.dAddOffset=De,t.prototype.multiplyLowerTo=Oe,t.prototype.multiplyUpperTo=Pe,t.prototype.modInt=We,t.prototype.millerRabin=Ze,t.prototype.clone=q,t.prototype.intValue=H,t.prototype.byteValue=G,t.prototype.shortValue=K,t.prototype.signum=Y,t.prototype.toByteArray=J,t.prototype.equals=ee,t.prototype.min=te,t.prototype.max=ne,t.prototype.and=oe,t.prototype.or=se,t.prototype.xor=ue,t.prototype.andNot=fe,t.prototype.not=de,t.prototype.shiftLeft=pe,t.prototype.shiftRight=he,t.prototype.getLowestSetBit=me,t.prototype.bitCount=ye,t.prototype.testBit=be,t.prototype.setBit=Se,t.prototype.clearBit=Ce,t.prototype.flipBit=_e,t.prototype.add=Te,t.prototype.subtract=Ae,t.prototype.multiply=Ie,t.prototype.divide=ke,t.prototype.remainder=xe,t.prototype.divideAndRemainder=Be,t.prototype.modPow=Ge,t.prototype.modInverse=Ye,t.prototype.pow=Me,t.prototype.gcd=Ke,t.prototype.isProbablePrime=Xe,e.jsbn=e.jsbn||{},e.jsbn.BigInteger=t}var t="jsbn";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/jsbn",["require","module"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(){i=String.fromCharCode(128),i+=e.util.fillString(String.fromCharCode(0),64),o=!0}function n(e,t,n){for(var r,i,o,a,s,c,u,l,f=n.length();f>=64;){for(i=e.h0,o=e.h1,a=e.h2,s=e.h3,c=e.h4,l=0;16>l;++l)r=n.getInt32(),t[l]=r,u=s^o&(a^s),r=(i<<5|i>>>27)+u+c+1518500249+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;for(;20>l;++l)r=t[l-3]^t[l-8]^t[l-14]^t[l-16],r=r<<1|r>>>31,t[l]=r,u=s^o&(a^s),r=(i<<5|i>>>27)+u+c+1518500249+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;for(;32>l;++l)r=t[l-3]^t[l-8]^t[l-14]^t[l-16],r=r<<1|r>>>31,t[l]=r,u=o^a^s,r=(i<<5|i>>>27)+u+c+1859775393+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;for(;40>l;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,u=o^a^s,r=(i<<5|i>>>27)+u+c+1859775393+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;for(;60>l;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,u=o&a|s&(o^a),r=(i<<5|i>>>27)+u+c+2400959708+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;for(;80>l;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,u=o^a^s,r=(i<<5|i>>>27)+u+c+3395469782+r,c=s,s=a,a=o<<30|o>>>2,o=i,i=r;e.h0=e.h0+i|0,e.h1=e.h1+o|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+c|0,f-=64}}var r=e.sha1=e.sha1||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha1=e.md.algorithms.sha1=r,r.create=function(){o||t();var r=null,a=e.util.createBuffer(),s=new Array(80),c={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,messageLength64:[0,0]};return c.start=function(){return c.messageLength=0,c.messageLength64=[0,0],a=e.util.createBuffer(),r={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},c},c.start(),c.update=function(t,i){return"utf8"===i&&(t=e.util.encodeUtf8(t)),c.messageLength+=t.length,c.messageLength64[0]+=t.length/4294967296>>>0,c.messageLength64[1]+=t.length>>>0,a.putBytes(t),n(r,s,a),(a.read>2048||0===a.length())&&a.compact(),c},c.digest=function(){var t=e.util.createBuffer();t.putBytes(a.bytes()),t.putBytes(i.substr(0,64-(c.messageLength64[1]+8&63))),t.putInt32(c.messageLength64[0]<<3|c.messageLength64[0]>>>28),t.putInt32(c.messageLength64[1]<<3);var o={h0:r.h0,h1:r.h1,h2:r.h2,h3:r.h3,h4:r.h4};n(o,s,t);var u=e.util.createBuffer();return u.putInt32(o.h0),u.putInt32(o.h1),u.putInt32(o.h2),u.putInt32(o.h3),u.putInt32(o.h4),u},c};var i=null,o=!1}var t="sha1";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/sha1",["require","module","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(){i=String.fromCharCode(128),i+=e.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0}function n(e,t,n){for(var r,i,o,s,c,u,l,f,d,p,h,g,m,v,y,b=n.length();b>=64;){for(l=0;16>l;++l)t[l]=n.getInt32();for(;64>l;++l)r=t[l-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=t[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[l]=r+t[l-7]+i+t[l-16]|0;for(f=e.h0,d=e.h1,p=e.h2,h=e.h3,g=e.h4,m=e.h5,v=e.h6,y=e.h7,l=0;64>l;++l)s=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),c=v^g&(m^v),o=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&d|p&(f^d),r=y+s+c+a[l]+t[l],i=o+u,y=v,v=m,m=g,g=h+r|0,h=p,p=d,d=f,f=r+i|0;e.h0=e.h0+f|0,e.h1=e.h1+d|0,e.h2=e.h2+p|0,e.h3=e.h3+h|0,e.h4=e.h4+g|0,e.h5=e.h5+m|0,e.h6=e.h6+v|0,e.h7=e.h7+y|0,b-=64}}var r=e.sha256=e.sha256||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha256=e.md.algorithms.sha256=r,r.create=function(){o||t();var r=null,a=e.util.createBuffer(),s=new Array(64),c={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,messageLength64:[0,0]};return c.start=function(){return c.messageLength=0,c.messageLength64=[0,0],a=e.util.createBuffer(),r={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},c},c.start(),c.update=function(t,i){return"utf8"===i&&(t=e.util.encodeUtf8(t)),c.messageLength+=t.length,c.messageLength64[0]+=t.length/4294967296>>>0,c.messageLength64[1]+=t.length>>>0,a.putBytes(t),n(r,s,a),(a.read>2048||0===a.length())&&a.compact(),c},c.digest=function(){var t=e.util.createBuffer();t.putBytes(a.bytes()),t.putBytes(i.substr(0,64-(c.messageLength64[1]+8&63))),t.putInt32(c.messageLength64[0]<<3|c.messageLength64[0]>>>28),t.putInt32(c.messageLength64[1]<<3);var o={h0:r.h0,h1:r.h1,h2:r.h2,h3:r.h3,h4:r.h4,h5:r.h5,h6:r.h6,h7:r.h7};n(o,s,t);var u=e.util.createBuffer();return u.putInt32(o.h0),u.putInt32(o.h1),u.putInt32(o.h2),u.putInt32(o.h3),u.putInt32(o.h4),u.putInt32(o.h5),u.putInt32(o.h6),u.putInt32(o.h7),u},c};var i=null,o=!1,a=null}var t="sha256";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/sha256",["require","module","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(){o=String.fromCharCode(128),o+=e.util.fillString(String.fromCharCode(0),128),s=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],c={},c["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0}function n(e,t,n){for(var r,i,o,a,c,u,l,f,d,p,h,g,m,v,y,b,w,S,C,_,E,T,A,I,k,x,B,N,D,R,j,$,L,M,O,P=n.length();P>=128;){for(D=0;16>D;++D)t[D][0]=n.getInt32()>>>0,t[D][1]=n.getInt32()>>>0;for(;80>D;++D)$=t[D-2],R=$[0],j=$[1],r=((R>>>19|j<<13)^(j>>>29|R<<3)^R>>>6)>>>0,i=((R<<13|j>>>19)^(j<<3|R>>>29)^(R<<26|j>>>6))>>>0,M=t[D-15],R=M[0],j=M[1],o=((R>>>1|j<<31)^(R>>>8|j<<24)^R>>>7)>>>0,a=((R<<31|j>>>1)^(R<<24|j>>>8)^(R<<25|j>>>7))>>>0,L=t[D-7],O=t[D-16],j=i+L[1]+a+O[1],t[D][0]=r+L[0]+o+O[0]+(j/4294967296>>>0)>>>0,t[D][1]=j>>>0;for(m=e[0][0],v=e[0][1],y=e[1][0],b=e[1][1],w=e[2][0],S=e[2][1],C=e[3][0],_=e[3][1],E=e[4][0],T=e[4][1],A=e[5][0],I=e[5][1],k=e[6][0],x=e[6][1],B=e[7][0],N=e[7][1],D=0;80>D;++D)l=((E>>>14|T<<18)^(E>>>18|T<<14)^(T>>>9|E<<23))>>>0,f=((E<<18|T>>>14)^(E<<14|T>>>18)^(T<<23|E>>>9))>>>0,d=(k^E&(A^k))>>>0,p=(x^T&(I^x))>>>0,c=((m>>>28|v<<4)^(v>>>2|m<<30)^(v>>>7|m<<25))>>>0,u=((m<<4|v>>>28)^(v<<30|m>>>2)^(v<<25|m>>>7))>>>0,h=(m&y|w&(m^y))>>>0,g=(v&b|S&(v^b))>>>0,j=N+f+p+s[D][1]+t[D][1],r=B+l+d+s[D][0]+t[D][0]+(j/4294967296>>>0)>>>0,i=j>>>0,j=u+g,o=c+h+(j/4294967296>>>0)>>>0,a=j>>>0,B=k,N=x,k=A,x=I,A=E,I=T,j=_+i,E=C+r+(j/4294967296>>>0)>>>0,T=j>>>0,C=w,_=S,w=y,S=b,y=m,b=v,j=i+a,m=r+o+(j/4294967296>>>0)>>>0,v=j>>>0;j=e[0][1]+v,e[0][0]=e[0][0]+m+(j/4294967296>>>0)>>>0,e[0][1]=j>>>0,j=e[1][1]+b,e[1][0]=e[1][0]+y+(j/4294967296>>>0)>>>0,e[1][1]=j>>>0,j=e[2][1]+S,e[2][0]=e[2][0]+w+(j/4294967296>>>0)>>>0,e[2][1]=j>>>0,j=e[3][1]+_,e[3][0]=e[3][0]+C+(j/4294967296>>>0)>>>0,e[3][1]=j>>>0,j=e[4][1]+T,e[4][0]=e[4][0]+E+(j/4294967296>>>0)>>>0,e[4][1]=j>>>0,j=e[5][1]+I,e[5][0]=e[5][0]+A+(j/4294967296>>>0)>>>0,e[5][1]=j>>>0,j=e[6][1]+x,e[6][0]=e[6][0]+k+(j/4294967296>>>0)>>>0,e[6][1]=j>>>0,j=e[7][1]+N,e[7][0]=e[7][0]+B+(j/4294967296>>>0)>>>0,e[7][1]=j>>>0,P-=128}}var r=e.sha512=e.sha512||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha512=e.md.algorithms.sha512=r;var i=e.sha384=e.sha512.sha384=e.sha512.sha384||{};i.create=function(){return r.create("SHA-384")},e.md.sha384=e.md.algorithms.sha384=i,e.sha512.sha256=e.sha512.sha256||{create:function(){return r.create("SHA-512/256")}},e.md["sha512/256"]=e.md.algorithms["sha512/256"]=e.sha512.sha256,e.sha512.sha224=e.sha512.sha224||{create:function(){return r.create("SHA-512/224")}},e.md["sha512/224"]=e.md.algorithms["sha512/224"]=e.sha512.sha224,r.create=function(r){if(a||t(),"undefined"==typeof r&&(r="SHA-512"),!(r in c))throw new Error("Invalid SHA-512 algorithm: "+r);for(var i=c[r],s=null,u=e.util.createBuffer(),l=new Array(80),f=0;80>f;++f)l[f]=new Array(2);var d={algorithm:r.replace("-","").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,messageLength128:[0,0,0,0]};return d.start=function(){d.messageLength=0,d.messageLength128=[0,0,0,0],u=e.util.createBuffer(),s=new Array(i.length);for(var t=0;t<i.length;++t)s[t]=i[t].slice(0);return d},d.start(),d.update=function(t,r){"utf8"===r&&(t=e.util.encodeUtf8(t)),d.messageLength+=t.length;var i=t.length;i=[i/4294967296>>>0,i>>>0];for(var o=3;o>=0;--o)d.messageLength128[o]+=i[1],i[1]=i[0]+(d.messageLength128[o]/4294967296>>>0),d.messageLength128[o]=d.messageLength128[o]>>>0,i[0]=i[1]/4294967296>>>0;return u.putBytes(t),n(s,l,u),(u.read>2048||0===u.length())&&u.compact(),d},d.digest=function(){var t=e.util.createBuffer();t.putBytes(u.bytes()),t.putBytes(o.substr(0,128-(d.messageLength128[3]+16&127)));for(var i=[],a=0;3>a;++a)i[a]=d.messageLength128[a]<<3|d.messageLength128[a-1]>>>28;i[3]=d.messageLength128[3]<<3,t.putInt32(i[0]),t.putInt32(i[1]),t.putInt32(i[2]),t.putInt32(i[3]);for(var c=new Array(s.length),a=0;a<s.length;++a)c[a]=s[a].slice(0);n(c,l,t);var f,p=e.util.createBuffer();f="SHA-512"===r?c.length:"SHA-384"===r?c.length-2:c.length-4;for(var a=0;f>a;++a)p.putInt32(c[a][0]),(a!==f-1||"SHA-512/224"!==r)&&p.putInt32(c[a][1]);return p},d};var o=null,a=!1,s=null,c=null}var t="sha512";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/sha512",["require","module","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(){i=String.fromCharCode(128),i+=e.util.fillString(String.fromCharCode(0),64),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],a=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],s=new Array(64);for(var t=0;64>t;++t)s[t]=Math.floor(4294967296*Math.abs(Math.sin(t+1)));c=!0}function n(e,t,n){for(var r,i,c,u,l,f,d,p,h=n.length();h>=64;){for(i=e.h0,c=e.h1,u=e.h2,l=e.h3,p=0;16>p;++p)t[p]=n.getInt32Le(),f=l^c&(u^l),r=i+f+s[p]+t[p],d=a[p],i=l,l=u,u=c,c+=r<<d|r>>>32-d;for(;32>p;++p)f=u^l&(c^u),r=i+f+s[p]+t[o[p]],d=a[p],i=l,l=u,u=c,c+=r<<d|r>>>32-d;for(;48>p;++p)f=c^u^l,r=i+f+s[p]+t[o[p]],d=a[p],i=l,l=u,u=c,c+=r<<d|r>>>32-d;for(;64>p;++p)f=u^(c|~l),r=i+f+s[p]+t[o[p]],d=a[p],i=l,l=u,u=c,c+=r<<d|r>>>32-d;e.h0=e.h0+i|0,e.h1=e.h1+c|0,e.h2=e.h2+u|0,e.h3=e.h3+l|0,h-=64}}var r=e.md5=e.md5||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.md5=e.md.algorithms.md5=r,r.create=function(){c||t();var r=null,o=e.util.createBuffer(),a=new Array(16),s={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,messageLength64:[0,0]};return s.start=function(){return s.messageLength=0,s.messageLength64=[0,0],o=e.util.createBuffer(),r={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},s},s.start(),s.update=function(t,i){return"utf8"===i&&(t=e.util.encodeUtf8(t)),s.messageLength+=t.length,s.messageLength64[0]+=t.length/4294967296>>>0,s.messageLength64[1]+=t.length>>>0,o.putBytes(t),n(r,a,o),(o.read>2048||0===o.length())&&o.compact(),s},s.digest=function(){var t=e.util.createBuffer();t.putBytes(o.bytes()),t.putBytes(i.substr(0,64-(s.messageLength64[1]+8&63))),t.putInt32Le(s.messageLength64[1]<<3),t.putInt32Le(s.messageLength64[0]<<3|s.messageLength64[0]>>>28);var c={h0:r.h0,h1:r.h1,h2:r.h2,h3:r.h3};n(c,a,t);var u=e.util.createBuffer();return u.putInt32Le(c.h0),u.putInt32Le(c.h1),u.putInt32Le(c.h2),u.putInt32Le(c.h3),u},s};var i=null,o=null,a=null,s=null,c=!1}var t="md5";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/md5",["require","module","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){var t=e.asn1,n=e.pkcs7asn1=e.pkcs7asn1||{};e.pkcs7=e.pkcs7||{},e.pkcs7.asn1=n;var r={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};n.contentInfoValidator=r;var i={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};n.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(i)},n.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(i)};var o={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};n.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},r,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[o]}]},n.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}var t="pkcs7asn1";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/pkcs7asn1",["require","module","npm:node-forge@0.6.34/js/asn1","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(e,t){"string"==typeof t&&(t={shortName:t});for(var n,r=null,i=0;null===r&&i<e.attributes.length;++i)n=e.attributes[i],t.type&&t.type===n.type?r=n:t.name&&t.name===n.name?r=n:t.shortName&&t.shortName===n.shortName&&(r=n);return r}function n(t){for(var n,r,i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),o=t.attributes,a=0;a<o.length;++a){n=o[a];var c=n.value,u=s.Type.PRINTABLESTRING;"valueTagClass"in n&&(u=n.valueTagClass,u===s.Type.UTF8&&(c=e.util.encodeUtf8(c))),r=s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(n.type).getBytes()),s.create(s.Class.UNIVERSAL,u,!1,c)])]),i.value.push(r)}return i}function r(e){for(var t,n=0;n<e.length;++n){if(t=e[n],"undefined"==typeof t.name&&(t.type&&t.type in c.oids?t.name=c.oids[t.type]:t.shortName&&t.shortName in l&&(t.name=c.oids[l[t.shortName]])),"undefined"==typeof t.type){if(!(t.name&&t.name in c.oids)){var r=new Error("Attribute type not specified.");throw r.attribute=t,r}t.type=c.oids[t.name]}if("undefined"==typeof t.shortName&&t.name&&t.name in l&&(t.shortName=l[t.name]),t.type===u.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=s.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var o=0;o<t.extensions.length;++o)t.value.push(c.certificateExtensionToAsn1(i(t.extensions[o])))}if("undefined"==typeof t.value){var r=new Error("Attribute value not specified.");throw r.attribute=t,r}}}function i(t,n){if(n=n||{},"undefined"==typeof t.name&&t.id&&t.id in c.oids&&(t.name=c.oids[t.id]),"undefined"==typeof t.id){if(!(t.name&&t.name in c.oids)){var r=new Error("Extension ID not specified.");throw r.extension=t,r}t.id=c.oids[t.name]}if("undefined"!=typeof t.value)return t;if("keyUsage"===t.name){var i=0,o=0,a=0;t.digitalSignature&&(o|=128,i=7),t.nonRepudiation&&(o|=64,i=6),t.keyEncipherment&&(o|=32,i=5),t.dataEncipherment&&(o|=16,i=4),t.keyAgreement&&(o|=8,i=3),t.keyCertSign&&(o|=4,i=2),t.cRLSign&&(o|=2,i=1),t.encipherOnly&&(o|=1,i=0),t.decipherOnly&&(a|=128,i=7);var l=String.fromCharCode(i);0!==a?l+=String.fromCharCode(o)+String.fromCharCode(a):0!==o&&(l+=String.fromCharCode(o)),t.value=s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,l)}else if("basicConstraints"===t.name)t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(s.create(s.Class.UNIVERSAL,s.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);var f=t.value.value;for(var d in t)t[d]===!0&&(d in u?f.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u[d]).getBytes())):-1!==d.indexOf(".")&&f.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(d).getBytes())))}else if("nsCertType"===t.name){var i=0,o=0;t.client&&(o|=128,i=7),t.server&&(o|=64,i=6),t.email&&(o|=32,i=5),t.objsign&&(o|=16,i=4),t.reserved&&(o|=8,i=3),t.sslCA&&(o|=4,i=2),t.emailCA&&(o|=2,i=1),t.objCA&&(o|=1,i=0);var l=String.fromCharCode(i);0!==o&&(l+=String.fromCharCode(o)),t.value=s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,l)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);for(var p,h=0;h<t.altNames.length;++h){p=t.altNames[h];var l=p.value;if(7===p.type&&p.ip){if(l=e.util.bytesFromIP(p.ip),null===l){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else 8===p.type&&(l=p.oid?s.oidToDer(s.oidToDer(p.oid)):s.oidToDer(l));t.value.value.push(s.create(s.Class.CONTEXT_SPECIFIC,p.type,!1,l))}}else if("subjectKeyIdentifier"===t.name&&n.cert){var g=n.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=g.toHex(),t.value=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,g.getBytes())}if("undefined"==typeof t.value){var r=new Error("Extension value not specified.");throw r.extension=t,
r}return t}function o(e,t){switch(e){case u["RSASSA-PSS"]:var n=[];return void 0!==t.hash.algorithmOid&&n.push(s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.hash.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&n.push(s.create(s.Class.CONTEXT_SPECIFIC,1,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.mgf.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.mgf.hash.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&n.push(s.create(s.Class.CONTEXT_SPECIFIC,2,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(t.saltLength).getBytes())])),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,n);default:return s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")}}function a(t){var n=s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return n;for(var r=t.attributes,i=0;i<r.length;++i){var o=r[i],a=o.value,c=s.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===s.Type.UTF8&&(a=e.util.encodeUtf8(a));var u=!1;"valueConstructed"in o&&(u=o.valueConstructed);var l=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.type).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,c,u,a)])]);n.value.push(l)}return n}var s=e.asn1,c=e.pki=e.pki||{},u=c.oids,l={};l.CN=u.commonName,l.commonName="CN",l.C=u.countryName,l.countryName="C",l.L=u.localityName,l.localityName="L",l.ST=u.stateOrProvinceName,l.stateOrProvinceName="ST",l.O=u.organizationName,l.organizationName="O",l.OU=u.organizationalUnitName,l.organizationalUnitName="OU",l.E=u.emailAddress,l.emailAddress="E";var f=e.pki.rsa.publicKeyValidator,d={name:"Certificate",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:s.Class.UNIVERSAL,type:s.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:s.Class.UNIVERSAL,type:s.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:s.Class.UNIVERSAL,type:s.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:s.Class.UNIVERSAL,type:s.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},f,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:s.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:s.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:s.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},p={name:"rsapss",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:s.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:s.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:s.Class.UNIVERSAL,type:s.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:s.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:s.Class.UNIVERSAL,type:s.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequestInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},f,{name:"CertificationRequestInfo.attributes",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:s.Class.UNIVERSAL,type:s.Type.SET,constructed:!0}]}]}]},g={name:"CertificationRequest",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[h,{name:"CertificationRequest.signatureAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"csrSignature"}]};c.RDNAttributesAsArray=function(e,t){for(var n,r,i,o=[],a=0;a<e.value.length;++a){n=e.value[a];for(var c=0;c<n.value.length;++c)i={},r=n.value[c],i.type=s.derToOid(r.value[0].value),i.value=r.value[1].value,i.valueTagClass=r.value[1].type,i.type in u&&(i.name=u[i.type],i.name in l&&(i.shortName=l[i.name])),t&&(t.update(i.type),t.update(i.value)),o.push(i)}return o},c.CRIAttributesAsArray=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=s.derToOid(r.value[0].value),o=r.value[1].value,a=0;a<o.length;++a){var f={};if(f.type=i,f.value=o[a].value,f.valueTagClass=o[a].type,f.type in u&&(f.name=u[f.type],f.name in l&&(f.shortName=l[f.name])),f.type===u.extensionRequest){f.extensions=[];for(var d=0;d<f.value.length;++d)f.extensions.push(c.certificateExtensionFromAsn1(f.value[d]))}t.push(f)}return t};var m=function(e,t,n){var r={};if(e!==u["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:u.sha1},mgf:{algorithmOid:u.mgf1,hash:{algorithmOid:u.sha1}},saltLength:20});var i={},o=[];if(!s.validate(t,p,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return void 0!==i.hashOid&&(r.hash=r.hash||{},r.hash.algorithmOid=s.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=s.derToOid(i.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=s.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(r.saltLength=i.saltLength.charCodeAt(0)),r};c.certificateFromPem=function(t,n,r){var i=e.pem.decode(t)[0];if("CERTIFICATE"!==i.type&&"X509 CERTIFICATE"!==i.type&&"TRUSTED CERTIFICATE"!==i.type){var o=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw o.headerType=i.type,o}if(i.procType&&"ENCRYPTED"===i.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=s.fromDer(i.body,r);return c.certificateFromAsn1(a,n)},c.certificateToPem=function(t,n){var r={type:"CERTIFICATE",body:s.toDer(c.certificateToAsn1(t)).getBytes()};return e.pem.encode(r,{maxline:n})},c.publicKeyFromPem=function(t){var n=e.pem.decode(t)[0];if("PUBLIC KEY"!==n.type&&"RSA PUBLIC KEY"!==n.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=n.type,r}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var i=s.fromDer(n.body);return c.publicKeyFromAsn1(i)},c.publicKeyToPem=function(t,n){var r={type:"PUBLIC KEY",body:s.toDer(c.publicKeyToAsn1(t)).getBytes()};return e.pem.encode(r,{maxline:n})},c.publicKeyToRSAPublicKeyPem=function(t,n){var r={type:"RSA PUBLIC KEY",body:s.toDer(c.publicKeyToRSAPublicKey(t)).getBytes()};return e.pem.encode(r,{maxline:n})},c.getPublicKeyFingerprint=function(t,n){n=n||{};var r,i=n.md||e.md.sha1.create(),o=n.type||"RSAPublicKey";switch(o){case"RSAPublicKey":r=s.toDer(c.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=s.toDer(c.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+n.type+'".')}i.start(),i.update(r);var a=i.digest();if("hex"===n.encoding){var u=a.toHex();return n.delimiter?u.match(/.{2}/g).join(n.delimiter):u}if("binary"===n.encoding)return a.getBytes();if(n.encoding)throw new Error('Unknown encoding "'+n.encoding+'".');return a},c.certificationRequestFromPem=function(t,n,r){var i=e.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==i.type){var o=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw o.headerType=i.type,o}if(i.procType&&"ENCRYPTED"===i.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=s.fromDer(i.body,r);return c.certificationRequestFromAsn1(a,n)},c.certificationRequestToPem=function(t,n){var r={type:"CERTIFICATE REQUEST",body:s.toDer(c.certificationRequestToAsn1(t)).getBytes()};return e.pem.encode(r,{maxline:n})},c.createCertificate=function(){var n={};return n.version=2,n.serialNumber="00",n.signatureOid=null,n.signature=null,n.siginfo={},n.siginfo.algorithmOid=null,n.validity={},n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.issuer={},n.issuer.getField=function(e){return t(n.issuer,e)},n.issuer.addField=function(e){r([e]),n.issuer.attributes.push(e)},n.issuer.attributes=[],n.issuer.hash=null,n.subject={},n.subject.getField=function(e){return t(n.subject,e)},n.subject.addField=function(e){r([e]),n.subject.attributes.push(e)},n.subject.attributes=[],n.subject.hash=null,n.extensions=[],n.publicKey=null,n.md=null,n.setSubject=function(e,t){r(e),n.subject.attributes=e,delete n.subject.uniqueId,t&&(n.subject.uniqueId=t),n.subject.hash=null},n.setIssuer=function(e,t){r(e),n.issuer.attributes=e,delete n.issuer.uniqueId,t&&(n.issuer.uniqueId=t),n.issuer.hash=null},n.setExtensions=function(e){for(var t=0;t<e.length;++t)i(e[t],{cert:n});n.extensions=e},n.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var t,r=null,i=0;null===r&&i<n.extensions.length;++i)t=n.extensions[i],e.id&&t.id===e.id?r=t:e.name&&t.name===e.name&&(r=t);return r},n.sign=function(t,r){n.md=r||e.md.sha1.create();var i=u[n.md.algorithm+"WithRSAEncryption"];if(!i){var o=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw o.algorithm=n.md.algorithm,o}n.signatureOid=n.siginfo.algorithmOid=i,n.tbsCertificate=c.getTBSCertificate(n);var a=s.toDer(n.tbsCertificate);n.md.update(a.getBytes()),n.signature=t.sign(n.md)},n.verify=function(t){var r=!1;if(!n.issued(t)){var i=t.issuer,o=n.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=o.attributes,a}var l=t.md;if(null===l){if(t.signatureOid in u){var f=u[t.signatureOid];switch(f){case"sha1WithRSAEncryption":l=e.md.sha1.create();break;case"md5WithRSAEncryption":l=e.md.md5.create();break;case"sha256WithRSAEncryption":l=e.md.sha256.create();break;case"RSASSA-PSS":l=e.md.sha256.create()}}if(null===l){var a=new Error("Could not compute certificate digest. Unknown signature OID.");throw a.signatureOid=t.signatureOid,a}var d=t.tbsCertificate||c.getTBSCertificate(t),p=s.toDer(d);l.update(p.getBytes())}if(null!==l){var h;switch(t.signatureOid){case u.sha1WithRSAEncryption:h=void 0;break;case u["RSASSA-PSS"]:var g,m;if(g=u[t.signatureParameters.mgf.hash.algorithmOid],void 0===g||void 0===e.md[g]){var a=new Error("Unsupported MGF hash function.");throw a.oid=t.signatureParameters.mgf.hash.algorithmOid,a.name=g,a}if(m=u[t.signatureParameters.mgf.algorithmOid],void 0===m||void 0===e.mgf[m]){var a=new Error("Unsupported MGF function.");throw a.oid=t.signatureParameters.mgf.algorithmOid,a.name=m,a}if(m=e.mgf[m].create(e.md[g].create()),g=u[t.signatureParameters.hash.algorithmOid],void 0===g||void 0===e.md[g])throw{message:"Unsupported RSASSA-PSS hash function.",oid:t.signatureParameters.hash.algorithmOid,name:g};h=e.pss.create(e.md[g].create(),m,t.signatureParameters.saltLength)}r=n.publicKey.verify(l.digest().getBytes(),t.signature,h)}return r},n.isIssuer=function(e){var t=!1,r=n.issuer,i=e.subject;if(r.hash&&i.hash)t=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){t=!0;for(var o,a,s=0;t&&s<r.attributes.length;++s)o=r.attributes[s],a=i.attributes[s],(o.type!==a.type||o.value!==a.value)&&(t=!1)}return t},n.issued=function(e){return e.isIssuer(n)},n.generateSubjectKeyIdentifier=function(){return c.getPublicKeyFingerprint(n.publicKey,{type:"RSAPublicKey"})},n.verifySubjectKeyIdentifier=function(){for(var t=u.subjectKeyIdentifier,r=0;r<n.extensions.length;++r){var i=n.extensions[r];if(i.id===t){var o=n.generateSubjectKeyIdentifier().getBytes();return e.util.hexToBytes(i.subjectKeyIdentifier)===o}}return!1},n},c.certificateFromAsn1=function(n,i){var o={},a=[];if(!s.validate(n,d,o,a)){var l=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw l.errors=a,l}if("string"!=typeof o.certSignature){for(var f="\x00",p=0;p<o.certSignature.length;++p)f+=s.toDer(o.certSignature[p]).getBytes();o.certSignature=f}var h=s.derToOid(o.publicKeyOid);if(h!==c.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var g=c.createCertificate();g.version=o.certVersion?o.certVersion.charCodeAt(0):0;var v=e.util.createBuffer(o.certSerialNumber);g.serialNumber=v.toHex(),g.signatureOid=e.asn1.derToOid(o.certSignatureOid),g.signatureParameters=m(g.signatureOid,o.certSignatureParams,!0),g.siginfo.algorithmOid=e.asn1.derToOid(o.certinfoSignatureOid),g.siginfo.parameters=m(g.siginfo.algorithmOid,o.certinfoSignatureParams,!1);var y=e.util.createBuffer(o.certSignature);++y.read,g.signature=y.getBytes();var b=[];if(void 0!==o.certValidity1UTCTime&&b.push(s.utcTimeToDate(o.certValidity1UTCTime)),void 0!==o.certValidity2GeneralizedTime&&b.push(s.generalizedTimeToDate(o.certValidity2GeneralizedTime)),void 0!==o.certValidity3UTCTime&&b.push(s.utcTimeToDate(o.certValidity3UTCTime)),void 0!==o.certValidity4GeneralizedTime&&b.push(s.generalizedTimeToDate(o.certValidity4GeneralizedTime)),b.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(b.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(g.validity.notBefore=b[0],g.validity.notAfter=b[1],g.tbsCertificate=o.tbsCertificate,i){if(g.md=null,g.signatureOid in u){var h=u[g.signatureOid];switch(h){case"sha1WithRSAEncryption":g.md=e.md.sha1.create();break;case"md5WithRSAEncryption":g.md=e.md.md5.create();break;case"sha256WithRSAEncryption":g.md=e.md.sha256.create();break;case"RSASSA-PSS":g.md=e.md.sha256.create()}}if(null===g.md){var l=new Error("Could not compute certificate digest. Unknown signature OID.");throw l.signatureOid=g.signatureOid,l}var w=s.toDer(g.tbsCertificate);g.md.update(w.getBytes())}var S=e.md.sha1.create();g.issuer.getField=function(e){return t(g.issuer,e)},g.issuer.addField=function(e){r([e]),g.issuer.attributes.push(e)},g.issuer.attributes=c.RDNAttributesAsArray(o.certIssuer,S),o.certIssuerUniqueId&&(g.issuer.uniqueId=o.certIssuerUniqueId),g.issuer.hash=S.digest().toHex();var C=e.md.sha1.create();return g.subject.getField=function(e){return t(g.subject,e)},g.subject.addField=function(e){r([e]),g.subject.attributes.push(e)},g.subject.attributes=c.RDNAttributesAsArray(o.certSubject,C),o.certSubjectUniqueId&&(g.subject.uniqueId=o.certSubjectUniqueId),g.subject.hash=C.digest().toHex(),o.certExtensions?g.extensions=c.certificateExtensionsFromAsn1(o.certExtensions):g.extensions=[],g.publicKey=c.publicKeyFromAsn1(o.subjectPublicKeyInfo),g},c.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var r=e.value[n],i=0;i<r.value.length;++i)t.push(c.certificateExtensionFromAsn1(r.value[i]));return t},c.certificateExtensionFromAsn1=function(t){var n={};if(n.id=s.derToOid(t.value[0].value),n.critical=!1,t.value[1].type===s.Type.BOOLEAN?(n.critical=0!==t.value[1].value.charCodeAt(0),n.value=t.value[2].value):n.value=t.value[1].value,n.id in u)if(n.name=u[n.id],"keyUsage"===n.name){var r=s.fromDer(n.value),i=0,o=0;r.value.length>1&&(i=r.value.charCodeAt(1),o=r.value.length>2?r.value.charCodeAt(2):0),n.digitalSignature=128===(128&i),n.nonRepudiation=64===(64&i),n.keyEncipherment=32===(32&i),n.dataEncipherment=16===(16&i),n.keyAgreement=8===(8&i),n.keyCertSign=4===(4&i),n.cRLSign=2===(2&i),n.encipherOnly=1===(1&i),n.decipherOnly=128===(128&o)}else if("basicConstraints"===n.name){var r=s.fromDer(n.value);r.value.length>0&&r.value[0].type===s.Type.BOOLEAN?n.cA=0!==r.value[0].value.charCodeAt(0):n.cA=!1;var a=null;r.value.length>0&&r.value[0].type===s.Type.INTEGER?a=r.value[0].value:r.value.length>1&&(a=r.value[1].value),null!==a&&(n.pathLenConstraint=s.derToInteger(a))}else if("extKeyUsage"===n.name)for(var r=s.fromDer(n.value),c=0;c<r.value.length;++c){var l=s.derToOid(r.value[c].value);l in u?n[u[l]]=!0:n[l]=!0}else if("nsCertType"===n.name){var r=s.fromDer(n.value),i=0;r.value.length>1&&(i=r.value.charCodeAt(1)),n.client=128===(128&i),n.server=64===(64&i),n.email=32===(32&i),n.objsign=16===(16&i),n.reserved=8===(8&i),n.sslCA=4===(4&i),n.emailCA=2===(2&i),n.objCA=1===(1&i)}else if("subjectAltName"===n.name||"issuerAltName"===n.name){n.altNames=[];for(var f,r=s.fromDer(n.value),d=0;d<r.value.length;++d){f=r.value[d];var p={type:f.type,value:f.value};switch(n.altNames.push(p),f.type){case 1:case 2:case 6:break;case 7:p.ip=e.util.bytesToIP(f.value);break;case 8:p.oid=s.derToOid(f.value)}}}else if("subjectKeyIdentifier"===n.name){var r=s.fromDer(n.value);n.subjectKeyIdentifier=e.util.bytesToHex(r.value)}return n},c.certificationRequestFromAsn1=function(n,i){var o={},a=[];if(!s.validate(n,g,o,a)){var l=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw l.errors=a,l}if("string"!=typeof o.csrSignature){for(var f="\x00",d=0;d<o.csrSignature.length;++d)f+=s.toDer(o.csrSignature[d]).getBytes();o.csrSignature=f}var p=s.derToOid(o.publicKeyOid);if(p!==c.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var h=c.createCertificationRequest();h.version=o.csrVersion?o.csrVersion.charCodeAt(0):0,h.signatureOid=e.asn1.derToOid(o.csrSignatureOid),h.signatureParameters=m(h.signatureOid,o.csrSignatureParams,!0),h.siginfo.algorithmOid=e.asn1.derToOid(o.csrSignatureOid),h.siginfo.parameters=m(h.siginfo.algorithmOid,o.csrSignatureParams,!1);var v=e.util.createBuffer(o.csrSignature);if(++v.read,h.signature=v.getBytes(),h.certificationRequestInfo=o.certificationRequestInfo,i){if(h.md=null,h.signatureOid in u){var p=u[h.signatureOid];switch(p){case"sha1WithRSAEncryption":h.md=e.md.sha1.create();break;case"md5WithRSAEncryption":h.md=e.md.md5.create();break;case"sha256WithRSAEncryption":h.md=e.md.sha256.create();break;case"RSASSA-PSS":h.md=e.md.sha256.create()}}if(null===h.md){var l=new Error("Could not compute certification request digest. Unknown signature OID.");throw l.signatureOid=h.signatureOid,l}var y=s.toDer(h.certificationRequestInfo);h.md.update(y.getBytes())}var b=e.md.sha1.create();return h.subject.getField=function(e){return t(h.subject,e)},h.subject.addField=function(e){r([e]),h.subject.attributes.push(e)},h.subject.attributes=c.RDNAttributesAsArray(o.certificationRequestInfoSubject,b),h.subject.hash=b.digest().toHex(),h.publicKey=c.publicKeyFromAsn1(o.subjectPublicKeyInfo),h.getAttribute=function(e){return t(h,e)},h.addAttribute=function(e){r([e]),h.attributes.push(e)},h.attributes=c.CRIAttributesAsArray(o.certificationRequestInfoAttributes||[]),h},c.createCertificationRequest=function(){var n={};return n.version=0,n.signatureOid=null,n.signature=null,n.siginfo={},n.siginfo.algorithmOid=null,n.subject={},n.subject.getField=function(e){return t(n.subject,e)},n.subject.addField=function(e){r([e]),n.subject.attributes.push(e)},n.subject.attributes=[],n.subject.hash=null,n.publicKey=null,n.attributes=[],n.getAttribute=function(e){return t(n,e)},n.addAttribute=function(e){r([e]),n.attributes.push(e)},n.md=null,n.setSubject=function(e){r(e),n.subject.attributes=e,n.subject.hash=null},n.setAttributes=function(e){r(e),n.attributes=e},n.sign=function(t,r){n.md=r||e.md.sha1.create();var i=u[n.md.algorithm+"WithRSAEncryption"];if(!i){var o=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw o.algorithm=n.md.algorithm,o}n.signatureOid=n.siginfo.algorithmOid=i,n.certificationRequestInfo=c.getCertificationRequestInfo(n);var a=s.toDer(n.certificationRequestInfo);n.md.update(a.getBytes()),n.signature=t.sign(n.md)},n.verify=function(){var t=!1,r=n.md;if(null===r){if(n.signatureOid in u){var i=u[n.signatureOid];switch(i){case"sha1WithRSAEncryption":r=e.md.sha1.create();break;case"md5WithRSAEncryption":r=e.md.md5.create();break;case"sha256WithRSAEncryption":r=e.md.sha256.create();break;case"RSASSA-PSS":r=e.md.sha256.create()}}if(null===r){var o=new Error("Could not compute certification request digest. Unknown signature OID.");throw o.signatureOid=n.signatureOid,o}var a=n.certificationRequestInfo||c.getCertificationRequestInfo(n),l=s.toDer(a);r.update(l.getBytes())}if(null!==r){var f;switch(n.signatureOid){case u.sha1WithRSAEncryption:break;case u["RSASSA-PSS"]:var d,p;if(d=u[n.signatureParameters.mgf.hash.algorithmOid],void 0===d||void 0===e.md[d]){var o=new Error("Unsupported MGF hash function.");throw o.oid=n.signatureParameters.mgf.hash.algorithmOid,o.name=d,o}if(p=u[n.signatureParameters.mgf.algorithmOid],void 0===p||void 0===e.mgf[p]){var o=new Error("Unsupported MGF function.");throw o.oid=n.signatureParameters.mgf.algorithmOid,o.name=p,o}if(p=e.mgf[p].create(e.md[d].create()),d=u[n.signatureParameters.hash.algorithmOid],void 0===d||void 0===e.md[d]){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=n.signatureParameters.hash.algorithmOid,o.name=d,o}f=e.pss.create(e.md[d].create(),p,n.signatureParameters.saltLength)}t=n.publicKey.verify(r.digest().getBytes(),n.signature,f)}return t},n},c.getTBSCertificate=function(t){var r=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(t.version).getBytes())]),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber)),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.siginfo.algorithmOid).getBytes()),o(t.siginfo.algorithmOid,t.siginfo.parameters)]),n(t.issuer),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.UTCTIME,!1,s.dateToUtcTime(t.validity.notBefore)),s.create(s.Class.UNIVERSAL,s.Type.UTCTIME,!1,s.dateToUtcTime(t.validity.notAfter))]),n(t.subject),c.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&r.value.push(s.create(s.Class.CONTEXT_SPECIFIC,1,!0,[s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&r.value.push(s.create(s.Class.CONTEXT_SPECIFIC,2,!0,[s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&r.value.push(c.certificateExtensionsToAsn1(t.extensions)),r},c.getCertificationRequestInfo=function(e){var t=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(e.version).getBytes()),n(e.subject),c.publicKeyToAsn1(e.publicKey),a(e)]);return t},c.distinguishedNameToAsn1=function(e){return n(e)},c.certificateToAsn1=function(e){var t=e.tbsCertificate||c.getTBSCertificate(e);return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[t,s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e.signatureOid).getBytes()),o(e.signatureOid,e.signatureParameters)]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},c.certificateExtensionsToAsn1=function(e){var t=s.create(s.Class.CONTEXT_SPECIFIC,3,!0,[]),n=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);t.value.push(n);for(var r=0;r<e.length;++r)n.value.push(c.certificateExtensionToAsn1(e[r]));return t},c.certificateExtensionToAsn1=function(e){var t=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);t.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e.id).getBytes())),e.critical&&t.value.push(s.create(s.Class.UNIVERSAL,s.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=e.value;return"string"!=typeof e.value&&(n=s.toDer(n).getBytes()),t.value.push(s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,n)),t},c.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||c.getCertificationRequestInfo(e);return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[t,s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e.signatureOid).getBytes()),o(e.signatureOid,e.signatureParameters)]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},c.createCaStore=function(t){function r(t){if(!t.hash){var r=e.md.sha1.create();t.attributes=c.RDNAttributesAsArray(n(t),r),t.hash=r.digest().toHex()}return i.certs[t.hash]||null}var i={certs:{}};if(i.getIssuer=function(e){var t=r(e.issuer);return t},i.addCertificate=function(t){if("string"==typeof t&&(t=e.pki.certificateFromPem(t)),!t.subject.hash){var r=e.md.sha1.create();t.subject.attributes=c.RDNAttributesAsArray(n(t.subject),r),t.subject.hash=r.digest().toHex()}if(t.subject.hash in i.certs){var o=i.certs[t.subject.hash];e.util.isArray(o)||(o=[o]),o.push(t)}else i.certs[t.subject.hash]=t},i.hasCertificate=function(t){var n=r(t.subject);if(!n)return!1;e.util.isArray(n)||(n=[n]);for(var i=s.toDer(c.certificateToAsn1(t)).getBytes(),o=0;o<n.length;++o){var a=s.toDer(c.certificateToAsn1(n[o])).getBytes();if(i===a)return!0}return!1},t)for(var o=0;o<t.length;++o){var a=t[o];i.addCertificate(a)}return i},c.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},c.verifyCertificateChain=function(t,n,r){n=n.slice(0);var i=n.slice(0),o=new Date,a=!0,s=null,u=0;do{var l=n.shift(),f=null,d=!1;if((o<l.validity.notBefore||o>l.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:c.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:o}),null===s){if(f=n[0]||t.getIssuer(l),null===f&&l.isIssuer(l)&&(d=!0,f=l),f){var p=f;e.util.isArray(p)||(p=[p]);for(var h=!1;!h&&p.length>0;){f=p.shift();try{h=f.verify(l)}catch(g){}}h||(s={message:"Certificate signature is invalid.",error:c.certificateError.bad_certificate})}null!==s||f&&!d||t.hasCertificate(l)||(s={message:"Certificate is not trusted.",error:c.certificateError.unknown_ca})}if(null===s&&f&&!l.isIssuer(f)&&(s={message:"Certificate issuer is invalid.",error:c.certificateError.bad_certificate}),null===s)for(var m={keyUsage:!0,basicConstraints:!0},v=0;null===s&&v<l.extensions.length;++v){var y=l.extensions[v];!y.critical||y.name in m||(s={message:"Certificate has an unsupported critical extension.",error:c.certificateError.unsupported_certificate})}if(null===s&&(!a||0===n.length&&(!f||d))){var b=l.getExtension("basicConstraints"),w=l.getExtension("keyUsage");if(null!==w&&(w.keyCertSign&&null!==b||(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:c.certificateError.bad_certificate})),null!==s||null===b||b.cA||(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:c.certificateError.bad_certificate}),null===s&&null!==w&&"pathLenConstraint"in b){var S=u-1;S>b.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:c.certificateError.bad_certificate})}}var C=null===s?!0:s.error,_=r?r(C,u,i):C;if(_!==!0)throw C===!0&&(s={message:"The application rejected the certificate.",error:c.certificateError.bad_certificate}),(_||0===_)&&("object"!=typeof _||e.util.isArray(_)?"string"==typeof _&&(s.error=_):(_.message&&(s.message=_.message),_.error&&(s.error=_.error))),s;s=null,a=!1,++u}while(n.length>0);
return!0}}var t="x509";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i.pki}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/x509",["require","module","npm:node-forge@0.6.34/js/aes","npm:node-forge@0.6.34/js/asn1","npm:node-forge@0.6.34/js/des","npm:node-forge@0.6.34/js/md","npm:node-forge@0.6.34/js/mgf","npm:node-forge@0.6.34/js/oids","npm:node-forge@0.6.34/js/pem","npm:node-forge@0.6.34/js/pss","npm:node-forge@0.6.34/js/rsa","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(e,t){return e.start().update(t).digest().getBytes()}if("undefined"==typeof n)var n=e.jsbn.BigInteger;var r=e.asn1,i=e.pki=e.pki||{};i.pbe=e.pbe=e.pbe||{};var o=i.oids,a={name:"EncryptedPrivateKeyInfo",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},s={name:"PBES2Algorithms",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,onstructed:!0,capture:"kdfIterationCount"}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},c={name:"pkcs-12PbeParams",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:"iterations"}]};i.encryptPrivateKeyInfo=function(t,n,a){a=a||{},a.saltSize=a.saltSize||8,a.count=a.count||2048,a.algorithm=a.algorithm||"aes128";var s,c,u,l=e.random.getBytesSync(a.saltSize),f=a.count,d=r.integerToDer(f);if(0===a.algorithm.indexOf("aes")||"des"===a.algorithm){var p,h,g;switch(a.algorithm){case"aes128":s=16,p=16,h=o["aes128-CBC"],g=e.aes.createEncryptionCipher;break;case"aes192":s=24,p=16,h=o["aes192-CBC"],g=e.aes.createEncryptionCipher;break;case"aes256":s=32,p=16,h=o["aes256-CBC"],g=e.aes.createEncryptionCipher;break;case"des":s=8,p=8,h=o.desCBC,g=e.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=a.algorithm,m}var v=e.pkcs5.pbkdf2(n,l,f,s),y=e.random.getBytesSync(p),b=g(v);b.start(y),b.update(r.toDer(t)),b.finish(),u=b.output.getBytes(),c=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(o.pkcs5PBES2).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(o.pkcs5PBKDF2).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,l),r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,d.getBytes())])]),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(h).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,y)])])])}else{if("3des"!==a.algorithm){var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=a.algorithm,m}s=24;var w=new e.util.ByteBuffer(l),v=i.pbe.generatePkcs12Key(n,w,1,f,s),y=i.pbe.generatePkcs12Key(n,w,2,f,s),b=e.des.createEncryptionCipher(v);b.start(y),b.update(r.toDer(t)),b.finish(),u=b.output.getBytes(),c=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(o["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,l),r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,d.getBytes())])])}var S=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[c,r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,u)]);return S},i.decryptPrivateKeyInfo=function(t,n){var o=null,s={},c=[];if(!r.validate(t,a,s,c)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=c,u}var l=r.derToOid(s.encryptionOid),f=i.pbe.getCipher(l,s.encryptionParams,n),d=e.util.createBuffer(s.encryptedData);return f.update(d),f.finish()&&(o=r.fromDer(f.output)),o},i.encryptedPrivateKeyToPem=function(t,n){var i={type:"ENCRYPTED PRIVATE KEY",body:r.toDer(t).getBytes()};return e.pem.encode(i,{maxline:n})},i.encryptedPrivateKeyFromPem=function(t){var n=e.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==n.type){var i=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return r.fromDer(n.body)},i.encryptRsaPrivateKey=function(t,n,o){if(o=o||{},!o.legacy){var a=i.wrapRsaPrivateKey(i.privateKeyToAsn1(t));return a=i.encryptPrivateKeyInfo(a,n,o),i.encryptedPrivateKeyToPem(a)}var s,c,u,l;switch(o.algorithm){case"aes128":s="AES-128-CBC",u=16,c=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case"aes192":s="AES-192-CBC",u=24,c=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case"aes256":s="AES-256-CBC",u=32,c=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case"3des":s="DES-EDE3-CBC",u=24,c=e.random.getBytesSync(8),l=e.des.createEncryptionCipher;break;case"des":s="DES-CBC",u=8,c=e.random.getBytesSync(8),l=e.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+o.algorithm+'".');throw f.algorithm=o.algorithm,f}var d=e.pbe.opensslDeriveBytes(n,c.substr(0,8),u),p=l(d);p.start(c),p.update(r.toDer(i.privateKeyToAsn1(t))),p.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:s,parameters:e.util.bytesToHex(c).toUpperCase()},body:p.output.getBytes()};return e.pem.encode(h)},i.decryptRsaPrivateKey=function(t,n){var o=null,a=e.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==a.type&&"PRIVATE KEY"!==a.type&&"RSA PRIVATE KEY"!==a.type){var s=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw s.headerType=s,s}if(a.procType&&"ENCRYPTED"===a.procType.type){var c,u;switch(a.dekInfo.algorithm){case"DES-CBC":c=8,u=e.des.createDecryptionCipher;break;case"DES-EDE3-CBC":c=24,u=e.des.createDecryptionCipher;break;case"AES-128-CBC":c=16,u=e.aes.createDecryptionCipher;break;case"AES-192-CBC":c=24,u=e.aes.createDecryptionCipher;break;case"AES-256-CBC":c=32,u=e.aes.createDecryptionCipher;break;case"RC2-40-CBC":c=5,u=function(t){return e.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":c=8,u=function(t){return e.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":c=16,u=function(t){return e.rc2.createDecryptionCipher(t,128)};break;default:var s=new Error('Could not decrypt private key; unsupported encryption algorithm "'+a.dekInfo.algorithm+'".');throw s.algorithm=a.dekInfo.algorithm,s}var l=e.util.hexToBytes(a.dekInfo.parameters),f=e.pbe.opensslDeriveBytes(n,l.substr(0,8),c),d=u(f);if(d.start(l),d.update(e.util.createBuffer(a.body)),!d.finish())return o;o=d.output.getBytes()}else o=a.body;return o="ENCRYPTED PRIVATE KEY"===a.type?i.decryptPrivateKeyInfo(r.fromDer(o),n):r.fromDer(o),null!==o&&(o=i.privateKeyFromAsn1(o)),o},i.pbe.generatePkcs12Key=function(t,n,r,i,o,a){var s,c;("undefined"==typeof a||null===a)&&(a=e.md.sha1.create());var u=a.digestLength,l=a.blockLength,f=new e.util.ByteBuffer,d=new e.util.ByteBuffer;if(null!==t&&void 0!==t){for(c=0;c<t.length;c++)d.putInt16(t.charCodeAt(c));d.putInt16(0)}var p=d.length(),h=n.length(),g=new e.util.ByteBuffer;g.fillWithByte(r,l);var m=l*Math.ceil(h/l),v=new e.util.ByteBuffer;for(c=0;m>c;c++)v.putByte(n.at(c%h));var y=l*Math.ceil(p/l),b=new e.util.ByteBuffer;for(c=0;y>c;c++)b.putByte(d.at(c%p));var w=v;w.putBuffer(b);for(var S=Math.ceil(o/u),C=1;S>=C;C++){var _=new e.util.ByteBuffer;_.putBytes(g.bytes()),_.putBytes(w.bytes());for(var E=0;i>E;E++)a.start(),a.update(_.getBytes()),_=a.digest();var T=new e.util.ByteBuffer;for(c=0;l>c;c++)T.putByte(_.at(c%u));var A=Math.ceil(h/l)+Math.ceil(p/l),I=new e.util.ByteBuffer;for(s=0;A>s;s++){var k=new e.util.ByteBuffer(w.getBytes(l)),x=511;for(c=T.length()-1;c>=0;c--)x>>=8,x+=T.at(c)+k.at(c),k.setAt(c,255&x);I.putBuffer(k)}w=I,f.putBuffer(_)}return f.truncate(f.length()-o),f},i.pbe.getCipher=function(e,t,n){switch(e){case i.oids.pkcs5PBES2:return i.pbe.getCipherForPBES2(e,t,n);case i.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case i.oids["pbewithSHAAnd40BitRC2-CBC"]:return i.pbe.getCipherForPKCS12PBE(e,t,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=e,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}},i.pbe.getCipherForPBES2=function(t,n,o){var a={},c=[];if(!r.validate(n,s,a,c)){var u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=c,u}if(t=r.derToOid(a.kdfOid),t!==i.oids.pkcs5PBKDF2){var u=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw u.oid=t,u.supportedOids=["pkcs5PBKDF2"],u}if(t=r.derToOid(a.encOid),t!==i.oids["aes128-CBC"]&&t!==i.oids["aes192-CBC"]&&t!==i.oids["aes256-CBC"]&&t!==i.oids["des-EDE3-CBC"]&&t!==i.oids.desCBC){var u=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw u.oid=t,u.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],u}var l=a.kdfSalt,f=e.util.createBuffer(a.kdfIterationCount);f=f.getInt(f.length()<<3);var d,p;switch(i.oids[t]){case"aes128-CBC":d=16,p=e.aes.createDecryptionCipher;break;case"aes192-CBC":d=24,p=e.aes.createDecryptionCipher;break;case"aes256-CBC":d=32,p=e.aes.createDecryptionCipher;break;case"des-EDE3-CBC":d=24,p=e.des.createDecryptionCipher;break;case"desCBC":d=8,p=e.des.createDecryptionCipher}var h=e.pkcs5.pbkdf2(o,l,f,d),g=a.encIv,m=p(h);return m.start(g),m},i.pbe.getCipherForPKCS12PBE=function(t,n,o){var a={},s=[];if(!r.validate(n,c,a,s)){var u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=s,u}var l=e.util.createBuffer(a.salt),f=e.util.createBuffer(a.iterations);f=f.getInt(f.length()<<3);var d,p,h;switch(t){case i.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:d=24,p=8,h=e.des.startDecrypting;break;case i.oids["pbewithSHAAnd40BitRC2-CBC"]:d=5,p=8,h=function(t,n){var r=e.rc2.createDecryptionCipher(t,40);return r.start(n,null),r};break;default:var u=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw u.oid=t,u}var g=i.pbe.generatePkcs12Key(o,l,1,f,d),m=i.pbe.generatePkcs12Key(o,l,2,f,p);return h(g,m)},i.pbe.opensslDeriveBytes=function(n,r,i,o){("undefined"==typeof o||null===o)&&(o=e.md.md5.create()),null===r&&(r="");for(var a=[t(o,n+r)],s=16,c=1;i>s;++c,s+=16)a.push(t(o,a[c-1]+n+r));return a.join("").substr(0,i)}}var t="pbe";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/pbe",["require","module","npm:node-forge@0.6.34/js/aes","npm:node-forge@0.6.34/js/asn1","npm:node-forge@0.6.34/js/des","npm:node-forge@0.6.34/js/md","npm:node-forge@0.6.34/js/oids","npm:node-forge@0.6.34/js/pem","npm:node-forge@0.6.34/js/pbkdf2","npm:node-forge@0.6.34/js/random","npm:node-forge@0.6.34/js/rc2","npm:node-forge@0.6.34/js/rsa","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){function t(t,n,r){var i=e.util.createBuffer(),o=Math.ceil(n.n.bitLength()/8);if(t.length>o-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=o-11,a}i.putByte(0),i.putByte(r);var s,c=o-3-t.length;if(0===r||1===r){s=0===r?0:255;for(var u=0;c>u;++u)i.putByte(s)}else for(;c>0;){for(var l=0,f=e.random.getBytes(c),u=0;c>u;++u)s=f.charCodeAt(u),0===s?++l:i.putByte(s);c=l}return i.putByte(0),i.putBytes(t),i}function n(t,n,r,i){var o=Math.ceil(n.n.bitLength()/8),a=e.util.createBuffer(t),s=a.getByte(),c=a.getByte();if(0!==s||r&&0!==c&&1!==c||!r&&2!=c||r&&0===c&&"undefined"==typeof i)throw new Error("Encryption block is invalid.");var u=0;if(0===c){u=o-3-i;for(var l=0;u>l;++l)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===c)for(u=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++u}else if(2===c)for(u=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++u}var f=a.getByte();if(0!==f||u!==o-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function r(t,n,r){function i(){o(t.pBits,function(e,n){return e?r(e):(t.p=n,null!==t.q?s(e,t.q):void o(t.qBits,s))})}function o(t,n){e.prime.generateProbablePrime(t,u,n)}function s(e,n){if(e)return r(e);if(t.q=n,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(0!==t.p.subtract(a.ONE).gcd(t.e).compareTo(a.ONE))return t.p=null,void i();if(0!==t.q.subtract(a.ONE).gcd(t.e).compareTo(a.ONE))return t.q=null,void o(t.qBits,s);if(t.p1=t.p.subtract(a.ONE),t.q1=t.q.subtract(a.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(a.ONE))return t.p=t.q=null,void i();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void o(t.qBits,s);var l=t.e.modInverse(t.phi);t.keys={privateKey:c.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:c.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}"function"==typeof n&&(r=n,n={}),n=n||{};var u={algorithm:{name:n.algorithm||"PRIMEINC",options:{workers:n.workers||2,workLoad:n.workLoad||100,workerScript:n.workerScript}}};"prng"in n&&(u.prng=n.prng),i()}function i(t){var n=t.toString(16);return n[0]>="8"&&(n="00"+n),e.util.hexToBytes(n)}function o(e){return 100>=e?27:150>=e?18:200>=e?15:250>=e?12:300>=e?9:350>=e?8:400>=e?7:500>=e?6:600>=e?5:800>=e?4:1250>=e?3:2}if("undefined"==typeof a)var a=e.jsbn.BigInteger;var s=e.asn1;e.pki=e.pki||{},e.pki.rsa=e.rsa=e.rsa||{};var c=e.pki,u=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},f={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},d={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},p=e.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},h=function(e){var t;if(!(e.algorithm in c.oids)){var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n}t=c.oids[e.algorithm];var r=s.oidToDer(t).getBytes(),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),o=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);o.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,r)),o.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var a=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(o),i.value.push(a),s.toDer(i).getBytes()},g=function(t,n,r){if(r)return t.modPow(n.e,n.n);if(!n.p||!n.q)return t.modPow(n.d,n.n);n.dP||(n.dP=n.d.mod(n.p.subtract(a.ONE))),n.dQ||(n.dQ=n.d.mod(n.q.subtract(a.ONE))),n.qInv||(n.qInv=n.q.modInverse(n.p));var i;do i=new a(e.util.bytesToHex(e.random.getBytes(n.n.bitLength()/8)),16).mod(n.n);while(i.equals(a.ZERO));t=t.multiply(i.modPow(n.e,n.n)).mod(n.n);for(var o=t.mod(n.p).modPow(n.dP,n.p),s=t.mod(n.q).modPow(n.dQ,n.q);o.compareTo(s)<0;)o=o.add(n.p);var c=o.subtract(s).multiply(n.qInv).mod(n.p).multiply(n.q).add(s);return c=c.multiply(i.modInverse(n.n)).mod(n.n)};c.rsa.encrypt=function(n,r,i){var o,s=i,c=Math.ceil(r.n.bitLength()/8);i!==!1&&i!==!0?(s=2===i,o=t(n,r,i)):(o=e.util.createBuffer(),o.putBytes(n));for(var u=new a(o.toHex(),16),l=g(u,r,s),f=l.toString(16),d=e.util.createBuffer(),p=c-Math.ceil(f.length/2);p>0;)d.putByte(0),--p;return d.putBytes(e.util.hexToBytes(f)),d.getBytes()},c.rsa.decrypt=function(t,r,i,o){var s=Math.ceil(r.n.bitLength()/8);if(t.length!==s){var c=new Error("Encrypted message length is invalid.");throw c.length=t.length,c.expected=s,c}var u=new a(e.util.createBuffer(t).toHex(),16);if(u.compareTo(r.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=g(u,r,i),f=l.toString(16),d=e.util.createBuffer(),p=s-Math.ceil(f.length/2);p>0;)d.putByte(0),--p;return d.putBytes(e.util.hexToBytes(f)),o!==!1?n(d.getBytes(),r,i):d.getBytes()},c.rsa.createKeyPairGenerationState=function(t,n,r){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048,r=r||{};var i,o=r.prng||e.random,s={nextBytes:function(e){for(var t=o.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}},c=r.algorithm||"PRIMEINC";if("PRIMEINC"!==c)throw new Error("Invalid key generation algorithm: "+c);return i={algorithm:c,state:0,bits:t,rng:s,eInt:n||65537,e:new a(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},i.e.fromInt(i.eInt),i},c.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new a(null);n.fromInt(30);for(var r,i=0,s=function(e,t){return e|t},l=+new Date,f=0;null===e.keys&&(0>=t||t>f);){if(0===e.state){var d=null===e.p?e.pBits:e.qBits,p=d-1;0===e.pqState?(e.num=new a(d,e.rng),e.num.testBit(p)||e.num.bitwiseTo(a.ONE.shiftLeft(p),s,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),i=0,++e.pqState):1===e.pqState?e.num.bitLength()>d?e.pqState=0:e.num.isProbablePrime(o(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(u[i++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(a.ONE).gcd(e.e).compareTo(a.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(a.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var h=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,h,e.p,e.q,h.mod(e.p1),h.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)}}r=+new Date,f+=r-l,l=r}return null!==e.keys},c.rsa.generateKeyPair=function(e,t,n,i){1===arguments.length?"object"==typeof e?(n=e,e=void 0):"function"==typeof e&&(i=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(i=t,t=void 0):"number"!=typeof t&&(n=t,t=void 0):(n=e,i=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof n&&(i=n,n=void 0):(i=n,n=t,t=void 0)),n=n||{},void 0===e&&(e=n.bits||2048),void 0===t&&(t=n.e||65537);var o=c.rsa.createKeyPairGenerationState(e,t,n);return i?void r(o,n,i):(c.rsa.stepKeyPairGenerationState(o,0),o.keys)},c.setRsaPublicKey=c.rsa.setPublicKey=function(r,i){var o={n:r,e:i};return o.encrypt=function(n,r,i){if("string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===r)r={encode:function(e,n,r){return t(e,n,2).getBytes()}};else if("RSA-OAEP"===r||"RSAES-OAEP"===r)r={encode:function(t,n){return e.pkcs1.encode_rsa_oaep(n,t,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(r))r={encode:function(e){return e}};else if("string"==typeof r)throw new Error('Unsupported encryption scheme: "'+r+'".');var a=r.encode(n,o,!0);return c.rsa.encrypt(a,o,!0)},o.verify=function(e,t,r){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===r?r={verify:function(e,t){t=n(t,o,!0);var r=s.fromDer(t);return e===r.value[1].value}}:("NONE"===r||"NULL"===r||null===r)&&(r={verify:function(e,t){return t=n(t,o,!0),e===t}});var i=c.rsa.decrypt(t,o,!0,!1);return r.verify(e,i,o.n.bitLength())},o},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(t,r,i,o,a,s,u,l){var f={n:t,e:r,d:i,p:o,q:a,dP:s,dQ:u,qInv:l};return f.decrypt=function(t,r,i){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSAES-PKCS1-V1_5");var o=c.rsa.decrypt(t,f,!1,!1);if("RSAES-PKCS1-V1_5"===r)r={decode:n};else if("RSA-OAEP"===r||"RSAES-OAEP"===r)r={decode:function(t,n){return e.pkcs1.decode_rsa_oaep(n,t,i)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(r))throw new Error('Unsupported encryption scheme: "'+r+'".');r={decode:function(e){return e}}}return r.decode(o,f,!1)},f.sign=function(e,t){var n=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:h},n=1):("NONE"===t||"NULL"===t||null===t)&&(t={encode:function(){return e}},n=1);var r=t.encode(e,f.n.bitLength());return c.rsa.encrypt(r,f,n)},f},c.wrapRsaPrivateKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(e).getBytes())])},c.privateKeyFromAsn1=function(t){var n={},r=[];if(s.validate(t,l,n,r)&&(t=s.fromDer(e.util.createBuffer(n.privateKey))),n={},r=[],!s.validate(t,f,n,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var o,u,d,p,h,g,m,v;return o=e.util.createBuffer(n.privateKeyModulus).toHex(),u=e.util.createBuffer(n.privateKeyPublicExponent).toHex(),d=e.util.createBuffer(n.privateKeyPrivateExponent).toHex(),p=e.util.createBuffer(n.privateKeyPrime1).toHex(),h=e.util.createBuffer(n.privateKeyPrime2).toHex(),g=e.util.createBuffer(n.privateKeyExponent1).toHex(),m=e.util.createBuffer(n.privateKeyExponent2).toHex(),v=e.util.createBuffer(n.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new a(o,16),new a(u,16),new a(d,16),new a(p,16),new a(h,16),new a(g,16),new a(m,16),new a(v,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.qInv))])},c.publicKeyFromAsn1=function(t){var n={},r=[];if(s.validate(t,p,n,r)){var i=s.derToOid(n.publicKeyOid);if(i!==c.oids.rsaEncryption){var o=new Error("Cannot read public key. Unknown OID.");throw o.oid=i,o}t=n.rsaPublicKey}if(r=[],!s.validate(t,d,n,r)){var o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw o.errors=r,o}var u=e.util.createBuffer(n.publicKeyModulus).toHex(),l=e.util.createBuffer(n.publicKeyExponent).toHex();return c.setRsaPublicKey(new a(u,16),new a(l,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(e)])])},c.publicKeyToRSAPublicKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(e.e))])}}var t="rsa";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/rsa",["require","module","npm:node-forge@0.6.34/js/asn1","npm:node-forge@0.6.34/js/jsbn","npm:node-forge@0.6.34/js/oids","npm:node-forge@0.6.34/js/pkcs1","npm:node-forge@0.6.34/js/prime","npm:node-forge@0.6.34/js/random","npm:node-forge@0.6.34/js/util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),System.registerDynamic("github:jspm/nodelibs-zlib@0.1.0",["github:jspm/nodelibs-zlib@0.1.0/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("github:jspm/nodelibs-zlib@0.1.0/index"),r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7",["npm:pako@0.2.7/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:pako@0.2.7/index"),r.define=i,n.exports}),System.registerDynamic("npm:qr-image@3.1.0/lib/crc32",["npm:qr-image@3.1.0/lib/crc32buffer","github:jspm/nodelibs-buffer@0.1.0","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(t,r){"use strict";!function(){function i(e,t){for(var n=t.length,r=0;n>r;r++)e=a[255&(e^t[r])]^e>>>8;return e}function o(){for(var e=arguments.length,n=-1,r=0;e>r;r++)n=i(n,t(arguments[r]));return n=(-1^n)>>>0}if("arm"===r.arch)return void(n.exports=e("npm:qr-image@3.1.0/lib/crc32buffer"));var a=[];!function(){for(var e=0;256>e;e++){for(var t=e,n=0;8>n;n++)1&t?t=3988292384^t>>>1:t>>>=1;a[e]=t>>>0}}(),n.exports=o}()}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer,e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("github:jspm/nodelibs-process@0.1.1/index",["npm:process@0.10.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=System._nodeRequire?process:e("npm:process@0.10.1"),r.define=i,n.exports}),System.registerDynamic("npm:stream-browserify@1.0.0",["npm:stream-browserify@1.0.0/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:stream-browserify@1.0.0/index"),r.define=i,n.exports}),System.registerDynamic("github:jspm/nodelibs-buffer@0.1.0/index",["npm:buffer@3.4.3"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=System._nodeRequire?System._nodeRequire("buffer"):e("npm:buffer@3.4.3"),r.define=i,n.exports}),function(){var e=System.get("@@amd-helpers").createDefine();!function(){function e(e){e.mgf=e.mgf||{},e.mgf.mgf1=e.mgf1}var t="mgf";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;define=function(e,t){t(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(e){return n(e)}).concat(e);if(i=i||{},i.defined=i.defined||{},i.defined[t])return i[t];i.defined[t]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[t]}},o=define;define=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,
define.apply(null,Array.prototype.slice.call(arguments,0)))},define("npm:node-forge@0.6.34/js/mgf",["require","module","npm:node-forge@0.6.34/js/mgf1"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),e()}(),System.registerDynamic("npm:pako@0.2.7/index",["npm:pako@0.2.7/lib/utils/common","npm:pako@0.2.7/lib/deflate","npm:pako@0.2.7/lib/inflate","npm:pako@0.2.7/lib/zlib/constants"],!0,function(e,t,n){var r=this,i=r.define;r.define=void 0;var o=e("npm:pako@0.2.7/lib/utils/common").assign,a=e("npm:pako@0.2.7/lib/deflate"),s=e("npm:pako@0.2.7/lib/inflate"),c=e("npm:pako@0.2.7/lib/zlib/constants"),u={};return o(u,a,s,c),n.exports=u,r.define=i,n.exports}),System.registerDynamic("npm:process@0.10.1",["npm:process@0.10.1/browser"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:process@0.10.1/browser"),r.define=i,n.exports}),System.registerDynamic("npm:qr-image@3.1.0/lib/crc32buffer",["github:jspm/nodelibs-buffer@0.1.0"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(e){"use strict";function t(e,t){for(var n=t.length,r=0;n>r;r++){var o=i[e[3]^t[r]];e[3]=o[3]^e[2],e[2]=o[2]^e[1],e[1]=o[1]^e[0],e[0]=o[0]}}function r(){var n=arguments.length,r=e(4);r.fill(255);for(var i=0;n>i;i++)t(r,e(arguments[i]));return r[0]=255^r[0],r[1]=255^r[1],r[2]=255^r[2],r[3]=255^r[3],r.readUInt32BE(0)}for(var i=[],o=0;256>o;o++){var a=i[o]=e(4);a.writeUInt32BE(o,0);for(var s=0;8>s;s++){var c=1&a[0],u=1&a[1],l=1&a[2],f=1&a[3];a[0]=a[0]>>1^(f?237:0),a[1]=a[1]>>1^(f?184:0)^(c?128:0),a[2]=a[2]>>1^(f?131:0)^(u?128:0),a[3]=a[3]>>1^(f?32:0)^(l?128:0)}}n.exports=r}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer),r.define=i,n.exports}),System.registerDynamic("npm:buffer@3.4.3",["npm:buffer@3.4.3/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:buffer@3.4.3/index"),r.define=i,n.exports}),System.registerDynamic("npm:stream-browserify@1.0.0/index",["github:jspm/nodelibs-events@0.1.1","npm:inherits@2.0.1","npm:readable-stream@1.1.13/readable","npm:readable-stream@1.1.13/writable","npm:readable-stream@1.1.13/duplex","npm:readable-stream@1.1.13/transform","npm:readable-stream@1.1.13/passthrough"],!0,function(e,t,n){function r(){a.call(this)}var i=this,o=i.define;i.define=void 0,n.exports=r;var a=e("github:jspm/nodelibs-events@0.1.1").EventEmitter,s=e("npm:inherits@2.0.1");return s(r,a),r.Readable=e("npm:readable-stream@1.1.13/readable"),r.Writable=e("npm:readable-stream@1.1.13/writable"),r.Duplex=e("npm:readable-stream@1.1.13/duplex"),r.Transform=e("npm:readable-stream@1.1.13/transform"),r.PassThrough=e("npm:readable-stream@1.1.13/passthrough"),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function r(){u.readable&&u.resume&&u.resume()}function i(){l||(l=!0,e.end())}function o(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(c(),0===a.listenerCount(this,"error"))throw e}function c(){u.removeListener("data",n),e.removeListener("drain",r),u.removeListener("end",i),u.removeListener("close",o),u.removeListener("error",s),e.removeListener("error",s),u.removeListener("end",c),u.removeListener("close",c),e.removeListener("close",c)}var u=this;u.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(u.on("end",i),u.on("close",o));var l=!1;return u.on("error",s),e.on("error",s),u.on("end",c),u.on("close",c),e.on("close",c),e.emit("pipe",u),e},i.define=o,n.exports}),System.registerDynamic("github:jspm/nodelibs-zlib@0.1.0/index",["npm:browserify-zlib@0.1.4"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=System._nodeRequire?System._nodeRequire("zlib"):e("npm:browserify-zlib@0.1.4"),r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/utils/common",[],!0,function(e,t,n){var r=this,i=r.define;r.define=void 0;var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var o=0;r>o;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;n>t;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;n>t;t++)o=e[t],a.set(o,i),i+=o.length;return a}},s={arraySet:function(e,t,n,r,i){for(var o=0;r>o;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};return t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(o),r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/deflate",["npm:pako@0.2.7/lib/zlib/deflate","npm:pako@0.2.7/lib/utils/common","npm:pako@0.2.7/lib/utils/strings","npm:pako@0.2.7/lib/zlib/messages","npm:pako@0.2.7/lib/zlib/zstream"],!0,function(e,t,n){function r(e,t){var n=new C(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function i(e,t){return t=t||{},t.raw=!0,r(e,t)}function o(e,t){return t=t||{},t.gzip=!0,r(e,t)}var a=this,s=a.define;a.define=void 0;var c=e("npm:pako@0.2.7/lib/zlib/deflate"),u=e("npm:pako@0.2.7/lib/utils/common"),l=e("npm:pako@0.2.7/lib/utils/strings"),f=e("npm:pako@0.2.7/lib/zlib/messages"),d=e("npm:pako@0.2.7/lib/zlib/zstream"),p=Object.prototype.toString,h=0,g=4,m=0,v=1,y=2,b=-1,w=0,S=8,C=function(e){this.options=u.assign({level:b,method:S,chunkSize:16384,windowBits:15,memLevel:8,strategy:w,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var n=c.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==m)throw new Error(f[n]);t.header&&c.deflateSetHeader(this.strm,t.header)};return C.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?g:h,"string"==typeof e?i.input=l.string2buf(e):"[object ArrayBuffer]"===p.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new u.Buf8(o),i.next_out=0,i.avail_out=o),n=c.deflate(i,r),n!==v&&n!==m)return this.onEnd(n),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&(r===g||r===y))&&("string"===this.options.to?this.onData(l.buf2binstring(u.shrinkBuf(i.output,i.next_out))):this.onData(u.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&n!==v);return r===g?(n=c.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===m):r===y?(this.onEnd(m),i.avail_out=0,!0):!0},C.prototype.onData=function(e){this.chunks.push(e)},C.prototype.onEnd=function(e){e===m&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=C,t.deflate=r,t.deflateRaw=i,t.gzip=o,a.define=s,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/zlib/constants",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/inflate",["npm:pako@0.2.7/lib/zlib/inflate","npm:pako@0.2.7/lib/utils/common","npm:pako@0.2.7/lib/utils/strings","npm:pako@0.2.7/lib/zlib/constants","npm:pako@0.2.7/lib/zlib/messages","npm:pako@0.2.7/lib/zlib/zstream","npm:pako@0.2.7/lib/zlib/gzheader"],!0,function(e,t,n){function r(e,t){var n=new g(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function i(e,t){return t=t||{},t.raw=!0,r(e,t)}var o=this,a=o.define;o.define=void 0;var s=e("npm:pako@0.2.7/lib/zlib/inflate"),c=e("npm:pako@0.2.7/lib/utils/common"),u=e("npm:pako@0.2.7/lib/utils/strings"),l=e("npm:pako@0.2.7/lib/zlib/constants"),f=e("npm:pako@0.2.7/lib/zlib/messages"),d=e("npm:pako@0.2.7/lib/zlib/zstream"),p=e("npm:pako@0.2.7/lib/zlib/gzheader"),h=Object.prototype.toString,g=function(e){this.options=c.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var n=s.inflateInit2(this.strm,t.windowBits);if(n!==l.Z_OK)throw new Error(f[n]);this.header=new p,s.inflateGetHeader(this.strm,this.header)};return g.prototype.push=function(e,t){var n,r,i,o,a,f=this.strm,d=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?f.input=u.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new c.Buf8(d),f.next_out=0,f.avail_out=d),n=s.inflate(f,l.Z_NO_FLUSH),n!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0===f.avail_out||n===l.Z_STREAM_END||0===f.avail_in&&(r===l.Z_FINISH||r===l.Z_SYNC_FLUSH))&&("string"===this.options.to?(i=u.utf8border(f.output,f.next_out),o=f.next_out-i,a=u.buf2string(f.output,i),f.next_out=o,f.avail_out=d-o,o&&c.arraySet(f.output,f.output,i,o,0),this.onData(a)):this.onData(c.shrinkBuf(f.output,f.next_out)))}while(f.avail_in>0&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(r=l.Z_FINISH),r===l.Z_FINISH?(n=s.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):r===l.Z_SYNC_FLUSH?(this.onEnd(l.Z_OK),f.avail_out=0,!0):!0},g.prototype.onData=function(e){this.chunks.push(e)},g.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=g,t.inflate=r,t.inflateRaw=i,t.ungzip=r,o.define=a,n.exports}),System.registerDynamic("npm:process@0.10.1/browser",[],!0,function(e,t,n){function r(){if(!u){u=!0;for(var e,t=c.length;t;){e=c,c=[];for(var n=-1;++n<t;)e[n]();t=c.length}u=!1}}function i(){}var o=this,a=o.define;o.define=void 0;var s=n.exports={},c=[],u=!1;return s.nextTick=function(e){c.push(e),u||setTimeout(r,0)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0},o.define=a,n.exports}),System.registerDynamic("github:jspm/nodelibs-events@0.1.1",["github:jspm/nodelibs-events@0.1.1/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("github:jspm/nodelibs-events@0.1.1/index"),r.define=i,n.exports}),System.registerDynamic("npm:inherits@2.0.1",["npm:inherits@2.0.1/inherits_browser"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:inherits@2.0.1/inherits_browser"),r.define=i,n.exports}),System.registerDynamic("npm:readable-stream@1.1.13/readable",["npm:readable-stream@1.1.13/lib/_stream_readable","npm:stream-browserify@1.0.0/index","npm:readable-stream@1.1.13/lib/_stream_writable","npm:readable-stream@1.1.13/lib/_stream_duplex","npm:readable-stream@1.1.13/lib/_stream_transform","npm:readable-stream@1.1.13/lib/_stream_passthrough"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,t=n.exports=e("npm:readable-stream@1.1.13/lib/_stream_readable"),t.Stream=e("npm:stream-browserify@1.0.0/index"),t.Readable=t,t.Writable=e("npm:readable-stream@1.1.13/lib/_stream_writable"),t.Duplex=e("npm:readable-stream@1.1.13/lib/_stream_duplex"),t.Transform=e("npm:readable-stream@1.1.13/lib/_stream_transform"),t.PassThrough=e("npm:readable-stream@1.1.13/lib/_stream_passthrough"),r.define=i,n.exports}),System.registerDynamic("npm:readable-stream@1.1.13/writable",["npm:readable-stream@1.1.13/lib/_stream_writable"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:readable-stream@1.1.13/lib/_stream_writable"),r.define=i,n.exports}),System.registerDynamic("npm:browserify-zlib@0.1.4",["npm:browserify-zlib@0.1.4/src/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:browserify-zlib@0.1.4/src/index"),r.define=i,n.exports}),System.registerDynamic("npm:readable-stream@1.1.13/duplex",["npm:readable-stream@1.1.13/lib/_stream_duplex"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:readable-stream@1.1.13/lib/_stream_duplex"),r.define=i,n.exports}),System.registerDynamic("npm:readable-stream@1.1.13/transform",["npm:readable-stream@1.1.13/lib/_stream_transform"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:readable-stream@1.1.13/lib/_stream_transform"),r.define=i,n.exports}),System.registerDynamic("npm:readable-stream@1.1.13/passthrough",["npm:readable-stream@1.1.13/lib/_stream_passthrough"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:readable-stream@1.1.13/lib/_stream_passthrough"),r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/zlib/messages",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/zlib/zstream",[],!0,function(e,t,n){function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var i=this,o=i.define;return i.define=void 0,n.exports=r,i.define=o,n.exports}),System.registerDynamic("npm:buffer@3.4.3/index",["npm:base64-js@0.0.8","npm:ieee754@1.1.6","npm:is-array@1.0.1"],!0,function(e,t,n){function r(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e){return this instanceof i?(this.length=0,this.parent=void 0,"number"==typeof e?o(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):s(this,e)):arguments.length>1?new i(e,arguments[1]):new i(e)}function o(e,t){if(e=h(e,0>t?0:0|g(t)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function a(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|v(t,n);return e=h(e,r),e.write(t,n),e}function s(e,t){if(i.isBuffer(t))return c(e,t);if(Z(t))return u(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return l(e,t);if(t instanceof ArrayBuffer)return f(e,t)}return t.length?d(e,t):p(e,t)}function c(e,t){var n=0|g(t.length);return e=h(e,n),t.copy(e,0,0,n),e}function u(e,t){var n=0|g(t.length);e=h(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function l(e,t){var n=0|g(t.length);e=h(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function f(e,t){return i.TYPED_ARRAY_SUPPORT?(t.byteLength,e=i._augment(new Uint8Array(t))):e=l(e,new Uint8Array(t)),e}function d(e,t){var n=0|g(t.length);e=h(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function p(e,t){var n,r=0;"Buffer"===t.type&&Z(t.data)&&(n=t.data,r=0|g(n.length)),e=h(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function h(e,t){i.TYPED_ARRAY_SUPPORT?e=i._augment(new Uint8Array(t)):(e.length=t,e._isBuffer=!0);var n=0!==t&&t<=i.poolSize>>>1;return n&&(e.parent=Q),e}function g(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function m(e,t){if(!(this instanceof m))return new m(e,t);var n=new i(e,t);return delete n.parent,n}function v(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return k(this,t,n);case"binary":return x(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+a]=s}return a}function w(e,t,n,r){return G(V(t,e.length-n),e,n,r)}function S(e,t,n,r){return G(z(t),e,n,r)}function C(e,t,n,r){return S(e,t,n,r)}function _(e,t,n,r){return G(H(t),e,n,r)}function E(e,t,n,r){return G(q(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n>=i+s){var c,u,l,f;switch(s){case 1:128>o&&(a=o);break;case 2:c=e[i+1],128===(192&c)&&(f=(31&o)<<6|63&c,f>127&&(a=f));break;case 3:c=e[i+1],u=e[i+2],128===(192&c)&&128===(192&u)&&(f=(15&o)<<12|(63&c)<<6|63&u,f>2047&&(55296>f||f>57343)&&(a=f));break;case 4:c=e[i+1],u=e[i+2],l=e[i+3],128===(192&c)&&128===(192&u)&&128===(192&l)&&(f=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&l,f>65535&&1114112>f&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return I(r)}function I(e){var t=e.length;if(J>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=J));return n}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function B(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=F(e[o]);return i}function N(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,o,a){if(!i.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>o||a>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function j(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function $(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function M(e,t,n,r,i){return i||L(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(e,t,n,r,23,4),n+4}function O(e,t,n,r,i){return i||L(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(e,t,n,r,52,8),n+8}function P(e){if(e=U(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function U(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return 16>e?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;r>a;a++){if(n=e.charCodeAt(a),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);a++)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function H(e){return Y.toByteArray(P(e))}function G(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var K=this,W=K.define;K.define=void 0;var Y=e("npm:base64-js@0.0.8"),X=e("npm:ieee754@1.1.6"),Z=e("npm:is-array@1.0.1");t.Buffer=i,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,i.poolSize=8192;var Q={};i.TYPED_ARRAY_SUPPORT=function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}(),i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=Math.min(n,r);a>o&&e[o]===t[o];)++o;return o!==a&&(n=e[o],r=t[o]),r>n?-1:n>r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Z(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new i(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new i(t),o=0;for(n=0;n<e.length;n++){var a=e[n];a.copy(r,o),o+=a.length}return r},i.byteLength=v,i.prototype.length=void 0,i.prototype.parent=void 0,i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):y.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===i.compare(this,e)},i.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:i.compare(this,e)},i.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(i.isBuffer(e))return n(this,e,t);if("number"==typeof e)return i.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},i.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},i.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},i.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return S(this,e,t,n);case"binary":return C(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;i.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var r;if(i.TYPED_ARRAY_SUPPORT)r=i._augment(this.subarray(e,t));else{var o=t-e;r=new i(o,void 0);for(var a=0;o>a;a++)r[a]=this[a+e]}return r.length&&(r.parent=this.parent||this),r},i.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},i.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},i.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},i.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),X.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),X.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),X.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),X.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||R(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||R(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||R(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||R(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||R(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):j(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||R(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):$(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||R(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):$(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,a=1,s=0>e?1:0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},i.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||R(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||R(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||R(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):j(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||R(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):$(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||R(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):$(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return O(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return O(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,a=r-n;if(this===e&&t>n&&r>t)for(o=a-1;o>=0;o--)e[o+t]=this[o+n];else if(1e3>a||!i.TYPED_ARRAY_SUPPORT)for(o=0;a>o;o++)e[o+t]=this[o+n];else e._set(this.subarray(n,n+a),t);return a},i.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=V(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}},i.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(i.TYPED_ARRAY_SUPPORT)return new i(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var ee=i.prototype;i._augment=function(e){return e.constructor=i,e._isBuffer=!0,e._set=e.set,e.get=ee.get,e.set=ee.set,e.write=ee.write,e.toString=ee.toString,e.toLocaleString=ee.toString,e.toJSON=ee.toJSON,e.equals=ee.equals,e.compare=ee.compare,e.indexOf=ee.indexOf,e.copy=ee.copy,e.slice=ee.slice,e.readUIntLE=ee.readUIntLE,e.readUIntBE=ee.readUIntBE,e.readUInt8=ee.readUInt8,e.readUInt16LE=ee.readUInt16LE,e.readUInt16BE=ee.readUInt16BE,
e.readUInt32LE=ee.readUInt32LE,e.readUInt32BE=ee.readUInt32BE,e.readIntLE=ee.readIntLE,e.readIntBE=ee.readIntBE,e.readInt8=ee.readInt8,e.readInt16LE=ee.readInt16LE,e.readInt16BE=ee.readInt16BE,e.readInt32LE=ee.readInt32LE,e.readInt32BE=ee.readInt32BE,e.readFloatLE=ee.readFloatLE,e.readFloatBE=ee.readFloatBE,e.readDoubleLE=ee.readDoubleLE,e.readDoubleBE=ee.readDoubleBE,e.writeUInt8=ee.writeUInt8,e.writeUIntLE=ee.writeUIntLE,e.writeUIntBE=ee.writeUIntBE,e.writeUInt16LE=ee.writeUInt16LE,e.writeUInt16BE=ee.writeUInt16BE,e.writeUInt32LE=ee.writeUInt32LE,e.writeUInt32BE=ee.writeUInt32BE,e.writeIntLE=ee.writeIntLE,e.writeIntBE=ee.writeIntBE,e.writeInt8=ee.writeInt8,e.writeInt16LE=ee.writeInt16LE,e.writeInt16BE=ee.writeInt16BE,e.writeInt32LE=ee.writeInt32LE,e.writeInt32BE=ee.writeInt32BE,e.writeFloatLE=ee.writeFloatLE,e.writeFloatBE=ee.writeFloatBE,e.writeDoubleLE=ee.writeDoubleLE,e.writeDoubleBE=ee.writeDoubleBE,e.fill=ee.fill,e.inspect=ee.inspect,e.toArrayBuffer=ee.toArrayBuffer,e};var te=/[^+\/0-9A-Za-z-_]/g;return K.define=W,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/utils/strings",["npm:pako@0.2.7/lib/utils/common","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(n){"use strict";function r(e,t){if(65537>t&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",r=0;t>r;r++)n+=String.fromCharCode(e[r]);return n}var i=e("npm:pako@0.2.7/lib/utils/common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(s){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){a=!1}for(var c=new i.Buf8(256),u=0;256>u;u++)c[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;c[254]=c[254]=1,t.string2buf=function(e){var t,n,r,o,a,s=e.length,c=0;for(o=0;s>o;o++)n=e.charCodeAt(o),55296===(64512&n)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),c+=128>n?1:2048>n?2:65536>n?3:4;for(t=new i.Buf8(c),a=0,o=0;c>a;o++)n=e.charCodeAt(o),55296===(64512&n)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),128>n?t[a++]=n:2048>n?(t[a++]=192|n>>>6,t[a++]=128|63&n):65536>n?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return r(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;r>n;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,i,o,a,s=t||e.length,u=new Array(2*s);for(i=0,n=0;s>n;)if(o=e[n++],128>o)u[i++]=o;else if(a=c[o],a>4)u[i++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&s>n;)o=o<<6|63&e[n++],a--;a>1?u[i++]=65533:65536>o?u[i++]=o:(o-=65536,u[i++]=55296|o>>10&1023,u[i++]=56320|1023&o)}return r(u,i)},t.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return 0>n?t:0===n?t:n+c[e[n]]>t?n:t}}(e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/zlib/gzheader",[],!0,function(e,t,n){function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var i=this,o=i.define;return i.define=void 0,n.exports=r,i.define=o,n.exports}),System.registerDynamic("github:jspm/nodelibs-events@0.1.1/index",["npm:events@1.0.2"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=System._nodeRequire?System._nodeRequire("events"):e("npm:events@1.0.2"),r.define=i,n.exports}),System.registerDynamic("npm:inherits@2.0.1/inherits_browser",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,"function"==typeof Object.create?n.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},r.define=i,n.exports}),System.registerDynamic("npm:readable-stream@1.1.13/lib/_stream_duplex",["npm:core-util-is@1.0.1","npm:inherits@2.0.1","npm:readable-stream@1.1.13/lib/_stream_readable","npm:readable-stream@1.1.13/lib/_stream_writable","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(t){function r(e){return this instanceof r?(c.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||t.nextTick(this.end.bind(this))}function o(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}n.exports=r;var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},s=e("npm:core-util-is@1.0.1");s.inherits=e("npm:inherits@2.0.1");var c=e("npm:readable-stream@1.1.13/lib/_stream_readable"),u=e("npm:readable-stream@1.1.13/lib/_stream_writable");s.inherits(r,c),o(a(u.prototype),function(e){r.prototype[e]||(r.prototype[e]=u.prototype[e])})}(e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/zlib/inflate",["npm:pako@0.2.7/lib/utils/common","npm:pako@0.2.7/lib/zlib/adler32","npm:pako@0.2.7/lib/zlib/crc32","npm:pako@0.2.7/lib/zlib/inffast","npm:pako@0.2.7/lib/zlib/inftrees","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=L,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new v.Buf32(he),t.distcode=t.distdyn=new v.Buf32(ge),t.sane=1,t.back=-1,k):N}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):N}function s(e,t){var n,r;return e&&e.state?(r=e.state,0>t?(n=0,t=-t):(n=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?N:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,a(e))):N}function c(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=s(e,t),n!==k&&(e.state=null),n):N}function u(e){return c(e,ve)}function l(e){if(ye){var t;for(g=new v.Buf32(512),m=new v.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(S(_,e.lens,0,288,g,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;S(E,e.lens,0,32,m,0,e.work,{bits:5}),ye=!1}e.lencode=g,e.lenbits=9,e.distcode=m,e.distbits=5}function f(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new v.Buf8(o.wsize)),r>=o.wsize?(v.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),v.arraySet(o.window,t,n-r,i,o.wnext),r-=i,r?(v.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function d(e,t){var n,i,o,a,s,c,u,d,p,h,g,m,he,ge,me,ve,ye,be,we,Se,Ce,_e,Ee,Te,Ae=0,Ie=new v.Buf8(4),ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return N;n=e.state,n.mode===K&&(n.mode=W),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,c=e.avail_in,d=n.hold,p=n.bits,h=c,g=u,_e=k;e:for(;;)switch(n.mode){case L:if(0===n.wrap){n.mode=W;break}for(;16>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}if(2&n.wrap&&35615===d){n.check=0,Ie[0]=255&d,Ie[1]=d>>>8&255,n.check=b(n.check,Ie,2,0),d=0,p=0,n.mode=M;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=fe;break}if((15&d)!==$){e.msg="unknown compression method",n.mode=fe;break}if(d>>>=4,p-=4,Ce=(15&d)+8,0===n.wbits)n.wbits=Ce;else if(Ce>n.wbits){e.msg="invalid window size",n.mode=fe;break}n.dmax=1<<Ce,e.adler=n.check=1,n.mode=512&d?H:K,d=0,p=0;break;case M:for(;16>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}if(n.flags=d,(255&n.flags)!==$){e.msg="unknown compression method",n.mode=fe;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=fe;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(Ie[0]=255&d,Ie[1]=d>>>8&255,n.check=b(n.check,Ie,2,0)),d=0,p=0,n.mode=O;case O:for(;32>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}n.head&&(n.head.time=d),512&n.flags&&(Ie[0]=255&d,Ie[1]=d>>>8&255,Ie[2]=d>>>16&255,Ie[3]=d>>>24&255,n.check=b(n.check,Ie,4,0)),d=0,p=0,n.mode=P;case P:for(;16>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(Ie[0]=255&d,Ie[1]=d>>>8&255,n.check=b(n.check,Ie,2,0)),d=0,p=0,n.mode=U;case U:if(1024&n.flags){for(;16>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(Ie[0]=255&d,Ie[1]=d>>>8&255,n.check=b(n.check,Ie,2,0)),d=0,p=0}else n.head&&(n.head.extra=null);n.mode=F;case F:if(1024&n.flags&&(m=n.length,m>c&&(m=c),m&&(n.head&&(Ce=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),v.arraySet(n.head.extra,i,a,m,Ce)),512&n.flags&&(n.check=b(n.check,i,m,a)),c-=m,a+=m,n.length-=m),n.length))break e;n.length=0,n.mode=V;case V:if(2048&n.flags){if(0===c)break e;m=0;do Ce=i[a+m++],n.head&&Ce&&n.length<65536&&(n.head.name+=String.fromCharCode(Ce));while(Ce&&c>m);if(512&n.flags&&(n.check=b(n.check,i,m,a)),c-=m,a+=m,Ce)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=z;case z:if(4096&n.flags){if(0===c)break e;m=0;do Ce=i[a+m++],n.head&&Ce&&n.length<65536&&(n.head.comment+=String.fromCharCode(Ce));while(Ce&&c>m);if(512&n.flags&&(n.check=b(n.check,i,m,a)),c-=m,a+=m,Ce)break e}else n.head&&(n.head.comment=null);n.mode=q;case q:if(512&n.flags){for(;16>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}if(d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=fe;break}d=0,p=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=K;break;case H:for(;32>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}e.adler=n.check=r(d),d=0,p=0,n.mode=G;case G:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=c,n.hold=d,n.bits=p,B;e.adler=n.check=1,n.mode=K;case K:if(t===A||t===I)break e;case W:if(n.last){d>>>=7&p,p-=7&p,n.mode=ce;break}for(;3>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}switch(n.last=1&d,d>>>=1,p-=1,3&d){case 0:n.mode=Y;break;case 1:if(l(n),n.mode=te,t===I){d>>>=2,p-=2;break e}break;case 2:n.mode=Q;break;case 3:e.msg="invalid block type",n.mode=fe}d>>>=2,p-=2;break;case Y:for(d>>>=7&p,p-=7&p;32>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=fe;break}if(n.length=65535&d,d=0,p=0,n.mode=X,t===I)break e;case X:n.mode=Z;case Z:if(m=n.length){if(m>c&&(m=c),m>u&&(m=u),0===m)break e;v.arraySet(o,i,a,m,s),c-=m,a+=m,u-=m,s+=m,n.length-=m;break}n.mode=K;break;case Q:for(;14>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}if(n.nlen=(31&d)+257,d>>>=5,p-=5,n.ndist=(31&d)+1,d>>>=5,p-=5,n.ncode=(15&d)+4,d>>>=4,p-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=fe;break}n.have=0,n.mode=J;case J:for(;n.have<n.ncode;){for(;3>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}n.lens[ke[n.have++]]=7&d,d>>>=3,p-=3}for(;n.have<19;)n.lens[ke[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ee={bits:n.lenbits},_e=S(C,n.lens,0,19,n.lencode,0,n.work,Ee),n.lenbits=Ee.bits,_e){e.msg="invalid code lengths set",n.mode=fe;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.nlen+n.ndist;){for(;Ae=n.lencode[d&(1<<n.lenbits)-1],me=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(p>=me);){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}if(16>ye)d>>>=me,p-=me,n.lens[n.have++]=ye;else{if(16===ye){for(Te=me+2;Te>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}if(d>>>=me,p-=me,0===n.have){e.msg="invalid bit length repeat",n.mode=fe;break}Ce=n.lens[n.have-1],m=3+(3&d),d>>>=2,p-=2}else if(17===ye){for(Te=me+3;Te>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}d>>>=me,p-=me,Ce=0,m=3+(7&d),d>>>=3,p-=3}else{for(Te=me+7;Te>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}d>>>=me,p-=me,Ce=0,m=11+(127&d),d>>>=7,p-=7}if(n.have+m>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=fe;break}for(;m--;)n.lens[n.have++]=Ce}}if(n.mode===fe)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=fe;break}if(n.lenbits=9,Ee={bits:n.lenbits},_e=S(_,n.lens,0,n.nlen,n.lencode,0,n.work,Ee),n.lenbits=Ee.bits,_e){e.msg="invalid literal/lengths set",n.mode=fe;break}if(n.distbits=6,n.distcode=n.distdyn,Ee={bits:n.distbits},_e=S(E,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ee),n.distbits=Ee.bits,_e){e.msg="invalid distances set",n.mode=fe;break}if(n.mode=te,t===I)break e;case te:n.mode=ne;case ne:if(c>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=c,n.hold=d,n.bits=p,w(e,g),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,c=e.avail_in,d=n.hold,p=n.bits,n.mode===K&&(n.back=-1);break}for(n.back=0;Ae=n.lencode[d&(1<<n.lenbits)-1],me=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(p>=me);){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}if(ve&&0===(240&ve)){for(be=me,we=ve,Se=ye;Ae=n.lencode[Se+((d&(1<<be+we)-1)>>be)],me=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(p>=be+me);){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}d>>>=be,p-=be,n.back+=be}if(d>>>=me,p-=me,n.back+=me,n.length=ye,0===ve){n.mode=se;break}if(32&ve){n.back=-1,n.mode=K;break}if(64&ve){e.msg="invalid literal/length code",n.mode=fe;break}n.extra=15&ve,n.mode=re;case re:if(n.extra){for(Te=n.extra;Te>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,p-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ie;case ie:for(;Ae=n.distcode[d&(1<<n.distbits)-1],me=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(p>=me);){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}if(0===(240&ve)){for(be=me,we=ve,Se=ye;Ae=n.distcode[Se+((d&(1<<be+we)-1)>>be)],me=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(p>=be+me);){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}d>>>=be,p-=be,n.back+=be}if(d>>>=me,p-=me,n.back+=me,64&ve){e.msg="invalid distance code",n.mode=fe;break}n.offset=ye,n.extra=15&ve,n.mode=oe;case oe:if(n.extra){for(Te=n.extra;Te>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,p-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=fe;break}n.mode=ae;case ae:if(0===u)break e;if(m=g-u,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=fe;break}m>n.wnext?(m-=n.wnext,he=n.wsize-m):he=n.wnext-m,m>n.length&&(m=n.length),ge=n.window}else ge=o,he=s-n.offset,m=n.length;m>u&&(m=u),u-=m,n.length-=m;do o[s++]=ge[he++];while(--m);0===n.length&&(n.mode=ne);break;case se:if(0===u)break e;o[s++]=n.length,u--,n.mode=ne;break;case ce:if(n.wrap){for(;32>p;){if(0===c)break e;c--,d|=i[a++]<<p,p+=8}if(g-=u,e.total_out+=g,n.total+=g,g&&(e.adler=n.check=n.flags?b(n.check,o,g,s-g):y(n.check,o,g,s-g)),g=u,(n.flags?d:r(d))!==n.check){e.msg="incorrect data check",n.mode=fe;break}d=0,p=0}n.mode=ue;case ue:if(n.wrap&&n.flags){for(;32>p;){if(0===c)break e;c--,d+=i[a++]<<p,p+=8}if(d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=fe;break}d=0,p=0}n.mode=le;case le:_e=x;break e;case fe:_e=D;break e;case de:return R;case pe:default:return N}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=c,n.hold=d,n.bits=p,(n.wsize||g!==e.avail_out&&n.mode<fe&&(n.mode<ce||t!==T))&&f(e,e.output,e.next_out,g-e.avail_out)?(n.mode=de,R):(h-=e.avail_in,g-=e.avail_out,e.total_in+=h,e.total_out+=g,n.total+=g,n.wrap&&g&&(e.adler=n.check=n.flags?b(n.check,o,g,e.next_out-g):y(n.check,o,g,e.next_out-g)),e.data_type=n.bits+(n.last?64:0)+(n.mode===K?128:0)+(n.mode===te||n.mode===X?256:0),(0===h&&0===g||t===T)&&_e===k&&(_e=j),_e)}function p(e){if(!e||!e.state)return N;var t=e.state;return t.window&&(t.window=null),e.state=null,k}function h(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?N:(n.head=t,t.done=!1,k)):N}var g,m,v=e("npm:pako@0.2.7/lib/utils/common"),y=e("npm:pako@0.2.7/lib/zlib/adler32"),b=e("npm:pako@0.2.7/lib/zlib/crc32"),w=e("npm:pako@0.2.7/lib/zlib/inffast"),S=e("npm:pako@0.2.7/lib/zlib/inftrees"),C=0,_=1,E=2,T=4,A=5,I=6,k=0,x=1,B=2,N=-2,D=-3,R=-4,j=-5,$=8,L=1,M=2,O=3,P=4,U=5,F=6,V=7,z=8,q=9,H=10,G=11,K=12,W=13,Y=14,X=15,Z=16,Q=17,J=18,ee=19,te=20,ne=21,re=22,ie=23,oe=24,ae=25,se=26,ce=27,ue=28,le=29,fe=30,de=31,pe=32,he=852,ge=592,me=15,ve=me,ye=!0;t.inflateReset=a,t.inflateReset2=s,t.inflateResetKeep=o,t.inflateInit=u,t.inflateInit2=c,t.inflate=d,t.inflateEnd=p,t.inflateGetHeader=h,t.inflateInfo="pako inflate (from Nodeca project)"}(e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:readable-stream@1.1.13/lib/_stream_readable",["npm:isarray@0.0.1","github:jspm/nodelibs-buffer@0.1.0","github:jspm/nodelibs-events@0.1.1","npm:stream-browserify@1.0.0/index","npm:core-util-is@1.0.1","npm:inherits@2.0.1","@empty","npm:readable-stream@1.1.13/lib/_stream_duplex","npm:string_decoder@0.10.31","npm:readable-stream@1.1.13/lib/_stream_duplex","npm:string_decoder@0.10.31","github:jspm/nodelibs-buffer@0.1.0","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(t,r){function i(t,n){var r=e("npm:readable-stream@1.1.13/lib/_stream_duplex");t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(k||(k=e("npm:string_decoder@0.10.31").StringDecoder),this.decoder=new k(t.encoding),this.encoding=t.encoding)}function o(t){e("npm:readable-stream@1.1.13/lib/_stream_duplex");return this instanceof o?(this._readableState=new i(t,this),this.readable=!0,void A.call(this)):new o(t)}function a(e,t,n,r,i){var o=l(t,n);if(o)e.emit("error",o);else if(I.isNullOrUndefined(n))t.reading=!1,t.ended||f(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&d(e)),h(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function c(e){if(e>=B)e=B;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||I.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=c(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function l(e,t){var n=null;return I.isBuffer(t)||I.isString(t)||I.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,d(e)}function d(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(x("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(function(){p(e)}):p(e))}function p(e){x("emit readable"),e.emit("readable"),b(e)}function h(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){g(e,t)}))}function g(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(x("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function m(e){return function(){var t=e._readableState;x("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&T.listenerCount(e,"data")&&(t.flowing=!0,b(e))}}function v(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(function(){y(e,t)}))}function y(e,t){t.resumeScheduled=!1,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;if(x("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function w(e,n){var r,i=n.buffer,o=n.length,a=!!n.decoder,s=!!n.objectMode;if(0===i.length)return null;if(0===o)r=null;else if(s)r=i.shift();else if(!e||e>=o)r=a?i.join(""):t.concat(i,o),i.length=0;else if(e<i[0].length){var c=i[0];r=c.slice(0,e),i[0]=c.slice(e)}else if(e===i[0].length)r=i.shift();else{r=a?"":new t(e);for(var u=0,l=0,f=i.length;f>l&&e>u;l++){var c=i[0],d=Math.min(e-u,c.length);a?r+=c.slice(0,d):c.copy(r,u,0,d),d<c.length?i[0]=c.slice(d):i.shift(),u+=d}}return r}function S(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function C(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function _(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}n.exports=o;var E=e("npm:isarray@0.0.1"),t=e("github:jspm/nodelibs-buffer@0.1.0").Buffer;o.ReadableState=i;var T=e("github:jspm/nodelibs-events@0.1.1").EventEmitter;T.listenerCount||(T.listenerCount=function(e,t){return e.listeners(t).length});var A=e("npm:stream-browserify@1.0.0/index"),I=e("npm:core-util-is@1.0.1");I.inherits=e("npm:inherits@2.0.1");var k,x=e("@empty");x=x&&x.debuglog?x.debuglog("stream"):function(){},I.inherits(o,A),o.prototype.push=function(e,n){var r=this._readableState;return I.isString(e)&&!r.objectMode&&(n=n||r.defaultEncoding,n!==r.encoding&&(e=new t(e,n),n="")),a(this,r,e,n,!1)},o.prototype.unshift=function(e){var t=this._readableState;return a(this,t,e,"",!0)},o.prototype.setEncoding=function(t){return k||(k=e("npm:string_decoder@0.10.31").StringDecoder),this._readableState.decoder=new k(t),this._readableState.encoding=t,this};var B=8388608;o.prototype.read=function(e){x("read",e);var t=this._readableState,n=e;if((!I.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return x("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?S(this):d(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&S(this),null;var r=t.needReadable;x("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,x("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,x("reading or ended",r)),r&&(x("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=u(n,t));var i;return i=e>0?w(e,t):null,I.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&S(this),I.isNull(i)||this.emit("data",i),i},o.prototype._read=function(e){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(e,t){function n(e){x("onunpipe"),e===f&&o()}function i(){x("onend"),e.end()}function o(){x("cleanup"),e.removeListener("close",c),e.removeListener("finish",u),e.removeListener("drain",g),e.removeListener("error",s),e.removeListener("unpipe",n),f.removeListener("end",i),f.removeListener("end",o),f.removeListener("data",a),!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function a(t){x("ondata");var n=e.write(t);!1===n&&(x("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,f.pause())}function s(t){x("onerror",t),l(),e.removeListener("error",s),0===T.listenerCount(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",u),l()}function u(){x("onfinish"),e.removeListener("close",c),l()}function l(){x("unpipe"),f.unpipe(e)}var f=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,x("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,h=p?i:o;d.endEmitted?r.nextTick(h):f.once("end",h),e.on("unpipe",n);var g=m(f);return e.on("drain",g),f.on("data",a),e._events&&e._events.error?E(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",c),e.once("finish",u),e.emit("pipe",f),d.flowing||(x("pipe resume"),f.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=_(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var n=A.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&d(this,i);else{var o=this;r.nextTick(function(){x("readable nexttick read 0"),o.read(0)})}}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(x("resume"),e.flowing=!0,e.reading||(x("resume read 0"),this.read(0)),v(this,e)),this},o.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(x("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(x("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)I.isFunction(e[i])&&I.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return C(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){x("wrapped _read",t),n&&(n=!1,e.resume())},r},o._fromList=w}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer,e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:readable-stream@1.1.13/lib/_stream_writable",["github:jspm/nodelibs-buffer@0.1.0","npm:core-util-is@1.0.1","npm:inherits@2.0.1","npm:stream-browserify@1.0.0/index","npm:readable-stream@1.1.13/lib/_stream_duplex","npm:readable-stream@1.1.13/lib/_stream_duplex","github:jspm/nodelibs-buffer@0.1.0","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(t,r){function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function o(t,n){var r=e("npm:readable-stream@1.1.13/lib/_stream_duplex");t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=t.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){h(n,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function a(t){var n=e("npm:readable-stream@1.1.13/lib/_stream_duplex");return this instanceof a||this instanceof n?(this._writableState=new o(t,this),this.writable=!0,void _.call(this)):new a(t)}function s(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}function c(e,t,n,i){var o=!0;if(!(C.isBuffer(n)||C.isString(n)||C.isNullOrUndefined(n)||t.objectMode)){var a=new TypeError("Invalid non-string/buffer chunk");e.emit("error",a),r.nextTick(function(){i(a)}),o=!1}return o}function u(e,n,r){return!e.objectMode&&e.decodeStrings!==!1&&C.isString(n)&&(n=new t(n,r)),n}function l(e,t,n,r,o){n=u(t,n,r),C.isBuffer(n)&&(r="buffer");var a=t.objectMode?1:n.length;t.length+=a;var s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new i(n,r,o)):f(e,t,!1,a,n,r,o),s}function f(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function d(e,t,n,i,o){n?r.nextTick(function(){t.pendingcb--,o(i)}):(t.pendingcb--,o(i)),e._writableState.errorEmitted=!0,e.emit("error",i)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function h(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(p(n),t)d(e,n,i,t,o);else{var a=y(e,n);a||n.corked||n.bufferProcessing||!n.buffer.length||v(e,n),i?r.nextTick(function(){g(e,n,a,o)}):g(e,n,a,o)}}function g(e,t,n,r){n||m(e,t),t.pendingcb--,r(),w(e,t)}function m(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function v(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],r=0;r<t.buffer.length;r++)n.push(t.buffer[r].callback);t.pendingcb++,f(e,t,!0,t.length,t.buffer,"",function(e){for(var r=0;r<n.length;r++)t.pendingcb--,n[r](e)}),t.buffer=[]}else{for(var r=0;r<t.buffer.length;r++){var i=t.buffer[r],o=i.chunk,a=i.encoding,s=i.callback,c=t.objectMode?1:o.length;if(f(e,t,!1,c,o,a,s),t.writing){r++;break}}r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}t.bufferProcessing=!1}function y(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var n=y(e,t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function S(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}n.exports=a;var t=e("github:jspm/nodelibs-buffer@0.1.0").Buffer;a.WritableState=o;var C=e("npm:core-util-is@1.0.1");C.inherits=e("npm:inherits@2.0.1");var _=e("npm:stream-browserify@1.0.0/index");C.inherits(a,_),a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},a.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return C.isFunction(t)&&(n=t,t=null),C.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),C.isFunction(n)||(n=function(){}),r.ended?s(this,r,n):c(this,r,e,n)&&(r.pendingcb++,i=l(this,r,e,t,n)),i},a.prototype.cork=function(){var e=this._writableState;e.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||v(this,e))},a.prototype._write=function(e,t,n){n(new Error("not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,n){var r=this._writableState;C.isFunction(e)?(n=e,e=null,t=null):C.isFunction(t)&&(n=t,t=null),C.isNullOrUndefined(e)||this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||S(this,r,n)}}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer,e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/zlib/deflate",["npm:pako@0.2.7/lib/utils/common","npm:pako@0.2.7/lib/zlib/trees","npm:pako@0.2.7/lib/zlib/adler32","npm:pako@0.2.7/lib/zlib/crc32","npm:pako@0.2.7/lib/zlib/messages","github:jspm/nodelibs-buffer@0.1.0"],!0,function(e,t,n){
var r=this,i=r.define;return r.define=void 0,function(n){"use strict";function r(e,t){return e.msg=D[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(k.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){x._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function c(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function l(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,k.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=B(e.adler,t,i,n):2===e.state.wrap&&(e.adler=N(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function f(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-ue?e.strstart-(e.w_size-ue):0,u=e.window,l=e.w_mask,f=e.prev,d=e.strstart+ce,p=u[o+a-1],h=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(n=t,u[n+a]===h&&u[n+a-1]===p&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do;while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&d>o);if(r=ce-(d-o),o=d-ce,r>a){if(e.match_start=t,a=r,r>=s)break;p=u[o+a-1],h=u[o+a]}}while((t=f[t&l])>c&&0!==--i);return a<=e.lookahead?a:e.lookahead}function d(e){var t,n,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-ue)){k.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,n=e.hash_size,t=n;do r=e.head[--t],e.head[t]=r>=a?r-a:0;while(--n);n=a,t=n;do r=e.prev[--t],e.prev[t]=r>=a?r-a:0;while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=l(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=se)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+se-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<se)););}while(e.lookahead<ue&&0!==e.strm.avail_in)}function p(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===R)return ye;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return ye;if(e.strstart-e.block_start>=e.w_size-ue&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===L?(s(e,!0),0===e.strm.avail_out?we:Se):e.strstart>e.block_start&&(s(e,!1),0===e.strm.avail_out)?ye:ye}function h(e,t){for(var n,r;;){if(e.lookahead<ue){if(d(e),e.lookahead<ue&&t===R)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ue&&(e.match_length=f(e,n)),e.match_length>=se)if(r=x._tr_tally(e,e.strstart-e.match_start,e.match_length-se),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=e.strstart<se-1?e.strstart:se-1,t===L?(s(e,!0),0===e.strm.avail_out?we:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:be}function g(e,t){for(var n,r,i;;){if(e.lookahead<ue){if(d(e),e.lookahead<ue&&t===R)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=se-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ue&&(e.match_length=f(e,n),e.match_length<=5&&(e.strategy===q||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),e.prev_length>=se&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-se,r=x._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-se),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=se-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return ye}else if(e.match_available){if(r=x._tr_tally(e,0,e.window[e.strstart-1]),r&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ye}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=x._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===L?(s(e,!0),0===e.strm.avail_out?we:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:be}function m(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=ce){if(d(e),e.lookahead<=ce&&t===R)return ye;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=se&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+ce;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&o>i);e.match_length=ce-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=se?(n=x._tr_tally(e,1,e.match_length-se),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===L?(s(e,!0),0===e.strm.avail_out?we:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:be}function v(e,t){for(var n;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===R)return ye;break}if(e.match_length=0,n=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===L?(s(e,!0),0===e.strm.avail_out?we:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:be}function y(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=I[e.level].max_lazy,e.good_match=I[e.level].good_length,e.nice_match=I[e.level].nice_length,e.max_chain_length=I[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,e.match_available=0,e.ins_h=0}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new k.Buf16(2*oe),this.dyn_dtree=new k.Buf16(2*(2*re+1)),this.bl_tree=new k.Buf16(2*(2*ie+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new k.Buf16(ae+1),this.heap=new k.Buf16(2*ne+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new k.Buf16(2*ne+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Y,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?fe:me,e.adler=2===t.wrap?0:1,t.last_flush=R,x._tr_init(t),O):r(e,U)}function S(e){var t=w(e);return t===O&&y(e.state),t}function C(e,t){return e&&e.state?2!==e.state.wrap?U:(e.state.gzhead=t,O):U}function _(e,t,n,i,o,a){if(!e)return U;var s=1;if(t===z&&(t=6),0>i?(s=0,i=-i):i>15&&(s=2,i-=16),1>o||o>Z||n!==X||8>i||i>15||0>t||t>9||0>a||a>K)return r(e,U);8===i&&(i=9);var c=new b;return e.state=c,c.strm=e,c.wrap=s,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+se-1)/se),c.window=new k.Buf8(2*c.w_size),c.head=new k.Buf16(c.hash_size),c.prev=new k.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new k.Buf8(c.pending_buf_size),c.d_buf=c.lit_bufsize>>1,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=n,S(e)}function E(e,t){return _(e,t,X,Q,J,W)}function T(e,t){var n,s,l,f;if(!e||!e.state||t>M||0>t)return e?r(e,U):U;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===ve&&t!==L)return r(e,0===e.avail_out?V:U);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===fe)if(2===s.wrap)e.adler=0,c(s,31),c(s,139),c(s,8),s.gzhead?(c(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),c(s,255&s.gzhead.time),c(s,s.gzhead.time>>8&255),c(s,s.gzhead.time>>16&255),c(s,s.gzhead.time>>24&255),c(s,9===s.level?2:s.strategy>=H||s.level<2?4:0),c(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(c(s,255&s.gzhead.extra.length),c(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=N(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=de):(c(s,0),c(s,0),c(s,0),c(s,0),c(s,0),c(s,9===s.level?2:s.strategy>=H||s.level<2?4:0),c(s,Ce),s.status=me);else{var d=X+(s.w_bits-8<<4)<<8,p=-1;p=s.strategy>=H||s.level<2?0:s.level<6?1:6===s.level?2:3,d|=p<<6,0!==s.strstart&&(d|=le),d+=31-d%31,s.status=me,u(s,d),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===de)if(s.gzhead.extra){for(l=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>l&&(e.adler=N(e.adler,s.pending_buf,s.pending-l,l)),a(e),l=s.pending,s.pending!==s.pending_buf_size));)c(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>l&&(e.adler=N(e.adler,s.pending_buf,s.pending-l,l)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=pe)}else s.status=pe;if(s.status===pe)if(s.gzhead.name){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(e.adler=N(e.adler,s.pending_buf,s.pending-l,l)),a(e),l=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,c(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>l&&(e.adler=N(e.adler,s.pending_buf,s.pending-l,l)),0===f&&(s.gzindex=0,s.status=he)}else s.status=he;if(s.status===he)if(s.gzhead.comment){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(e.adler=N(e.adler,s.pending_buf,s.pending-l,l)),a(e),l=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,c(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>l&&(e.adler=N(e.adler,s.pending_buf,s.pending-l,l)),0===f&&(s.status=ge)}else s.status=ge;if(s.status===ge&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(c(s,255&e.adler),c(s,e.adler>>8&255),e.adler=0,s.status=me)):s.status=me),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,O}else if(0===e.avail_in&&i(t)<=i(n)&&t!==L)return r(e,V);if(s.status===ve&&0!==e.avail_in)return r(e,V);if(0!==e.avail_in||0!==s.lookahead||t!==R&&s.status!==ve){var h=s.strategy===H?v(s,t):s.strategy===G?m(s,t):I[s.level].func(s,t);if((h===we||h===Se)&&(s.status=ve),h===ye||h===we)return 0===e.avail_out&&(s.last_flush=-1),O;if(h===be&&(t===j?x._tr_align(s):t!==M&&(x._tr_stored_block(s,0,0,!1),t===$&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,O}return t!==L?O:s.wrap<=0?P:(2===s.wrap?(c(s,255&e.adler),c(s,e.adler>>8&255),c(s,e.adler>>16&255),c(s,e.adler>>24&255),c(s,255&e.total_in),c(s,e.total_in>>8&255),c(s,e.total_in>>16&255),c(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?O:P)}function A(e){var t;return e&&e.state?(t=e.state.status,t!==fe&&t!==de&&t!==pe&&t!==he&&t!==ge&&t!==me&&t!==ve?r(e,U):(e.state=null,t===me?r(e,F):O)):U}var I,k=e("npm:pako@0.2.7/lib/utils/common"),x=e("npm:pako@0.2.7/lib/zlib/trees"),B=e("npm:pako@0.2.7/lib/zlib/adler32"),N=e("npm:pako@0.2.7/lib/zlib/crc32"),D=e("npm:pako@0.2.7/lib/zlib/messages"),R=0,j=1,$=3,L=4,M=5,O=0,P=1,U=-2,F=-3,V=-5,z=-1,q=1,H=2,G=3,K=4,W=0,Y=2,X=8,Z=9,Q=15,J=8,ee=29,te=256,ne=te+1+ee,re=30,ie=19,oe=2*ne+1,ae=15,se=3,ce=258,ue=ce+se+1,le=32,fe=42,de=69,pe=73,he=91,ge=103,me=113,ve=666,ye=1,be=2,we=3,Se=4,Ce=3,_e=function(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i};I=[new _e(0,0,0,0,p),new _e(4,4,8,4,h),new _e(4,5,16,8,h),new _e(4,6,32,32,h),new _e(4,4,16,16,g),new _e(8,16,32,32,g),new _e(8,16,128,128,g),new _e(8,32,128,256,g),new _e(32,128,258,1024,g),new _e(32,258,258,4096,g)],t.deflateInit=E,t.deflateInit2=_,t.deflateReset=S,t.deflateResetKeep=w,t.deflateSetHeader=C,t.deflate=T,t.deflateEnd=A,t.deflateInfo="pako deflate (from Nodeca project)"}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer),r.define=i,n.exports}),System.registerDynamic("npm:readable-stream@1.1.13/lib/_stream_passthrough",["npm:readable-stream@1.1.13/lib/_stream_transform","npm:core-util-is@1.0.1","npm:inherits@2.0.1"],!0,function(e,t,n){function r(e){return this instanceof r?void a.call(this,e):new r(e)}var i=this,o=i.define;i.define=void 0,n.exports=r;var a=e("npm:readable-stream@1.1.13/lib/_stream_transform"),s=e("npm:core-util-is@1.0.1");return s.inherits=e("npm:inherits@2.0.1"),s.inherits(r,a),r.prototype._transform=function(e,t,n){n(null,e)},i.define=o,n.exports}),System.registerDynamic("npm:readable-stream@1.1.13/lib/_stream_transform",["npm:readable-stream@1.1.13/lib/_stream_duplex","npm:core-util-is@1.0.1","npm:inherits@2.0.1","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(t){function r(e,t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,c.isNullOrUndefined(n)||e.push(n),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new r(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){c.isFunction(this._flush)?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}n.exports=o;var s=e("npm:readable-stream@1.1.13/lib/_stream_duplex"),c=e("npm:core-util-is@1.0.1");c.inherits=e("npm:inherits@2.0.1"),c.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;c.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}}(e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:base64-js@0.0.8",["npm:base64-js@0.0.8/lib/b64"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:base64-js@0.0.8/lib/b64"),r.define=i,n.exports}),System.registerDynamic("npm:ieee754@1.1.6",["npm:ieee754@1.1.6/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:ieee754@1.1.6/index"),r.define=i,n.exports}),System.registerDynamic("npm:is-array@1.0.1",["npm:is-array@1.0.1/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:is-array@1.0.1/index"),r.define=i,n.exports}),System.registerDynamic("npm:browserify-zlib@0.1.4/src/index",["npm:readable-stream@1.1.13/transform","npm:browserify-zlib@0.1.4/src/binding","github:jspm/nodelibs-util@0.1.0","github:jspm/nodelibs-assert@0.1.0","github:jspm/nodelibs-buffer@0.1.0","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(n,r){function i(e,t,r){function i(){for(var t;null!==(t=e.read());)s.push(t),c+=t.length;e.once("readable",i)}function o(t){e.removeListener("end",a),e.removeListener("readable",i),r(t)}function a(){var t=n.concat(s,c);s=[],r(null,t),e.close()}var s=[],c=0;e.on("error",o),e.on("end",a),e.end(t),i()}function o(e,t){if("string"==typeof t&&(t=new n(t)),!n.isBuffer(t))throw new TypeError("Not a string or buffer");var r=g.Z_FINISH;return e._processChunk(t,r)}function a(e){return this instanceof a?void p.call(this,e,g.DEFLATE):new a(e)}function s(e){return this instanceof s?void p.call(this,e,g.INFLATE):new s(e)}function c(e){return this instanceof c?void p.call(this,e,g.GZIP):new c(e)}function u(e){return this instanceof u?void p.call(this,e,g.GUNZIP):new u(e)}function l(e){return this instanceof l?void p.call(this,e,g.DEFLATERAW):new l(e)}function f(e){return this instanceof f?void p.call(this,e,g.INFLATERAW):new f(e)}function d(e){return this instanceof d?void p.call(this,e,g.UNZIP):new d(e)}function p(e,r){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,h.call(this,e),e.flush&&e.flush!==g.Z_NO_FLUSH&&e.flush!==g.Z_PARTIAL_FLUSH&&e.flush!==g.Z_SYNC_FLUSH&&e.flush!==g.Z_FULL_FLUSH&&e.flush!==g.Z_FINISH&&e.flush!==g.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||g.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!n.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new g.Zlib(r);var i=this;this._hadError=!1,this._binding.onerror=function(e,n){i._binding=null,i._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],i.emit("error",r)};var o=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(o=e.level);var a=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(a=e.strategy),this._binding.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,o,e.memLevel||t.Z_DEFAULT_MEMLEVEL,a,e.dictionary),this._buffer=new n(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=a,this.once("end",this.close)}var h=e("npm:readable-stream@1.1.13/transform"),g=e("npm:browserify-zlib@0.1.4/src/binding"),m=e("github:jspm/nodelibs-util@0.1.0"),v=e("github:jspm/nodelibs-assert@0.1.0").ok;g.Z_MIN_WINDOWBITS=8,g.Z_MAX_WINDOWBITS=15,g.Z_DEFAULT_WINDOWBITS=15,g.Z_MIN_CHUNK=64,g.Z_MAX_CHUNK=1/0,g.Z_DEFAULT_CHUNK=16384,g.Z_MIN_MEMLEVEL=1,g.Z_MAX_MEMLEVEL=9,g.Z_DEFAULT_MEMLEVEL=8,g.Z_MIN_LEVEL=-1,g.Z_MAX_LEVEL=9,g.Z_DEFAULT_LEVEL=g.Z_DEFAULT_COMPRESSION,Object.keys(g).forEach(function(e){e.match(/^Z/)&&(t[e]=g[e])}),t.codes={Z_OK:g.Z_OK,Z_STREAM_END:g.Z_STREAM_END,Z_NEED_DICT:g.Z_NEED_DICT,Z_ERRNO:g.Z_ERRNO,Z_STREAM_ERROR:g.Z_STREAM_ERROR,Z_DATA_ERROR:g.Z_DATA_ERROR,Z_MEM_ERROR:g.Z_MEM_ERROR,Z_BUF_ERROR:g.Z_BUF_ERROR,Z_VERSION_ERROR:g.Z_VERSION_ERROR},Object.keys(t.codes).forEach(function(e){t.codes[t.codes[e]]=e}),t.Deflate=a,t.Inflate=s,t.Gzip=c,t.Gunzip=u,t.DeflateRaw=l,t.InflateRaw=f,t.Unzip=d,t.createDeflate=function(e){return new a(e)},t.createInflate=function(e){return new s(e)},t.createDeflateRaw=function(e){return new l(e)},t.createInflateRaw=function(e){return new f(e)},t.createGzip=function(e){return new c(e)},t.createGunzip=function(e){return new u(e)},t.createUnzip=function(e){return new d(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new a(t),e,n)},t.deflateSync=function(e,t){return o(new a(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new c(t),e,n)},t.gzipSync=function(e,t){return o(new c(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new l(t),e,n)},t.deflateRawSync=function(e,t){return o(new l(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new d(t),e,n)},t.unzipSync=function(e,t){return o(new d(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new s(t),e,n)},t.inflateSync=function(e,t){return o(new s(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new u(t),e,n)},t.gunzipSync=function(e,t){return o(new u(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new f(t),e,n)},t.inflateRawSync=function(e,t){return o(new f(t),e)},m.inherits(p,h),p.prototype.params=function(e,n,i){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=t.Z_FILTERED&&n!=t.Z_HUFFMAN_ONLY&&n!=t.Z_RLE&&n!=t.Z_FIXED&&n!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var o=this;this.flush(g.Z_SYNC_FLUSH,function(){o._binding.params(e,n),o._hadError||(o._level=e,o._strategy=n,i&&i())})}else r.nextTick(i)},p.prototype.reset=function(){return this._binding.reset()},p.prototype._flush=function(e){this._transform(new n(0),"",e)},p.prototype.flush=function(e,t){var i=this._writableState;if(("function"==typeof e||void 0===e&&!t)&&(t=e,e=g.Z_FULL_FLUSH),i.ended)t&&r.nextTick(t);else if(i.ending)t&&this.once("end",t);else if(i.needDrain){var o=this;this.once("drain",function(){o.flush(t)})}else this._flushFlag=e,this.write(new n(0),"",t)},p.prototype.close=function(e){if(e&&r.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;r.nextTick(function(){t.emit("close")})}},p.prototype._transform=function(e,t,r){var i,o=this._writableState,a=o.ending||o.ended,s=a&&(!e||o.length===e.length);if(null===!e&&!n.isBuffer(e))return r(new Error("invalid input"));s?i=g.Z_FINISH:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||g.Z_NO_FLUSH));this._processChunk(e,i,r)},p.prototype._processChunk=function(e,t,r){function i(l,p){if(!c._hadError){var h=a-p;if(v(h>=0,"have should not go down"),h>0){var g=c._buffer.slice(c._offset,c._offset+h);c._offset+=h,u?c.push(g):(f.push(g),d+=g.length)}if((0===p||c._offset>=c._chunkSize)&&(a=c._chunkSize,c._offset=0,c._buffer=new n(c._chunkSize)),0===p){if(s+=o-l,o=l,!u)return!0;var m=c._binding.write(t,e,s,o,c._buffer,c._offset,c._chunkSize);return m.callback=i,void(m.buffer=e)}return u?void r():!1}}var o=e&&e.length,a=this._chunkSize-this._offset,s=0,c=this,u="function"==typeof r;if(!u){var l,f=[],d=0;this.on("error",function(e){l=e});do var p=this._binding.writeSync(t,e,s,o,this._buffer,this._offset,a);while(!this._hadError&&i(p[0],p[1]));if(this._hadError)throw l;var h=n.concat(f,d);return this.close(),h}var g=this._binding.write(t,e,s,o,this._buffer,this._offset,a);g.buffer=e,g.callback=i},m.inherits(a,p),m.inherits(s,p),m.inherits(c,p),m.inherits(u,p),m.inherits(l,p),m.inherits(f,p),m.inherits(d,p)}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer,e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:events@1.0.2",["npm:events@1.0.2/events"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:events@1.0.2/events"),r.define=i,n.exports}),System.registerDynamic("npm:core-util-is@1.0.1",["npm:core-util-is@1.0.1/lib/util"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:core-util-is@1.0.1/lib/util"),r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/zlib/adler32",[],!0,function(e,t,n){function r(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}var i=this,o=i.define;return i.define=void 0,n.exports=r,i.define=o,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/zlib/crc32",[],!0,function(e,t,n){function r(){for(var e,t=[],n=0;256>n;n++){e=n;for(var r=0;8>r;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function i(e,t,n,r){var i=s,o=r+n;e=-1^e;for(var a=r;o>a;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}var o=this,a=o.define;o.define=void 0;var s=r();return n.exports=i,o.define=a,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/zlib/inffast",[],!0,function(e,t,n){var r=this,i=r.define;r.define=void 0;var o=30,a=12;return n.exports=function(e,t){var n,r,i,s,c,u,l,f,d,p,h,g,m,v,y,b,w,S,C,_,E,T,A,I,k;n=e.state,r=e.next_in,I=e.input,i=r+(e.avail_in-5),s=e.next_out,k=e.output,c=s-(t-e.avail_out),u=s+(e.avail_out-257),l=n.dmax,f=n.wsize,d=n.whave,p=n.wnext,h=n.window,g=n.hold,m=n.bits,v=n.lencode,y=n.distcode,b=(1<<n.lenbits)-1,w=(1<<n.distbits)-1;e:do{15>m&&(g+=I[r++]<<m,m+=8,g+=I[r++]<<m,m+=8),S=v[g&b];t:for(;;){if(C=S>>>24,g>>>=C,m-=C,C=S>>>16&255,0===C)k[s++]=65535&S;else{if(!(16&C)){if(0===(64&C)){S=v[(65535&S)+(g&(1<<C)-1)];continue t}if(32&C){n.mode=a;break e}e.msg="invalid literal/length code",n.mode=o;break e}_=65535&S,C&=15,C&&(C>m&&(g+=I[r++]<<m,m+=8),_+=g&(1<<C)-1,g>>>=C,m-=C),15>m&&(g+=I[r++]<<m,m+=8,g+=I[r++]<<m,m+=8),S=y[g&w];n:for(;;){if(C=S>>>24,g>>>=C,m-=C,C=S>>>16&255,!(16&C)){if(0===(64&C)){S=y[(65535&S)+(g&(1<<C)-1)];continue n}e.msg="invalid distance code",n.mode=o;break e}if(E=65535&S,C&=15,C>m&&(g+=I[r++]<<m,m+=8,C>m&&(g+=I[r++]<<m,m+=8)),E+=g&(1<<C)-1,E>l){e.msg="invalid distance too far back",n.mode=o;break e}if(g>>>=C,m-=C,C=s-c,E>C){if(C=E-C,C>d&&n.sane){e.msg="invalid distance too far back",n.mode=o;break e}if(T=0,A=h,0===p){if(T+=f-C,_>C){_-=C;do k[s++]=h[T++];while(--C);T=s-E,A=k}}else if(C>p){if(T+=f+p-C,C-=p,_>C){_-=C;do k[s++]=h[T++];while(--C);if(T=0,_>p){C=p,_-=C;do k[s++]=h[T++];while(--C);T=s-E,A=k}}}else if(T+=p-C,_>C){_-=C;do k[s++]=h[T++];while(--C);T=s-E,A=k}for(;_>2;)k[s++]=A[T++],k[s++]=A[T++],k[s++]=A[T++],_-=3;_&&(k[s++]=A[T++],_>1&&(k[s++]=A[T++]))}else{T=s-E;do k[s++]=k[T++],k[s++]=k[T++],k[s++]=k[T++],_-=3;while(_>2);_&&(k[s++]=k[T++],_>1&&(k[s++]=k[T++]))}break}}break}}while(i>r&&u>s);_=m>>3,r-=_,m-=_<<3,g&=(1<<m)-1,e.next_in=r,e.next_out=s,e.avail_in=i>r?5+(i-r):5-(r-i),e.avail_out=u>s?257+(u-s):257-(s-u),n.hold=g,n.bits=m},r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/zlib/inftrees",["npm:pako@0.2.7/lib/utils/common","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(t){"use strict";var r=e("npm:pako@0.2.7/lib/utils/common"),i=15,o=852,a=592,s=0,c=1,u=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(e,t,n,h,g,m,v,y){var b,w,S,C,_,E,T,A,I,k=y.bits,x=0,B=0,N=0,D=0,R=0,j=0,$=0,L=0,M=0,O=0,P=null,U=0,F=new r.Buf16(i+1),V=new r.Buf16(i+1),z=null,q=0;for(x=0;i>=x;x++)F[x]=0;for(B=0;h>B;B++)F[t[n+B]]++;for(R=k,D=i;D>=1&&0===F[D];D--);if(R>D&&(R=D),0===D)return g[m++]=20971520,g[m++]=20971520,y.bits=1,0;for(N=1;D>N&&0===F[N];N++);for(N>R&&(R=N),L=1,x=1;i>=x;x++)if(L<<=1,L-=F[x],0>L)return-1;if(L>0&&(e===s||1!==D))return-1;for(V[1]=0,x=1;i>x;x++)V[x+1]=V[x]+F[x];for(B=0;h>B;B++)0!==t[n+B]&&(v[V[t[n+B]]++]=B);if(e===s?(P=z=v,E=19):e===c?(P=l,U-=257,z=f,q-=257,E=256):(P=d,z=p,E=-1),O=0,B=0,x=N,_=m,j=R,$=0,S=-1,M=1<<R,C=M-1,e===c&&M>o||e===u&&M>a)return 1;for(var H=0;;){H++,T=x-$,v[B]<E?(A=0,I=v[B]):v[B]>E?(A=z[q+v[B]],I=P[U+v[B]]):(A=96,I=0),b=1<<x-$,w=1<<j,N=w;do w-=b,g[_+(O>>$)+w]=T<<24|A<<16|I|0;while(0!==w);for(b=1<<x-1;O&b;)b>>=1;if(0!==b?(O&=b-1,O+=b):O=0,B++,0===--F[x]){if(x===D)break;x=t[n+v[B]]}if(x>R&&(O&C)!==S){for(0===$&&($=R),_+=N,j=x-$,L=1<<j;D>j+$&&(L-=F[j+$],!(0>=L));)j++,L<<=1;if(M+=1<<j,e===c&&M>o||e===u&&M>a)return 1;S=O&C,g[S]=R<<24|j<<16|_-m|0}}return 0!==O&&(g[_+O]=x-$<<24|64<<16|0),y.bits=R,0}}(e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:isarray@0.0.1",["npm:isarray@0.0.1/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:isarray@0.0.1/index"),r.define=i,n.exports}),System.registerDynamic("npm:string_decoder@0.10.31",["npm:string_decoder@0.10.31/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:string_decoder@0.10.31/index"),r.define=i,n.exports}),System.registerDynamic("npm:pako@0.2.7/lib/zlib/trees",["npm:pako@0.2.7/lib/utils/common","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e){return 256>e?ae[e]:ae[256+(e>>>7)]}function o(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function a(e,t,n){e.bi_valid>K-n?(e.bi_buf|=t<<e.bi_valid&65535,o(e,e.bi_buf),e.bi_buf=t>>K-e.bi_valid,e.bi_valid+=n-K):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function s(e,t,n){a(e,n[2*t],n[2*t+1])}function c(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function u(e){16===e.bi_valid?(o(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function l(e,t){var n,r,i,o,a,s,c=t.dyn_tree,u=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,h=t.stat_desc.max_length,g=0;for(o=0;G>=o;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;H>n;n++)r=e.heap[n],o=c[2*c[2*r+1]+1]+1,o>h&&(o=h,g++),c[2*r+1]=o,r>u||(e.bl_count[o]++,a=0,r>=p&&(a=d[r-p]),s=c[2*r],e.opt_len+=s*(o+a),f&&(e.static_len+=s*(l[2*r+1]+a)));if(0!==g){do{for(o=h-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[h]--,g-=2}while(g>0);for(o=h;0!==o;o--)for(r=e.bl_count[o];0!==r;)i=e.heap[--n],i>u||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}function f(e,t,n){var r,i,o=new Array(G+1),a=0;for(r=1;G>=r;r++)o[r]=a=a+n[r-1]<<1;for(i=0;t>=i;i++){var s=e[2*i+1];0!==s&&(e[2*i]=c(o[s]++,s))}}function d(){var e,t,n,r,i,o=new Array(G+1);for(n=0,r=0;U-1>r;r++)for(ce[r]=n,e=0;e<1<<J[r];e++)se[n++]=r;for(se[n-1]=r,i=0,r=0;16>r;r++)for(ue[r]=i,e=0;e<1<<ee[r];e++)ae[i++]=r;
for(i>>=7;z>r;r++)for(ue[r]=i<<7,e=0;e<1<<ee[r]-7;e++)ae[256+i++]=r;for(t=0;G>=t;t++)o[t]=0;for(e=0;143>=e;)ie[2*e+1]=8,e++,o[8]++;for(;255>=e;)ie[2*e+1]=9,e++,o[9]++;for(;279>=e;)ie[2*e+1]=7,e++,o[7]++;for(;287>=e;)ie[2*e+1]=8,e++,o[8]++;for(f(ie,V+1,o),e=0;z>e;e++)oe[2*e+1]=5,oe[2*e]=c(e,5);le=new pe(ie,J,F+1,V,G),fe=new pe(oe,ee,0,z,G),de=new pe(new Array(0),te,0,q,W)}function p(e){var t;for(t=0;V>t;t++)e.dyn_ltree[2*t]=0;for(t=0;z>t;t++)e.dyn_dtree[2*t]=0;for(t=0;q>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function h(e){e.bi_valid>8?o(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function g(e,t,n,r){h(e),r&&(o(e,n),o(e,~n)),B.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function m(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function v(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&m(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!m(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function y(e,t,n){var r,o,c,u,l=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],o=e.pending_buf[e.l_buf+l],l++,0===r?s(e,o,t):(c=se[o],s(e,c+F+1,t),u=J[c],0!==u&&(o-=ce[c],a(e,o,u)),r--,c=i(r),s(e,c,n),u=ee[c],0!==u&&(r-=ue[c],a(e,r,u)));while(l<e.last_lit);s(e,Y,t)}function b(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=H,n=0;c>n;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=2>u?++u:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)v(e,o,n);i=c;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],v(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,v(e,o,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],l(e,t),f(o,u,e.bl_count)}function w(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;n>=r;r++)i=a,a=t[2*(r+1)+1],++s<c&&i===a||(u>s?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*X]++):10>=s?e.bl_tree[2*Z]++:e.bl_tree[2*Q]++,s=0,o=i,0===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4))}function S(e,t,n){var r,i,o=-1,c=t[1],u=0,l=7,f=4;for(0===c&&(l=138,f=3),r=0;n>=r;r++)if(i=c,c=t[2*(r+1)+1],!(++u<l&&i===c)){if(f>u){do s(e,i,e.bl_tree);while(0!==--u)}else 0!==i?(i!==o&&(s(e,i,e.bl_tree),u--),s(e,X,e.bl_tree),a(e,u-3,2)):10>=u?(s(e,Z,e.bl_tree),a(e,u-3,3)):(s(e,Q,e.bl_tree),a(e,u-11,7));u=0,o=i,0===c?(l=138,f=3):i===c?(l=6,f=3):(l=7,f=4)}}function C(e){var t;for(w(e,e.dyn_ltree,e.l_desc.max_code),w(e,e.dyn_dtree,e.d_desc.max_code),b(e,e.bl_desc),t=q-1;t>=3&&0===e.bl_tree[2*ne[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function _(e,t,n,r){var i;for(a(e,t-257,5),a(e,n-1,5),a(e,r-4,4),i=0;r>i;i++)a(e,e.bl_tree[2*ne[i]+1],3);S(e,e.dyn_ltree,t-1),S(e,e.dyn_dtree,n-1)}function E(e){var t,n=4093624447;for(t=0;31>=t;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return D;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return R;for(t=32;F>t;t++)if(0!==e.dyn_ltree[2*t])return R;return D}function T(e){ge||(d(),ge=!0),e.l_desc=new he(e.dyn_ltree,le),e.d_desc=new he(e.dyn_dtree,fe),e.bl_desc=new he(e.bl_tree,de),e.bi_buf=0,e.bi_valid=0,p(e)}function A(e,t,n,r){a(e,($<<1)+(r?1:0),3),g(e,t,n,!0)}function I(e){a(e,L<<1,3),s(e,Y,ie),u(e)}function k(e,t,n,r){var i,o,s=0;e.level>0?(e.strm.data_type===j&&(e.strm.data_type=E(e)),b(e,e.l_desc),b(e,e.d_desc),s=C(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,i>=o&&(i=o)):i=o=n+5,i>=n+4&&-1!==t?A(e,t,n,r):e.strategy===N||o===i?(a(e,(L<<1)+(r?1:0),3),y(e,ie,oe)):(a(e,(M<<1)+(r?1:0),3),_(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),y(e,e.dyn_ltree,e.dyn_dtree)),p(e),r&&h(e)}function x(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(se[n]+F+1)]++,e.dyn_dtree[2*i(t)]++),e.last_lit===e.lit_bufsize-1}var B=e("npm:pako@0.2.7/lib/utils/common"),N=4,D=0,R=1,j=2,$=0,L=1,M=2,O=3,P=258,U=29,F=256,V=F+1+U,z=30,q=19,H=2*V+1,G=15,K=16,W=7,Y=256,X=16,Z=17,Q=18,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=512,ie=new Array(2*(V+2));r(ie);var oe=new Array(2*z);r(oe);var ae=new Array(re);r(ae);var se=new Array(P-O+1);r(se);var ce=new Array(U);r(ce);var ue=new Array(z);r(ue);var le,fe,de,pe=function(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length},he=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t},ge=!1;t._tr_init=T,t._tr_stored_block=A,t._tr_flush_block=k,t._tr_tally=x,t._tr_align=I}(e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:ieee754@1.1.6/index",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,f=n?i-1:0,d=n?-1:1,p=e[t+f];for(f+=d,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+f>=1?d/c:d*Math.pow(2,1-f),t*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*c-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g},r.define=i,n.exports}),System.registerDynamic("npm:base64-js@0.0.8/lib/b64",[],!0,function(e,t,n){var r=this,i=r.define;r.define=void 0;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===f?62:t===s||t===d?63:c>t?-1:c+10>t?t-c+26+26:l+26>t?t-l:u+26>t?t-u+26:void 0}function n(e){function n(e){u[f++]=e}var r,o,a,s,c,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;c="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,u=new i(3*e.length/4-c),a=c>0?e.length-4:e.length;var f=0;for(r=0,o=0;a>r;r+=4,o+=3)s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===c?(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&s)):1===c&&(s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(s>>8&255),n(255&s)),u}function r(e){function t(e){return o.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,i,a,s=e.length%3,c="";for(r=0,a=e.length-s;a>r;r+=3)i=(e[r]<<16)+(e[r+1]<<8)+e[r+2],c+=n(i);switch(s){case 1:i=e[e.length-1],c+=t(i>>2),c+=t(i<<4&63),c+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],c+=t(i>>10),c+=t(i>>4&63),c+=t(i<<2&63),c+="="}return c}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),c="0".charCodeAt(0),u="a".charCodeAt(0),l="A".charCodeAt(0),f="-".charCodeAt(0),d="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=r}("undefined"==typeof t?this.base64js={}:t),r.define=i,n.exports}),System.registerDynamic("npm:is-array@1.0.1/index",[],!0,function(e,t,n){var r=this,i=r.define;r.define=void 0;var o=Array.isArray,a=Object.prototype.toString;return n.exports=o||function(e){return!!e&&"[object Array]"==a.call(e)},r.define=i,n.exports}),System.registerDynamic("github:jspm/nodelibs-assert@0.1.0",["github:jspm/nodelibs-assert@0.1.0/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("github:jspm/nodelibs-assert@0.1.0/index"),r.define=i,n.exports}),System.registerDynamic("github:jspm/nodelibs-util@0.1.0",["github:jspm/nodelibs-util@0.1.0/index"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("github:jspm/nodelibs-util@0.1.0/index"),r.define=i,n.exports}),System.registerDynamic("npm:browserify-zlib@0.1.4/src/binding",["npm:pako@0.2.7/lib/zlib/messages","npm:pako@0.2.7/lib/zlib/zstream","npm:pako@0.2.7/lib/zlib/deflate","npm:pako@0.2.7/lib/zlib/inflate","npm:pako@0.2.7/lib/zlib/constants","github:jspm/nodelibs-buffer@0.1.0","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(n,r){function i(e){if(e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function o(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}var a=e("npm:pako@0.2.7/lib/zlib/messages"),s=e("npm:pako@0.2.7/lib/zlib/zstream"),c=e("npm:pako@0.2.7/lib/zlib/deflate"),u=e("npm:pako@0.2.7/lib/zlib/inflate"),l=e("npm:pako@0.2.7/lib/zlib/constants");for(var f in l)t[f]=l[f];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,i.prototype.init=function(e,n,r,i,o){switch(this.windowBits=e,this.level=n,this.memLevel=r,this.strategy=i,(this.mode===t.GZIP||this.mode===t.GUNZIP)&&(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),(this.mode===t.DEFLATERAW||this.mode===t.INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new s,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var a=c.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:var a=u.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}return a!==t.Z_OK?void this._error(a):(this.write_in_progress=!1,void(this.init_done=!0))},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===t.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},i.prototype.write=function(e,t,n,i,o,a,s){this._writeCheck(),this.write_in_progress=!0;var c=this;return r.nextTick(function(){c.write_in_progress=!1;var r=c._write(e,t,n,i,o,a,s);c.callback(r[0],r[1]),c.pending_close&&c.close()}),this},i.prototype.writeSync=function(e,t,n,r,i,o,a){return this._writeCheck(),this._write(e,t,n,r,i,o,a)},i.prototype._write=function(e,r,i,a,s,l,f){if(this.write_in_progress=!0,e!==t.Z_NO_FLUSH&&e!==t.Z_PARTIAL_FLUSH&&e!==t.Z_SYNC_FLUSH&&e!==t.Z_FULL_FLUSH&&e!==t.Z_FINISH&&e!==t.Z_BLOCK)throw new Error("Invalid flush value");null==r&&(r=new n(0),a=0,i=0),s._set?s.set=s._set:s.set=o;var d=this.strm;switch(d.avail_in=a,d.input=r,d.next_in=i,d.avail_out=f,d.output=s,d.next_out=l,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var p=c.deflate(d,e);break;case t.UNZIP:case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:var p=u.inflate(d,e);break;default:throw new Error("Unknown mode "+this.mode)}return p!==t.Z_STREAM_END&&p!==t.Z_OK&&this._error(p),this.write_in_progress=!1,[d.avail_in,d.avail_out]},i.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):(this.pending_close=!1,this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?c.deflateEnd(this.strm):u.inflateEnd(this.strm),void(this.mode=t.NONE))},i.prototype.reset=function(){switch(this.mode){case t.DEFLATE:case t.DEFLATERAW:var e=c.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:var e=u.inflateReset(this.strm)}e!==t.Z_OK&&this._error(e)},i.prototype._error=function(e){this.onerror(a[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},t.Zlib=i}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer,e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:events@1.0.2/events",[],!0,function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}var c=this,u=c.define;return c.define=void 0,n.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),c=1;r>c;c++)o[c-1]=arguments[c];n.apply(this,o)}else if(a(n)){for(r=arguments.length,o=new Array(r-1),c=1;r>c;c++)o[c-1]=arguments[c];for(u=n.slice(),r=u.length,c=0;r>c;c++)u[c].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned){var n;n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0},c.define=u,n.exports}),System.registerDynamic("npm:core-util-is@1.0.1/lib/util",["github:jspm/nodelibs-buffer@0.1.0"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(e){function n(e){return Array.isArray(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function c(e){return"symbol"==typeof e}function u(e){return void 0===e}function l(e){return f(e)&&"[object RegExp]"===v(e)}function f(e){return"object"==typeof e&&null!==e}function d(e){return f(e)&&"[object Date]"===v(e)}function p(e){return f(e)&&("[object Error]"===v(e)||e instanceof Error)}function h(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(t){return e.isBuffer(t)}function v(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=c,t.isUndefined=u,t.isRegExp=l,t.isObject=f,t.isDate=d,t.isError=p,t.isFunction=h,t.isPrimitive=g,t.isBuffer=m}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer),r.define=i,n.exports}),System.registerDynamic("npm:isarray@0.0.1/index",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},r.define=i,n.exports}),System.registerDynamic("npm:string_decoder@0.10.31/index",["github:jspm/nodelibs-buffer@0.1.0","github:jspm/nodelibs-buffer@0.1.0"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(n){function r(e){if(e&&!s(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var n=e("github:jspm/nodelibs-buffer@0.1.0").Buffer,s=n.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}}(e("github:jspm/nodelibs-buffer@0.1.0").Buffer),r.define=i,n.exports}),System.registerDynamic("github:jspm/nodelibs-assert@0.1.0/index",["npm:assert@1.3.0"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=System._nodeRequire?System._nodeRequire("assert"):e("npm:assert@1.3.0"),r.define=i,n.exports}),System.registerDynamic("github:jspm/nodelibs-util@0.1.0/index",["npm:util@0.10.3"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=System._nodeRequire?System._nodeRequire("util"):e("npm:util@0.10.3"),r.define=i,n.exports}),System.registerDynamic("npm:assert@1.3.0",["npm:assert@1.3.0/assert"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:assert@1.3.0/assert"),r.define=i,n.exports}),System.registerDynamic("npm:util@0.10.3",["npm:util@0.10.3/util"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=e("npm:util@0.10.3/util"),r.define=i,n.exports}),System.registerDynamic("npm:assert@1.3.0/assert",["npm:util@0.10.3"],!0,function(e,t,n){function r(e,t){return g.isUndefined(t)?""+t:g.isNumber(t)&&!isFinite(t)?t.toString():g.isFunction(t)||g.isRegExp(t)?t.toString():t}function i(e,t){return g.isString(e)?e.length<t?e:e.slice(0,t):e}function o(e){return i(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+i(JSON.stringify(e.expected,r),128)}function a(e,t,n,r,i){throw new y.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function s(e,t){e||a(e,!0,t,"==",y.ok)}function c(e,t){if(e===t)return!0;if(g.isBuffer(e)&&g.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return g.isDate(e)&&g.isDate(t)?e.getTime()===t.getTime():g.isRegExp(e)&&g.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:g.isObject(e)||g.isObject(t)?l(e,t):e==t}function u(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function l(e,t){if(g.isNullOrUndefined(e)||g.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(g.isPrimitive(e)||g.isPrimitive(t))return e===t;var n=u(e),r=u(t);if(n&&!r||!n&&r)return!1;if(n)return e=m.call(e),t=m.call(t),c(e,t);var i,o,a=b(e),s=b(t);if(a.length!=s.length)return!1;for(a.sort(),s.sort(),o=a.length-1;o>=0;o--)if(a[o]!=s[o])return!1;for(o=a.length-1;o>=0;o--)if(i=a[o],!c(e[i],t[i]))return!1;return!0}function f(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function d(e,t,n,r){var i;g.isString(n)&&(r=n,n=null);try{t()}catch(o){i=o}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&a(i,n,"Missing expected exception"+r),!e&&f(i,n)&&a(i,n,"Got unwanted exception"+r),e&&i&&n&&!f(i,n)||!e&&i)throw i}var p=this,h=p.define;p.define=void 0;var g=e("npm:util@0.10.3"),m=Array.prototype.slice,v=Object.prototype.hasOwnProperty,y=n.exports=s;y.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var t=e.stackStartFunction||a;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=t.name,s=r.indexOf("\n"+i);if(s>=0){var c=r.indexOf("\n",s+1);r=r.substring(c+1)}this.stack=r}}},g.inherits(y.AssertionError,Error),y.fail=a,y.ok=s,y.equal=function(e,t,n){e!=t&&a(e,t,n,"==",y.equal)},y.notEqual=function(e,t,n){e==t&&a(e,t,n,"!=",y.notEqual)},y.deepEqual=function(e,t,n){c(e,t)||a(e,t,n,"deepEqual",y.deepEqual)},y.notDeepEqual=function(e,t,n){c(e,t)&&a(e,t,n,"notDeepEqual",y.notDeepEqual)},y.strictEqual=function(e,t,n){e!==t&&a(e,t,n,"===",y.strictEqual)},y.notStrictEqual=function(e,t,n){e===t&&a(e,t,n,"!==",y.notStrictEqual)},y["throws"]=function(e,t,n){d.apply(this,[!0].concat(m.call(arguments)))},y.doesNotThrow=function(e,t){d.apply(this,[!1].concat(m.call(arguments)))},y.ifError=function(e){if(e)throw e};var b=Object.keys||function(e){var t=[];for(var n in e)v.call(e,n)&&t.push(n);return t};return p.define=h,n.exports}),System.registerDynamic("npm:util@0.10.3/util",["npm:util@0.10.3/support/isBufferBrowser","npm:inherits@2.0.1","github:jspm/nodelibs-process@0.1.1"],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,function(n){function i(e,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&t._extend(r,n),S(r.showHidden)&&(r.showHidden=!1),S(r.depth)&&(r.depth=2),S(r.colors)&&(r.colors=!1),S(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,n,r){if(e.customInspect&&n&&A(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var o=u(e,n);if(o)return o;var a=Object.keys(n),g=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),T(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(A(n)){var m=n.name?": "+n.name:"";return e.stylize("[Function"+m+"]","special")}if(C(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return l(n)}var v="",y=!1,w=["{","}"];if(h(n)&&(y=!0,w=["[","]"]),A(n)){var S=n.name?": "+n.name:"";v=" [Function"+S+"]"}if(C(n)&&(v=" "+RegExp.prototype.toString.call(n)),E(n)&&(v=" "+Date.prototype.toUTCString.call(n)),T(n)&&(v=" "+l(n)),0===a.length&&(!y||0==n.length))return w[0]+v+w[1];if(0>r)return C(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var _;return _=y?f(e,n,r,g,a):a.map(function(t){return d(e,n,r,g,t,y)}),e.seen.pop(),p(_,v,w)}function u(e,t){if(S(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var o=[],a=0,s=t.length;s>a;++a)N(t,String(a))?o.push(d(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))}),o}function d(e,t,n,r,i,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),N(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(n)?c(e,u.value,null):c(e,u.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),S(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function S(e){return void 0===e}function C(e){return _(e)&&"[object RegExp]"===k(e)}function _(e){return"object"==typeof e&&null!==e}function E(e){return _(e)&&"[object Date]"===k(e)}function T(e){return _(e)&&("[object Error]"===k(e)||e instanceof Error)}function A(e){return"function"==typeof e}function I(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function k(e){return Object.prototype.toString.call(e)}function x(e){return 10>e?"0"+e.toString(10):e.toString(10)}function B(){var e=new Date,t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":");return[e.getDate(),$[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(D,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];o>n;s=r[++n])a+=m(s)||!_(s)?" "+s:" "+i(s);return a},t.deprecate=function(e,i){function o(){if(!a){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(S(r.process))return function(){return t.deprecate(e,i).apply(this,arguments)};if(n.noDeprecation===!0)return e;var a=!1;return o};var R,j={};t.debuglog=function(e){if(S(R)&&(R=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!j[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var r=n.pid;j[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else j[e]=function(){};return j[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=g,t.isNull=m,t.isNullOrUndefined=v,t.isNumber=y,t.isString=b,t.isSymbol=w,t.isUndefined=S,t.isRegExp=C,t.isObject=_,t.isDate=E,t.isError=T,t.isFunction=A,t.isPrimitive=I,t.isBuffer=e("npm:util@0.10.3/support/isBufferBrowser");var $=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",B(),t.format.apply(t,arguments))},t.inherits=e("npm:inherits@2.0.1"),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}(e("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),System.registerDynamic("npm:util@0.10.3/support/isBufferBrowser",[],!0,function(e,t,n){var r=this,i=r.define;return r.define=void 0,n.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8},r.define=i,n.exports}),System.register("app.js",["github:angular/bower-angular@1.4.5","components/components.js","libraries/libraries.js","services/services.js","views/views.js","app-run.js","app-config.js","app-controller.js"],function(e){"use strict";function t(){n.element(document).ready(function(){n.bootstrap(document.querySelector("[data-toc-app]"),[f])})}var n,r,i,o,a,s,c,u,l,f;return e("initialize",t),{setters:[function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){c=e["default"]},function(e){u=e["default"],l=e.controllerName}],execute:function(){f="toc",e("default",n.module(f,[r.name,i.name,o.name,a.name]).config(c).run(s).controller(l,u))}}}),System.register("components/components.js",["github:angular/bower-angular@1.4.5","components/auto-focus/auto-focus.js","components/auto-select/auto-select.js","components/equal-to/equal-to.js","components/update-profile-modal/update-profile-modal.js","components/begin-conversation-modal/begin-conversation-modal.js","components/password-prompt-modal/password-prompt-modal.js","components/channel-card/channel-card.js","components/channel-list/channel-list.js","components/cloud-connect-modal/cloud-connect-modal.js","components/message-input-area/message-input-area.js","components/message-list/message-list.js","components/notification-card/notification-card.js","components/notification-list/notification-list.js","components/notification-overlay/notification-overlay.js","components/system-message-overlay/system-message-overlay.js","components/qr-image/qr-image.js","components/conversations-menu/conversations-menu.js","components/options-menu/options-menu.js","components/spinner-button/spinner-button.js","components/user-card/user-card.js"],function(e){
"use strict";var t,n,r,i,o,a,s,c,u,l,f,d,p,h,g,m,v,y,b,w,S;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){c=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]},function(e){f=e["default"]},function(e){d=e["default"]},function(e){p=e["default"]},function(e){h=e["default"]},function(e){g=e["default"]},function(e){m=e["default"]},function(e){v=e["default"]},function(e){y=e["default"]},function(e){b=e["default"]},function(e){w=e["default"]},function(e){S=e["default"]}],execute:function(){e("default",t.module("toc.components",[n.name,r.name,i.name,o.name,a.name,s.name,c.name,u.name,l.name,f.name,d.name,p.name,h.name,g.name,m.name,v.name,y.name,b.name,w.name,S.name]))}}}),System.register("libraries/libraries.js",["github:angular/bower-angular@1.4.5","libraries/baobab/baobab.js","libraries/forge/forge.js","libraries/ionic/ionic.js","libraries/moment/moment.js","libraries/ng-cordova/ng-cordova.js","libraries/qr-image/qr-image.js","libraries/ramda/ramda.js","libraries/remote-storage/remote-storage.js","libraries/telehash/telehash.js"],function(e){"use strict";var t,n,r,i,o,a,s,c,u,l;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){c=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]}],execute:function(){e("default",t.module("toc.libraries",[n.name,r.name,i.name,o.name,a.name,s.name,c.name,u.name,l.name]))}}}),System.register("services/services.js",["github:angular/bower-angular@1.4.5","services/buffer/buffer.js","services/channels/channels.js","services/contacts/contacts.js","services/cryptography/cryptography.js","services/devices/devices.js","services/identity/identity.js","services/messages/messages.js","services/navigation/navigation.js","services/network/network.js","services/notifications/notifications.js","services/session/session.js","services/state/state.js","services/status/status.js","services/storage/storage.js","services/time/time.js"],function(e){"use strict";var t,n,r,i,o,a,s,c,u,l,f,d,p,h,g,m;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){c=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]},function(e){f=e["default"]},function(e){d=e["default"]},function(e){p=e["default"]},function(e){h=e["default"]},function(e){g=e["default"]},function(e){m=e["default"]}],execute:function(){e("default",t.module("toc.services",[n.name,r.name,i.name,o.name,a.name,s.name,c.name,u.name,l.name,f.name,d.name,p.name,h.name,g.name,m.name]))}}}),System.register("views/views.js",["github:angular/bower-angular@1.4.5","views/channel/channel.js","views/home/home.js","views/welcome/welcome.js"],function(e){"use strict";var t,n,r,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]}],execute:function(){e("default",t.module("toc.views",[n.name,r.name,i.name]))}}}),System.register("app-run.js",[],function(e){"use strict";function t(e,t,n){e.ready(function(){t.cordova&&t.cordova.plugins.Keyboard&&t.cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),t.StatusBar&&t.StatusBar.styleDefault(),t.cordova&&t.cordova.plugins.backgroundMode&&(t.cordova.plugins.backgroundMode.setDefaults({silent:!0}),t.cordova.plugins.backgroundMode.enable()),t.cordova&&t.cordova.plugins.autoStart&&t.cordova.plugins.autoStart.enable(),n.initialize()})}return e("default",t),t.$inject=["$ionicPlatform","$window","session"],{setters:[],execute:function(){}}}),System.register("app-config.js",["app.html!github:systemjs/plugin-text@0.0.2","app-menu.html!github:systemjs/plugin-text@0.0.2","app-controller.js"],function(e){"use strict";function t(e,t,i,a){t.debugEnabled(!0),e.tabs.position("bottom"),e.form.toggle("large"),e.backButton.previousTitleText(!1),e.views.transition("android"),e.navBar.alignTitle("center"),i.state("app",{url:"/app","abstract":!0,template:"<ion-nav-view></ion-nav-view>"}),i.state("app.public",{url:"/public","abstract":!0,template:n}),i.state("app.private",{url:"/private","abstract":!0,controller:o+" as appView",template:r})}var n,r,i,o;return e("default",t),t.$inject=["$ionicConfigProvider","$logProvider","$stateProvider","$urlRouterProvider"],{setters:[function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"],o=e.controllerName}],execute:function(){}}}),System.register("app-controller.js",[],function(e){"use strict";function t(e,t,n){var r=this,i=t.cloud.notifications,o=function(){r.notificationCount=n.pipe(n.values,n.reject(n.prop("dismissed")))(i.get()).length};t.addListener(i,o,e)}var n;return e("default",t),t.$inject=["$scope","state","R"],{setters:[],execute:function(){n="AppController",e("controllerName",n)}}}),System.register("components/auto-select/auto-select.js",["github:angular/bower-angular@1.4.5","components/auto-select/auto-select-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.auto-select",[]).directive(r,n))}}}),System.register("components/auto-focus/auto-focus.js",["github:angular/bower-angular@1.4.5","components/auto-focus/auto-focus-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.auto-focus",[]).directive(r,n))}}}),System.register("components/update-profile-modal/update-profile-modal.js",["github:angular/bower-angular@1.4.5","components/update-profile-modal/update-profile-modal-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.update-profile-modal",[]).directive(r,n))}}}),System.register("components/begin-conversation-modal/begin-conversation-modal.js",["github:angular/bower-angular@1.4.5","components/begin-conversation-modal/begin-conversation-modal-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.begin-conversation-modal",[]).directive(r,n))}}}),System.register("components/password-prompt-modal/password-prompt-modal.js",["github:angular/bower-angular@1.4.5","components/password-prompt-modal/password-prompt-modal-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.password-prompt-modal",[]).directive(r,n))}}}),System.register("components/channel-card/channel-card.js",["github:angular/bower-angular@1.4.5","components/channel-card/channel-card-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.channel-card",[]).directive(r,n))}}}),System.register("components/channel-list/channel-list.js",["github:angular/bower-angular@1.4.5","components/channel-list/channel-list-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.channel-list",[]).directive(r,n))}}}),System.register("components/message-list/message-list.js",["github:angular/bower-angular@1.4.5","components/message-list/message-list-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.message-list",[]).directive(r,n))}}}),System.register("components/notification-card/notification-card.js",["github:angular/bower-angular@1.4.5","components/notification-card/notification-card-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.notification-card",[]).directive(r,n))}}}),System.register("components/notification-list/notification-list.js",["github:angular/bower-angular@1.4.5","components/notification-list/notification-list-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.notification-list",[]).directive(r,n))}}}),System.register("components/notification-overlay/notification-overlay.js",["github:angular/bower-angular@1.4.5","components/notification-overlay/notification-overlay-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.notification-overlay",[]).directive(r,n))}}}),System.register("components/system-message-overlay/system-message-overlay.js",["github:angular/bower-angular@1.4.5","components/system-message-overlay/system-message-overlay-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.system-message-overlay",[]).directive(r,n))}}}),System.register("components/message-input-area/message-input-area.js",["github:angular/bower-angular@1.4.5","components/message-input-area/message-input-area-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.message-input-area",[]).directive(r,n))}}}),System.register("components/qr-image/qr-image.js",["github:angular/bower-angular@1.4.5","components/qr-image/qr-image-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.qr-image",[]).directive(r,n))}}}),System.register("components/options-menu/options-menu.js",["github:angular/bower-angular@1.4.5","components/options-menu/options-menu-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.options-menu",[]).directive(r,n))}}}),System.register("components/conversations-menu/conversations-menu.js",["github:angular/bower-angular@1.4.5","components/conversations-menu/conversations-menu-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.conversations-menu",[]).directive(r,n))}}}),System.register("components/user-card/user-card.js",["github:angular/bower-angular@1.4.5","components/user-card/user-card-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.user-card",[]).directive(r,n))}}}),System.register("components/equal-to/equal-to.js",["github:angular/bower-angular@1.4.5","components/equal-to/equal-to-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.equal-to",[]).directive(r,n))}}}),System.register("libraries/forge/forge.js",["github:angular/bower-angular@1.4.5","npm:node-forge@0.6.34"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){e("default",t.module("toc.libraries.forge",[]).factory("forge",function(){return n}))}}}),System.register("libraries/ionic/ionic.js",["github:angular/bower-angular@1.4.5","libraries/ionic/ionic-angular-library.js"],function(e){"use strict";var t;return{setters:[function(e){t=e["default"]},function(e){}],execute:function(){e("default",t.module("toc.libraries.ionic",["ionic"]))}}}),System.register("libraries/moment/moment.js",["github:angular/bower-angular@1.4.5","npm:moment@2.10.6"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){e("default",t.module("toc.libraries.moment",[]).factory("moment",function(){return n}))}}}),System.register("libraries/ng-cordova/ng-cordova.js",["github:angular/bower-angular@1.4.5","npm:ng-cordova@0.1.17-alpha"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){e("default",t.module("toc.libraries.ng-cordova",["ngCordova"]))}}}),System.register("libraries/qr-image/qr-image.js",["github:angular/bower-angular@1.4.5","npm:qr-image@3.1.0"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){e("default",t.module("toc.libraries.qr-image",[]).factory("qrImage",function(){return n}))}}}),System.register("components/spinner-button/spinner-button.js",["github:angular/bower-angular@1.4.5","components/spinner-button/spinner-button-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.spinner-button",[]).directive(r,n))}}}),System.register("libraries/ramda/ramda.js",["github:angular/bower-angular@1.4.5","npm:ramda@0.17.1"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){e("default",t.module("toc.libraries.ramda",[]).factory("R",function(){return n}))}}}),System.register("libraries/telehash/telehash.js",["github:angular/bower-angular@1.4.5","libraries/telehash/telehash-library.js"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){e("default",t.module("toc.libraries.telehash",[]).factory("telehash",function(){return telehash}))}}}),System.register("services/buffer/buffer.js",["github:angular/bower-angular@1.4.5","services/buffer/buffer-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.buffer",[]).factory(r,n))}}}),System.register("libraries/remote-storage/remote-storage.js",["github:angular/bower-angular@1.4.5","libraries/remote-storage/remote-storage-library.js"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){e("default",t.module("toc.libraries.remote-storage",[]).factory("remoteStorage",function(){return n}))}}}),System.register("services/channels/channels.js",["github:angular/bower-angular@1.4.5","services/channels/channels-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.channels",[]).factory(r,n))}}}),System.register("services/cryptography/cryptography.js",["github:angular/bower-angular@1.4.5","services/cryptography/cryptography-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.cryptography",[]).factory(r,n))}}}),System.register("services/contacts/contacts.js",["github:angular/bower-angular@1.4.5","services/contacts/contacts-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.contacts",[]).factory(r,n))}}}),System.register("services/identity/identity.js",["github:angular/bower-angular@1.4.5","services/identity/identity-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.identity",[]).factory(r,n))}}}),System.register("services/messages/messages.js",["github:angular/bower-angular@1.4.5","services/messages/messages-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.messages",[]).factory(r,n))}}}),System.register("services/navigation/navigation.js",["github:angular/bower-angular@1.4.5","services/navigation/navigation-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.navigation",[]).factory(r,n))}}}),System.register("services/devices/devices.js",["github:angular/bower-angular@1.4.5","services/devices/devices-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.devices",[]).factory(r,n))}}}),System.register("libraries/baobab/baobab.js",["github:angular/bower-angular@1.4.5","npm:baobab@2.0.0-rc1"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){e("default",t.module("toc.libraries.baobab",[]).factory("Baobab",function(){return n}))}}}),System.register("services/session/session.js",["github:angular/bower-angular@1.4.5","services/session/session-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.session",[]).factory(r,n))}}}),System.register("components/cloud-connect-modal/cloud-connect-modal.js",["github:angular/bower-angular@1.4.5","components/cloud-connect-modal/cloud-connect-modal-directive.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.directiveName}],execute:function(){e("default",t.module("toc.components.cloud-connect-modal",[]).directive(r,n))}}}),System.register("services/notifications/notifications.js",["github:angular/bower-angular@1.4.5","services/notifications/notifications-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.notifications",[]).factory(r,n))}}}),System.register("services/status/status.js",["github:angular/bower-angular@1.4.5","services/status/status-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.status",[]).factory(r,n))}}}),System.register("services/time/time.js",["github:angular/bower-angular@1.4.5","services/time/time-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.time",[]).factory(r,n))}}}),System.register("views/channel/channel.js",["github:angular/bower-angular@1.4.5","views/channel/channel-config.js","views/channel/channel-controller.js"],function(e){"use strict";var t,n,r,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"],i=e.controllerName}],execute:function(){e("default",t.module("toc.views.channel",[]).config(n).controller(i,r))}}}),System.register("services/state/state.js",["github:angular/bower-angular@1.4.5","services/state/state-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.state",[]).factory(r,n))}}}),System.register("views/welcome/welcome.js",["github:angular/bower-angular@1.4.5","views/welcome/welcome-config.js","views/welcome/welcome-controller.js"],function(e){"use strict";var t,n,r,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"],i=e.controllerName}],execute:function(){e("default",t.module("toc.views.welcome",[]).config(n).controller(i,r))}}}),System.register("services/storage/storage.js",["github:angular/bower-angular@1.4.5","services/storage/storage-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.storage",[]).factory(r,n))}}}),System.register("services/network/network.js",["github:angular/bower-angular@1.4.5","services/network/network-service.js"],function(e){"use strict";var t,n,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"],r=e.serviceName}],execute:function(){e("default",t.module("toc.services.network",[]).factory(r,n))}}}),System.register("views/home/home.js",["github:angular/bower-angular@1.4.5","views/home/home-config.js","views/home/home-controller.js"],function(e){"use strict";var t,n,r,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"],i=e.controllerName}],execute:function(){e("default",t.module("toc.views.home",[]).config(n).controller(i,r))}}}),System.register("components/auto-select/auto-select-directive.js",[],function(e){"use strict";function t(e,t,n,r){return{restrict:"A",link:function(i,o){var a=e.document.queryCommandSupported("copy");(!r.isCordovaApp()||a)&&o.bind("click",function(r){if(r.preventDefault(),o[0].select)o[0].select();else if(e.getSelection){var i=e.getSelection(),a=e.document.createRange();a.selectNodeContents(o[0]),i.removeAllRanges(),i.addRange(a)}try{if(e.document.execCommand("copy"),n.notifySystem("Copied to clipboard!"),o[0].select)o[0].blur();else if(e.getSelection){var i=e.getSelection();i.removeAllRanges()}}catch(s){t.error(s)}})}}}var n;return e("default",t),t.$inject=["$window","$log","notifications","devices"],{setters:[],execute:function(){n="tocAutoSelect",e("directiveName",n)}}}),System.register("components/update-profile-modal/update-profile-modal-directive.js",["components/update-profile-modal/update-profile-modal.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,scope:{removeModal:"&"},controllerAs:"updateProfileModal",controller:["$scope","$q","$log","contacts","identity","notifications","state","R",function(e,t,n,r,i,o,a,s){this.removeModal=e.removeModal;var c=a.cloud.identity.get(["userInfo"]);this.userInfo=s.assoc("version",c.version+1,c),this.getNewAvatar=function(){return i.getAvatar(this.userInfo)},this.updateProfile=function(e){var n=this;return e.$invalid?e.$error.email?o.notifySystem("Please enter a valid email."):o.notifyGenericError(e.$error):a.save(a.cloud.identity,["userInfo"],this.userInfo).then(function(){return r.saveProfileUpdates()}).then(function(){return n.removeModal(),t.when()})["catch"](o.notifyGenericError)}}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocUpdateProfileModal",e("directiveName",r)}}}),System.register("components/begin-conversation-modal/begin-conversation-modal-directive.js",["components/begin-conversation-modal/begin-conversation-modal.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,scope:{removeModal:"&"},controllerAs:"beginConversationModal",controller:["$cordovaBarcodeScanner","$ionicPopup","$log","$q","$window","$scope","contacts","notifications","devices","identity","state",function(e,t,n,r,i,o,a,s,c,u,l){var f=this;this.removeModal=o.removeModal,this.userInfo=l.cloud.identity.get().userInfo,this.userId=this.userInfo.id,this.isCordovaApp=c.isCordovaApp(),this.contactId="",this.inviteMethod="enter";var d=function(e){return"contact: cannot invite self"===e?s.notifySystem("You just tried to invite yourself ._."):"contact: contact already exists"===e?s.notifySystem("This contact already exists"):s.notifyGenericError(e)};this.sendInvite=function(e){return u.validateId(f.contactId)?a.saveSendingInvite(f.contactId).then(function(){return f.removeModal(),f.contactId="",r.when()})["catch"](d):(e&&e.preventDefault(),s.notifySystem("Please enter a valid Toc ID."))},this.inviteMethods={enter:{icon:"ion-ios-compose",text:"Enter someone's ID",isEnabled:!0,doInvite:function(){t.show({template:'\n                <form ng-submit="beginConversationModal.sendInvite()"\n                  novalidate>\n                <input type="text" placeholder="Your contact\'s user ID."\n                  ng-model="beginConversationModal.contactId" toc-auto-focus>\n                </form>\n              ',title:"Enter ID",scope:o,buttons:[{text:"Cancel",type:"button-outline button-calm"},{text:"Invite",type:"button-outline button-balanced",onTap:function(e){return f.sendInvite(e)}}]})}},scan:{icon:"ion-camera",text:"Scan a picture ID",isEnabled:this.isCordovaApp,doInvite:function(){return f.isCordovaApp?e.scan().then(function(e){if(e.cancelled)return r.reject("QR reader was cancelled.");var t=e.text;return u.validateId(t)?a.saveSendingInvite(t):s.notifySystem("Please enter a valid Toc ID.")}).then(function(){return f.removeModal(),r.when()})["catch"](d):void 0}},mail:{icon:"ion-email",text:"Send an invite email",isEnabled:!0,doInvite:function(){var e=encodeURIComponent("An invite for Toc Messenger"),t=encodeURIComponent("Please invite me as a contact on Toc Messenger:\nhttp://lewisl9029.github.io/toc\n\nIt's pretty great. ^^\n\n"+("My Toc ID is "+f.userId+"."));i.open("mailto:?to=&body="+t+"&subject="+e,"_system"),f.removeModal()}}},this.doInvite=function(){f.inviteMethods[f.inviteMethod].doInvite()},this.showIdPopup=function(){t.show({title:"Your ID",cssClass:"toc-id-popup",scope:o,buttons:[{text:"Ok",type:"button-balanced button-outline"}],template:'\n            <div class="list">\n              <label class="toc-id-input item item-input">\n                <input type="text" ng-model="::beginConversationModal.userId"\n                  readonly toc-auto-select>\n              </label>\n              <div class="item item-image">\n                <toc-qr-image data="{{::beginConversationModal.userId}}">\n                </toc-qr-image>\n              </div>\n            </div>\n          '})}}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocBeginConversationModal",e("directiveName",r)}}}),System.register("components/password-prompt-modal/password-prompt-modal-directive.js",["components/password-prompt-modal/password-prompt-modal.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,scope:{showModal:"&",hideModal:"&",removeModal:"&"},controllerAs:"passwordPromptModal",controller:["$scope","$ionicLoading","$ionicModal","$log","$timeout","$q","session","navigation","notifications","identity","state",function(e,t,n,r,i,o,a,s,c,u,l){this.removeModal=e.removeModal,this.hideModal=e.hideModal,this.showModal=e.showModal,this.userExists=u.getUserExists();var f=l.local.session.get(["staySignedIn"]);this.staySignedIn=void 0===f?!0:f,this.begin=function(e){var t=this;if(e.$invalid)return e.$error.required&&e.$error.required[1]?c.notifySystem("Please enter a password."):e.$error.equalTo?c.notifySystem("Please ensure your passwords match."):e.$error.required?c.notifySystem("Please enter a password."):c.notifyGenericError(e.$error);var n=function(){return f===t.staySignedIn?o.when():l.save(l.local.session,["staySignedIn"],t.staySignedIn)};return this.hideModal(),i(function(){return n()},1e3,!1).then(function(){return a.start({password:t.password},t.staySignedIn)}).then(function(){return i(function(){return t.removeModal()},1e3,!1)})["catch"](function(e){t.showModal();var n=function(){return"identity: wrong password"===e?c.notifySystem("The password you entered was incorrect."):c.notifyGenericError(e)};return i(n,1e3,!1)})},this.showCloudConnectModal=function(){var t='\n          <toc-cloud-connect-modal class="toc-modal-container"\n            remove-modal="passwordPromptModal.cloudConnectModal.remove()">\n          </toc-cloud-connect-modal>\n        ',n="cloudConnectModal";return s.showModal(n,t,this,e)}}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocPasswordPromptModal",e("directiveName",r)}}}),System.register("components/channel-card/channel-card-directive.js",["components/channel-card/channel-card.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,scope:{channelId:"@"},controllerAs:"channelCard",controller:["$scope","identity","state",function(e,t,n){var r=this;this.getAvatar=t.getAvatar,this.channelId=e.channelId;var i=n.cloud.channels.select([this.channelId]),o=n.cloud.messages.select([this.channelId]),a=n.cloud.contacts,s=function(){r.contact=a.get(r.channel.channelInfo.contactIds[0]),c()},c=function(){return-1===r.contact.statusId?void(r.status="toc-contact-status-pending"):0===r.contact.statusId?void(r.status="toc-contact-status-offline"):1===r.contact.statusId?void(r.status="toc-contact-status-online"):void(r.status="toc-contact-status-unknown")},u=function(){return"accepting"===r.channel.inviteStatus?void(r.quote="Accepting invite"):"sending"===r.channel.inviteStatus?void(r.quote="Sending invite"):"sent"===r.channel.inviteStatus?void(r.quote="Sent invite"):"received"===r.channel.inviteStatus?void(r.quote="Received invite"):r.channel.unreadMessageId?void(r.quote=o.get(r.channel.unreadMessageId).messageInfo.content):r.channel.latestMessageId?void(r.quote=o.get(r.channel.latestMessageId).messageInfo.content):void(r.quote="No new messages")},l=function(){r.channel=i.get(),s(),u()};n.addListener(i,l,e),n.addListener(a,s,e)}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocChannelCard",e("directiveName",r)}}}),System.register("components/channel-list/channel-list-directive.js",["components/channel-list/channel-list.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,controllerAs:"channelList",controller:["$ionicHistory","$ionicPopup","$q","$scope","$state","contacts","identity","navigation","state",function(e,t,n,r,i,o,a,s,c){var u=this,l=c.cloud.navigation.select(["activeViewId"]),f=function(){u.viewId=l.get()};c.addListener(l,f,r);var d=c.cloud.channels,p=function(){u.channels=d.get()};c.addListener(d,p,r);var h=c.cloud.contacts,g=function(){u.contacts=h.get()};c.addListener(h,g,r),this.handleClick=function(e){return"sent"!==e.inviteStatus&&"sending"!==e.inviteStatus&&"accepting"!==e.inviteStatus?"received"===e.inviteStatus?o.showAcceptInviteDialog(e.channelInfo.id):s.navigate(e.channelInfo.id):void 0},this.goToChannel=function(e){return s.navigate(e)}}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocChannelList",e("directiveName",r)}}}),System.register("components/message-list/message-list-directive.js",["components/message-list/message-list.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(e,t,r,i,o,a,s){return{restrict:"E",
template:n,scope:{channelId:"@"},link:function(n,c,u){var l=s.find(function(e){return c.parent().parent()[0]===e.element})(e._instances),f=a.cloud.messages.select([n.channelId]),d=a.cloud.channels.select([n.channelId]),p=d.select(["viewingLatest"]);p.get()&&l.scrollBottom(!0);var h=function(){p.get()&&r.isInForeground()&&i.isActiveView(n.channelId)&&(l.scrollBottom(!0),o.isDismissed(n.channelId)||o.dismiss(n.channelId),d.get(["unreadMessageId"])&&a.save(d,["unreadMessageId"],null))};a.addListener(p,h,n);var g=function(){if(i.isActiveView(n.channelId)&&r.isInForeground()){var e=l.getScrollView(),t=l.getScrollPosition().top,o=e.getScrollMax().top;if(!(o>t))return d.get(["unreadMessageId"])&&a.save(d,["unreadMessageId"],null),d.get(["viewingLatest"])?void l.scrollBottom(!0):a.save(d,["viewingLatest"],!0)}};a.addListener(f,g,n,{skipInitialize:!0}),t(function(){if(i.isActiveView(n.channelId)&&r.isInForeground()){var e=l.getScrollView(),t=l.getScrollPosition().top,s=e.getScrollMax().top;if(s>t){if(!d.get(["viewingLatest"]))return;return a.save(d,["viewingLatest"],!1)}d.get(["viewingLatest"])||a.save(d,["viewingLatest"],!0),d.get(["unreadMessageId"])&&a.save(d,["unreadMessageId"],null),o.isDismissed(n.channelId)||o.dismiss(n.channelId)}},5e3,0,!1)},controllerAs:"messageList",controller:["$scope","$state","identity","messages","time",function(e,t,n,r,i){var o=this;this.getAvatar=n.getAvatar,this.channelId=e.channelId;var c=a.cloud.messages.select([this.channelId]),u=a.cloud.channels.select([this.channelId]),l=a.cloud.identity.select(["userInfo"]),f=a.cloud.contacts.select([u.get(["channelInfo","contactIds"])[0],"userInfo"]),d=function(){o.userInfo=l.get()},p=function(){o.contactInfo=f.get()};a.addListener(l,d,e),a.addListener(f,p,e);var h=function(){o.messages=s.pipe(s.values,s.sort(r.compareMessages))(c.get())};a.addListener(c,h,e),this.isUnread=function(e){var t=a.cloud.channels.get([o.channelId,"unreadMessageId"]);return t===e.messageInfo.id},this.isByUser=function(e){if(e){var t=e.messageInfo.senderId;return o.userInfo.id===t}},this.isSenderSeparator=function(e){var t=o.messages.indexOf(e),n=o.messages[t-1];if(!n)return!0;var r=e.messageInfo.senderId!==n.messageInfo.senderId;return r},this.isMinuteSeparator=function(e){var t=o.messages.indexOf(e),n=o.messages[t-1];return n?i.isMinuteDifferent(e.messageInfo.sentTime,n.messageInfo.sentTime):!0},this.isMessageSending=function(e){return void 0===e.receivedTime},this.isDateSeparator=function(e){var t=o.messages.indexOf(e),n=o.messages[t-1];return n?o.isUnread(e)?!1:i.isDayDifferent(e.messageInfo.sentTime,n.messageInfo.sentTime):!0},this.getUserInfo=function(e){if(e){var t=e.messageInfo.senderId;return o.userInfo.id===t?o.userInfo:o.contactInfo}},this.getAvatar=function(e){return e?n.getAvatar(o.getUserInfo(e)):void 0},this.getTimestamp=function(e){return i.getTimestamp(e.messageInfo.sentTime)},this.getDatestamp=function(e){return i.getDatestamp(e.messageInfo.sentTime)}}]}}var n,r;return e("default",t),t.$inject=["$ionicScrollDelegate","$interval","devices","navigation","notifications","state","R"],{setters:[function(e){n=e["default"]}],execute:function(){r="tocMessageList",e("directiveName",r)}}}),System.register("components/notification-card/notification-card-directive.js",["components/notification-card/notification-card.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,scope:{notificationId:"@"},controllerAs:"notificationCard",controller:["$scope","$ionicPopup","$timeout","$ionicSlideBoxDelegate","identity","contacts","navigation","notifications","state",function(e,t,n,r,i,o,a,s,c){var u=this;if(this.notificationId=e.notificationId,this.notificationId){n(function(){r.$getByHandle(u.notificationId);u.swipe=function(){return s.dismiss(u.notificationId)}},0,!1);var l=this.notificationId,f=c.cloud.channels.select([l]),d=f.select(["latestMessageId"]),p=function(){if("received"===f.get(["inviteStatus"]))return void(u.message="New invite received!");var e=d.get();e&&(u.message=c.cloud.messages.get([l,e,"messageInfo","content"]))};c.addListener(f,p,e);var h=f.get(["channelInfo","contactIds"])[0],g=c.cloud.contacts.select(h),m=g.select(["userInfo"]),v=function(){var e=m.get();u.icon=i.getAvatar(e),u.iconText="Avatar for "+(e.displayName||"Anonymous"),u.title=e.displayName||"Anonymous"};c.addListener(m,v,e),this.click=function(){return"received"===f.get(["inviteStatus"])?o.showAcceptInviteDialog(l):a.navigate(l).then(function(){return c.save(f,["viewingLatest"],!0)})}}}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocNotificationCard",e("directiveName",r)}}}),System.register("components/notification-list/notification-list-directive.js",["components/notification-list/notification-list.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,controllerAs:"notificationList",controller:["$scope","identity","navigation","state","R",function(e,t,n,r,i){var o=this,a=r.cloud.notifications,s=function(){o.notifications=i.pipe(i.values,i.reject(i.prop("dismissed")))(a.get()||{})};r.addListener(a,s,e)}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocNotificationList",e("directiveName",r)}}}),System.register("components/notification-overlay/notification-overlay-directive.js",["components/notification-overlay/notification-overlay.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,controllerAs:"notificationOverlay",controller:["$scope","$timeout","$q","identity","navigation","notifications","state","R",function(e,t,n,r,i,o,a,s){var c=this,u=a.cloud.notifications,l={};this.showNotificationOverlay=!1,this.activeNotificationId=null,this.activeNotificationTimeout=null;var f=function(e){c.activeNotificationTimeout&&t.cancel(c.activeNotificationTimeout),c.activeNotificationTimeout=t(function(){c.showNotificationOverlay=!1,c.activeNotificationTimeout=null},e)},d=function(e,t){if(!t){if(!e.data.currentData.notificationInfo)return;t=e.data.currentData.notificationInfo.id}return o.isDismissed(t)?void f(0):(c.activeNotificationId=t,c.showNotificationOverlay=!0,void f(5e3))},p=!0,h=function(){c.notifications=s.pipe(s.keys,s.reject(s.has(s.__,l)),s.forEach(function(t){a.addListener(u.select([t]),d,e,{skipInitialize:!0}),l[t]=!0,p||d(null,t)}))(u.get()||{}),p=!1};a.addListener(u,h,e)}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocNotificationOverlay",e("directiveName",r)}}}),System.register("components/system-message-overlay/system-message-overlay-directive.js",["components/system-message-overlay/system-message-overlay.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,controllerAs:"systemMessageOverlay",controller:["$scope","$timeout","state",function(e,t,n){var r=this,i=null;this.showSystemMessage=!1;var o=n.memory.notifications.select("systemMessage"),a=function(){return r.message=o.get(),r.message?i?(t.cancel(i),r.showSystemMessage=!1,t(function(){r.showSystemMessage=!0,i=t(function(){i=null,r.showSystemMessage=!1},5e3)},1e3)):(r.showSystemMessage=!0,void(i=t(function(){i=null,r.showSystemMessage=!1},5e3))):void(r.showSystemMessage=!1)};n.addListener(o,a,e)}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocSystemMessageOverlay",e("directiveName",r)}}}),System.register("components/auto-focus/auto-focus-directive.js",[],function(e){"use strict";function t(e){return{restrict:"A",link:function(t,n){e(function(){return n[0].focus()},500,!1)}}}var n;return e("default",t),t.$inject=["$timeout"],{setters:[],execute:function(){n="tocAutoFocus",e("directiveName",n)}}}),System.register("components/qr-image/qr-image-directive.js",[],function(e){"use strict";function t(e,t,n){return{restrict:"E",link:function(t,r,i){var o=i.data,a=e.imageSync(o,{type:"svg",ec_level:"M"}),s=n(a)(t)[0];r[0].appendChild(s)}}}var n;return e("default",t),t.$inject=["qrImage","state","$compile"],{setters:[],execute:function(){n="tocQrImage",e("directiveName",n)}}}),System.register("components/options-menu/options-menu-directive.js",["components/options-menu/options-menu.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,controllerAs:"optionsMenu",controller:["$ionicPopup","$scope","navigation","session","state",function(e,t,n,r,i){this.userInfo=i.cloud.identity.get().userInfo,this.userId=this.userInfo.id,this.showIdPopup=function(){e.show({title:"Your ID",cssClass:"toc-id-popup",scope:t,buttons:[{text:"Ok",type:"button-balanced button-outline"}],template:'\n            <div class="list">\n              <label class="toc-id-input item item-input">\n                <input type="text" ng-model="::optionsMenu.userId"\n                  readonly toc-auto-select>\n              </label>\n              <div class="item item-image">\n                <toc-qr-image data="{{::optionsMenu.userId}}">\n                </toc-qr-image>\n              </div>\n            </div>\n          '})},this.showBeginConversationModal=function(){var e='\n          <toc-begin-conversation-modal class="toc-modal-container"\n            remove-modal="optionsMenu.beginConversationModal.remove()">\n          </toc-begin-conversation-modal>\n        ',r="beginConversationModal";return n.showModal(r,e,this,t)},this.showCloudConnectModal=function(){var e='\n          <toc-cloud-connect-modal class="toc-modal-container"\n            remove-modal="optionsMenu.cloudConnectModal.remove()">\n          </toc-cloud-connect-modal>\n        ',r="cloudConnectModal";return n.showModal(r,e,this,t)},this.showDeleteDataConfirm=function(){var t=e.confirm({title:"Remove Data",template:"\n            <p>All local data will be gone.</p>\n            <p>Are you absolutely sure?</p>\n          ",okText:"Remove",okType:"button-assertive button-outline",cancelType:"button-calm button-outline"});t.then(function(e){return e?i.destroy():void 0})},this.showSignoutConfirm=function(){var t=e.confirm({title:"Sign Out",template:"\n            <p>You'll have to sign in again.</p>\n            <p>Are you sure?</p>\n          ",okText:"Sign out",okType:"button-assertive button-outline",cancelType:"button-calm button-outline"});t.then(function(e){return e?r.destroy():void 0})}}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocOptionsMenu",e("directiveName",r)}}}),System.register("components/conversations-menu/conversations-menu-directive.js",["components/conversations-menu/conversations-menu.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,controllerAs:"conversationsMenu",controller:["$ionicModal","$q","$scope","channels","contacts","navigation","state",function(e,t,n,r,i,o,a){var s=this,c=a.cloud.navigation.select(["activeViewId"]),u=function(){s.viewId=c.get()};a.addListener(c,u,n),this.goToHome=function(){return o.navigate("home")},this.showBeginConversationModal=function(){var e='\n          <toc-begin-conversation-modal class="toc-modal-container"\n            remove-modal="conversationsMenu.beginConversationModal.remove()">\n          </toc-begin-conversation-modal>\n        ',t="beginConversationModal";return o.showModal(t,e,this,n)}}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocConversationsMenu",e("directiveName",r)}}}),System.register("components/user-card/user-card-directive.js",["components/user-card/user-card.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,scope:{message:"@",enableDismissNotifications:"@"},controllerAs:"userCard",controller:["$scope","identity","R","state",function(e,t,n,r){var i=this;this.message=e.message,this.enableDismissNotifications=void 0!==e.enableDismissNotifications;var o=r.cloud.identity.select(["userInfo"]),a=function(){var e=o.get();i.avatar=t.getAvatar(e),i.avatarText="Avatar for "+(e.displayName||"Anonymous"),i.name=o.get(["displayName"])||"Anonymous"};if(r.addListener(o,a,e),!this.message){var s=r.cloud.notifications,c=function(){if(i.notificationCount=n.pipe(n.values,n.reject(n.prop("dismissed")))(s.get()||{}).length,0===i.notificationCount)return void(i.message="No new notifications");if(i.enableDismissNotifications)return void(i.message="Dismiss all notifications");var e=i.notificationCount>1,t=e?"s":"";i.message=i.notificationCount+" new notification"+t};r.addListener(s,c,e),this.enableDismissNotifications&&(this.dismissNotifications=function(){n.pipe(n.values,n.reject(n.prop("dismissed")),n.forEach(function(e){r.save(s,[e.notificationInfo.id,"dismissed"],!0)}))(s.get())})}}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocUserCard",e("directiveName",r)}}}),System.register("components/equal-to/equal-to-directive.js",[],function(e){"use strict";function t(){return{require:"ngModel",restrict:"A",scope:{otherValue:"=tocEqualTo"},link:function(e,t,n,r){r.$validators.equalTo=function(t){return t===e.otherValue},e.$watch("otherValue",function(){r.$validate()})}}}var n;return e("default",t),{setters:[],execute:function(){n="tocEqualTo",e("directiveName",n)}}}),System.register("components/spinner-button/spinner-button-directive.js",[],function(e){"use strict";function t(e){return{restrict:"A",scope:{loadingPromise:"="},link:function(t,n){var r=750,i=n.find("ion-spinner"),o=n.find("i"),a=n;i.toggleClass("toc-hidden"),i.toggleClass("toc-fadeout"),o.toggleClass("toc-fadein");var s=!1,c=function(){s=!s,i.toggleClass("toc-fadeout"),o.toggleClass("toc-fadeout"),e(function(){i.toggleClass("toc-hidden"),o.toggleClass("toc-hidden")},r),s?a.attr("disabled","true"):a.removeAttr("disabled")};t.$watch("loadingPromise",function(t){if(t){var n=Date.now();c(),t.then(function(){var t=Date.now(),i=(n-t)%r;e(function(){c()},r-i)})}})}}}var n;return e("default",t),t.$inject=["$timeout"],{setters:[],execute:function(){n="tocSpinnerButton",e("directiveName",n)}}}),System.register("services/buffer/buffer-service.js",[],function(e){"use strict";function t(e,t,n,r,i,o){var a=void 0,s=void 0,c={messages:void 0,invites:void 0,profiles:void 0},u=function(e,t){var r=i.cloud.messages.select([t,e]),o=r.get(["messageInfo"]),s=i.cloud.channels.get([t,"channelInfo"]),c=s.contactIds[0],u=i.cloud.contacts.get([c,"statusId"]);if(0!==u){var l=function(e){var t=e.r;return i.save(r,["receivedTime"],t).then(function(){return f(o.id)})};return n.debug("Buffer: Sending message "+o.content+" to "+t),a.sendMessage(s,o).then(l)}},l=function(n,r){return c.messages[n]?t.when():(u(n,r),c.messages[n]=e(function(){return u(n,r)},2e4,0,!1),i.save(i.cloud.buffer,["messages",n],{messageId:n,channelId:r}))},f=function(n){return c.messages[n]?(e.cancel(c.messages[n]),c.messages[n]=void 0,i.remove(i.cloud.buffer,["messages",n])):t.when()},d=function(e,o){var c=i.cloud.channels.select([e]),u=c.get(),l=u.channelInfo,f=l.contactIds[0],d=i.cloud.contacts.select([f]),p=function(e){var n=function(){return"sending"===u.inviteStatus?i.save(c,["inviteStatus"],"sent"):"accepting"===u.inviteStatus?i.remove(c,["inviteStatus"]).then(function(){return i.save(d,["statusId"],1)}).then(function(){return r.initializeChannel(l)}).then(function(){return a.listen(l)}).then(function(){return s.initializeUpdates(f)}):t.when()};return h(l.id).then(n)},g={id:r.INVITE_CHANNEL_ID,contactIds:l.contactIds};return n.debug("Buffer: Sending invite v"+o.version+" to "+e),a.sendInvite(g,o).then(p)},p=function(n){var r=i.cloud.identity.get(["userInfo"]),o=c.invites[n],a=o?h(n):t.when();return a.then(function(){return d(n,r),c.invites[n]=e(function(){return d(n,r)},2e4,0,!1),t.when()}).then(function(){return i.save(i.cloud.buffer,["invites",n],{channelId:n})})},h=function(t){return e.cancel(c.invites[t]),c.invites[t]=void 0,i.remove(i.cloud.buffer,["invites",t])},g=function(e,t){var r=i.cloud.channels.get([e,"channelInfo"]),o=r.contactIds[0],s=i.cloud.contacts.get([o,"statusId"]);if(0!==s){var c=function(e){return v(r.id)};return n.debug("Buffer: Sending profile v"+t.version+" to "+e),a.sendProfile(r,t).then(c)}},m=function(n){var r=i.cloud.identity.get(["userInfo"]),o=c.profiles[n],a=o?v(n):t.when();return a.then(function(){return g(n,r),c.profiles[n]=e(function(){return g(n,r)},2e4,0,!1),t.when()}).then(function(){return i.save(i.cloud.buffer,["profiles",n],{channelId:n})})},v=function(t){return e.cancel(c.profiles[t]),c.profiles[t]=void 0,i.remove(i.cloud.buffer,["profiles",t])},y=function(n,r){a=n,s=r;var l=i.cloud.buffer.get(["messages"]);c.messages=o.mapObj(function(t){var n=t.channelId,r=t.messageId;return u(r,n),e(function(){return u(r,n)},2e4,0,!1)})(l);var f=i.cloud.buffer.get(["profiles"]),p=i.cloud.identity.get(["userInfo"]);c.profiles=o.mapObj(function(t){var n=t.channelId;return g(n,p),e(function(){return g(n,p)},2e4,0,!1)})(f);var h=i.cloud.buffer.get(["invites"]);return c.invites=o.mapObj(function(t){var n=t.channelId;return d(n,p),e(function(){return d(n,p)},6e4,0,!1)})(h),t.when()};return{addMessage:l,addProfile:m,addInvite:p,initialize:y}}var n;return e("default",t),t.$inject=["$interval","$q","$log","channels","state","R"],{setters:[],execute:function(){n="buffer",e("serviceName",n)}}}),System.register("services/channels/channels-service.js",[],function(e){"use strict";function t(e,t,n,r){var i=void 0,o="toc-",a=o+"invite",s=function(e,t){var n=e>t?e+"-"+t:t+"-"+e,i=r.getSha256(n).substr(0,32);return o+i},c=function(e,t){var n=s(e,t),r={id:n,contactIds:[t]};return r},u=function(t){if(1!==t.contactIds.length)return e.reject("Group chat not supported yet.");var r=n.cloud.channels.select([t.id]),i=r.get("logicalClock");return void 0===i?n.save(r,["logicalClock"],0):e.when()},l=function(r){i=r;var o=n.cloud.channels.get();e.all(t.pipe(t.values,t.reject(t.prop("inviteStatus")),t.map(t.prop("channelInfo")),t.map(function(e){return u(e).then(function(){return i.listen(e)})}))(o));return e.when()};return{INVITE_CHANNEL_ID:a,createContactChannel:c,initializeChannel:u,initialize:l}}var n;return e("default",t),t.$inject=["$q","R","state","cryptography"],{setters:[],execute:function(){n="channels",e("serviceName",n)}}}),System.register("services/cryptography/cryptography-service.js",[],function(e){"use strict";function t(e,t,n){var r=void 0,i="AES-GCM",o=128,a=o/8,s=a,c=a,u=1e4,l="sha256",f={name:"tocEncryptedObject",schema:{type:"object",properties:{ct:{type:"string"},tag:{type:"string"},iv:{type:"string"}},required:["ct","tag","iv"]}},d={name:"tocUnencryptedObject",schema:{type:"object",properties:{pt:{type:"string"}},required:["pt"]}},p=function(e){return e.replace(/\//g,".")},h=function(e){return e.replace(/\./g,"/")},g=function(t){var r=e.defer();return n.random.getBytes(t,function(e,t){return e?r.reject(e):void r.resolve(t)}),r.promise},m=function(e){return g(e).then(function(e){return n.util.encode64(e)})},v=function(e){var t=n.util.encode64(e);return t},y=function(e){var t=n.util.decode64(e);return t},b=function(t){var n=v(t);return e.when(n)},w=function(t){var n=y(t);return e.when(n)},S=function(e){if(!e||!e.key)throw new Error("cryptography: mising credentials")},C=function(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1];S(t);var i=JSON.stringify(e),o=n.hmac.create();return o.start(l,t.key),o.update(i),o.digest().getBytes()},_=function(e){var t=n.md.md5.create();return t.update(e),t.digest().toHex()},E=function(e){var t=n.md.sha256.create();return t.update(e),t.digest().toHex()},T=function(e,t){var o=arguments.length<=2||void 0===arguments[2]?r:arguments[2];S(o);var a=JSON.stringify(e),s=n.cipher.createCipher(i,o.key);s.start({iv:t}),s.update(n.util.createBuffer(a)),s.finish();var c=n.util.encode64(t),u=n.util.encode64(s.output.getBytes()),l=n.util.encode64(s.mode.tag.getBytes());return{iv:c,ct:u,tag:l}},A=function(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=C(e);return T(e,n,t)},I=function(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],i=n.random.getBytesSync(c);return T(e,i,t)},k=function(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1];S(t);var o=n.util.decode64(e.ct),a=n.util.decode64(e.iv),s=n.util.decode64(e.tag),c=n.cipher.createDecipher(i,t.key);c.start({iv:n.util.createBuffer(a),tag:n.util.createBuffer(s)}),c.update(n.util.createBuffer(o));var u=c.finish();if(!u)throw new Error("cryptography: decryption failed");return JSON.parse(c.output.getBytes())},x=function(){return m(s)},B=function(t){return e.when(I(t))},N=function(t){var r=n.util.decode64(t.salt),i=n.pkcs5.pbkdf2(t.password,r,u,a);return e.when({key:i})},D=function(){return void 0!==r},R=function(t){return S(t),r=t,e.when(t)},j=function(e){var t=e.key?R({key:y(e.key)}):N(e).then(R);return t.then(function(e){return{key:v(e.key)}})},$=function(){return r=void 0,e.when()},L={ENCRYPTED_OBJECT:f,UNENCRYPTED_OBJECT:d,escapeBase64:p,unescapeBase64:h,encodeBase64:b,decodeBase64:w,getRandomBase64:m,getHmac:C,getMd5:_,getSha256:E,encryptDeterministic:A,encrypt:I,decrypt:k,createSalt:x,createChallenge:B,derive:N,isInitialized:D,initialize:j,destroy:$};return t.tocCrypto=L,L}var n;return e("default",t),t.$inject=["$q","$window","forge"],{setters:[],execute:function(){n="cryptography",e("serviceName",n)}}}),System.register("services/contacts/contacts-service.js",[],function(e){"use strict";function t(e,t,n,r,i,o,a,s){var c=void 0,u=void 0,l=function(e){var n=s.cloud.channels.get([e,"channelInfo","contactIds"])[0],r=s.cloud.contacts.get([n]);return o.dismiss(e).then(function(){return t.show({template:"Accept invite from "+(r.userInfo.displayName||"Anonymous")+"?",title:"Accept Invite",buttons:[{text:"Cancel",type:"button-outline button-calm"},{text:"Accept",type:"button-outline button-balanced",onTap:function(t){return g(e)}}]})})},f=function(t){var n=s.cloud.contacts.select([t.id]),r=n.get(["userInfo"]);return r&&r.version>t.version?e.when():s.save(n,["userInfo"],t)},d=function(e){var t=e;return f(t)},p=function(e){return n.addProfile(e)},h=function(t){var n=t,i=s.cloud.identity.get(["userInfo"]).id,a=r.createContactChannel(i,n.id),l=s.cloud.contacts.select([n.id]),d=s.cloud.channels.select([a.id]),p=d.get();return p?"sent"===p.inviteStatus?f(n).then(function(){return s.remove(d,["inviteStatus"])}).then(function(){return s.save(l,["statusId"],1)}).then(function(){return r.initializeChannel(p.channelInfo)}).then(function(){return u.listen(p.channelInfo)}).then(function(){return c.initializeUpdates(n.id)}):e.when():f(n).then(function(){return s.save(l,["statusId"],-1)}).then(function(){return s.save(d,["channelInfo"],a)}).then(function(){return s.save(d,["inviteStatus"],"received")}).then(function(){return o.notify(a.id)})},g=function(t){var r=s.cloud.channels.select([t]),i=r.get();return i?"received"===i.inviteStatus?s.save(r,["inviteStatus"],"accepting").then(function(){return n.addInvite(t)}):e.when():e.reject("contact: missing existing channel")},m=function(t){var i=s.cloud.identity.get("userInfo");if(t===i.id)return e.reject("contact: cannot invite self");var o=r.createContactChannel(i.id,t),a=s.cloud.contacts.select([t]),c=s.cloud.channels.select([o.id]),u=c.get();if(u)return e.reject("contact: contact already exists");var l={version:0,id:t};return s.save(a,["userInfo"],l).then(function(){return s.save(a,["statusId"],-1)}).then(function(){return s.save(c,["channelInfo"],o)}).then(function(){return s.save(c,["inviteStatus"],"sending")}).then(function(){return n.addInvite(o.id)})},v=function(){var t=(s.cloud.identity.get("userInfo"),s.cloud.channels.get()),n=a.pipe(a.values,a.map(function(e){return p(e.channelInfo.id)}))(t);return e.all(n)},y=function(t,n){c=t,u=n;var r=s.cloud.contacts.get(),i=a.pipe(a.values,a.filter(a.propEq("statusId",1)),a.map(function(e){return s.save(s.cloud.contacts,[e.userInfo.id,"statusId"],0)}))(r);return e.all(i)};return{showAcceptInviteDialog:l,saveContactInfo:f,saveReceivedProfile:d,saveSendingProfile:p,saveReceivedInvite:h,saveAcceptingInvite:g,saveSendingInvite:m,saveProfileUpdates:v,initialize:y}}var n;return e("default",t),t.$inject=["$q","$ionicPopup","buffer","channels","identity","notifications","R","state"],{setters:[],execute:function(){n="contacts",e("serviceName",n)}}}),System.register("services/identity/identity-service.js",[],function(e){"use strict";function t(e,t,n,r,i){var o=function(){return void 0!==i.cloudUnencrypted.cryptography.get()},a=r.memoize(function(e){var t=n.getMd5(e);return"http://cdn.libravatar.org/avatar/"+t+".jpg?s=96&d=identicon"}),s=function(e){return a(e.email?e.email:e.id?e.id:"unknown-user@toc.im")},c=function(e){var t=/^[a-f0-9]{64}$/i;return t.test(e)},u=function(t){var r=i.cloudUnencrypted.cryptography.get(["challenge"]);if(!r)return e.reject("identity: missing auth challenge");try{n.decrypt(r)}catch(o){return n.destroy().then(function(){return e.reject("identity: wrong password")})}return e.when(t)},l=function(t,r){var o=function(t){if(!r)return e.when();var n=i.local.cryptography.get(["derivedCredentials"]);return n?e.when():i.save(i.local.cryptography,["derivedCredentials"],t)},a=function(e){return n.initialize(e).then(u).then(o)};if(t.key)return a(t);if(!t.password)return e.reject("identity: no password or key provided");var s=i.cloudUnencrypted.cryptography.get(["salt"]);if(s){var c={password:t.password,salt:s};return a(c)}var l=function(e){return i.save(i.cloudUnencrypted.cryptography,["salt"],e)},f=function(e){return i.save(i.cloudUnencrypted.cryptography,["challenge"],e)};return n.createSalt().then(l).then(function(e){return n.initialize({password:t.password,salt:e}).then(o).then(function(){return n.createChallenge(e)})}).then(f)},f=function(){return e.when()};return{getUserExists:o,getAvatar:s,validateId:c,authenticate:u,initialize:l,destroy:f}}var n;return e("default",t),t.$inject=["$q","$filter","cryptography","R","state"],{setters:[],execute:function(){n="identity",e("serviceName",n)}}}),System.register("services/messages/messages-service.js",[],function(e){"use strict";function t(e,t,n,r,i,o,a,s,c){var u=function(e,t){var n=e.messageInfo.logicalClock-t.messageInfo.logicalClock;return 0===n?e.messageInfo.id>t.messageInfo.id?1:-1:n},l=function(n,o){var c=o.sentTime,l=o.senderId,f=o.channelId,d=i.getSha256(f+"-"+l).substr(0,32),p=c+"-"+d,h=a.cloud.messages.get([f,p]);if(h)return e.when();var g=o.receivedTime,m=n.c,v=n.l,y={id:p,senderId:l,sentTime:c,logicalClock:v,content:m},b=a.cloud.channels.select([f]),w=a.cloud.messages.select([f]),S=w.select([p]),C=b.get("logicalClock"),_=v>=C?v:C,E=_+1,T=function(){var t=b.get(["latestMessageId"]);if(t){var n=w.get([t]),r={messageInfo:y};if(u(r,n)<0)return e.when()}return a.save(b,["latestMessageId"],p)},A=function(){var t=a.cloud.navigation.get(["activeViewId"]);if(t===f&&b.get(["viewingLatest"])&&r.isInForeground())return e.when();var n=function(){var t=b.get(["unreadMessageId"]);if(t){var n=w.get([t]),r={messageInfo:y};if(u(r,n)>0)return e.when()}return a.save(b,["unreadMessageId"],p)};return n().then(function(){return s.notify(f)})};return a.save(b,["logicalClock"],E).then(function(){return a.save(S,["messageInfo"],y)}).then(function(){return a.save(S,["receivedTime"],g)}).then(T).then(A)["catch"](t.error)},f=function(r,s){if(!s)return e.reject("messages: message must not be empty");var c=a.cloud.identity.get(["userInfo","id"]),u=a.cloud.channels.get([r,"logicalClock"]),l=u+1,f=o.getTime(),d=i.getSha256(r+"-"+c).substr(0,32),p=f+"-"+d,h=a.cloud.messages.get([r,p]);if(h)return e.when();var g={id:p,senderId:c,sentTime:f,logicalClock:l,content:s},m=function(){return a.save(a.cloud.channels,[r,"logicalClock"],l)},v=function(){return a.save(a.cloud.messages,[r,p,"messageInfo"],g)};return m().then(v).then(function(){return n.addMessage(p,r)})["catch"](t.error)},d=function(){return e.when()};return{compareMessages:u,saveSendingMessage:f,saveReceivedMessage:l,initialize:d}}var n;return e("default",t),t.$inject=["$q","$log","buffer","devices","cryptography","time","state","notifications","R"],{setters:[],execute:function(){n="messages",e("serviceName",n)}}}),System.register("services/navigation/navigation-service.js",[],function(e){"use strict";function t(e,t,n,r,i,o,a,s){var c={"public":{welcome:"app.public.welcome",cloud:"app.public.cloud",signin:"app.public.signin",signout:"app.public.signin"},"private":{home:"app.private.home",cloud:"app.private.cloud",channel:"app.private.channel"}},u=c["public"].welcome,l=c["private"].home,f=function(e,t){return i.go(e,t)},d=function(t){if(p(t))return n.when();var r="home"===t,i=r?c["private"].home:c["private"].channel,o=r?void 0:{channelId:t};return e.nextViewOptions({disableBack:!0,disableAnimate:!1}),f(i,o).then(function(){return s.save(s.cloud.navigation,["activeViewId"],t)})},p=function(e){return s.cloud.navigation.get("activeViewId")===e},h=function(e,t){return i.is(e,t)},g=function(e,n,r,i){return r[e]&&r[e].remove(),r[e]=t.fromTemplate(n,{scope:i}),r[e].show()},m=function(){return r.$on("$stateChangeStart",function(e,t){var n=void 0,r=void 0;return s.cloud.identity&&s.cloud.identity.get()?(n=!y(t.name),r=l):(n=y(t.name),r=u),n?(e.preventDefault(),f(r)):void 0}),n.when()},v=function(){return e.clearCache()},y=function(e){return e?e.startsWith("app.private"):i.includes("app.private")},b=function(){var t=arguments.length<=0||void 0===arguments[0]?{disableAnimate:!1}:arguments[0];return e.nextViewOptions({historyRoot:!0,disableBack:!0,disableAnimate:t.disableAnimate}),n.when()},w=function(){var e=h(c["public"].welcome)?n.when():b({disableAnimate:!0});return e.then(function(){return f(c["public"].welcome)}).then(function(){return o(function(){return v()},0,!1)})},S=function(){var e=s.cloud.navigation.get("activeViewId");return void 0===e?b().then(function(){return f(l)}).then(function(){return s.save(s.cloud.navigation,["activeViewId"],"home")}):e.startsWith("toc-")?b().then(function(){return f(c["private"].channel,{channelId:e})}):b().then(function(){return f(l)})};return{app:c,go:f,at:h,navigate:d,isActiveView:p,isPrivateState:y,showModal:g,clearCache:v,setupRedirect:m,resetHistory:b,initializePublic:w,initialize:S}}var n;return e("default",t),t.$inject=["$ionicHistory","$ionicModal","$q","$rootScope","$state","$timeout","R","state"],{setters:[],execute:function(){n="navigation",e("serviceName",n)}}}),System.register("services/devices/devices-service.js",[],function(e){"use strict";function t(e,t,n,r,i,o,a,s,c){var u=void 0,l=function(){return o.cordova?!0:!1},f=function(){return o.cordova?!1:!0},d=function(){return l()?"android"===o.cordova.platformId:!1},p=function(){return l()?!o.cordova.plugins.backgroundMode.isActive():void 0===o.hidden?void 0===o.document.hasFocus?!0:o.document.hasFocus():!o.hidden},h=function(){var e=c.local.devices.get(["deviceInfo","id"]),t=c.cloud.devices.get()||{},n=s.assoc(e,{})(t),i=s.pipe(s.keys,s.map(function(t){var n=t===e?0:1;return c.save(c.cloud.devices,[t,"disconnect"],n)}))(n);return r.all(i)},g=function(e){var n=c.local.devices.get(["deviceInfo","id"]),o=c.cloud.devices.select([n,"disconnect"]),a=function(n){if(1===n.data.currentData){var r=i(function(){e()},5e3,!1);t.show({title:"Another device has connected",template:"This device will disconnect in 5 seconds.",buttons:[{text:"Stay connected",type:"button-assertive",onTap:function(e){i.cancel(r),h()}}]})}};return c.addListener(o,a,null,{skipInitialize:!0}),r.when()},m=function(){var e=c.local.devices.get("deviceInfo");return e?r.when(e):a.getRandomBase64(8).then(function(e){return c.save(c.local.devices,["deviceInfo"],{id:e})})},v=function(e){return u=e,h().then(function(){return g(u.destroy)})};return{initialize:v,create:m,isAndroidApp:d,isInForeground:p,isCordovaApp:l,isWebApp:f}}var n;return e("default",t),t.$inject=["$interval","$ionicPopup","$log","$q","$timeout","$window","cryptography","R","state"],
{setters:[],execute:function(){n="devices",e("serviceName",n)}}}),System.register("services/session/session-service.js",[],function(e){"use strict";function t(e,t,n,r,i,o,a,s,c,u,l,f,d,p,h,g,m,v){var y=e.defer(),b=e.defer(),w=function(){return y.promise},S=function(){return b.promise},C=function(e,t){return c.initialize(e,t).then(function(){return h.cloud.initialize()}).then(function(){return l.initialize()}).then(function(){return s.initialize(T)}).then(function(){return o.initialize(l)}).then(function(){return g.initialize()}).then(function(){return a.initialize(g,l)}).then(function(){return d.initialize()}).then(function(){return f.initialize(a)}).then(function(){return i.initialize(l,g)}).then(function(){return v.initialize()}).then(function(){return u.initialize()}).then(function(){return y.resolve("session: private ready")})},_=function(){var e=function(){var e=h.local.cryptography.get(["derivedCredentials"]);return e?C(e):u.initializePublic().then(function(){return b.resolve("session: public ready")})};return u.setupRedirect().then(function(){return m.prepare()}).then(function(){return h.initialize()}).then(function(){return s.create()}).then(function(){return e()})["catch"](t.error)},E=function(){return h.remove(h.local.cryptography,["derivedCredentials"]).then(function(){return e.when(r.location.reload())})},T={preparePublic:S,preparePrivate:w,start:C,initialize:_,destroy:E};return T}var n;return e("default",t),t.$inject=["$q","$log","$timeout","$window","buffer","channels","contacts","devices","identity","navigation","network","notifications","messages","R","state","status","storage","time"],{setters:[],execute:function(){n="session",e("serviceName",n)}}}),System.register("components/cloud-connect-modal/cloud-connect-modal-directive.js",["components/cloud-connect-modal/cloud-connect-modal.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,scope:{removeModal:"&"},controllerAs:"cloudConnectModal",controller:["$ionicPopup","$scope","identity","notifications","storage",function(e,t,n,r,i){var o=this;this.removeModal=t.removeModal,this.selectedService="remotestorage",this.userExists=n.getUserExists(),this.remoteStorageEmail="",this.submitRemoteStorageEmail=function(t){if(!o.remoteStorageEmail)return t&&t.preventDefault(),r.notifySystem("Please enter a valid email.");var n=function(e){return r.notifyGenericError(e)};return o.userExists?e.confirm({title:"Preparing to Upload Data",template:"\n                <p>Toc will try to upload your local data into this cloud account.</p>\n                <p>Please confirm this cloud account hasn't been used with Toc before.</p>\n              ",cancelType:"button-outline button-calm",okText:"Confirm",okType:"button-outline button-assertive"}).then(function(e){e&&i.connect(o.remoteStorageEmail)["catch"](n)}):void i.connect(o.remoteStorageEmail)["catch"](n)},this.services={remotestorage:{id:"remotestorage",name:"remoteStorage",description:"An open protocol for web storage.",img:"remotestorage.svg",connect:function(){e.show({template:'\n                <form ng-submit="cloudConnectModal.submitRemoteStorageEmail()"\n                  novalidate>\n                  <input type="email" placeholder="Your remoteStorage email."\n                    ng-model="cloudConnectModal.remoteStorageEmail" toc-auto-focus>\n                </form>\n                ',title:"Connect remoteStorage",scope:t,buttons:[{text:"Cancel",type:"button-outline button-calm"},{text:"Connect",type:"button-outline button-balanced",onTap:function(e){o.submitRemoteStorageEmail(e)}}]})}},dropbox:{id:"dropbox",name:"Dropbox",description:"(Coming soon)",img:"dropbox.svg",connect:function(){}},googledrive:{id:"googledrive",name:"Google Drive",description:"(Coming soon)",img:"googledrive.svg",connect:function(){}}},this.connect=function(){o.services[o.selectedService].connect()}}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocCloudConnectModal",e("directiveName",r)}}}),System.register("services/notifications/notifications-service.js",[],function(e){"use strict";function t(e,t,n,r,i,o,a,s,c,u,l){var f=void 0,d={},p=function(e){var t=e.substr(e.length-8);return parseInt(t,16)},h=function(e){var t=e,n=u.cloud.channels.select([t]);if("received"===n.get(["inviteStatus"]))return"New invite received!";var r=n.select(["latestMessageId"]),i=r.get();return i?u.cloud.messages.get([t,i,"messageInfo","content"]):""},g=function(t){var n=t.id,r=u.cloud.channels.select([n]),i=r.get(["channelInfo","contactIds"])[0],o=u.cloud.contacts.select(i),a=o.get("userInfo"),c=s.getAvatar(a),l=a.displayName||"Anonymous",f=h(t.id),d={id:t.cordovaNotificationId,title:l,text:f,icon:c,sound:"res://platform_default",smallIcon:"res://icon.png",data:t};return e.schedule(d)},m=function(e){if(!n.Notification)return o.when();var t=e.id,r=u.cloud.channels.select([t]),a=r.get(["channelInfo","contactIds"])[0],c=u.cloud.contacts.select(a),l=c.get("userInfo"),f={body:h(e.id),icon:s.getAvatar(l),tag:e.id},p=l.displayName||"Anonymous";d[e.id]=new Notification(p,f);var g=d[e.id];return g.addEventListener("click",function(){return E(e.id)}),i(function(){g.close()},5e3,!1),o.when()},v=function(e){var t=p(e),n=function(e){return a.isInForeground()?o.when():a.isCordovaApp()?g(e):m(e)},r=u.cloud.notifications.select([e]),i={id:e,cordovaNotificationId:t};return n(i).then(function(){return u.save(r,["notificationInfo"],i)}).then(function(){return u.save(r,["dismissed"],!1)})},y=function(e){var t=u.memory.notifications;return u.save(t,["systemMessage"],e)},b=function(e){return r.error(e),y("Something went wrong. Please contact the developers for further troubleshooting.")},w=function(t){return e.clear(t.cordovaNotificationId)},S=function(e){return n.Notification?void 0===d[e.id]?o.when():(d[e.id].close(),o.when()):o.when()},C=function(e){var t=p(e);if(_(e))return o.when();var n=function(e){return a.isCordovaApp()?w(e):S(e)},r=u.cloud.notifications.select([e]),i={id:e,cordovaNotificationId:t};return n(i).then(function(){return u.save(r,["dismissed"],!0)})},_=function(e){return u.cloud.notifications.get([e,"dismissed"])},E=function(e){var t=u.cloud.channels.select([e]);return"received"===t.get(["inviteStatus"])?f.showAcceptInviteDialog(e):c.navigate(e).then(function(){return u.save(t,["viewingLatest"],!0)})};t.$on("$cordovaLocalNotification:click",function(e,t){var n=JSON.parse(t.data).id;if("home"===n)return c.navigate(n);var r=n;return E(r)});var T=function(t){if(f=t,a.isAndroidApp()&&e.schedule({id:0,title:"Toc Messenger",text:"Online",sound:"res://platform_default",icon:"res://icon.png",smallIcon:"res://icon.png",data:{id:"home"},ongoing:!0}),a.isWebApp()){if(!n.Notification)return o.when();n.Notification.requestPermission()}return o.when()};return{isDismissed:_,notify:v,notifySystem:y,notifyGenericError:b,dismiss:C,initialize:T}}var n;return e("default",t),t.$inject=["$cordovaLocalNotification","$rootScope","$window","$log","$timeout","$q","devices","identity","navigation","state","R"],{setters:[],execute:function(){n="notifications",e("serviceName",n)}}}),System.register("services/status/status-service.js",[],function(e){"use strict";function t(e,t,n,r,i,o,a){var s={},c=1,u=0,l=15e3,f=function(e){return n.debug("Status: Sending status update to "+e),i.sendStatus(e,c)["catch"](function(e){return"timeout"===e?t.when():t.reject(e)})},d=function(n){return f(n),s[n]=e(function(){return f(n)},l,0,!1),t.when()},p=function(){var e=a.cloud.contacts.get();return o.pipe(o.values,o.reject(o.propEq("statusId",-1)),o.forEach(function(e){return d(e.userInfo.id)}))(e),r.onbeforeunload=function(){o.pipe(o.values,o.reject(o.propEq("statusId",-1)),o.forEach(function(e){return i.sendStatus(e.userInfo.id,u)}))(e)},t.when()},h=function(){a.cloud.contacts.get();return o.pipe(o.values,o.forEach(function(t){return e.cancel(t)}))(s),s={},t.when()};return{sendUpdate:f,initializeUpdates:d,initialize:p,destroy:h}}var n;return e("default",t),t.$inject=["$interval","$q","$log","$window","network","R","state"],{setters:[],execute:function(){n="status",e("serviceName",n)}}}),System.register("services/time/time-service.js",[],function(e){"use strict";function t(e,t,n,r,i){var o=function(){return t.Date.now()},a=i.memoize(function(e){return r(e).format("LT")}),s=i.memoize(function(e){return r(e).calendar()}),c=i.memoize(function(e,t){return r(e).minutes()!==r(t).minutes()}),u=i.memoize(function(e,t){return r(e).dayOfYear()!==r(t).dayOfYear()}),l=function(){return r.locale("en",{calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"ll",nextWeek:"ll",sameElse:"ll"}}),n.when()},f={getTime:o,getTimestamp:a,getDatestamp:s,isMinuteDifferent:c,isDayDifferent:u,initialize:l,moment:r};return t.tocTime=f,f}var n;return e("default",t),t.$inject=["$interval","$window","$q","moment","R"],{setters:[],execute:function(){n="time",e("serviceName",n)}}}),System.register("views/channel/channel-config.js",["views/channel/channel.html!github:systemjs/plugin-text@0.0.2","views/channel/channel-controller.js"],function(e){"use strict";function t(e){e.state("app.private.channel",{url:"/channel/{channelId:string}",template:n,controller:i+" as channelView"})}var n,r,i;return e("default",t),t.$inject=["$stateProvider"],{setters:[function(e){n=e["default"]},function(e){r=e["default"],i=e.controllerName}],execute:function(){}}}),System.register("views/channel/channel-controller.js",[],function(e){"use strict";function t(e,t){this.channelId=e.channelId,this.viewLatest=function(){t.scrollBottom(!0)}}var n;return e("default",t),t.$inject=["$stateParams","$ionicScrollDelegate"],{setters:[],execute:function(){n="ChannelController",e("controllerName",n)}}}),System.register("services/state/state-service.js",[],function(e){"use strict";function t(e,t,n,r,i,o,a,s){var c=a.split(s.KEY_SEPARATOR),u={};r.tocState=u,r.baobab=o,u.tree=new o({memory:{},local:{},cloudUnencrypted:{},cloud:{}},{immutable:!r.tocProd}),u.tree.on("update",function(){return i(function(){return n.$apply()},0,!1)}),u.version="0.3.0",u.memory={cursor:u.tree.select(["memory"])},u.local={cursor:u.tree.select(["local"])},u.cloudUnencrypted={cursor:u.tree.select(["cloudUnencrypted"])},u.cloud={cursor:u.tree.select(["cloud"])},u.memory.notifications=u.memory.cursor.select(["notifications"]),u.local.cryptography=u.local.cursor.select(["cryptography"]),u.local.identity=u.local.cursor.select(["identity"]),u.local.session=u.local.cursor.select(["session"]),u.local.devices=u.local.cursor.select(["devices"]),u.cloudUnencrypted.cryptography=u.cloudUnencrypted.cursor.select(["cryptography"]),u.cloudUnencrypted.identity=u.cloudUnencrypted.cursor.select(["identity"]),u.cloudUnencrypted.session=u.cloudUnencrypted.cursor.select(["session"]),u.cloudUnencrypted.state=u.cloudUnencrypted.cursor.select(["state"]),u.cloud.buffer=u.cloud.cursor.select(["buffer"]),u.cloud.identity=u.cloud.cursor.select(["identity"]),u.cloud.contacts=u.cloud.cursor.select(["contacts"]),u.cloud.channels=u.cloud.cursor.select(["channels"]),u.cloud.messages=u.cloud.cursor.select(["messages"]),u.cloud.devices=u.cloud.cursor.select(["devices"]),u.cloud.network=u.cloud.cursor.select(["network"]),u.cloud.navigation=u.cloud.cursor.select(["navigation"]),u.cloud.notifications=u.cloud.cursor.select(["notifications"]),u.cloud.session=u.cloud.cursor.select(["session"]),u.cloud.status=u.cloud.cursor.select(["status"]);var l=function(e,n,r){return t.when().then(function(){return e.set(n,r),r})},f=function(e,t,n,r){var i=s.getStorageKey(a.concat(a.drop(1,e.path),t));return r.storeObject(i,n).then(function(n){return e.set(t,n),n})},d=function(e,n){return void 0===e.get()?t.when():t.when().then(function(){return e.unset(n),n})},p=function(n,r,i){var o=s.getStorageKey(a.concat(a.drop(1,n.path),r));return void 0===n.get()?t.when():i.removeObject(o).then(function(e){return n.unset(r),e})["catch"](e.error)},h=function(e,t,n,r){r&&r.skipInitialize||t(),e.on("update",t),n&&n.$on("destroy",function(){return e.off("update",t)})},g=function(e){e.oldValue!==e.newValue&&u.cloud.cursor.set(c(e.relativePath),e.newValue)},m=function(e){e.oldValue!==e.newValue&&u.cloudUnencrypted.cursor.set(c(e.relativePath),e.newValue)},v=function(e){return e.store.getAllObjects().then(function(t){return a.forEach(function(t){return e.cursor.set(c(t[0]),t[1])})(t),e.cursor.tree.commit(),t})},y=function(){return v(u.local)},b=function(){return v(u.cloud)},w=function(){return v(u.cloudUnencrypted)};u.memory.save=l,u.local.save=f,u.cloudUnencrypted.save=f,u.cloud.save=f,u.memory.remove=d,u.local.remove=p,u.cloudUnencrypted.remove=p,u.cloud.remove=p,u.addListener=h,u.cloud.initialize=b;var S=function(e,t,n){var r=u[e.path[0]];return r.save(e,t,n,r.store)},C=function(e,t){var n=u[e.path[0]];return n.remove(e,t,n.store)},_=function(){return u.tree.commit(),t.when()},E=function(){return s.initialize(),u.local.store=s.local,u.cloudUnencrypted.store=s.cloudUnencrypted,u.cloud.store=s.cloud,s.cloud.onChange(g),s.cloudUnencrypted.onChange(m),y().then(function(){return w()})},T=function(){return u.local.store.removeAllObjects().then(function(){return s.destroy()})};return u.save=S,u.remove=C,u.commit=_,u.initialize=E,u.destroy=T,u}var n;return e("default",t),t.$inject=["$log","$q","$rootScope","$window","$timeout","Baobab","R","storage"],{setters:[],execute:function(){n="state",e("serviceName",n)}}}),System.register("views/welcome/welcome-config.js",["views/welcome/welcome.html!github:systemjs/plugin-text@0.0.2","views/welcome/welcome-controller.js"],function(e){"use strict";function t(e){e.state("app.public.welcome",{url:"/welcome",template:n,controller:i+" as welcomeView"})}var n,r,i;return e("default",t),t.$inject=["$stateProvider"],{setters:[function(e){n=e["default"]},function(e){r=e["default"],i=e.controllerName}],execute:function(){}}}),System.register("views/welcome/welcome-controller.js",[],function(e){"use strict";function t(e,t,n,r,i,o){var a=this;i.preparePublic().then(function(){a.openPasswordPromptModal=function(){this.passwordPromptModal=e.fromTemplate('\n          <toc-password-prompt-modal class="toc-modal-container"\n            remove-modal="welcomeView.passwordPromptModal.remove()"\n            show-modal="welcomeView.passwordPromptModal.show()"\n            hide-modal="welcomeView.passwordPromptModal.hide()">\n          </toc-password-prompt-modal>\n          ',{scope:t,backdropClickToClose:!1,hardwareBackButtonToClose:!1}),this.passwordPromptModal.show()},a.openPasswordPromptModal()})}var n;return e("default",t),t.$inject=["$ionicModal","$scope","R","state","session","storage"],{setters:[],execute:function(){n="WelcomeController",e("controllerName",n)}}}),System.register("services/storage/storage-service.js",[],function(e){"use strict";function t(e,t,n,r,i,o,a){var s="rw",c="toc-state-",u=".",l=o.join(u),f=function(t){try{a.remoteStorage.connect(t,"https://toc.im")}catch(n){return e.reject(n)}return e.when()},d=function(){return a.remoteStorage.connected},p=function(){var t=a.remoteStorage.connected===!0||a.remoteStorage.connected===!1;if(t)return e.when();var n=e.defer();return a.remoteStorage.on("ready",function(){return n.resolve()}),n.promise},h=function(){n.localStorage.clear();var t=e.defer(),i=n.indexedDB.open("remotestorage");return i.onerror=function(e){t.reject(e.target.errorCode)},i.onsuccess=function(e){t.resolve(e.target.result)},t.promise.then(function(t){var n=e.defer(),r=t.transaction(["nodes"],"readwrite").objectStore("nodes").clear();return r.onerror=function(e){n.reject(e.target.errorCode)},r.onsuccess=function(e){n.resolve(e.target.result)},n.promise}).then(function(){return r(function(){n.location.reload()},0,!1)})},g=a.remoteStorage.enableLog,m=function(e){a.remoteStorage.caching.enable("/"+(c+e)+"/")},v=function(e){var t=arguments.length<=1||void 0===arguments[1]?s:arguments[1];a.remoteStorage.access.claim(""+(c+e),t)},y=function(n){n.declareType(i.ENCRYPTED_OBJECT.name,i.ENCRYPTED_OBJECT.schema);var r=function(r,o){t.debug("Cloud: Saving object "+JSON.stringify(o)+" at "+r);var a=i.encrypt(o),s=i.escapeBase64(JSON.stringify(i.encryptDeterministic(r)));return e.when(n.storeObject(i.ENCRYPTED_OBJECT.name,s,a)).then(function(){return o})},a=function(t){var r=i.escapeBase64(JSON.stringify(i.encryptDeterministic(t)));return e.when(n.getObject(r,!1)).then(i.decrypt)},s=function(r){t.debug("Cloud: Removing object at "+r);var o=i.escapeBase64(JSON.stringify(i.encryptDeterministic(r)));return e.when(n.remove(o)).then(function(){return r})},c=function(){var t="";return e.when(n.getAll(t,!1)).then(function(e){var t=o.pipe(o.toPairs,o.map(function(e){var t=void 0;try{t=[i.decrypt(JSON.parse(i.unescapeBase64(e[0]))),i.decrypt(e[1])]}catch(n){if("cryptography: decryption failed"===n.message)return;throw new Error(n)}return t}),o.filter(function(e){return void 0!==e}))(e);return t})},u=function(){var t="";return e.when(n.getAll(t,!1)).then(function(t){var r=o.pipe(o.keys,o.map(function(t){return e.when(n.remove(t))}))(t);return r})},l=function(e){n.on("change",function(n){if(i.isInitialized()&&"local"!==n.origin)try{n.relativePath=n.relativePath?i.decrypt(JSON.parse(i.unescapeBase64(n.relativePath))):n.relativePath,n.newValue=n.newValue?i.decrypt(n.newValue):n.newValue,n.oldValue=n.oldValue?i.decrypt(n.oldValue):n.oldValue,t.debug("Cloud: Received object "+JSON.stringify(n.newValue)+" at "+n.relativePath),e(n)}catch(r){if("cryptography: decryption failed"===r.message)return;throw new Error(r)}})},f=function(){n.cache("")};return{exports:{storeObject:r,getObject:a,removeObject:s,getAllObjects:c,removeAllObjects:u,onChange:l,initialize:f}}},b=function(n){n.declareType(i.UNENCRYPTED_OBJECT.name,i.UNENCRYPTED_OBJECT.schema);var r=function(r,o){t.debug("CloudUnencrypted: Saving object "+JSON.stringify(o)+" at "+r);var a={pt:JSON.stringify(o)};return e.when(n.storeObject(i.UNENCRYPTED_OBJECT.name,r,a)).then(function(){return o})},a=function(t){return e.when(n.getObject(t,!1)).then(function(e){return JSON.parse(e.pt)})},s=function(r){return t.debug("CloudUnencrypted: Removing object at "+r),e.when(n.remove(r)).then(function(){return r})},c=function(){var t="";return e.when(n.getAll(t,!1)).then(function(e){var t=o.pipe(o.toPairs,o.map(function(e){return[e[0],JSON.parse(e[1].pt)]}))(e);return t})},u=function(){var t="";return e.when(n.getAll(t,!1)).then(function(t){var r=o.pipe(o.keys,o.map(function(t){return e.when(n.remove(t))}))(t);return r})},l=function(e){n.on("change",function(n){"local"!==n.origin&&(n.newValue=n.newValue?JSON.parse(n.newValue.pt):n.newValue,n.oldValue=n.oldValue?JSON.parse(n.oldValue.pt):n.oldValue,t.debug("CloudUnencrypted: Received object "+JSON.stringify(n.newValue)+" at "+n.relativePath),e(n))})},f=function(){n.cache("")};return{exports:{storeObject:r,getObject:a,removeObject:s,getAllObjects:c,removeAllObjects:u,onChange:l,initialize:f}}},w=function(){var r=arguments.length<=0||void 0===arguments[0]?"local":arguments[0],i=c+r+u,a=function(t){var r=JSON.parse(n.localStorage.getItem(i+t));return e.when(r)},s=function(e){return JSON.parse(n.localStorage.getItem(i+e))},l=function(r){return t.debug("Local: Removing object at "+r),n.localStorage.removeItem(i+r),e.when(r)},f=function(){var t=o.pipe(o.keys,o.filter(function(e){return e.startsWith(i)}),o.map(function(e){return[e.substr(i.length),s(e.substr(i.length))]}))(n.localStorage);return e.when(t)},d=function(){var t=o.pipe(o.keys,o.filter(function(e){return e.startsWith(i)}),o.map(function(e){return n.localStorage.removeItem(e)}))(n.localStorage);return e.when(t)},p=function(r,o){return t.debug("Local: Saving object "+JSON.stringify(o)+" at "+r),n.localStorage.setItem(i+r,JSON.stringify(o)),e.when(o)},h=function(e,r){return t.debug("Local: Saving object "+JSON.stringify(r)+" at "+e),n.localStorage.setItem(i+e,JSON.stringify(r)),r};return{getObject:a,getObjectSync:s,removeObject:l,getAllObjects:f,removeAllObjects:d,storeObject:p,storeObjectSync:h}},S=function(){var e=arguments.length<=0||void 0===arguments[0]?"cloud":arguments[0];return a.RemoteStorage.defineModule(c+e,y),a.remoteStorage[c+e]},C=function(){var e=arguments.length<=0||void 0===arguments[0]?"cloud-unencrypted":arguments[0];return a.RemoteStorage.defineModule(c+e,b),a.remoteStorage[c+e]},_={KEY_SEPARATOR:u,enableLogging:g,prepare:p,getStorageKey:l,connect:f,isConnected:d,claimAccess:v,createLocal:w,createCloud:S,createCloudUnencrypted:C},E=function(){g(),_.local=w(),_.cloud=S(),_.cloud.initialize(),_.cloudUnencrypted=C(),_.cloudUnencrypted.initialize(),v("cloud"),m("cloud"),v("cloud-unencrypted"),m("cloud-unencrypted")};_.initialize=E;var T=function(){return h()};return _.destroy=T,_}var n;return e("default",t),t.$inject=["$q","$log","$window","$timeout","cryptography","R","remoteStorage"],{setters:[],execute:function(){n="storage",e("serviceName",n)}}}),System.register("services/network/network-service.js",[],function(e){"use strict";function t(e,t,n,r,i,o,a,s,c,u,l){var f=t.defer(),d=void 0,p=function(e){if(!e)throw new Error("network: no active session")},h=function(e){return i.saveReceivedInvite(e)},g=function(e){return i.saveReceivedProfile(e)},m=function(e,n){var r=e,i=c.cloud.contacts.select([n]),o=i.get(["statusId"]);return o===r?t.when():c.save(c.cloud.contacts,[n,"statusId"],r)},v=function(e,t){return a.saveReceivedMessage(e,t)},y=function(e){var n=arguments.length<=1||void 0===arguments[1]?d:arguments[1],r=function(e,n,r,i){var o=function(){if(e)return t.reject(e);var o=n.from.hashname,a=r.type.substr(1),s=u.getTime(),c=n.js.t,l=n.js.a,f=n.js.i,d=n.js.p,p=n.js.s,y=n.js.m,b={senderId:o,channelId:a,sentTime:c,receivedTime:s};return i(!0),r.send({js:{a:{s:c,r:s}}}),l?t.when():f?h(f):d?g(d):void 0!==p?m(p,o):y?v(y,b):t.reject("Unrecognized packet format: "+JSON.stringify(n.js))};return o()};try{p(n);var i=n.listen(e.id,r);return t.when(i)}catch(o){return"network: no active session"===o.message?f.promise.then(function(n){var i=n.listen(e.id,r);return t.when(i)}):t.reject(o)}},b=function(e,n){var r=arguments.length<=2||void 0===arguments[2]?d:arguments[2],i=t.defer(),o=function(e,t,n,r){if(e)return i.reject(e);var o=t.js.a;return o?(r(!0),i.resolve(o)):i.reject("Unrecognized message ack format")};try{p(r),r.start(e.contactIds[0],e.id,{js:n},o)}catch(a){i.reject(a)}return i.promise},w=function(e,n,r){if("timeout"!==e)return t.reject(e);var i=c.cloud.contacts.select([n]),o=i.get(["statusId"]);return 0===o||o!==r?t.reject(e):c.save(c.cloud.contacts,[n,"statusId"],0)},S=function(e,t){var n={i:t,t:u.getTime()};return b(e,n)},C=function(e,t){var n={p:t,t:u.getTime()};return b(e,n)},_=function(e,n){var i=c.cloud.identity.get().userInfo.id,o=r.createContactChannel(i,e),a=c.cloud.contacts.select([e]),s=a.get(["statusId"]);if(void 0===s)return t.when();var l={s:n,t:u.getTime()};return b(o,l)["catch"](function(t){return w(t,e,s)})},E=function(e,n){var r=e.contactIds[0],i=c.cloud.contacts.get([r,"statusId"]);if(void 0===i)return t.when();var o={m:{c:n.content,l:n.logicalClock},t:n.sentTime};return b(e,o)},T=function(){var e=c.cloud.network.get(["networkInfo","keypair"]),i=function(e){var t={version:1,id:e.id};return c.save(c.cloud.identity,["userInfo"],t)},o=function(n){return e?t.when():c.save(c.cloud.network,["networkInfo"],n).then(i)},a=e?{id:e}:{},s=function(e){var t={id:e.hashname,keypair:e.id};return d=e,n.tocSession=d,y({id:r.INVITE_CHANNEL_ID}),f.resolve(d),t},u=function(){var e=t.defer();try{l.init(a,function(t,n){return t?e.reject(t):e.resolve(n)})}catch(n){return t.reject(n)}return e.promise};if(e){var p=function(){var e=function n(){return u().then(s)["catch"](function(e){return"offline"!==e?t.reject(e):n()})};return e(),{v:t.when()}}();if("object"==typeof p)return p.v}return u().then(s).then(o)["catch"](function(e){return"offline"===e?t.reject("New accounts cannot be created offline"):t.reject(e)})},A=function(){},I={listen:y,send:b,sendInvite:S,sendProfile:C,sendStatus:_,sendMessage:E,initialize:T,destroy:A};return n.tocNetwork=I,I}var n;return e("default",t),t.$inject=["$interval","$q","$window","channels","contacts","notifications","messages","R","state","time","telehash"],{setters:[],execute:function(){n="network",e("serviceName",n)}}}),System.register("components/message-input-area/message-input-area-directive.js",["components/message-input-area/message-input-area.html!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(){return{restrict:"E",template:n,scope:{channelId:"@"},controllerAs:"messageInputArea",controller:["$scope","messages",function(e,t){var n=this;this.channelId=e.channelId,this.message="",this.send=function(){var e=n.message;return n.message="",t.saveSendingMessage(n.channelId,e)}}]}}var n,r;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){r="tocMessageInputArea",e("directiveName",r)}}}),System.register("views/home/home-config.js",["views/home/home.html!github:systemjs/plugin-text@0.0.2","views/home/home-controller.js"],function(e){"use strict";function t(e){e.state("app.private.home",{url:"/home",template:n,controller:i+" as homeView"})}var n,r,i;return e("default",t),t.$inject=["$stateProvider"],{setters:[function(e){n=e["default"]},function(e){r=e["default"],i=e.controllerName}],execute:function(){}}}),System.register("views/home/home-controller.js",[],function(e){"use strict";function t(e,t){this.showBeginConversationModal=function(){var n='\n      <toc-begin-conversation-modal class="toc-modal-container"\n        remove-modal="homeView.beginConversationModal.remove()">\n      </toc-begin-conversation-modal>\n    ',r="beginConversationModal";return t.showModal(r,n,this,e)},this.showUpdateProfileModal=function(){var n='\n      <toc-update-profile-modal class="toc-modal-container"\n        remove-modal="homeView.updateProfileModal.remove()">\n      </toc-update-profile-modal>\n    ',r="updateProfileModal";return t.showModal(r,n,this,e)}}var n;return e("default",t),t.$inject=["$scope","navigation"],{setters:[],execute:function(){n="HomeController",e("controllerName",n)}}});