<ion-list>
  <div class="item item-divider item-calm">
    You
  </div>
  <div ng-click="this.channelId !== 'home' ?
    channelList.goToHome() : undefined" menu-close>
    <div class="row balanced-bg"></div>
    <ion-item class="item item-avatar">
      <img ng-src="http://cdn.libravatar.org/avatar/{{channelList.userInfo.id | limitTo:32}}?d=identicon" alt="Avatar for {{channelList.userInfo.email}}" />
      <h2>{{channelList.userInfo.displayName}}</h2>
      <p>{{channelList.userInfo.id}}</p>
    </ion-item>
  </div>

  <div class="item item-divider item-royal">
    Groups
  </div>
  <form name="toc-group-create-form">
    <div class="item item-input-inset">
      <label class="item-input-wrapper">
        <input type="text" placeholder="Group Name">
      </label>
      <button type="submit" class="button button-clear button-balanced"
        disabled>
        <i class="icon ion-plus"></i>
        <!-- <ion-spinner icon="ripple" class="spinner-balanced"></ion-spinner> -->
      </button>
    </div>
  </form>

  <div class="item item-divider item-balanced">
    Contacts
  </div>
  <form name="toc-contact-invite-form">
    <div class="item item-input-inset">
      <label class="item-input-wrapper">
        <input type="text" placeholder="Contact ID"
          ng-model="channelList.inviteId">
      </label>
      <button type="submit" class="button button-clear button-balanced"
        ng-click="channelList.invite()" toc-spinner-button
        loading-promise="channelList.inviting">
        <i class="icon ion-plus"></i>
        <!-- <ion-spinner icon="ripple" class="spinner-balanced"></ion-spinner> -->
      </button>
    </div>
  </form>
  <!-- FIXME: use ui-sref here for nav-clear to work-->
  <div ng-repeat="(id, channel) in channelList.channels track by id"
    ng-click="channelList.channelId !== id ?
      channelList.goToChannel(id) : undefined" nav-clear menu-close>
    <div class="row" ng-class="{
      'dark-bg':
        channelList.contacts[channel.channelInfo.contactIds[0]].statusId === 0,
      'balanced-bg':
        channelList.contacts[channel.channelInfo.contactIds[0]].statusId === 1,
      'stable-bg':
        channelList.contacts[channel.channelInfo.contactIds[0]].statusId === undefined
      }"></div>
    <ion-item class="item item-avatar"
      ng-class="{'item-button-right': channel.channelInfo.pendingAccept}">
      <img ng-src="http://cdn.libravatar.org/avatar/{{channelList.contacts[channel.channelInfo.contactIds[0]].userInfo.id | limitTo:32}}?d=identicon" alt="Avatar for {{channelList.contacts[channel.channelInfo.contactIds[0]].userInfo.email}}" />
      <h2>{{channelList.contacts[channel.channelInfo.contactIds[0]].userInfo.displayName}}</h2>
      <p>{{channelList.contacts[channel.channelInfo.contactIds[0]].userInfo.id}}</p>
      <div class="buttons" ng-if="channel.channelInfo.pendingAccept">
        <!-- FIXME: spinner not showing here -->
        <button class="button button-balanced button-clear"
          ng-click="channelList.acceptInvite(channel.channelInfo);
            $event.stopPropagation()" toc-spinner-button
            loading-promise="channelList.invitesAccepting[id]">
          <i class="icon ion-checkmark"></i>
          <!-- <ion-spinner icon="ripple" class="spinner-balanced"></ion-spinner> -->
        </button>
        <button class="button button-assertive button-clear">
          <i class="icon ion-close"></i>
        </button>
      </div>
    </ion-item>
  </div>
</ion-list>
